import './polyfills.server.mjs';
import{$ as xo,$a as qh,A as Qc,Aa as Le,Ab as Iu,B as Mu,Ba as mr,Bb as Fu,C as ln,Ca as K,Cb as Sn,D as Ee,Da as j,Db as Mb,E as Ve,Ea as Gi,Eb as Db,F as Ae,Fa as gt,Fb as Ab,G as wn,Ga as qi,Gb as Pb,H as O,Ha as Rt,Hb as kb,I as fs,Ia as Xe,Ib as Rb,J as Un,Ja as Ze,Jb as LD,K as ne,Ka as pb,Kb as BD,L as re,La as mb,Lb as jD,M as Du,Ma as En,N as ab,Na as S,O as ui,Oa as le,P as Ct,Pa as Pe,Q as Yt,Qa as fb,R as Ge,Ra as Gn,S as Ke,Sa as qn,T as Jc,Ta as Yn,U as yo,Ua as hb,V as el,Va as Bt,W as sb,Wa as gb,X as hs,Xa as xa,Y as xi,Ya as wa,Z as cb,Za as Kn,_ as gs,_a as ND,a as pr,aa as E,ab as vb,b as zr,ba as ya,bb as Cn,c as De,ca as dn,cb as Jt,d as xu,da as Ti,db as Eo,e as tb,ea as de,eb as Xn,f as ib,fa as Au,fb as Wr,g as $n,ga as lb,gb as Ru,h as nb,ha as Gh,hb as Ou,i as xn,ia as ye,ib as _b,j as rb,ja as ze,jb as yt,k as ob,ka as Ce,kb as Yh,l as wu,la as lt,lb as bb,m as Eu,ma as db,mb as Yi,n as Hr,na as G,nb as Mi,o as Oi,oa as ub,ob as pi,p as zh,pa as Pu,pb as Tu,q as ms,qa as pt,qb as vs,r as Cu,ra as I,rb as zt,s as Wn,sa as $r,sb as _s,t as Hh,ta as pe,tb as yb,u as $h,ua as wo,ub as Ki,v as Wh,va as si,vb as xb,w as Su,wa as h,wb,x as cn,xa as g,xb as Eb,y as Uh,ya as L,yb as Cb,z as ai,za as ku,zb as Sb}from"./chunk-EAB2ANVK.mjs";import{a as X,b as Be,d as eb,e as ID,f as FD,h as ps}from"./chunk-S6KH3LOX.mjs";var py=ID((sg,cg)=>{"use strict";(function(e,t){typeof define=="function"&&define.amd?define([],t):typeof sg<"u"?t():(t(),e.FileSaver={})})(sg,function(){"use strict";function e(s,c){return typeof c>"u"?c={autoBom:!1}:typeof c!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),c={autoBom:!c}),c.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}function t(s,c,l){var d=new XMLHttpRequest;d.open("GET",s),d.responseType="blob",d.onload=function(){a(d.response,c,l)},d.onerror=function(){console.error("could not download file")},d.send()}function i(s){var c=new XMLHttpRequest;c.open("HEAD",s,!1);try{c.send()}catch{}return 200<=c.status&&299>=c.status}function n(s){try{s.dispatchEvent(new MouseEvent("click"))}catch{var c=document.createEvent("MouseEvents");c.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),s.dispatchEvent(c)}}var r=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:void 0,o=r.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),a=r.saveAs||(typeof window!="object"||window!==r?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(s,c,l){var d=r.URL||r.webkitURL,u=document.createElement("a");c=c||s.name||"download",u.download=c,u.rel="noopener",typeof s=="string"?(u.href=s,u.origin===location.origin?n(u):i(u.href)?t(s,c,l):n(u,u.target="_blank")):(u.href=d.createObjectURL(s),setTimeout(function(){d.revokeObjectURL(u.href)},4e4),setTimeout(function(){n(u)},0))}:"msSaveOrOpenBlob"in navigator?function(s,c,l){if(c=c||s.name||"download",typeof s!="string")navigator.msSaveOrOpenBlob(e(s,l),c);else if(i(s))t(s,c,l);else{var d=document.createElement("a");d.href=s,d.target="_blank",setTimeout(function(){n(d)})}}:function(s,c,l,d){if(d=d||open("","_blank"),d&&(d.document.title=d.document.body.innerText="downloading..."),typeof s=="string")return t(s,c,l);var u=s.type==="application/octet-stream",p=/constructor/i.test(r.HTMLElement)||r.safari,m=/CriOS\/[\d]+/.test(navigator.userAgent);if((m||u&&p||o)&&typeof FileReader<"u"){var f=new FileReader;f.onloadend=function(){var D=f.result;D=m?D:D.replace(/^data:[^;]*;/,"data:attachment/file;"),d?d.location.href=D:location=D,d=null},f.readAsDataURL(s)}else{var _=r.URL||r.webkitURL,b=_.createObjectURL(s);d?d.location=b:location.href=b,d=null,setTimeout(function(){_.revokeObjectURL(b)},4e4)}});r.saveAs=a.saveAs=a,typeof cg<"u"&&(cg.exports=a)})});import VD from"./angular-app-manifest.mjs";Pb(VD);var Nu=class e{title="fronted_gestion_documental";static \u0275fac=function(i){return new(i||e)};static \u0275cmp=ye({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(i,n){i&1&&L(0,"router-outlet")},dependencies:[Fu],encapsulation:2})};var Dn="http://localhost:8000";var Co=class e{constructor(t){this.http=t}USUARIOS_URL=`${Dn}/usuarios`;loggedIn=new xu(!1);platformId=O(hs);isBrowser(){return _s(this.platformId)}register(t,i,n,r){return this.http.post(`${this.USUARIOS_URL}/register/`,{username:t,email:i,password:n,password2:r,rol:1}).pipe(Qc(o=>{this.isBrowser()&&localStorage.setItem("token",o.access)}))}login(t,i){return this.http.post(`${this.USUARIOS_URL}/login/`,{username:t,password:i}).pipe(Qc(n=>{this.isBrowser()&&localStorage.setItem("token",n.access)}))}logout(){this.isBrowser()&&(localStorage.removeItem("token"),window.location.reload())}get token(){return this.isBrowser()?localStorage.getItem("token"):null}get isAuthenticated(){let t=this.token;if(!t)return!1;try{let i=JSON.parse(atob(t.split(".")[1])),r=new Date(i.exp*1e3)<new Date;return r&&this.logout(),this.loggedIn.next(!r),!r}catch{return!1}}static \u0275fac=function(i){return new(i||e)(wn(Ki))};static \u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})};var tl=class e{constructor(t){this.authService=t}sidebarOpen=window.innerWidth>768;isAdmin=!1;username="";sub;ngOnInit(){window.addEventListener("resize",this.onResize)}ngOnDestroy(){this.sub.unsubscribe(),window.removeEventListener("resize",this.onResize)}toggleSidebar(){this.sidebarOpen=!this.sidebarOpen}onResize=()=>{this.sidebarOpen=window.innerWidth>768};logout(){this.authService.logout()}static \u0275fac=function(i){return new(i||e)(de(Co))};static \u0275cmp=ye({type:e,selectors:[["app-main-layout"]],decls:46,vars:4,consts:[[1,"app-container"],[1,"sidebar"],[1,"sidebar-header"],[1,"sidebar-menu"],[1,"sidebar-item"],["routerLink","/dashboard","routerLinkActive","active",1,"sidebar-link"],[1,"fas","fa-tachometer-alt"],["routerLink","/documents","routerLinkActive","active",1,"sidebar-link"],[1,"fas","fa-file-alt"],["routerLink","/workflows","routerLinkActive","active",1,"sidebar-link"],[1,"fas","fa-project-diagram"],["routerLink","","routerLinkActive","active",1,"sidebar-link"],["routerLink","/planes","routerLinkActive","active",1,"sidebar-link"],[1,"sidebar-item",3,"click"],[1,"sidebar-link"],[1,"fas","fa-cog"],[1,"main-content"],[1,"header"],[1,"navbar"],[1,"navbar-left"],[1,"btn-icon",3,"click"],[1,"fas","fa-bars"],[1,"navbar-brand"],[1,"navbar-right"],[1,"user-menu"],[1,"user-name"],[1,"avatar"],[1,"fas","fa-user"],[1,"content"]],template:function(i,n){i&1&&(h(0,"div",0)(1,"aside",1)(2,"div",2)(3,"h2"),S(4,"GestDoc"),g()(),h(5,"ul",3)(6,"li",4)(7,"a",5),L(8,"i",6),S(9," Dashboard "),g()(),h(10,"li",4)(11,"a",7),L(12,"i",8),S(13," Documentos "),g()(),h(14,"li",4)(15,"a",9),L(16,"i",10),S(17," Workflows "),g()(),h(18,"li",4)(19,"a",11),L(20,"i",10),S(21," Panel de control "),g()(),h(22,"li",4)(23,"a",12),L(24,"i",10),S(25," Planes "),g()(),h(26,"li",13),K("click",function(){return n.logout()}),h(27,"a",14),L(28,"i",15),S(29," Cerrar Sesi\xF3n "),g()()()(),h(30,"div",16)(31,"header",17)(32,"div",18)(33,"div",19)(34,"button",20),K("click",function(){return n.toggleSidebar()}),L(35,"i",21),g(),h(36,"span",22),S(37,"Sistema de Gesti\xF3n Documental"),g()(),h(38,"div",23)(39,"div",24)(40,"span",25),S(41,"Usuario"),g(),h(42,"div",26),L(43,"i",27),g()()()()(),h(44,"main",28),L(45,"router-outlet"),g()()()),i&2&&(E(),pe("open",n.sidebarOpen),E(29),pe("with-sidebar",n.sidebarOpen))},dependencies:[Fu,zt,Mb],styles:[".app-container[_ngcontent-%COMP%]{display:flex;height:100vh;overflow:hidden}.sidebar[_ngcontent-%COMP%]{background-color:var(--color-primary);color:#fff;width:250px;height:100vh;position:fixed;top:0;left:0;z-index:1000;transition:transform var(--transition-normal);overflow-y:auto}.sidebar-header[_ngcontent-%COMP%]{padding:var(--spacing-lg);border-bottom:1px solid rgba(255,255,255,.1)}.sidebar-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;margin:0}.sidebar-menu[_ngcontent-%COMP%]{padding:var(--spacing-md) 0}.sidebar-link[_ngcontent-%COMP%]{display:flex;align-items:center;padding:var(--spacing-md) var(--spacing-lg);color:#fffc;transition:all var(--transition-fast)}.sidebar-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:var(--spacing-md);width:20px;text-align:center}.sidebar-link[_ngcontent-%COMP%]:hover, .sidebar-link.active[_ngcontent-%COMP%]{cursor:pointer;background-color:#ffffff1a;color:#fff;border-left:4px solid var(--color-secondary);padding-left:calc(var(--spacing-lg) - 4px)}.main-content[_ngcontent-%COMP%]{flex:1;margin-left:250px;transition:margin-left var(--transition-normal);display:flex;flex-direction:column;height:100vh}.main-content.with-sidebar[_ngcontent-%COMP%]{margin-left:250px}.header[_ngcontent-%COMP%]{background-color:var(--color-primary);color:#fff;padding:var(--spacing-md) var(--spacing-lg);box-shadow:var(--shadow-md);z-index:900}.navbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.navbar-left[_ngcontent-%COMP%]{display:flex;align-items:center}.btn-icon[_ngcontent-%COMP%]{background:transparent;border:none;color:#fff;font-size:1.2rem;cursor:pointer;margin-right:var(--spacing-md);display:none}.navbar-brand[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:500}.navbar-right[_ngcontent-%COMP%]{display:flex;align-items:center}.user-menu[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer}.user-name[_ngcontent-%COMP%]{margin-right:var(--spacing-md)}.avatar[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:50%;background-color:var(--color-secondary);display:flex;align-items:center;justify-content:center}.content[_ngcontent-%COMP%]{flex:1;padding:var(--spacing-lg);overflow-y:auto;background-color:var(--color-background)}@media (max-width: 768px){.sidebar[_ngcontent-%COMP%]{transform:translate(-100%)}.sidebar.open[_ngcontent-%COMP%]{transform:translate(0)}.main-content[_ngcontent-%COMP%], .main-content.with-sidebar[_ngcontent-%COMP%]{margin-left:0}.btn-icon[_ngcontent-%COMP%]{display:block}}"]})};var Hb=(()=>{class e{_renderer;_elementRef;onChange=i=>{};onTouched=()=>{};constructor(i,n){this._renderer=i,this._elementRef=n}setProperty(i,n){this._renderer.setProperty(this._elementRef.nativeElement,i,n)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}static \u0275fac=function(n){return new(n||e)(de(Ti),de(Ke))};static \u0275dir=Ce({type:e})}return e})(),qu=(()=>{class e extends Hb{static \u0275fac=(()=>{let i;return function(r){return(i||(i=ui(e)))(r||e)}})();static \u0275dir=Ce({type:e,features:[lt]})}return e})(),Cs=new Ae(""),zD={provide:Cs,useExisting:ln(()=>cl),multi:!0},cl=(()=>{class e extends qu{writeValue(i){this.setProperty("checked",i)}static \u0275fac=(()=>{let i;return function(r){return(i||(i=ui(e)))(r||e)}})();static \u0275dir=Ce({type:e,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(n,r){n&1&&K("change",function(a){return r.onChange(a.target.checked)})("blur",function(){return r.onTouched()})},standalone:!1,features:[Bt([zD]),lt]})}return e})(),HD={provide:Cs,useExisting:ln(()=>fr),multi:!0};function $D(){let e=Yh()?Yh().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var WD=new Ae(""),fr=(()=>{class e extends Hb{_compositionMode;_composing=!1;constructor(i,n,r){super(i,n),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!$D())}writeValue(i){let n=i??"";this.setProperty("value",n)}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}static \u0275fac=function(n){return new(n||e)(de(Ti),de(Ke),de(WD,8))};static \u0275dir=Ce({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,r){n&1&&K("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},standalone:!1,features:[Bt([HD]),lt]})}return e})();function Qh(e){return e==null||Jh(e)===0}function Jh(e){return e==null?null:Array.isArray(e)||typeof e=="string"?e.length:e instanceof Set?e.size:null}var Ss=new Ae(""),Ms=new Ae(""),UD=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,dt=class{static min(t){return GD(t)}static max(t){return qD(t)}static required(t){return YD(t)}static requiredTrue(t){return KD(t)}static email(t){return XD(t)}static minLength(t){return ZD(t)}static maxLength(t){return QD(t)}static pattern(t){return JD(t)}static nullValidator(t){return $b()}static compose(t){return Kb(t)}static composeAsync(t){return Xb(t)}};function GD(e){return t=>{if(t.value==null||e==null)return null;let i=parseFloat(t.value);return!isNaN(i)&&i<e?{min:{min:e,actual:t.value}}:null}}function qD(e){return t=>{if(t.value==null||e==null)return null;let i=parseFloat(t.value);return!isNaN(i)&&i>e?{max:{max:e,actual:t.value}}:null}}function YD(e){return Qh(e.value)?{required:!0}:null}function KD(e){return e.value===!0?null:{required:!0}}function XD(e){return Qh(e.value)||UD.test(e.value)?null:{email:!0}}function ZD(e){return t=>{let i=t.value?.length??Jh(t.value);return i===null||i===0?null:i<e?{minlength:{requiredLength:e,actualLength:i}}:null}}function QD(e){return t=>{let i=t.value?.length??Jh(t.value);return i!==null&&i>e?{maxlength:{requiredLength:e,actualLength:i}}:null}}function JD(e){if(!e)return $b;let t,i;return typeof e=="string"?(i="",e.charAt(0)!=="^"&&(i+="^"),i+=e,e.charAt(e.length-1)!=="$"&&(i+="$"),t=new RegExp(i)):(i=e.toString(),t=e),n=>{if(Qh(n.value))return null;let r=n.value;return t.test(r)?null:{pattern:{requiredPattern:i,actualValue:r}}}}function $b(e){return null}function Wb(e){return e!=null}function Ub(e){return ub(e)?ib(e):e}function Gb(e){let t={};return e.forEach(i=>{t=i!=null?X(X({},t),i):t}),Object.keys(t).length===0?null:t}function qb(e,t){return t.map(i=>i(e))}function eA(e){return!e.validate}function Yb(e){return e.map(t=>eA(t)?t:i=>t.validate(i))}function Kb(e){if(!e)return null;let t=e.filter(Wb);return t.length==0?null:function(i){return Gb(qb(i,t))}}function eg(e){return e!=null?Kb(Yb(e)):null}function Xb(e){if(!e)return null;let t=e.filter(Wb);return t.length==0?null:function(i){let n=qb(i,t).map(Ub);return Eu(n).pipe(xn(Gb))}}function tg(e){return e!=null?Xb(Yb(e)):null}function Tb(e,t){return e===null?[t]:Array.isArray(e)?[...e,t]:[e,t]}function Zb(e){return e._rawValidators}function Qb(e){return e._rawAsyncValidators}function Kh(e){return e?Array.isArray(e)?e:[e]:[]}function Bu(e,t){return Array.isArray(e)?e.includes(t):e===t}function Ib(e,t){let i=Kh(t);return Kh(e).forEach(r=>{Bu(i,r)||i.push(r)}),i}function Fb(e,t){return Kh(t).filter(i=>!Bu(e,i))}var ju=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=eg(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=tg(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,i){return this.control?this.control.hasError(t,i):!1}getError(t,i){return this.control?this.control.getError(t,i):null}},Ii=class extends ju{name;get formDirective(){return null}get path(){return null}},Ur=class extends ju{_parent=null;name=null;valueAccessor=null},Vu=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},tA={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},K4=Be(X({},tA),{"[class.ng-submitted]":"isSubmitted"}),Mo=(()=>{class e extends Vu{constructor(i){super(i)}static \u0275fac=function(n){return new(n||e)(de(Ur,2))};static \u0275dir=Ce({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,r){n&2&&pe("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[lt]})}return e})(),Do=(()=>{class e extends Vu{constructor(i){super(i)}static \u0275fac=function(n){return new(n||e)(de(Ii,10))};static \u0275dir=Ce({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(n,r){n&2&&pe("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},standalone:!1,features:[lt]})}return e})();var il="VALID",Lu="INVALID",ys="PENDING",nl="DISABLED",So=class{},zu=class extends So{value;source;constructor(t,i){super(),this.value=t,this.source=i}},ol=class extends So{pristine;source;constructor(t,i){super(),this.pristine=t,this.source=i}},al=class extends So{touched;source;constructor(t,i){super(),this.touched=t,this.source=i}},xs=class extends So{status;source;constructor(t,i){super(),this.status=t,this.source=i}},Hu=class extends So{source;constructor(t){super(),this.source=t}},$u=class extends So{source;constructor(t){super(),this.source=t}};function ig(e){return(Yu(e)?e.validators:e)||null}function iA(e){return Array.isArray(e)?eg(e):e||null}function ng(e,t){return(Yu(t)?t.asyncValidators:e)||null}function nA(e){return Array.isArray(e)?tg(e):e||null}function Yu(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}function Jb(e,t,i){let n=e.controls;if(!(t?Object.keys(n):n).length)throw new Mu(1e3,"");if(!n[i])throw new Mu(1001,"")}function ey(e,t,i){e._forEachChild((n,r)=>{if(i[r]===void 0)throw new Mu(1002,"")})}var ws=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,i){this._assignValidators(t),this._assignAsyncValidators(i)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return Xn(this.statusReactive)}set status(t){Xn(()=>this.statusReactive.set(t))}_status=Wr(()=>this.statusReactive());statusReactive=yo(void 0);get valid(){return this.status===il}get invalid(){return this.status===Lu}get pending(){return this.status==ys}get disabled(){return this.status===nl}get enabled(){return this.status!==nl}errors;get pristine(){return Xn(this.pristineReactive)}set pristine(t){Xn(()=>this.pristineReactive.set(t))}_pristine=Wr(()=>this.pristineReactive());pristineReactive=yo(!0);get dirty(){return!this.pristine}get touched(){return Xn(this.touchedReactive)}set touched(t){Xn(()=>this.touchedReactive.set(t))}_touched=Wr(()=>this.touchedReactive());touchedReactive=yo(!1);get untouched(){return!this.touched}_events=new De;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(Ib(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(Ib(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(Fb(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(Fb(t,this._rawAsyncValidators))}hasValidator(t){return Bu(this._rawValidators,t)}hasAsyncValidator(t){return Bu(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let i=this.touched===!1;this.touched=!0;let n=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(Be(X({},t),{sourceControl:n})),i&&t.emitEvent!==!1&&this._events.next(new al(!0,n))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(i=>i.markAllAsTouched(t))}markAsUntouched(t={}){let i=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let n=t.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:n})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,n),i&&t.emitEvent!==!1&&this._events.next(new al(!1,n))}markAsDirty(t={}){let i=this.pristine===!0;this.pristine=!1;let n=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(Be(X({},t),{sourceControl:n})),i&&t.emitEvent!==!1&&this._events.next(new ol(!1,n))}markAsPristine(t={}){let i=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let n=t.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,n),i&&t.emitEvent!==!1&&this._events.next(new ol(!0,n))}markAsPending(t={}){this.status=ys;let i=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new xs(this.status,i)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(Be(X({},t),{sourceControl:i}))}disable(t={}){let i=this._parentMarkedDirty(t.onlySelf);this.status=nl,this.errors=null,this._forEachChild(r=>{r.disable(Be(X({},t),{onlySelf:!0}))}),this._updateValue();let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new zu(this.value,n)),this._events.next(new xs(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Be(X({},t),{skipPristineCheck:i}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){let i=this._parentMarkedDirty(t.onlySelf);this.status=il,this._forEachChild(n=>{n.enable(Be(X({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Be(X({},t),{skipPristineCheck:i}),this),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(t,i){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},i),this._parent._updateTouched({},i))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let n=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===il||this.status===ys)&&this._runAsyncValidator(n,t.emitEvent)}let i=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new zu(this.value,i)),this._events.next(new xs(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(Be(X({},t),{sourceControl:i}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(i=>i._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?nl:il}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,i){if(this.asyncValidator){this.status=ys,this._hasOwnPendingAsyncValidator={emitEvent:i!==!1};let n=Ub(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:i,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,i={}){this.errors=t,this._updateControlsErrors(i.emitEvent!==!1,this,i.shouldHaveEmitted)}get(t){let i=t;return i==null||(Array.isArray(i)||(i=i.split(".")),i.length===0)?null:i.reduce((n,r)=>n&&n._find(r),this)}getError(t,i){let n=i?this.get(i):this;return n&&n.errors?n.errors[t]:null}hasError(t,i){return!!this.getError(t,i)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,i,n){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||n)&&this._events.next(new xs(this.status,i)),this._parent&&this._parent._updateControlsErrors(t,i,n)}_initObservables(){this.valueChanges=new Yt,this.statusChanges=new Yt}_calculateStatus(){return this._allControlsDisabled()?nl:this.errors?Lu:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ys)?ys:this._anyControlsHaveStatus(Lu)?Lu:il}_anyControlsHaveStatus(t){return this._anyControls(i=>i.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,i){let n=!this._anyControlsDirty(),r=this.pristine!==n;this.pristine=n,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,i),r&&this._events.next(new ol(this.pristine,i))}_updateTouched(t={},i){this.touched=this._anyControlsTouched(),this._events.next(new al(this.touched,i)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,i)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Yu(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let i=this._parent&&this._parent.dirty;return!t&&!!i&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=iA(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=nA(this._rawAsyncValidators)}},Es=class extends ws{constructor(t,i,n){super(ig(i),ng(n,i)),this.controls=t,this._initObservables(),this._setUpdateStrategy(i),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(t,i){return this.controls[t]?this.controls[t]:(this.controls[t]=i,i.setParent(this),i._registerOnCollectionChange(this._onCollectionChange),i)}addControl(t,i,n={}){this.registerControl(t,i),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(t,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}setControl(t,i,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],i&&this.registerControl(t,i),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,i={}){ey(this,!0,t),Object.keys(t).forEach(n=>{Jb(this,!0,n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:i.emitEvent})}),this.updateValueAndValidity(i)}patchValue(t,i={}){t!=null&&(Object.keys(t).forEach(n=>{let r=this.controls[n];r&&r.patchValue(t[n],{onlySelf:!0,emitEvent:i.emitEvent})}),this.updateValueAndValidity(i))}reset(t={},i={}){this._forEachChild((n,r)=>{n.reset(t?t[r]:null,{onlySelf:!0,emitEvent:i.emitEvent})}),this._updatePristine(i,this),this._updateTouched(i,this),this.updateValueAndValidity(i)}getRawValue(){return this._reduceChildren({},(t,i,n)=>(t[n]=i.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(i,n)=>n._syncPendingControls()?!0:i);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(i=>{let n=this.controls[i];n&&t(n,i)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[i,n]of Object.entries(this.controls))if(this.contains(i)&&t(n))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(i,n,r)=>((n.enabled||this.disabled)&&(i[r]=n.value),i))}_reduceChildren(t,i){let n=t;return this._forEachChild((r,o)=>{n=i(n,r,o)}),n}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var Xh=class extends Es{};var ll=new Ae("",{providedIn:"root",factory:()=>Ku}),Ku="always";function Xu(e,t){return[...t.path,e]}function Wu(e,t,i=Ku){rg(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||i==="always")&&t.valueAccessor.setDisabledState?.(e.disabled),oA(e,t),sA(e,t),aA(e,t),rA(e,t)}function Nb(e,t,i=!0){let n=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(n),t.valueAccessor.registerOnTouched(n)),Gu(e,t),e&&(t._invokeOnDestroyCallbacks(),e._registerOnCollectionChange(()=>{}))}function Uu(e,t){e.forEach(i=>{i.registerOnValidatorChange&&i.registerOnValidatorChange(t)})}function rA(e,t){if(t.valueAccessor.setDisabledState){let i=n=>{t.valueAccessor.setDisabledState(n)};e.registerOnDisabledChange(i),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(i)})}}function rg(e,t){let i=Zb(e);t.validator!==null?e.setValidators(Tb(i,t.validator)):typeof i=="function"&&e.setValidators([i]);let n=Qb(e);t.asyncValidator!==null?e.setAsyncValidators(Tb(n,t.asyncValidator)):typeof n=="function"&&e.setAsyncValidators([n]);let r=()=>e.updateValueAndValidity();Uu(t._rawValidators,r),Uu(t._rawAsyncValidators,r)}function Gu(e,t){let i=!1;if(e!==null){if(t.validator!==null){let r=Zb(e);if(Array.isArray(r)&&r.length>0){let o=r.filter(a=>a!==t.validator);o.length!==r.length&&(i=!0,e.setValidators(o))}}if(t.asyncValidator!==null){let r=Qb(e);if(Array.isArray(r)&&r.length>0){let o=r.filter(a=>a!==t.asyncValidator);o.length!==r.length&&(i=!0,e.setAsyncValidators(o))}}}let n=()=>{};return Uu(t._rawValidators,n),Uu(t._rawAsyncValidators,n),i}function oA(e,t){t.valueAccessor.registerOnChange(i=>{e._pendingValue=i,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&ty(e,t)})}function aA(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&ty(e,t),e.updateOn!=="submit"&&e.markAsTouched()})}function ty(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function sA(e,t){let i=(n,r)=>{t.valueAccessor.writeValue(n),r&&t.viewToModelUpdate(n)};e.registerOnChange(i),t._registerOnDestroy(()=>{e._unregisterOnChange(i)})}function iy(e,t){e==null,rg(e,t)}function cA(e,t){return Gu(e,t)}function ny(e,t){if(!e.hasOwnProperty("model"))return!1;let i=e.model;return i.isFirstChange()?!0:!Object.is(t,i.currentValue)}function lA(e){return Object.getPrototypeOf(e.constructor)===qu}function ry(e,t){e._syncPendingControls(),t.forEach(i=>{let n=i.control;n.updateOn==="submit"&&n._pendingChange&&(i.viewToModelUpdate(n._pendingValue),n._pendingChange=!1)})}function oy(e,t){if(!t)return null;Array.isArray(t);let i,n,r;return t.forEach(o=>{o.constructor===fr?i=o:lA(o)?n=o:r=o}),r||n||i||null}function dA(e,t){let i=e.indexOf(t);i>-1&&e.splice(i,1)}var uA={provide:Ii,useExisting:ln(()=>og)},rl=Promise.resolve(),og=(()=>{class e extends Ii{callSetDisabledState;get submitted(){return Xn(this.submittedReactive)}_submitted=Wr(()=>this.submittedReactive());submittedReactive=yo(!1);_directives=new Set;form;ngSubmit=new Yt;options;constructor(i,n,r){super(),this.callSetDisabledState=r,this.form=new Es({},eg(i),tg(n))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(i){rl.then(()=>{let n=this._findContainer(i.path);i.control=n.registerControl(i.name,i.control),Wu(i.control,i,this.callSetDisabledState),i.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(i)})}getControl(i){return this.form.get(i.path)}removeControl(i){rl.then(()=>{let n=this._findContainer(i.path);n&&n.removeControl(i.name),this._directives.delete(i)})}addFormGroup(i){rl.then(()=>{let n=this._findContainer(i.path),r=new Es({});iy(r,i),n.registerControl(i.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(i){rl.then(()=>{let n=this._findContainer(i.path);n&&n.removeControl(i.name)})}getFormGroup(i){return this.form.get(i.path)}updateModel(i,n){rl.then(()=>{this.form.get(i.path).setValue(n)})}setValue(i){this.control.setValue(i)}onSubmit(i){return this.submittedReactive.set(!0),ry(this.form,this._directives),this.ngSubmit.emit(i),this.form._events.next(new Hu(this.control)),i?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(i=void 0){this.form.reset(i),this.submittedReactive.set(!1),this.form._events.next(new $u(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(i){return i.pop(),i.length?this.form.get(i):this.form}static \u0275fac=function(n){return new(n||e)(de(Ss,10),de(Ms,10),de(ll,8))};static \u0275dir=Ce({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(n,r){n&1&&K("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Bt([uA]),lt]})}return e})();function Lb(e,t){let i=e.indexOf(t);i>-1&&e.splice(i,1)}function Bb(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var sl=class extends ws{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,i,n){super(ig(i),ng(n,i)),this._applyFormState(t),this._setUpdateStrategy(i),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Yu(i)&&(i.nonNullable||i.initialValueIsDefault)&&(Bb(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,i={}){this.value=this._pendingValue=t,this._onChange.length&&i.emitModelToViewChange!==!1&&this._onChange.forEach(n=>n(this.value,i.emitViewToModelChange!==!1)),this.updateValueAndValidity(i)}patchValue(t,i={}){this.setValue(t,i)}reset(t=this.defaultValue,i={}){this._applyFormState(t),this.markAsPristine(i),this.markAsUntouched(i),this.setValue(this.value,i),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Lb(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Lb(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){Bb(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var pA=e=>e instanceof sl,mA=(()=>{class e extends Ii{_parent;ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return Xu(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}static \u0275fac=(()=>{let i;return function(r){return(i||(i=ui(e)))(r||e)}})();static \u0275dir=Ce({type:e,standalone:!1,features:[lt]})}return e})();var fA={provide:Ur,useExisting:ln(()=>dl)},jb=Promise.resolve(),dl=(()=>{class e extends Ur{_changeDetectorRef;callSetDisabledState;control=new sl;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Yt;constructor(i,n,r,o,a,s){super(),this._changeDetectorRef=a,this.callSetDisabledState=s,this._parent=i,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=oy(this,o)}ngOnChanges(i){if(this._checkForErrors(),!this._registered||"name"in i){if(this._registered&&(this._checkName(),this.formDirective)){let n=i.name.previousValue;this.formDirective.removeControl({name:n,path:this._getPath(n)})}this._setUpControl()}"isDisabled"in i&&this._updateDisabled(i),ny(i,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Wu(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(i){jb.then(()=>{this.control.setValue(i,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(i){let n=i.isDisabled.currentValue,r=n!==0&&Jt(n);jb.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(i){return this._parent?Xu(i,this._parent):[i]}static \u0275fac=function(n){return new(n||e)(de(Ii,9),de(Ss,10),de(Ms,10),de(Cs,10),de(Cn,8),de(ll,8))};static \u0275dir=Ce({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Bt([fA]),lt,Un]})}return e})();var Ao=(()=>{class e{static \u0275fac=function(n){return new(n||e)};static \u0275dir=Ce({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return e})();var ay=new Ae("");var hA={provide:Ii,useExisting:ln(()=>An)},An=(()=>{class e extends Ii{callSetDisabledState;get submitted(){return Xn(this._submittedReactive)}set submitted(i){this._submittedReactive.set(i)}_submitted=Wr(()=>this._submittedReactive());_submittedReactive=yo(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new Yt;constructor(i,n,r){super(),this.callSetDisabledState=r,this._setValidators(i),this._setAsyncValidators(n)}ngOnChanges(i){i.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Gu(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(i){let n=this.form.get(i.path);return Wu(n,i,this.callSetDisabledState),n.updateValueAndValidity({emitEvent:!1}),this.directives.push(i),n}getControl(i){return this.form.get(i.path)}removeControl(i){Nb(i.control||null,i,!1),dA(this.directives,i)}addFormGroup(i){this._setUpFormContainer(i)}removeFormGroup(i){this._cleanUpFormContainer(i)}getFormGroup(i){return this.form.get(i.path)}addFormArray(i){this._setUpFormContainer(i)}removeFormArray(i){this._cleanUpFormContainer(i)}getFormArray(i){return this.form.get(i.path)}updateModel(i,n){this.form.get(i.path).setValue(n)}onSubmit(i){return this._submittedReactive.set(!0),ry(this.form,this.directives),this.ngSubmit.emit(i),this.form._events.next(new Hu(this.control)),i?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(i=void 0){this.form.reset(i),this._submittedReactive.set(!1),this.form._events.next(new $u(this.form))}_updateDomValue(){this.directives.forEach(i=>{let n=i.control,r=this.form.get(i.path);n!==r&&(Nb(n||null,i),pA(r)&&(Wu(r,i,this.callSetDisabledState),i.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(i){let n=this.form.get(i.path);iy(n,i),n.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(i){if(this.form){let n=this.form.get(i.path);n&&cA(n,i)&&n.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){rg(this.form,this),this._oldForm&&Gu(this._oldForm,this)}static \u0275fac=function(n){return new(n||e)(de(Ss,10),de(Ms,10),de(ll,8))};static \u0275dir=Ce({type:e,selectors:[["","formGroup",""]],hostBindings:function(n,r){n&1&&K("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Bt([hA]),lt,Un]})}return e})(),gA={provide:Ii,useExisting:ln(()=>Zu)},Zu=(()=>{class e extends mA{name=null;constructor(i,n,r){super(),this._parent=i,this._setValidators(n),this._setAsyncValidators(r)}_checkParentType(){sy(this._parent)}static \u0275fac=function(n){return new(n||e)(de(Ii,13),de(Ss,10),de(Ms,10))};static \u0275dir=Ce({type:e,selectors:[["","formGroupName",""]],inputs:{name:[0,"formGroupName","name"]},standalone:!1,features:[Bt([gA]),lt]})}return e})(),vA={provide:Ii,useExisting:ln(()=>Qu)},Qu=(()=>{class e extends Ii{_parent;name=null;constructor(i,n,r){super(),this._parent=i,this._setValidators(n),this._setAsyncValidators(r)}ngOnInit(){sy(this._parent),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective?.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return Xu(this.name==null?this.name:this.name.toString(),this._parent)}static \u0275fac=function(n){return new(n||e)(de(Ii,13),de(Ss,10),de(Ms,10))};static \u0275dir=Ce({type:e,selectors:[["","formArrayName",""]],inputs:{name:[0,"formArrayName","name"]},standalone:!1,features:[Bt([vA]),lt]})}return e})();function sy(e){return!(e instanceof Zu)&&!(e instanceof An)&&!(e instanceof Qu)}var _A={provide:Ur,useExisting:ln(()=>Gr)},Gr=(()=>{class e extends Ur{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(i){}model;update=new Yt;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(i,n,r,o,a){super(),this._ngModelWarningConfig=a,this._parent=i,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=oy(this,o)}ngOnChanges(i){this._added||this._setUpControl(),ny(i,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}get path(){return Xu(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(n){return new(n||e)(de(Ii,13),de(Ss,10),de(Ms,10),de(Cs,10),de(ay,8))};static \u0275dir=Ce({type:e,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[Bt([_A]),lt,Un]})}return e})();var bA={provide:Cs,useExisting:ln(()=>Ds),multi:!0};function cy(e,t){return e==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${e}: ${t}`.slice(0,50))}function yA(e){return e.split(":")[0]}var Ds=(()=>{class e extends qu{value;_optionMap=new Map;_idCounter=0;set compareWith(i){this._compareWith=i}_compareWith=Object.is;writeValue(i){this.value=i;let n=this._getOptionId(i),r=cy(n,i);this.setProperty("value",r)}registerOnChange(i){this.onChange=n=>{this.value=this._getOptionValue(n),i(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(i){for(let n of this._optionMap.keys())if(this._compareWith(this._optionMap.get(n),i))return n;return null}_getOptionValue(i){let n=yA(i);return this._optionMap.has(n)?this._optionMap.get(n):i}static \u0275fac=(()=>{let i;return function(r){return(i||(i=ui(e)))(r||e)}})();static \u0275dir=Ce({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(n,r){n&1&&K("change",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Bt([bA]),lt]})}return e})(),Ju=(()=>{class e{_element;_renderer;_select;id;constructor(i,n,r){this._element=i,this._renderer=n,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(i){this._select!=null&&(this._select._optionMap.set(this.id,i),this._setElementValue(cy(this.id,i)),this._select.writeValue(this._select.value))}set value(i){this._setElementValue(i),this._select&&this._select.writeValue(this._select.value)}_setElementValue(i){this._renderer.setProperty(this._element.nativeElement,"value",i)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(n){return new(n||e)(de(Ke),de(Ti),de(Ds,9))};static \u0275dir=Ce({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return e})(),xA={provide:Cs,useExisting:ln(()=>ly),multi:!0};function Vb(e,t){return e==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${e}: ${t}`.slice(0,50))}function wA(e){return e.split(":")[0]}var ly=(()=>{class e extends qu{value;_optionMap=new Map;_idCounter=0;set compareWith(i){this._compareWith=i}_compareWith=Object.is;writeValue(i){this.value=i;let n;if(Array.isArray(i)){let r=i.map(o=>this._getOptionId(o));n=(o,a)=>{o._setSelected(r.indexOf(a.toString())>-1)}}else n=(r,o)=>{r._setSelected(!1)};this._optionMap.forEach(n)}registerOnChange(i){this.onChange=n=>{let r=[],o=n.selectedOptions;if(o!==void 0){let a=o;for(let s=0;s<a.length;s++){let c=a[s],l=this._getOptionValue(c.value);r.push(l)}}else{let a=n.options;for(let s=0;s<a.length;s++){let c=a[s];if(c.selected){let l=this._getOptionValue(c.value);r.push(l)}}}this.value=r,i(r)}}_registerOption(i){let n=(this._idCounter++).toString();return this._optionMap.set(n,i),n}_getOptionId(i){for(let n of this._optionMap.keys())if(this._compareWith(this._optionMap.get(n)._value,i))return n;return null}_getOptionValue(i){let n=wA(i);return this._optionMap.has(n)?this._optionMap.get(n)._value:i}static \u0275fac=(()=>{let i;return function(r){return(i||(i=ui(e)))(r||e)}})();static \u0275dir=Ce({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(n,r){n&1&&K("change",function(a){return r.onChange(a.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Bt([xA]),lt]})}return e})(),ep=(()=>{class e{_element;_renderer;_select;id;_value;constructor(i,n,r){this._element=i,this._renderer=n,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(i){this._select!=null&&(this._value=i,this._setElementValue(Vb(this.id,i)),this._select.writeValue(this._select.value))}set value(i){this._select?(this._value=i,this._setElementValue(Vb(this.id,i)),this._select.writeValue(this._select.value)):this._setElementValue(i)}_setElementValue(i){this._renderer.setProperty(this._element.nativeElement,"value",i)}_setSelected(i){this._renderer.setProperty(this._element.nativeElement,"selected",i)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(n){return new(n||e)(de(Ke),de(Ti),de(ly,9))};static \u0275dir=Ce({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return e})();var dy=(()=>{class e{static \u0275fac=function(n){return new(n||e)};static \u0275mod=ze({type:e});static \u0275inj=Ve({})}return e})(),Zh=class extends ws{constructor(t,i,n){super(ig(i),ng(n,i)),this.controls=t,this._initObservables(),this._setUpdateStrategy(i),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(t){return this.controls[this._adjustIndex(t)]}push(t,i={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}insert(t,i,n={}){this.controls.splice(t,0,i),this._registerControl(i),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(t,i={}){let n=this._adjustIndex(t);n<0&&(n=0),this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),this.updateValueAndValidity({emitEvent:i.emitEvent})}setControl(t,i,n={}){let r=this._adjustIndex(t);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),i&&(this.controls.splice(r,0,i),this._registerControl(i)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,i={}){ey(this,!1,t),t.forEach((n,r)=>{Jb(this,!1,r),this.at(r).setValue(n,{onlySelf:!0,emitEvent:i.emitEvent})}),this.updateValueAndValidity(i)}patchValue(t,i={}){t!=null&&(t.forEach((n,r)=>{this.at(r)&&this.at(r).patchValue(n,{onlySelf:!0,emitEvent:i.emitEvent})}),this.updateValueAndValidity(i))}reset(t=[],i={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:i.emitEvent})}),this._updatePristine(i,this),this._updateTouched(i,this),this.updateValueAndValidity(i)}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(i=>i._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((i,n)=>n._syncPendingControls()?!0:i,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((i,n)=>{t(i,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(i=>i.enabled&&t(i))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(let t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}};function zb(e){return!!e&&(e.asyncValidators!==void 0||e.validators!==void 0||e.updateOn!==void 0)}var Po=(()=>{class e{useNonNullable=!1;get nonNullable(){let i=new e;return i.useNonNullable=!0,i}group(i,n=null){let r=this._reduceControls(i),o={};return zb(n)?o=n:n!==null&&(o.validators=n.validator,o.asyncValidators=n.asyncValidator),new Es(r,o)}record(i,n=null){let r=this._reduceControls(i);return new Xh(r,n)}control(i,n,r){let o={};return this.useNonNullable?(zb(n)?o=n:(o.validators=n,o.asyncValidators=r),new sl(i,Be(X({},o),{nonNullable:!0}))):new sl(i,n,r)}array(i,n,r){let o=i.map(a=>this._createControl(a));return new Zh(o,n,r)}_reduceControls(i){let n={};return Object.keys(i).forEach(r=>{n[r]=this._createControl(i[r])}),n}_createControl(i){if(i instanceof sl)return i;if(i instanceof ws)return i;if(Array.isArray(i)){let n=i[0],r=i.length>1?i[1]:null,o=i.length>2?i[2]:null;return this.control(n,r,o)}else return this.control(i)}static \u0275fac=function(n){return new(n||e)};static \u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var ko=(()=>{class e{static withConfig(i){return{ngModule:e,providers:[{provide:ll,useValue:i.callSetDisabledState??Ku}]}}static \u0275fac=function(n){return new(n||e)};static \u0275mod=ze({type:e});static \u0275inj=Ve({imports:[dy]})}return e})(),hr=(()=>{class e{static withConfig(i){return{ngModule:e,providers:[{provide:ay,useValue:i.warnOnNgModelWithFormControl??"always"},{provide:ll,useValue:i.callSetDisabledState??Ku}]}}static \u0275fac=function(n){return new(n||e)};static \u0275mod=ze({type:e});static \u0275inj=Ve({imports:[dy]})}return e})();function ag(e){if(!e||typeof e!="object")return"Error desconocido";let t=[];for(let i in e)Array.isArray(e[i])?t.push(`${i}: ${e[i].join(", ")}`):typeof e[i]=="string"&&t.push(`${i}: ${e[i]}`);return t.join(`
`)}function EA(e,t){if(e&1&&(h(0,"div",9),S(1),g()),e&2){let i=j();E(),Pe(" ",i.errorMessage," ")}}function CA(e,t){if(e&1&&(h(0,"div",10),S(1),g()),e&2){let i=j();E(),Pe(" ",i.successMessage," ")}}function SA(e,t){e&1&&(h(0,"span"),S(1,"El usuario es obligatorio."),g())}function MA(e,t){if(e&1&&(h(0,"div",22),G(1,SA,2,0,"span",21),g()),e&2){let i=j(2);E(),I("ngIf",i.loginUsername==null||i.loginUsername.errors==null?null:i.loginUsername.errors.required)}}function DA(e,t){e&1&&(h(0,"span"),S(1,"La contrase\xF1a es obligatoria."),g())}function AA(e,t){e&1&&(h(0,"span"),S(1,"La contrase\xF1a debe tener al menos 6 caracteres."),g())}function PA(e,t){if(e&1&&(h(0,"div",22),G(1,DA,2,0,"span",21)(2,AA,2,0,"span",21),g()),e&2){let i=j(2);E(),I("ngIf",i.loginPassword==null||i.loginPassword.errors==null?null:i.loginPassword.errors.required),E(),I("ngIf",i.loginPassword==null||i.loginPassword.errors==null?null:i.loginPassword.errors.minlength)}}function kA(e,t){e&1&&(h(0,"span"),S(1,"Cargando..."),g())}function RA(e,t){e&1&&(h(0,"span"),S(1,"Iniciar Sesi\xF3n"),g())}function OA(e,t){if(e&1){let i=Le();h(0,"form",11),K("ngSubmit",function(){ne(i);let r=j();return re(r.onLoginSubmit())}),h(1,"div",12)(2,"label",13),S(3,"Usuario"),g(),L(4,"input",14),G(5,MA,2,1,"div",15),g(),h(6,"div",12)(7,"label",16),S(8,"Contrase\xF1a"),g(),L(9,"input",17),G(10,PA,3,2,"div",15),g(),h(11,"div",18)(12,"a",19),S(13,"\xBFOlvidaste tu contrase\xF1a?"),g()(),h(14,"button",20),G(15,kA,2,0,"span",21)(16,RA,2,0,"span",21),g()()}if(e&2){let i=j();I("formGroup",i.loginForm),E(4),pe("is-invalid",(i.loginUsername==null?null:i.loginUsername.invalid)&&((i.loginUsername==null?null:i.loginUsername.dirty)||(i.loginUsername==null?null:i.loginUsername.touched))),E(),I("ngIf",(i.loginUsername==null?null:i.loginUsername.invalid)&&((i.loginUsername==null?null:i.loginUsername.dirty)||(i.loginUsername==null?null:i.loginUsername.touched))),E(4),pe("is-invalid",(i.loginPassword==null?null:i.loginPassword.invalid)&&((i.loginPassword==null?null:i.loginPassword.dirty)||(i.loginPassword==null?null:i.loginPassword.touched))),E(),I("ngIf",(i.loginPassword==null?null:i.loginPassword.invalid)&&((i.loginPassword==null?null:i.loginPassword.dirty)||(i.loginPassword==null?null:i.loginPassword.touched))),E(4),I("disabled",i.loginForm.invalid||i.loading),E(),I("ngIf",i.loading),E(),I("ngIf",!i.loading)}}function TA(e,t){e&1&&(h(0,"span"),S(1,"El nombre de usuario es obligatorio."),g())}function IA(e,t){if(e&1&&(h(0,"div",22),G(1,TA,2,0,"span",21),g()),e&2){let i=j(2);E(),I("ngIf",i.registerUsername==null||i.registerUsername.errors==null?null:i.registerUsername.errors.required)}}function FA(e,t){e&1&&(h(0,"span"),S(1,"El correo electr\xF3nico es obligatorio."),g())}function NA(e,t){e&1&&(h(0,"span"),S(1,"Ingrese un correo electr\xF3nico v\xE1lido."),g())}function LA(e,t){if(e&1&&(h(0,"div",22),G(1,FA,2,0,"span",21)(2,NA,2,0,"span",21),g()),e&2){let i=j(2);E(),I("ngIf",i.registerEmail==null||i.registerEmail.errors==null?null:i.registerEmail.errors.required),E(),I("ngIf",i.registerEmail==null||i.registerEmail.errors==null?null:i.registerEmail.errors.email)}}function BA(e,t){e&1&&(h(0,"span"),S(1,"La contrase\xF1a es obligatoria."),g())}function jA(e,t){e&1&&(h(0,"span"),S(1,"La contrase\xF1a debe tener al menos 6 caracteres."),g())}function VA(e,t){if(e&1&&(h(0,"div",22),G(1,BA,2,0,"span",21)(2,jA,2,0,"span",21),g()),e&2){let i=j(2);E(),I("ngIf",i.registerPassword==null||i.registerPassword.errors==null?null:i.registerPassword.errors.required),E(),I("ngIf",i.registerPassword==null||i.registerPassword.errors==null?null:i.registerPassword.errors.minlength)}}function zA(e,t){e&1&&(h(0,"span"),S(1,"Confirmar la contrase\xF1a es obligatorio."),g())}function HA(e,t){e&1&&(h(0,"span"),S(1,"Las contrase\xF1as no coinciden."),g())}function $A(e,t){if(e&1&&(h(0,"div",22),G(1,zA,2,0,"span",21)(2,HA,2,0,"span",21),g()),e&2){let i=j(2);E(),I("ngIf",i.registerConfirmPassword==null||i.registerConfirmPassword.errors==null?null:i.registerConfirmPassword.errors.required),E(),I("ngIf",i.registerForm.hasError("notSame"))}}function WA(e,t){e&1&&(h(0,"span"),S(1,"Cargando..."),g())}function UA(e,t){e&1&&(h(0,"span"),S(1,"Registrarse"),g())}function GA(e,t){if(e&1){let i=Le();h(0,"form",11),K("ngSubmit",function(){ne(i);let r=j();return re(r.onRegisterSubmit())}),h(1,"div",12)(2,"label",23),S(3,"Nombre de usuario"),g(),L(4,"input",24),G(5,IA,2,1,"div",15),g(),h(6,"div",12)(7,"label",25),S(8,"Correo electr\xF3nico"),g(),L(9,"input",26),G(10,LA,3,2,"div",15),g(),h(11,"div",12)(12,"label",27),S(13,"Contrase\xF1a"),g(),L(14,"input",28),G(15,VA,3,2,"div",15),g(),h(16,"div",12)(17,"label",29),S(18,"Confirmar contrase\xF1a"),g(),L(19,"input",30),G(20,$A,3,2,"div",15),g(),h(21,"button",20),G(22,WA,2,0,"span",21)(23,UA,2,0,"span",21),g()()}if(e&2){let i=j();I("formGroup",i.registerForm),E(4),pe("is-invalid",(i.registerUsername==null?null:i.registerUsername.invalid)&&((i.registerUsername==null?null:i.registerUsername.dirty)||(i.registerUsername==null?null:i.registerUsername.touched))),E(),I("ngIf",(i.registerUsername==null?null:i.registerUsername.invalid)&&((i.registerUsername==null?null:i.registerUsername.dirty)||(i.registerUsername==null?null:i.registerUsername.touched))),E(4),pe("is-invalid",(i.registerEmail==null?null:i.registerEmail.invalid)&&((i.registerEmail==null?null:i.registerEmail.dirty)||(i.registerEmail==null?null:i.registerEmail.touched))),E(),I("ngIf",(i.registerEmail==null?null:i.registerEmail.invalid)&&((i.registerEmail==null?null:i.registerEmail.dirty)||(i.registerEmail==null?null:i.registerEmail.touched))),E(4),pe("is-invalid",(i.registerPassword==null?null:i.registerPassword.invalid)&&((i.registerPassword==null?null:i.registerPassword.dirty)||(i.registerPassword==null?null:i.registerPassword.touched))),E(),I("ngIf",(i.registerPassword==null?null:i.registerPassword.invalid)&&((i.registerPassword==null?null:i.registerPassword.dirty)||(i.registerPassword==null?null:i.registerPassword.touched))),E(4),pe("is-invalid",(i.registerConfirmPassword==null?null:i.registerConfirmPassword.invalid)&&((i.registerConfirmPassword==null?null:i.registerConfirmPassword.dirty)||(i.registerConfirmPassword==null?null:i.registerConfirmPassword.touched))||i.registerForm.hasError("notSame")),E(),I("ngIf",(i.registerConfirmPassword==null?null:i.registerConfirmPassword.invalid)&&((i.registerConfirmPassword==null?null:i.registerConfirmPassword.dirty)||(i.registerConfirmPassword==null?null:i.registerConfirmPassword.touched))||i.registerForm.hasError("notSame")),E(),I("disabled",i.registerForm.invalid||i.loading),E(),I("ngIf",i.loading),E(),I("ngIf",!i.loading)}}var ul=class e{constructor(t,i,n){this.fb=t;this.router=i;this.authService=n;this.loginForm=this.fb.group({username:["",[dt.required,dt.minLength(6)]],password:["",[dt.required,dt.minLength(6)]]}),this.registerForm=this.fb.group({username:["",[dt.required,dt.minLength(6)]],email:["",[dt.required,dt.email]],password:["",[dt.required,dt.minLength(6)]],confirmPassword:["",[dt.required]]},{validator:this.checkPasswords})}activeTab="login";loginForm;registerForm;loading=!1;errorMessage="";successMessage="";ngOnInit(){}checkPasswords(t){let i=t.get("password")?.value,n=t.get("confirmPassword")?.value;return i===n?null:{notSame:!0}}setActiveTab(t){this.activeTab=t,this.errorMessage="",this.successMessage=""}onLoginSubmit(){this.loginForm.invalid||(this.loading=!0,this.errorMessage="",this.authService.login(this.loginForm.value.username,this.loginForm.value.password).subscribe({next:t=>{console.log("Login exitoso",t),this.loading=!1,this.router.navigate(["/"])},error:t=>{console.log("Error en el login",t),this.loading=!1,this.errorMessage=ag(t.error)}}))}onRegisterSubmit(){this.registerForm.invalid||(this.loading=!0,this.errorMessage="",this.authService.register(this.registerForm.value.username,this.registerForm.value.email,this.registerForm.value.password,this.registerForm.value.confirmPassword).subscribe({next:t=>{console.log("Registro exitoso",t),this.loading=!1,this.successMessage="Registro exitoso. Ya puedes iniciar sesi\xF3n.",this.setActiveTab("login")},error:t=>{console.log("Error en el registro",t),this.loading=!1,this.errorMessage=ag(t.error)}}))}get loginUsername(){return this.loginForm.get("username")}get loginPassword(){return this.loginForm.get("password")}get registerUsername(){return this.registerForm.get("username")}get registerEmail(){return this.registerForm.get("email")}get registerPassword(){return this.registerForm.get("password")}get registerConfirmPassword(){return this.registerForm.get("confirmPassword")}static \u0275fac=function(i){return new(i||e)(de(Po),de(Sn),de(Co))};static \u0275cmp=ye({type:e,selectors:[["app-auth"]],decls:16,vars:8,consts:[[1,"auth-container"],[1,"auth-card"],[1,"auth-header"],[1,"text-muted"],[1,"auth-tabs"],[1,"auth-tab",3,"click"],["class","alert alert-error",4,"ngIf"],["class","alert alert-success",4,"ngIf"],["class","auth-form",3,"formGroup","ngSubmit",4,"ngIf"],[1,"alert","alert-error"],[1,"alert","alert-success"],[1,"auth-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","login-email",1,"form-label"],["type","username","id","login-username","formControlName","username","placeholder","usuario",1,"form-control"],["class","form-error",4,"ngIf"],["for","login-password",1,"form-label"],["type","password","id","login-password","formControlName","password","placeholder","Contrase\xF1a",1,"form-control"],[1,"form-group","text-right"],["href","#",1,"forgot-password"],["type","submit",1,"btn","btn-primary","btn-block",3,"disabled"],[4,"ngIf"],[1,"form-error"],["for","register-username",1,"form-label"],["type","text","id","register-username","formControlName","username","placeholder","Nombre de usuario",1,"form-control"],["for","register-email",1,"form-label"],["type","email","id","register-email","formControlName","email","placeholder","correo@ejemplo.com",1,"form-control"],["for","register-password",1,"form-label"],["type","password","id","register-password","formControlName","password","placeholder","Contrase\xF1a",1,"form-control"],["for","register-confirm-password",1,"form-label"],["type","password","id","register-confirm-password","formControlName","confirmPassword","placeholder","Confirmar contrase\xF1a",1,"form-control"]],template:function(i,n){i&1&&(h(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),S(4,"Sistema de Gesti\xF3n Documental"),g(),h(5,"p",3),S(6,"Accede a tu cuenta para gestionar documentos y workflows"),g()(),h(7,"div",4)(8,"button",5),K("click",function(){return n.setActiveTab("login")}),S(9," Iniciar Sesi\xF3n "),g(),h(10,"button",5),K("click",function(){return n.setActiveTab("register")}),S(11," Registrarse "),g()(),G(12,EA,2,1,"div",6)(13,CA,2,1,"div",7)(14,OA,17,10,"form",8)(15,GA,24,16,"form",8),g()()),i&2&&(E(8),pe("active",n.activeTab==="login"),E(2),pe("active",n.activeTab==="register"),E(2),I("ngIf",n.errorMessage),E(),I("ngIf",n.successMessage),E(),I("ngIf",n.activeTab==="login"),E(),I("ngIf",n.activeTab==="register"))},dependencies:[zt,pi,hr,Ao,fr,Mo,Do,An,Gr],styles:['.auth-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background-color:var(--color-background);padding:var(--spacing-md)}.auth-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:var(--border-radius-lg);box-shadow:var(--shadow-lg);width:100%;max-width:450px;padding:var(--spacing-xl)}.auth-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:var(--spacing-lg)}.auth-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--color-primary);margin-bottom:var(--spacing-xs)}.auth-tabs[_ngcontent-%COMP%]{display:flex;margin-bottom:var(--spacing-lg);border-bottom:1px solid var(--color-hover)}.auth-tab[_ngcontent-%COMP%]{flex:1;padding:var(--spacing-md);background:none;border:none;cursor:pointer;font-weight:500;color:var(--color-text-light);transition:all var(--transition-fast);position:relative}.auth-tab.active[_ngcontent-%COMP%]{color:var(--color-secondary)}.auth-tab.active[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-1px;left:0;width:100%;height:2px;background-color:var(--color-secondary)}.auth-form[_ngcontent-%COMP%]{margin-top:var(--spacing-lg)}.form-group[_ngcontent-%COMP%]{margin-bottom:var(--spacing-md)}.form-label[_ngcontent-%COMP%]{display:block;margin-bottom:var(--spacing-xs);font-weight:500}.form-control[_ngcontent-%COMP%]{width:100%;padding:var(--spacing-sm) var(--spacing-md);border:1px solid var(--color-hover);border-radius:var(--border-radius-sm);transition:border-color var(--transition-fast)}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-secondary)}.form-control.is-invalid[_ngcontent-%COMP%]{border-color:var(--color-error)}.form-error[_ngcontent-%COMP%]{color:var(--color-error);font-size:.85rem;margin-top:var(--spacing-xs)}.forgot-password[_ngcontent-%COMP%]{color:var(--color-link);font-size:.9rem;text-decoration:none}.forgot-password[_ngcontent-%COMP%]:hover{text-decoration:underline}.btn-block[_ngcontent-%COMP%]{width:100%;margin-top:var(--spacing-lg)}.text-right[_ngcontent-%COMP%]{text-align:right}']})};var uy=(e,t)=>{let i=O(Co),n=O(Sn);return i.isAuthenticated?!0:(n.navigate(["login"]),!1)};var fy=FD(py());function qA(e,t){if(e&1&&(h(0,"span",20),S(1),g()),e&2){let i=j(2);E(),le(i.documento==null||i.documento.versiones==null?null:i.documento.versiones.length)}}function YA(e,t){if(e&1&&(h(0,"span",20),S(1),g()),e&2){let i=j(2);E(),le(i.documento==null||i.documento.metadatos==null?null:i.documento.metadatos.length)}}function KA(e,t){if(e&1&&(h(0,"span",20),S(1),g()),e&2){let i=j(2);E(),le(i.documento==null||i.documento.permisos==null?null:i.documento.permisos.length)}}function XA(e,t){if(e&1&&(h(0,"div",44),L(1,"i",45),S(2),g()),e&2){let i=j(4);E(2),Pe(" ",i.documento.versiones[0].comentarios," ")}}function ZA(e,t){if(e&1){let i=Le();h(0,"div",30)(1,"div",31)(2,"span",32),S(3),g(),h(4,"span",33),S(5),g()(),h(6,"div",34)(7,"div",35)(8,"div"),L(9,"i",36),S(10),g(),h(11,"div"),L(12,"i",37),S(13),g()(),h(14,"div",38)(15,"button",39),K("click",function(){ne(i);let r=j(3);return re(r.verVersion(r.documento.versiones[0]))}),L(16,"i",40),S(17," Ver "),g(),h(18,"button",41),K("click",function(){ne(i);let r=j(3);return re(r.descargarVersion(r.documento.versiones[0]))}),L(19,"i",42),S(20," Descargar "),g()()(),G(21,XA,3,1,"div",43),g()}if(e&2){let i=j(3);E(3),Pe("Versi\xF3n ",i.documento.versiones[0].version,""),E(2),le(i.formatearFecha(i.documento.versiones[0].fecha_subida)),E(5),Pe(" ",i.documento.versiones[0].subido_por.username,""),E(3),Pe(" ",i.documento.versiones[0].nombre_archivo||"Archivo",""),E(8),I("ngIf",i.documento.versiones[0].comentarios)}}function QA(e,t){e&1&&(h(0,"div",46),L(1,"i",47),h(2,"p"),S(3,"No hay versiones disponibles"),g()())}function JA(e,t){if(e&1&&(h(0,"div",21)(1,"div",22)(2,"div",23)(3,"h4"),S(4,"Informaci\xF3n b\xE1sica"),g(),h(5,"div",24)(6,"span",25),S(7,"T\xEDtulo:"),g(),h(8,"span",26),S(9),g()(),h(10,"div",24)(11,"span",25),S(12,"Descripci\xF3n:"),g(),h(13,"span",26),S(14),g()(),h(15,"div",24)(16,"span",25),S(17,"Tipo:"),g(),h(18,"span",26),S(19),g()(),h(20,"div",24)(21,"span",25),S(22,"\xC1rea:"),g(),h(23,"span",26),S(24),g()(),h(25,"div",24)(26,"span",25),S(27,"Visibilidad:"),g(),h(28,"span",26)(29,"span",20),S(30),g()()()(),h(31,"div",23)(32,"h4"),S(33,"Fechas"),g(),h(34,"div",24)(35,"span",25),S(36,"Creado:"),g(),h(37,"span",26),S(38),g()(),h(39,"div",24)(40,"span",25),S(41,"Modificado:"),g(),h(42,"span",26),S(43),g()(),h(44,"div",24)(45,"span",25),S(46,"Creado por:"),g(),h(47,"span",26),S(48),g()()(),h(49,"div",27)(50,"h4"),S(51,"\xDAltima versi\xF3n"),g(),G(52,ZA,22,5,"div",28)(53,QA,4,0,"div",29),g()()()),e&2){let i=j(2);E(9),le(i.documento==null?null:i.documento.titulo),E(5),le(i.documento==null?null:i.documento.descripcion),E(5),le((i.documento==null||i.documento.tipo==null?null:i.documento.tipo.nombre)||"No especificado"),E(5),le((i.documento==null||i.documento.area==null?null:i.documento.area.nombre)||"No especificada"),E(5),pe("badge-success",i.documento==null?null:i.documento.es_publico)("badge-warning",!(i.documento!=null&&i.documento.es_publico)),E(),Pe(" ",i.documento!=null&&i.documento.es_publico?"P\xFAblico":"Privado"," "),E(8),le(i.documento!=null&&i.documento.fecha_creacion?i.formatearFecha(i.documento.fecha_creacion):"No disponible"),E(5),le(i.documento!=null&&i.documento.fecha_modificacion?i.formatearFecha(i.documento.fecha_modificacion):"No disponible"),E(5),le((i.documento==null||i.documento.creado_por==null?null:i.documento.creado_por.username)||"Desconocido"),E(4),I("ngIf",(i.documento==null?null:i.documento.versiones)&&i.documento.versiones.length>0),E(),I("ngIf",!(i.documento!=null&&i.documento.versiones)||i.documento.versiones.length===0)}}function eP(e,t){if(e&1&&(h(0,"div",61),L(1,"i",45),S(2),g()),e&2){let i=j().$implicit;E(2),Pe(" ",i.comentarios," ")}}function tP(e,t){if(e&1){let i=Le();h(0,"div",51)(1,"div",52)(2,"div",53)(3,"span",32),S(4),g(),h(5,"span",33),S(6),g()(),h(7,"div",54)(8,"button",55),K("click",function(){let r=ne(i).$implicit,o=j(4);return re(o.verVersion(r))}),L(9,"i",40),g(),h(10,"button",56),K("click",function(){let r=ne(i).$implicit,o=j(4);return re(o.descargarVersion(r))}),L(11,"i",42),g()()(),h(12,"div",57)(13,"div",58),L(14,"i",37),S(15),g(),h(16,"div",59),L(17,"i",36),S(18),g(),G(19,eP,3,1,"div",60),g()()}if(e&2){let i=t.$implicit,n=j(4);E(4),Pe("Versi\xF3n ",i.version,""),E(2),le(n.formatearFecha(i.fecha_subida)),E(9),Pe(" ",i.nombre_archivo||"Archivo"," "),E(3),Pe(" Subido por: ",i.subido_por.username," "),E(),I("ngIf",i.comentarios)}}function iP(e,t){if(e&1&&(h(0,"div",49),G(1,tP,20,5,"div",50),g()),e&2){let i=j(3);E(),I("ngForOf",i.documento.versiones)}}function nP(e,t){e&1&&(h(0,"div",46),L(1,"i",47),h(2,"p"),S(3,"No hay versiones disponibles"),g()())}function rP(e,t){if(e&1&&(h(0,"div",21)(1,"h4"),S(2,"Historial de versiones"),g(),G(3,iP,2,1,"div",48)(4,nP,4,0,"div",29),g()),e&2){let i=j(2);E(3),I("ngIf",(i.documento==null?null:i.documento.versiones)&&i.documento.versiones.length>0),E(),I("ngIf",!(i.documento!=null&&i.documento.versiones)||i.documento.versiones.length===0)}}function oP(e,t){if(e&1&&(h(0,"div",66)(1,"div",67),S(2),g(),h(3,"div",68),S(4),g()()),e&2){let i=t.$implicit;E(2),le(i.clave),E(2),le(i.valor)}}function aP(e,t){if(e&1&&(h(0,"div",64),G(1,oP,5,2,"div",65),g()),e&2){let i=j(3);E(),I("ngForOf",i.documento.metadatos)}}function sP(e,t){e&1&&(h(0,"div",46),L(1,"i",69),h(2,"p"),S(3,"No hay metadatos disponibles"),g()())}function cP(e,t){if(e&1&&(h(0,"div",21)(1,"div",62)(2,"h4"),S(3,"Metadatos personalizados"),g()(),G(4,aP,2,1,"div",63)(5,sP,4,0,"div",29),g()),e&2){let i=j(2);E(4),I("ngIf",(i.documento==null?null:i.documento.metadatos)&&i.documento.metadatos.length>0),E(),I("ngIf",!(i.documento!=null&&i.documento.metadatos)||i.documento.metadatos.length===0)}}function lP(e,t){if(e&1&&(h(0,"span",80),S(1),g()),e&2){let i=j().$implicit;E(),Pe("(",i.usuario.rol,")")}}function dP(e,t){if(e&1&&(h(0,"div",74)(1,"div",75),L(2,"i",36),S(3),G(4,lP,2,1,"span",76),g(),h(5,"div",77)(6,"span",78),L(7,"i",79),S(8," Ver "),g(),h(9,"span",78),L(10,"i",79),S(11," Editar "),g(),h(12,"span",78),L(13,"i",79),S(14," Descargar "),g(),h(15,"span",78),L(16,"i",79),S(17," Eliminar "),g()()()),e&2){let i=t.$implicit;E(3),Pe(" ",i.usuario.username," "),E(),I("ngIf",i.usuario.rol),E(2),pe("active",i.puede_ver),E(),I("ngClass",i.puede_ver?"fa-check-circle":"fa-times-circle"),E(2),pe("active",i.puede_editar),E(),I("ngClass",i.puede_editar?"fa-check-circle":"fa-times-circle"),E(2),pe("active",i.puede_descargar),E(),I("ngClass",i.puede_descargar?"fa-check-circle":"fa-times-circle"),E(2),pe("active",i.puede_eliminar),E(),I("ngClass",i.puede_eliminar?"fa-check-circle":"fa-times-circle")}}function uP(e,t){if(e&1&&(h(0,"div",72),G(1,dP,18,14,"div",73),g()),e&2){let i=j(3);E(),I("ngForOf",i.documento.permisos)}}function pP(e,t){e&1&&(h(0,"div",46),L(1,"i",81),h(2,"p"),S(3,"No hay permisos configurados"),g()())}function mP(e,t){if(e&1&&(h(0,"div",21)(1,"div",70)(2,"h4"),S(3,"Permisos de acceso"),g()(),G(4,uP,2,1,"div",71)(5,pP,4,0,"div",29),g()),e&2){let i=j(2);E(4),I("ngIf",(i.documento==null?null:i.documento.permisos)&&i.documento.permisos.length>0),E(),I("ngIf",!(i.documento!=null&&i.documento.permisos)||i.documento.permisos.length===0)}}function fP(e,t){if(e&1){let i=Le();h(0,"button",82),K("click",function(){ne(i);let r=j(2);return re(r.eliminarDocumento())}),L(1,"i",83),S(2," Eliminar "),g()}}function hP(e,t){if(e&1){let i=Le();h(0,"button",84),K("click",function(){ne(i);let r=j(2);return re(r.editarDocumento())}),L(1,"i",85),S(2," Editar "),g()}}function gP(e,t){if(e&1){let i=Le();h(0,"div",1)(1,"div",2),K("click",function(){ne(i);let r=j();return re(r.closeModal())}),g(),h(2,"div",3)(3,"div",4)(4,"h3"),S(5),g(),h(6,"button",5),K("click",function(){ne(i);let r=j();return re(r.closeModal())}),L(7,"i",6),g()(),h(8,"div",7)(9,"button",8),K("click",function(){ne(i);let r=j();return re(r.setActiveTab("info"))}),L(10,"i",9),S(11," Informaci\xF3n "),g(),h(12,"button",8),K("click",function(){ne(i);let r=j();return re(r.setActiveTab("versiones"))}),L(13,"i",10),S(14," Versiones "),G(15,qA,2,1,"span",11),g(),h(16,"button",8),K("click",function(){ne(i);let r=j();return re(r.setActiveTab("metadatos"))}),L(17,"i",12),S(18," Metadatos "),G(19,YA,2,1,"span",11),g(),h(20,"button",8),K("click",function(){ne(i);let r=j();return re(r.setActiveTab("permisos"))}),L(21,"i",13),S(22," Permisos "),G(23,KA,2,1,"span",11),g()(),h(24,"div",14),G(25,JA,54,14,"div",15)(26,rP,5,2,"div",15)(27,cP,6,2,"div",15)(28,mP,6,2,"div",15),g(),h(29,"div",16)(30,"button",17),K("click",function(){ne(i);let r=j();return re(r.closeModal())}),S(31,"Cerrar"),g(),G(32,fP,3,0,"button",18)(33,hP,3,0,"button",19),g()()()}if(e&2){let i=j();E(5),le(i.documento==null?null:i.documento.titulo),E(4),pe("active",i.activeTab==="info"),E(3),pe("active",i.activeTab==="versiones"),E(3),I("ngIf",i.documento==null||i.documento.versiones==null?null:i.documento.versiones.length),E(),pe("active",i.activeTab==="metadatos"),E(3),I("ngIf",i.documento==null||i.documento.metadatos==null?null:i.documento.metadatos.length),E(),pe("active",i.activeTab==="permisos"),E(3),I("ngIf",i.documento==null||i.documento.permisos==null?null:i.documento.permisos.length),E(2),I("ngIf",i.activeTab==="info"),E(),I("ngIf",i.activeTab==="versiones"),E(),I("ngIf",i.activeTab==="metadatos"),E(),I("ngIf",i.activeTab==="permisos"),E(4),I("ngIf",i.puedeEliminar),E(),I("ngIf",i.puedeEditar)}}var np=class e{documento={id:"",titulo:"",descripcion:"",es_publico:!1,versiones:[],metadatos:[],permisos:[],fecha_creacion:new Date,fecha_modificacion:new Date,creado_por:{id:0,username:"",email:""},tipo:null,area:null};visible=!1;close=new Yt;activeTab="info";puedeEditar=!1;puedeDescargar=!1;puedeEliminar=!1;ngOnInit(){this.puedeEditar=!0,this.puedeDescargar=!0,this.puedeEliminar=!1}closeModal(){this.visible=!1,this.close.emit()}setActiveTab(t){this.activeTab=t}descargarVersion(t){console.log("Descargando versi\xF3n:",t);let i=document.createElement("a");i.href=t.archivo,i.download=t.nombre_archivo||`documento_v${t.version}.pdf`,document.body.appendChild(i),i.click(),document.body.removeChild(i)}verVersion(t){console.log("Viendo versi\xF3n:",t),window.open(t.archivo,"_blank")}editarDocumento(){console.log("Editando documento:",this.documento)}eliminarDocumento(){confirm("\xBFEst\xE1 seguro de que desea eliminar este documento?")&&(console.log("Eliminando documento:",this.documento),this.closeModal())}formatearFecha(t){return new Date(t).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=ye({type:e,selectors:[["app-document-details"]],inputs:{documento:"documento",visible:"visible"},outputs:{close:"close"},decls:1,vars:1,consts:[["class","modal",4,"ngIf"],[1,"modal"],[1,"modal-backdrop",3,"click"],[1,"modal-content"],[1,"modal-header"],[1,"btn-close",3,"click"],[1,"fas","fa-times"],[1,"modal-tabs"],[1,"modal-tab",3,"click"],[1,"fas","fa-info-circle"],[1,"fas","fa-code-branch"],["class","badge",4,"ngIf"],[1,"fas","fa-tags"],[1,"fas","fa-user-lock"],[1,"modal-body"],["class","tab-content",4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-outline",3,"click"],["class","btn btn-danger",3,"click",4,"ngIf"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"badge"],[1,"tab-content"],[1,"document-info-grid"],[1,"info-group"],[1,"info-row"],[1,"info-label"],[1,"info-value"],[1,"info-group","full-width"],["class","version-preview",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"version-preview"],[1,"version-preview-header"],[1,"version-number"],[1,"version-date"],[1,"version-preview-content"],[1,"version-preview-info"],[1,"fas","fa-user"],[1,"fas","fa-file"],[1,"version-preview-actions"],[1,"btn","btn-sm","btn-outline",3,"click"],[1,"fas","fa-eye"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"fas","fa-download"],["class","version-preview-comments",4,"ngIf"],[1,"version-preview-comments"],[1,"fas","fa-comment"],[1,"empty-state"],[1,"fas","fa-file-alt","empty-icon"],["class","version-list",4,"ngIf"],[1,"version-list"],["class","version-item",4,"ngFor","ngForOf"],[1,"version-item"],[1,"version-header"],[1,"version-info"],[1,"version-actions"],["title","Ver versi\xF3n",1,"btn-icon",3,"click"],["title","Descargar versi\xF3n",1,"btn-icon",3,"click"],[1,"version-details"],[1,"version-file"],[1,"version-user"],["class","version-comments",4,"ngIf"],[1,"version-comments"],[1,"metadatos-header"],["class","metadatos-list",4,"ngIf"],[1,"metadatos-list"],["class","metadato-item",4,"ngFor","ngForOf"],[1,"metadato-item"],[1,"metadato-key"],[1,"metadato-value"],[1,"fas","fa-tags","empty-icon"],[1,"permisos-header"],["class","permisos-list",4,"ngIf"],[1,"permisos-list"],["class","permiso-item",4,"ngFor","ngForOf"],[1,"permiso-item"],[1,"permiso-user"],["class","user-role",4,"ngIf"],[1,"permiso-options"],[1,"permiso-option"],[1,"fas",3,"ngClass"],[1,"user-role"],[1,"fas","fa-user-lock","empty-icon"],[1,"btn","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-edit"]],template:function(i,n){i&1&&G(0,gP,34,18,"div",0),i&2&&I("ngIf",n.visible)},dependencies:[zt,Yi,Mi,pi],styles:['.modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;z-index:1050}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;z-index:-1}.modal-content[_ngcontent-%COMP%]{background-color:#fff;border-radius:var(--border-radius-md);box-shadow:var(--shadow-lg);width:100%;max-width:800px;max-height:90vh;overflow-y:auto;z-index:1051;display:flex;flex-direction:column}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-md) var(--spacing-lg);border-bottom:1px solid var(--color-hover)}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:var(--color-primary);font-size:1.3rem}.btn-close[_ngcontent-%COMP%]{background:none;border:none;font-size:1.2rem;cursor:pointer;color:var(--color-text-light);width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:background-color var(--transition-fast)}.btn-close[_ngcontent-%COMP%]:hover{background-color:var(--color-hover);color:var(--color-text)}.modal-tabs[_ngcontent-%COMP%]{display:flex;border-bottom:1px solid var(--color-hover);background-color:var(--color-background)}.modal-tab[_ngcontent-%COMP%]{padding:var(--spacing-md) var(--spacing-lg);border:none;background:none;cursor:pointer;font-weight:500;color:var(--color-text-light);display:flex;align-items:center;gap:var(--spacing-xs);position:relative;transition:color var(--transition-fast)}.modal-tab[_ngcontent-%COMP%]:hover{color:var(--color-text)}.modal-tab.active[_ngcontent-%COMP%]{color:var(--color-primary)}.modal-tab.active[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-1px;left:0;width:100%;height:2px;background-color:var(--color-primary)}.modal-tab[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.9rem}.badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;min-width:18px;height:18px;padding:0 6px;font-size:.75rem;font-weight:600;line-height:1;border-radius:9px;background-color:var(--color-primary);color:#fff}.badge-success[_ngcontent-%COMP%]{background-color:var(--color-success)}.badge-warning[_ngcontent-%COMP%]{background-color:var(--color-warning)}.modal-body[_ngcontent-%COMP%]{padding:var(--spacing-lg);flex:1;overflow-y:auto}.tab-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-md)}.document-info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:var(--spacing-lg)}.info-group[_ngcontent-%COMP%]{margin-bottom:var(--spacing-md)}.info-group.full-width[_ngcontent-%COMP%]{grid-column:span 2}.info-group[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-top:0;margin-bottom:var(--spacing-md);color:var(--color-primary);font-size:1.1rem;border-bottom:1px solid var(--color-hover);padding-bottom:var(--spacing-xs)}.info-row[_ngcontent-%COMP%]{display:flex;margin-bottom:var(--spacing-sm)}.info-label[_ngcontent-%COMP%]{font-weight:500;width:100px;flex-shrink:0;color:var(--color-text-light)}.info-value[_ngcontent-%COMP%]{flex:1}.version-preview[_ngcontent-%COMP%]{border:1px solid var(--color-hover);border-radius:var(--border-radius-sm);overflow:hidden}.version-preview-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-sm) var(--spacing-md);background-color:var(--color-background);border-bottom:1px solid var(--color-hover)}.version-number[_ngcontent-%COMP%]{font-weight:600;color:var(--color-primary)}.version-date[_ngcontent-%COMP%]{color:var(--color-text-light);font-size:.9rem}.version-preview-content[_ngcontent-%COMP%]{padding:var(--spacing-md);display:flex;justify-content:space-between;align-items:center}.version-preview-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-xs);color:var(--color-text)}.version-preview-info[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{width:16px;color:var(--color-text-light);margin-right:var(--spacing-xs)}.version-preview-actions[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-xs)}.version-preview-comments[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-md);border-top:1px solid var(--color-hover);background-color:var(--color-background);font-style:italic;color:var(--color-text-light)}.version-preview-comments[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:var(--spacing-xs)}.version-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-md)}.version-item[_ngcontent-%COMP%]{border:1px solid var(--color-hover);border-radius:var(--border-radius-sm);overflow:hidden}.version-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-sm) var(--spacing-md);background-color:var(--color-background);border-bottom:1px solid var(--color-hover)}.version-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-md)}.version-actions[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-xs)}.version-details[_ngcontent-%COMP%]{padding:var(--spacing-md);display:flex;flex-direction:column;gap:var(--spacing-xs)}.version-file[_ngcontent-%COMP%], .version-user[_ngcontent-%COMP%], .version-comments[_ngcontent-%COMP%]{display:flex;align-items:center}.version-file[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .version-user[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .version-comments[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{width:16px;color:var(--color-text-light);margin-right:var(--spacing-sm)}.metadatos-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--spacing-md)}.metadatos-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-sm)}.metadato-item[_ngcontent-%COMP%]{display:flex;padding:var(--spacing-sm) var(--spacing-md);border:1px solid var(--color-hover);border-radius:var(--border-radius-sm)}.metadato-key[_ngcontent-%COMP%]{font-weight:500;width:150px;flex-shrink:0}.metadato-value[_ngcontent-%COMP%]{flex:1}.permisos-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--spacing-md)}.permisos-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-sm)}.permiso-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-sm) var(--spacing-md);border:1px solid var(--color-hover);border-radius:var(--border-radius-sm)}.permiso-user[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-xs)}.permiso-user[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--color-text-light)}.user-role[_ngcontent-%COMP%]{font-size:.85rem;color:var(--color-text-light);margin-left:var(--spacing-xs)}.permiso-options[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-md)}.permiso-option[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-xs);color:var(--color-text-light);font-size:.9rem}.permiso-option.active[_ngcontent-%COMP%]{color:var(--color-success)}.permiso-option[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.85rem}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:var(--spacing-lg);color:var(--color-text-light);text-align:center;background-color:var(--color-background);border-radius:var(--border-radius-sm)}.empty-icon[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:var(--spacing-md);opacity:.5}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:var(--spacing-md);padding:var(--spacing-md) var(--spacing-lg);border-top:1px solid var(--color-hover)}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:var(--spacing-xs);padding:var(--spacing-sm) var(--spacing-md);border-radius:var(--border-radius-sm);font-weight:500;cursor:pointer;transition:all var(--transition-fast);border:none}.btn-sm[_ngcontent-%COMP%]{padding:var(--spacing-xs) var(--spacing-sm);font-size:.85rem}.btn-primary[_ngcontent-%COMP%]{background-color:var(--color-primary);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:var(--color-primary-dark)}.btn-outline[_ngcontent-%COMP%]{background-color:transparent;border:1px solid var(--color-hover);color:var(--color-text)}.btn-outline[_ngcontent-%COMP%]:hover{background-color:var(--color-hover)}.btn-danger[_ngcontent-%COMP%]{background-color:var(--color-error);color:#fff}.btn-danger[_ngcontent-%COMP%]:hover{background-color:var(--color-error-dark)}.btn-icon[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;background-color:transparent;border:none;cursor:pointer;color:var(--color-text);transition:all var(--transition-fast)}.btn-icon[_ngcontent-%COMP%]:hover{background-color:var(--color-hover);color:var(--color-primary)}@media (max-width: 768px){.document-info-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.info-group.full-width[_ngcontent-%COMP%]{grid-column:span 1}.modal-tabs[_ngcontent-%COMP%]{overflow-x:auto;white-space:nowrap}.modal-tab[_ngcontent-%COMP%]{padding:var(--spacing-sm) var(--spacing-md)}.permiso-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.permiso-options[_ngcontent-%COMP%]{margin-top:var(--spacing-sm);flex-wrap:wrap}.version-preview-content[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.version-preview-actions[_ngcontent-%COMP%]{margin-top:var(--spacing-sm);align-self:flex-end}}']})};var Ro=class e{constructor(t){this.http=t}DOCS_URL=`${Dn}/documentos/`;getDocs(){return this.http.get(this.DOCS_URL)}getDoc(t){return this.http.get(`${this.DOCS_URL}${t}/`)}addDoc(t,i){let n=new FormData;return Object.entries(t).forEach(([r,o])=>{o!=null&&n.append(r,o)}),n.append("archivo",i),this.http.post(this.DOCS_URL,n)}getData(){return this.http.get(`${this.DOCS_URL}resumen/`)}addNewVersion(t,i){let n=new FormData;return n.append("archivo",i),this.http.post(`${this.DOCS_URL}${t}/nueva-version/`,n)}downloadDoc(t){return this.http.get(`${this.DOCS_URL}descargar/${t}`,{responseType:"blob"})}addMetadata(t,i){return this.http.post(`${this.DOCS_URL}${t}/agregar-metadatos/`,i)}getDocumentTypes(){return this.http.get(`${this.DOCS_URL}tipos-documentos/`)}static \u0275fac=function(i){return new(i||e)(wn(Ki))};static \u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})};var As=class e{constructor(t){this.http=t}USERS_URL=`${Dn}/usuarios/`;getUsuarios(){return this.http.get(`${this.USERS_URL}todos/`)}getUserRoles(){return this.http.get(`${this.USERS_URL}roles/`)}static \u0275fac=function(i){return new(i||e)(wn(Ki))};static \u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})};function vP(e,t){e&1&&(h(0,"div"),S(1,"Cargando..."),g())}function _P(e,t){if(e&1&&(h(0,"option",25),S(1),g()),e&2){let i=t.$implicit;I("value",i.id),E(),Pe(" ",i.nombre," ")}}function bP(e,t){if(e&1&&(h(0,"option",25),S(1),g()),e&2){let i=t.$implicit;I("value",i.id),E(),Pe(" ",i.nombre," ")}}function yP(e,t){if(e&1&&(h(0,"span"),S(1),g()),e&2){let i,n=j().$implicit,r=j();E(),Pe(" v",(i=r.obtenerUltimaVersion(n))==null?null:i.version," ")}}function xP(e,t){e&1&&(h(0,"span",4),S(1," Sin versiones "),g())}function wP(e,t){if(e&1){let i=Le();h(0,"button",34),K("click",function(){ne(i);let r=j().$implicit,o=j();return re(o.verDetallesDocumento(r))}),L(1,"i",35),g()}}function EP(e,t){if(e&1){let i=Le();h(0,"button",36),K("click",function(){ne(i);let r=j().$implicit,o=j();return re(o.abrirModalEditar(r))}),L(1,"i",37),g()}}function CP(e,t){if(e&1){let i=Le();h(0,"button",38),K("click",function(){ne(i);let r=j().$implicit,o=j();return re(o.abrirModalVersiones(r))}),L(1,"i",39),g()}}function SP(e,t){if(e&1){let i=Le();h(0,"button",40),K("click",function(){ne(i);let r=j().$implicit,o=j();return re(o.abrirModalPermisos(r))}),L(1,"i",41),g()}}function MP(e,t){if(e&1){let i=Le();h(0,"button",42),K("click",function(){ne(i);let r=j().$implicit,o=j();return re(o.abrirModalMetadatos(r))}),L(1,"i",43),g()}}function DP(e,t){if(e&1){let i=Le();h(0,"button",44),K("click",function(){ne(i);let r=j().$implicit,o=j();return re(o.eliminarDocumento(r.id))}),L(1,"i",45),g()}}function AP(e,t){if(e&1&&(h(0,"tr")(1,"td"),S(2),g(),h(3,"td"),S(4),g(),h(5,"td"),S(6),g(),h(7,"td"),G(8,yP,2,1,"span",0)(9,xP,2,0,"span",26),g(),h(10,"td"),S(11),xa(12,"date"),g(),h(13,"td"),S(14),g(),h(15,"td")(16,"div",27),G(17,wP,2,0,"button",28)(18,EP,2,0,"button",29)(19,CP,2,0,"button",30)(20,SP,2,0,"button",31)(21,MP,2,0,"button",32)(22,DP,2,0,"button",33),g()()()),e&2){let i,n,r=t.$implicit,o=j();E(2),le(r.titulo),E(2),le((i=r.tipo==null?null:r.tipo.nombre)!==null&&i!==void 0?i:"Sin tipo"),E(2),le((n=r.area==null?null:r.area.nombre)!==null&&n!==void 0?n:"Sin \xE1rea"),E(2),I("ngIf",o.obtenerUltimaVersion(r)),E(),I("ngIf",!o.obtenerUltimaVersion(r)),E(2),Pe(" ",wa(12,13,r.fecha_modificacion,"dd/MM/yyyy HH:mm")," "),E(3),le(r.creado_por.username),E(3),I("ngIf",o.tienePermiso(r,"ver")),E(),I("ngIf",o.tienePermiso(r,"editar")),E(),I("ngIf",o.tienePermiso(r,"editar")),E(),I("ngIf",o.tienePermiso(r,"editar")),E(),I("ngIf",o.tienePermiso(r,"editar")),E(),I("ngIf",o.tienePermiso(r,"eliminar"))}}function PP(e,t){e&1&&(h(0,"tr")(1,"td",46),S(2," No se encontraron documentos que coincidan con los criterios de b\xFAsqueda. "),g()())}function kP(e,t){e&1&&(h(0,"div",78),S(1," El t\xEDtulo es obligatorio. "),g())}function RP(e,t){if(e&1&&(h(0,"option",25),S(1),g()),e&2){let i=t.$implicit;I("value",i.id),E(),Pe(" ",i.nombre," ")}}function OP(e,t){e&1&&(h(0,"div",78),S(1," El tipo de documento es obligatorio. "),g())}function TP(e,t){if(e&1&&(h(0,"option",25),S(1),g()),e&2){let i=t.$implicit;I("value",i.id),E(),Pe(" ",i.nombre," ")}}function IP(e,t){e&1&&(h(0,"div",78),S(1," El \xE1rea es obligatoria. "),g())}function FP(e,t){if(e&1){let i=Le();h(0,"div",79)(1,"div",80)(2,"div",55),L(3,"input",81),g(),h(4,"div",55),L(5,"input",82),g(),h(6,"button",83),K("click",function(){let r=ne(i).index,o=j(2);return re(o.eliminarMetadato(r))}),L(7,"i",52),g()()()}if(e&2){let i,n,r=t.$implicit,o=t.index;I("formGroupName",o),E(3),pe("is-invalid",((i=r.get("clave"))==null?null:i.invalid)&&((i=r.get("clave"))==null?null:i.touched)),E(2),pe("is-invalid",((n=r.get("valor"))==null?null:n.invalid)&&((n=r.get("valor"))==null?null:n.touched))}}function NP(e,t){if(e&1){let i=Le();h(0,"div",47)(1,"div",48),K("click",function(){ne(i);let r=j();return re(r.cerrarModal())}),g(),h(2,"div",49)(3,"div",50)(4,"h3"),S(5),g(),h(6,"button",51),K("click",function(){ne(i);let r=j();return re(r.cerrarModal())}),L(7,"i",52),g()(),h(8,"div",53)(9,"form",54),K("ngSubmit",function(){ne(i);let r=j();return re(r.guardarDocumento())}),h(10,"div",55)(11,"label",56),S(12,"T\xEDtulo"),g(),L(13,"input",57),G(14,kP,2,0,"div",58),g(),h(15,"div",55)(16,"label",59),S(17,"Descripci\xF3n"),g(),L(18,"textarea",60),g(),h(19,"div",55)(20,"label",61),S(21,"Archivo"),g(),h(22,"input",62),K("change",function(r){ne(i);let o=j();return re(o.onFileSelected(r))}),g()(),h(23,"div",55)(24,"label",63),S(25,"Tipo de documento"),g(),h(26,"select",64)(27,"option",65),S(28,"Seleccionar tipo"),g(),G(29,RP,2,2,"option",17),g(),G(30,OP,2,0,"div",58),g(),h(31,"div",55)(32,"label",66),S(33,"\xC1rea"),g(),h(34,"select",67)(35,"option",65),S(36,"Seleccionar \xE1rea"),g(),G(37,TP,2,2,"option",17),g(),G(38,IP,2,0,"div",58),g(),h(39,"div",55)(40,"div",68),L(41,"input",69),h(42,"label",70),S(43,"Documento p\xFAblico"),g()(),h(44,"small",4),S(45,"Los documentos p\xFAblicos pueden ser vistos por todos los usuarios."),g()(),h(46,"div",71)(47,"h4"),S(48,"Metadatos personalizados"),g(),h(49,"div",72),G(50,FP,8,5,"div",73),h(51,"button",74),K("click",function(){ne(i);let r=j();return re(r.agregarMetadato())}),L(52,"i",7),S(53," Agregar metadato "),g()()(),h(54,"div",75)(55,"button",76),K("click",function(){ne(i);let r=j();return re(r.cerrarModal())}),S(56," Cancelar "),g(),h(57,"button",77),S(58),g()()()()()()}if(e&2){let i,n,r,o,a,s,c=j();E(5),le(c.isEditing?"Editar documento":"Nuevo documento"),E(4),I("formGroup",c.documentoForm),E(4),pe("is-invalid",((i=c.documentoForm.get("titulo"))==null?null:i.invalid)&&((i=c.documentoForm.get("titulo"))==null?null:i.touched)),E(),I("ngIf",((n=c.documentoForm.get("titulo"))==null?null:n.invalid)&&((n=c.documentoForm.get("titulo"))==null?null:n.touched)),E(12),pe("is-invalid",((r=c.documentoForm.get("tipo_id"))==null?null:r.invalid)&&((r=c.documentoForm.get("tipo_id"))==null?null:r.touched)),E(3),I("ngForOf",c.tiposDocumento),E(),I("ngIf",((o=c.documentoForm.get("tipo_id"))==null?null:o.invalid)&&((o=c.documentoForm.get("tipo_id"))==null?null:o.touched)),E(4),pe("is-invalid",((a=c.documentoForm.get("area_id"))==null?null:a.invalid)&&((a=c.documentoForm.get("area_id"))==null?null:a.touched)),E(3),I("ngForOf",c.areas),E(),I("ngIf",((s=c.documentoForm.get("area_id"))==null?null:s.invalid)&&((s=c.documentoForm.get("area_id"))==null?null:s.touched)),E(12),I("ngForOf",c.metadatosArray.controls),E(7),I("disabled",c.documentoForm.invalid),E(),Pe(" ",c.isEditing?"Actualizar":"Crear"," ")}}function LP(e,t){e&1&&(h(0,"div",94),S(1," No hay versiones disponibles para este documento. "),g())}function BP(e,t){if(e&1){let i=Le();h(0,"button",108),K("click",function(){ne(i);let r=j().$implicit,o=j(3);return re(o.descargarVersion(r))}),L(1,"i",109),g()}}function jP(e,t){if(e&1&&(h(0,"div",110),L(1,"i",111),S(2),g()),e&2){let i=j().$implicit;E(2),Pe(" ",i.comentarios," ")}}function VP(e,t){if(e&1&&(h(0,"div",95)(1,"div",96)(2,"div",97)(3,"span",98),S(4),g(),h(5,"span",99),S(6),xa(7,"date"),g()(),h(8,"div",100),G(9,BP,2,0,"button",101),g()(),h(10,"div",102)(11,"div",103),L(12,"i",104),S(13),g(),h(14,"div",105),L(15,"i",106),S(16),g(),G(17,jP,3,1,"div",107),g()()),e&2){let i=t.$implicit,n=j(3);E(4),Pe("v",i.version,""),E(2),le(wa(7,6,i.fecha_subida,"dd/MM/yyyy HH:mm")),E(3),I("ngIf",n.tienePermisoDescargar()),E(4),Pe(" ",i.nombre_archivo||"documento.pdf"," "),E(3),Pe(" ",i.subido_por.username," "),E(),I("ngIf",i.comentarios)}}function zP(e,t){e&1&&(h(0,"div",78),S(1," El archivo es obligatorio. "),g())}function HP(e,t){if(e&1){let i=Le();h(0,"div")(1,"div",84)(2,"h4"),S(3,"Historial de versiones"),g(),G(4,LP,2,0,"div",85)(5,VP,18,9,"div",86),g(),h(6,"div",87)(7,"h4"),S(8,"Subir nueva versi\xF3n"),g(),h(9,"form",54),K("ngSubmit",function(){ne(i);let r=j(2);return re(r.guardarVersion())}),h(10,"div",55)(11,"label",61),S(12,"Archivo"),g(),h(13,"div",88)(14,"input",89),K("change",function(r){ne(i);let o=j(2);return re(o.onFileChange(r))}),g(),h(15,"label",90),L(16,"i",91),S(17," Seleccionar archivo "),g()(),G(18,zP,2,0,"div",58),h(19,"small",4),S(20,"Formatos permitidos: PDF, DOCX, XLSX (m\xE1x. 10MB)"),g()(),h(21,"div",55)(22,"label",92),S(23,"Comentarios"),g(),L(24,"textarea",93),g(),h(25,"div",75)(26,"button",76),K("click",function(){ne(i);let r=j(2);return re(r.cerrarModal())}),S(27," Cancelar "),g(),h(28,"button",77),S(29," Subir versi\xF3n "),g()()()()()}if(e&2){let i,n=j(2);E(4),I("ngIf",n.documentoSinVersiones),E(),I("ngForOf",n.documentoActual==null?null:n.documentoActual.versiones),E(4),I("formGroup",n.versionForm),E(9),I("ngIf",((i=n.versionForm.get("archivo"))==null?null:i.invalid)&&((i=n.versionForm.get("archivo"))==null?null:i.touched)),E(10),I("disabled",n.versionForm.invalid)}}function $P(e,t){if(e&1){let i=Le();h(0,"div",47)(1,"div",48),K("click",function(){ne(i);let r=j();return re(r.cerrarModal())}),g(),h(2,"div",49)(3,"div",50)(4,"h3"),S(5,"Versiones del documento"),g(),h(6,"button",51),K("click",function(){ne(i);let r=j();return re(r.cerrarModal())}),L(7,"i",52),g()(),h(8,"div",53),G(9,HP,30,5,"div",0),g()()()}if(e&2){let i=j();E(9),I("ngIf",i.currentDocumentoId)}}function WP(e,t){if(e&1){let i=Le();h(0,"div",121),K("click",function(){let r=ne(i).$implicit,o=j(2);return re(o.agregarUsuarioPermiso(r))}),S(1),g()}if(e&2){let i=t.$implicit;E(),Pe(" ",i.username," ")}}function UP(e,t){if(e&1){let i=Le();h(0,"div",122)(1,"div",123),L(2,"input",124),h(3,"span"),S(4),g()(),h(5,"div",125)(6,"div",68),L(7,"input",126),h(8,"label",127),S(9,"Ver"),g()(),h(10,"div",68),L(11,"input",128),h(12,"label",127),S(13,"Editar"),g()(),h(14,"div",68),L(15,"input",129),h(16,"label",127),S(17,"Descargar"),g()(),h(18,"div",68),L(19,"input",130),h(20,"label",127),S(21,"Eliminar"),g()(),h(22,"button",83),K("click",function(){let r=ne(i).index,o=j(2);return re(o.eliminarUsuarioPermiso(r))}),L(23,"i",52),g()()()}if(e&2){let i,n=t.$implicit,r=t.index;I("formGroupName",r),E(4),le((i=n.get("username"))==null?null:i.value),E(3),I("id","puede_ver_"+r),E(),I("for","puede_ver_"+r),E(3),I("id","puede_editar_"+r),E(),I("for","puede_editar_"+r),E(3),I("id","puede_descargar_"+r),E(),I("for","puede_descargar_"+r),E(3),I("id","puede_eliminar_"+r),E(),I("for","puede_eliminar_"+r)}}function GP(e,t){e&1&&(h(0,"div",131),S(1," No hay permisos asignados. Agregue usuarios para gestionar sus permisos. "),g())}function qP(e,t){if(e&1){let i=Le();h(0,"div",47)(1,"div",48),K("click",function(){ne(i);let r=j();return re(r.cerrarModal())}),g(),h(2,"div",49)(3,"div",50)(4,"h3"),S(5,"Permisos del documento"),g(),h(6,"button",51),K("click",function(){ne(i);let r=j();return re(r.cerrarModal())}),L(7,"i",52),g()(),h(8,"div",53)(9,"form",54),K("ngSubmit",function(){ne(i);let r=j();return re(r.guardarPermisos())}),h(10,"div",112)(11,"h4"),S(12,"Usuarios con acceso"),g(),h(13,"div",113)(14,"button",114),K("click",function(){ne(i);let r=j();return re(r.abrirDropdown())}),S(15," Agregar usuario "),g(),h(16,"div",115),G(17,WP,2,1,"div",116),g()()(),h(18,"div",117),G(19,UP,24,10,"div",118),g(),G(20,GP,2,0,"div",119),h(21,"div",75)(22,"button",76),K("click",function(){ne(i);let r=j();return re(r.cerrarModal())}),S(23," Cancelar "),g(),h(24,"button",120),S(25," Guardar permisos "),g()()()()()()}if(e&2){let i=j();E(9),I("formGroup",i.permisoForm),E(7),pe("show",i.isDropdownOpen),E(),I("ngForOf",i.usuarios),E(2),I("ngForOf",i.usuariosPermisosArray.controls),E(),I("ngIf",i.usuariosPermisosArray.length===0)}}function YP(e,t){if(e&1){let i=Le();h(0,"div",79)(1,"div",80)(2,"div",55),L(3,"input",81),g(),h(4,"div",55),L(5,"input",82),g(),h(6,"button",83),K("click",function(){let r=ne(i).index,o=j(2);return re(o.eliminarMetadato(r))}),L(7,"i",52),g()()()}if(e&2){let i,n,r=t.$implicit,o=t.index;I("formGroupName",o),E(3),pe("is-invalid",((i=r.get("clave"))==null?null:i.invalid)&&((i=r.get("clave"))==null?null:i.touched)),E(2),pe("is-invalid",((n=r.get("valor"))==null?null:n.invalid)&&((n=r.get("valor"))==null?null:n.touched))}}function KP(e,t){if(e&1){let i=Le();h(0,"div",47)(1,"div",48),K("click",function(){ne(i);let r=j();return re(r.cerrarModal())}),g(),h(2,"div",49)(3,"div",50)(4,"h3"),S(5,"Metadatos del documento"),g(),h(6,"button",51),K("click",function(){ne(i);let r=j();return re(r.cerrarModal())}),L(7,"i",52),g()(),h(8,"div",53)(9,"form",54),K("ngSubmit",function(){ne(i);let r=j();return re(r.guardarMetadatos())}),h(10,"div",72),G(11,YP,8,5,"div",73),h(12,"button",74),K("click",function(){ne(i);let r=j();return re(r.agregarMetadato())}),L(13,"i",7),S(14," Agregar metadato "),g()(),h(15,"div",75)(16,"button",76),K("click",function(){ne(i);let r=j();return re(r.cerrarModal())}),S(17," Cancelar "),g(),h(18,"button",120),S(19," Guardar metadatos "),g()()()()()()}if(e&2){let i=j();E(9),I("formGroup",i.documentoForm),E(2),I("ngForOf",i.metadatosArray.controls)}}var pl=class e{constructor(t,i,n){this.fb=t;this.documentosService=i;this.usersService=n;this.documentoForm=this.fb.group({titulo:["",[dt.required]],descripcion:[""],tipo_id:["",[dt.required]],area_id:["",[dt.required]],es_publico:[!1],metadatos:this.fb.array([])}),this.versionForm=this.fb.group({comentarios:[""]}),this.permisoForm=this.fb.group({usuarios:this.fb.array([])})}archivoSeleccionado=null;documentos=[];documentosFiltrados=[];documentoForm;versionForm;permisoForm;isModalOpen=!1;isVersionModalOpen=!1;isPermisosModalOpen=!1;isMetadatosModalOpen=!1;isDropdownOpen=!1;isEditing=!1;currentDocumentoId=null;currentVersion=null;searchTerm="";tipoFilter="all";areaFilter="all";tiposDocumento=[];areas=[];usuarios=[];roles=[];currentUser={id:1,username:"admin",email:"admin@example.com",rol:"Administrador"};selectedFile=null;selectedDocument={id:"",titulo:"",descripcion:"",es_publico:!1,versiones:[],metadatos:[],permisos:[],fecha_creacion:new Date,fecha_modificacion:new Date,creado_por:{id:0,username:"",email:""},tipo:null,area:null};modalVisible=!1;cargando=!0;ngOnInit(){this.fetchData(),this.aplicarFiltros()}get metadatosArray(){return this.documentoForm.get("metadatos")}get usuariosPermisosArray(){return console.log(this.permisoForm.get("usuarios")),this.permisoForm.get("usuarios")}agregarMetadato(t="",i="",n=null){this.metadatosArray.push(this.fb.group({id:[n],clave:[t,dt.required],valor:[i,dt.required]}))}eliminarMetadato(t){this.metadatosArray.removeAt(t)}agregarUsuarioPermiso(t,i=!0,n=!1,r=!1,o=!1){this.usuariosPermisosArray.controls.some(s=>s.get("usuario_id")?.value===t.id)||this.usuariosPermisosArray.push(this.fb.group({usuario_id:[t.id,dt.required],username:[t.username],puede_ver:[i],puede_editar:[n],puede_descargar:[r],puede_eliminar:[o]}))}eliminarUsuarioPermiso(t){this.usuariosPermisosArray.removeAt(t)}abrirModalCrear(){for(this.isEditing=!1,this.currentDocumentoId=null,this.documentoForm.reset({es_publico:!1});this.metadatosArray.length;)this.metadatosArray.removeAt(0);this.isModalOpen=!0}abrirModalEditar(t){for(this.isEditing=!0,this.currentDocumentoId=t.id,this.documentoForm.patchValue({titulo:t.titulo,descripcion:t.descripcion,tipo_id:t.tipo?.id,area_id:t.area?.id,es_publico:t.es_publico});this.metadatosArray.length;)this.metadatosArray.removeAt(0);t.metadatos&&t.metadatos.length>0&&t.metadatos.forEach(i=>{this.agregarMetadato(i.clave,i.valor)}),this.isModalOpen=!0}abrirModalVersiones(t){this.currentDocumentoId=t.id,this.versionForm.reset(),this.isVersionModalOpen=!0}abrirModalPermisos(t){for(this.currentDocumentoId=t.id;this.usuariosPermisosArray.length;)this.usuariosPermisosArray.removeAt(0);t.permisos&&t.permisos.length>0&&t.permisos.forEach(i=>{this.agregarUsuarioPermiso(i.usuario,i.puede_ver,i.puede_editar,i.puede_descargar||!1,i.puede_eliminar||!1)}),this.isPermisosModalOpen=!0}abrirModalMetadatos(t){for(this.currentDocumentoId=t.id;this.metadatosArray.length;)this.metadatosArray.removeAt(0);t.metadatos&&t.metadatos.length>0&&t.metadatos.forEach(i=>{this.agregarMetadato(i.clave,i.valor,i.id)}),this.isMetadatosModalOpen=!0}cerrarModal(){this.isModalOpen=!1,this.isVersionModalOpen=!1,this.isPermisosModalOpen=!1,this.isMetadatosModalOpen=!1}guardarDocumento(){if(this.documentoForm.invalid)return;let t=this.documentoForm.value,i=this.tiposDocumento.find(o=>o.id===parseInt(t.tipo_id)),n=this.areas.find(o=>o.id===parseInt(t.area_id));if(!i||!n){alert("Debe seleccionar un tipo y un \xE1rea v\xE1lidos");return}let r=t.metadatos.map((o,a)=>({id:null,documento_id:this.currentDocumentoId||"",clave:o.clave,valor:o.valor}));if(this.isEditing&&this.currentDocumentoId){let o=this.documentos.findIndex(a=>a.id===this.currentDocumentoId);o!==-1&&(this.documentos[o]=Be(X({},this.documentos[o]),{titulo:t.titulo,descripcion:t.descripcion,tipo:i,area:n,es_publico:t.es_publico,fecha_modificacion:new Date,metadatos:r}))}else{let o={titulo:t.titulo,descripcion:t.descripcion,tipo:i.id,area:n.id,es_publico:t.es_publico,metadatos:r,versiones:[]};this.archivoSeleccionado&&this.documentosService.addDoc(o,this.archivoSeleccionado).subscribe({next:()=>{alert("Documento creado conxito"),window.location.reload(),this.cerrarModal()},error:a=>{alert("Error al crear documento"),console.error("Error al crear documento:",a)}})}this.aplicarFiltros(),this.cerrarModal()}fetchData(){this.documentosService.getData().subscribe({next:t=>{console.log(t),this.documentos=t.documentos,this.tiposDocumento=t.tipos_documento,this.areas=t.areas,this.aplicarFiltros(),this.cargando=!1}}),this.usersService.getUsuarios().subscribe(t=>{this.usuarios=t})}onFileSelected(t){let i=t.target;i.files&&i.files.length>0&&(this.archivoSeleccionado=i.files[0])}guardarVersion(){if(this.versionForm.invalid||!this.currentDocumentoId||!this.selectedFile){console.log("error"),console.log(this.versionForm.value);return}console.log(this.versionForm.value);let t=this.versionForm.value;this.documentosService.addNewVersion(this.currentDocumentoId,this.selectedFile).subscribe({next:i=>{console.log("Documento subido",i),this.cerrarModal()},error:i=>{console.error("Error al subir el documento",i)}})}onFileChange(t){let i=t.target;i.files&&i.files.length>0?(this.selectedFile=i.files[0],console.log("Archivo seleccionado:",this.selectedFile.name)):this.selectedFile=null}guardarPermisos(){if(!this.currentDocumentoId)return;let t=this.permisoForm.value,i=this.documentos.find(r=>r.id===this.currentDocumentoId);if(!i)return;let n=t.usuarios.map((r,o)=>{let a=this.usuarios.find(s=>s.id===parseInt(r.usuario_id));if(!a)throw new Error("Usuario no encontrado");return{id:o+1,documento_id:this.currentDocumentoId||"",usuario:a,puede_ver:r.puede_ver,puede_editar:r.puede_editar,puede_descargar:r.puede_descargar,puede_eliminar:r.puede_eliminar}});i.permisos=n,this.cerrarModal()}guardarMetadatos(){if(!this.currentDocumentoId)return;let t=this.documentoForm.value,i=this.documentos.find(r=>r.id===this.currentDocumentoId);if(!i)return;let n=t.metadatos.map((r,o)=>({id:r.id??null,documento_id:this.currentDocumentoId||"",clave:r.clave,valor:r.valor}));console.log("Form values:"),console.log(t.metadatos),console.log("Metadatos:"),console.log(n),this.documentosService.addMetadata(this.currentDocumentoId,n).subscribe({next:r=>{i.metadatos=n,alert("Metadato agregado"+r)},error:r=>{console.error("Error al agregar metadato",r),alert("Error al agregar metadato"+r.error.error)}}),this.cerrarModal()}eliminarDocumento(t){confirm("\xBFEst\xE1s seguro de que deseas eliminar este documento?")&&(this.documentos=this.documentos.filter(i=>i.id!==t),this.aplicarFiltros())}aplicarFiltros(){let t=[...this.documentos];if(this.searchTerm){let i=this.searchTerm.toLowerCase();t=t.filter(n=>n.titulo.toLowerCase().includes(i)||n.descripcion.toLowerCase().includes(i)||n.metadatos&&n.metadatos.some(r=>r.valor.toLowerCase().includes(i)))}this.tipoFilter!=="all"&&(t=t.filter(i=>i.tipo?.id===parseInt(this.tipoFilter))),this.areaFilter!=="all"&&(t=t.filter(i=>i.area?.id===parseInt(this.areaFilter))),this.documentosFiltrados=t}tienePermiso(t,i){if(t.creado_por.id===this.currentUser.id||this.currentUser.rol==="Administrador"||t.es_publico&&i==="ver")return!0;if(t.permisos){let n=t.permisos.find(r=>r.usuario.id===this.currentUser.id);if(n)switch(i){case"ver":return n.puede_ver;case"editar":return n.puede_editar;case"descargar":return n.puede_descargar||!1;case"eliminar":return n.puede_eliminar||!1}}return!1}obtenerUltimaVersion(t){return!t.versiones||t.versiones.length===0?null:t.versiones[0]}descargarVersion(t){this.documentosService.downloadDoc(t.id).subscribe({next:i=>{(0,fy.saveAs)(i,t.nombre_archivo)},error:i=>{console.error("Error al descargar archivo:",i)}})}get documentoActual(){return this.documentos.find(t=>t.id===this.currentDocumentoId)}get documentoSinVersiones(){return this.documentoActual?.versiones?.length===0}getUsuarios(){return this.usuarios}tienePermisoDescargar(){return this.documentoActual?this.tienePermiso(this.documentoActual,"descargar"):!1}abrirDropdown(){this.isDropdownOpen=!this.isDropdownOpen}verDetallesDocumento(t){this.selectedDocument=t,this.modalVisible=!0}closeModal(){this.modalVisible=!1}static \u0275fac=function(i){return new(i||e)(de(Po),de(Ro),de(As))};static \u0275cmp=ye({type:e,selectors:[["app-documents"]],decls:57,vars:14,consts:[[4,"ngIf"],[1,"documents-container"],[1,"documents-header"],[1,"header-title"],[1,"text-muted"],[1,"header-actions"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"filters-container"],[1,"search-box"],["type","text","placeholder","Buscar documentos...",1,"form-control",3,"ngModelChange","input","ngModel"],[1,"fas","fa-search","search-icon"],[1,"filters"],[1,"filter-group"],["for","tipo-filter"],["id","tipo-filter",1,"form-control",3,"ngModelChange","change","ngModel"],["value","all"],[3,"value",4,"ngFor","ngForOf"],["for","area-filter"],["id","area-filter",1,"form-control",3,"ngModelChange","change","ngModel"],[1,"documents-table-container"],[1,"documents-table"],[4,"ngFor","ngForOf"],["class","modal",4,"ngIf"],[3,"close","documento","visible"],[3,"value"],["class","text-muted",4,"ngIf"],[1,"actions-container"],["class","btn-icon","title","Ver detalles",3,"click",4,"ngIf"],["class","btn-icon","title","Editar documento",3,"click",4,"ngIf"],["class","btn-icon","title","Gestionar versiones",3,"click",4,"ngIf"],["class","btn-icon","title","Gestionar permisos",3,"click",4,"ngIf"],["class","btn-icon","title","Gestionar metadatos",3,"click",4,"ngIf"],["class","btn-icon btn-danger","title","Eliminar documento",3,"click",4,"ngIf"],["title","Ver detalles",1,"btn-icon",3,"click"],[1,"fas","fa-eye"],["title","Editar documento",1,"btn-icon",3,"click"],[1,"fas","fa-edit"],["title","Gestionar versiones",1,"btn-icon",3,"click"],[1,"fas","fa-code-branch"],["title","Gestionar permisos",1,"btn-icon",3,"click"],[1,"fas","fa-user-lock"],["title","Gestionar metadatos",1,"btn-icon",3,"click"],[1,"fas","fa-tags"],["title","Eliminar documento",1,"btn-icon","btn-danger",3,"click"],[1,"fas","fa-trash"],["colspan","7",1,"no-results"],[1,"modal"],[1,"modal-backdrop",3,"click"],[1,"modal-content"],[1,"modal-header"],[1,"btn-close",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","titulo",1,"form-label"],["type","text","id","titulo","formControlName","titulo",1,"form-control"],["class","form-error",4,"ngIf"],["for","descripcion",1,"form-label"],["id","descripcion","formControlName","descripcion","rows","3",1,"form-control"],["for","archivo",1,"form-label"],["type","file","id","archivo","required","","accept",".pdf,.docx,.xlsx",3,"change"],["for","tipo_id",1,"form-label"],["id","tipo_id","formControlName","tipo_id",1,"form-control"],["value",""],["for","area_id",1,"form-label"],["id","area_id","formControlName","area_id",1,"form-control"],[1,"checkbox-container"],["type","checkbox","id","es_publico","formControlName","es_publico"],["for","es_publico",1,"checkbox-label"],[1,"form-section"],["formArrayName","metadatos"],["class","metadato-row",3,"formGroupName",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-outline","btn-sm",3,"click"],[1,"modal-footer"],["type","button",1,"btn","btn-outline",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"form-error"],[1,"metadato-row",3,"formGroupName"],[1,"metadato-fields"],["type","text","formControlName","clave","placeholder","Clave",1,"form-control"],["type","text","formControlName","valor","placeholder","Valor",1,"form-control"],["type","button",1,"btn-icon","btn-danger",3,"click"],[1,"version-list"],["class","no-versions",4,"ngIf"],["class","version-item",4,"ngFor","ngForOf"],[1,"version-upload"],[1,"file-upload"],["type","file","id","archivo","required","",1,"file-input",3,"change"],["for","archivo",1,"file-label"],[1,"fas","fa-cloud-upload-alt"],["for","comentarios",1,"form-label"],["id","comentarios","formControlName","comentarios","rows","3","placeholder","Describa los cambios realizados en esta versi\xF3n",1,"form-control"],[1,"no-versions"],[1,"version-item"],[1,"version-header"],[1,"version-info"],[1,"version-number"],[1,"version-date"],[1,"version-actions"],["class","btn-icon","title","Descargar versi\xF3n",3,"click",4,"ngIf"],[1,"version-details"],[1,"version-file"],[1,"fas","fa-file-pdf"],[1,"version-user"],[1,"fas","fa-user"],["class","version-comments",4,"ngIf"],["title","Descargar versi\xF3n",1,"btn-icon",3,"click"],[1,"fas","fa-download"],[1,"version-comments"],[1,"fas","fa-comment"],[1,"permisos-header"],[1,"dropdown"],["type","button",1,"btn","btn-outline","btn-sm","dropdown-toggle",3,"click"],[1,"dropdown-menu"],["class","dropdown-item",3,"click",4,"ngFor","ngForOf"],["formArrayName","usuarios"],["class","permiso-row",3,"formGroupName",4,"ngFor","ngForOf"],["class","no-permisos",4,"ngIf"],["type","submit",1,"btn","btn-primary"],[1,"dropdown-item",3,"click"],[1,"permiso-row",3,"formGroupName"],[1,"permiso-user"],["type","hidden","formControlName","usuario_id"],[1,"permiso-options"],["type","checkbox","formControlName","puede_ver",3,"id"],[1,"checkbox-label",3,"for"],["type","checkbox","formControlName","puede_editar",3,"id"],["type","checkbox","formControlName","puede_descargar",3,"id"],["type","checkbox","formControlName","puede_eliminar",3,"id"],[1,"no-permisos"]],template:function(i,n){i&1&&(G(0,vP,2,0,"div",0),h(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1"),S(5,"Documentos"),g(),h(6,"p",4),S(7,"Gestiona tus documentos y archivos"),g()(),h(8,"div",5)(9,"button",6),K("click",function(){return n.abrirModalCrear()}),L(10,"i",7),S(11," Nuevo Documento "),g()()(),h(12,"div",8)(13,"div",9)(14,"input",10),Yn("ngModelChange",function(o){return qn(n.searchTerm,o)||(n.searchTerm=o),o}),K("input",function(){return n.aplicarFiltros()}),g(),L(15,"i",11),g(),h(16,"div",12)(17,"div",13)(18,"label",14),S(19,"Tipo:"),g(),h(20,"select",15),Yn("ngModelChange",function(o){return qn(n.tipoFilter,o)||(n.tipoFilter=o),o}),K("change",function(){return n.aplicarFiltros()}),h(21,"option",16),S(22,"Todos"),g(),G(23,_P,2,2,"option",17),g()(),h(24,"div",13)(25,"label",18),S(26,"\xC1rea:"),g(),h(27,"select",19),Yn("ngModelChange",function(o){return qn(n.areaFilter,o)||(n.areaFilter=o),o}),K("change",function(){return n.aplicarFiltros()}),h(28,"option",16),S(29,"Todas"),g(),G(30,bP,2,2,"option",17),g()()()(),h(31,"div",20)(32,"table",21)(33,"thead")(34,"tr")(35,"th"),S(36,"T\xEDtulo"),g(),h(37,"th"),S(38,"Tipo"),g(),h(39,"th"),S(40,"\xC1rea"),g(),h(41,"th"),S(42,"\xDAltima versi\xF3n"),g(),h(43,"th"),S(44,"Fecha modificaci\xF3n"),g(),h(45,"th"),S(46,"Creado por"),g(),h(47,"th"),S(48,"Acciones"),g()()(),h(49,"tbody"),G(50,AP,23,16,"tr",22)(51,PP,3,0,"tr",0),g()()(),G(52,NP,59,16,"div",23)(53,$P,10,1,"div",23)(54,qP,26,6,"div",23)(55,KP,20,2,"div",23),g(),h(56,"app-document-details",24),K("close",function(){return n.closeModal()}),g()),i&2&&(I("ngIf",n.cargando),E(14),Gn("ngModel",n.searchTerm),E(6),Gn("ngModel",n.tipoFilter),E(3),I("ngForOf",n.tiposDocumento),E(4),Gn("ngModel",n.areaFilter),E(3),I("ngForOf",n.areas),E(20),I("ngForOf",n.documentosFiltrados),E(),I("ngIf",n.documentosFiltrados.length===0),E(),I("ngIf",n.isModalOpen),E(),I("ngIf",n.isVersionModalOpen),E(),I("ngIf",n.isPermisosModalOpen),E(),I("ngIf",n.isMetadatosModalOpen),E(),I("documento",n.selectedDocument)("visible",n.modalVisible))},dependencies:[zt,Mi,pi,vs,hr,Ao,Ju,ep,fr,cl,Ds,Mo,Do,An,Gr,Zu,Qu,ko,dl,np],styles:['.documents-container[_ngcontent-%COMP%]{padding:var(--spacing-md)}.documents-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--spacing-lg)}.header-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:var(--spacing-xs);color:var(--color-primary)}.filters-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:var(--spacing-md);margin-bottom:var(--spacing-lg);background-color:#fff;padding:var(--spacing-md);border-radius:var(--border-radius-md);box-shadow:var(--shadow-sm)}.search-box[_ngcontent-%COMP%]{flex:1;position:relative;min-width:250px}.search-icon[_ngcontent-%COMP%]{position:absolute;right:var(--spacing-md);top:50%;transform:translateY(-50%);color:var(--color-text-light)}.filters[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-md)}.filter-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-xs)}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{white-space:nowrap;font-weight:500}.filter-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:auto;min-width:150px}.documents-table-container[_ngcontent-%COMP%]{background-color:#fff;border-radius:var(--border-radius-md);box-shadow:var(--shadow-sm);overflow:hidden;margin-bottom:var(--spacing-lg)}.documents-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.documents-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .documents-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:var(--spacing-md);text-align:left;border-bottom:1px solid var(--color-hover)}.documents-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:var(--color-background);font-weight:600;color:var(--color-primary)}.documents-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#00000005}.actions-container[_ngcontent-%COMP%]{display:flex;gap:.5rem}.btn-icon[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;background-color:transparent;border:none;cursor:pointer;color:var(--color-text);transition:all var(--transition-fast)}.btn-icon[_ngcontent-%COMP%]:hover{background-color:var(--color-hover)}.btn-icon.btn-danger[_ngcontent-%COMP%]:hover{background-color:#e74c3c1a;color:var(--color-error)}.modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;z-index:1050}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;z-index:-1}.modal-content[_ngcontent-%COMP%]{background-color:#fff;border-radius:var(--border-radius-md);box-shadow:var(--shadow-lg);width:100%;max-width:700px;max-height:90vh;overflow-y:auto;z-index:1051}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-md) var(--spacing-lg);border-bottom:1px solid var(--color-hover)}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:var(--color-primary)}.btn-close[_ngcontent-%COMP%]{background:none;border:none;font-size:1.2rem;cursor:pointer;color:var(--color-text-light)}.modal-body[_ngcontent-%COMP%]{padding:var(--spacing-lg)}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:var(--spacing-md);padding-top:var(--spacing-lg);border-top:1px solid var(--color-hover)}.file-upload[_ngcontent-%COMP%]{position:relative;margin-bottom:var(--spacing-xs)}.file-input[_ngcontent-%COMP%]{position:absolute;left:0;top:0;opacity:0;width:100%;height:100%;cursor:pointer}.file-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm);padding:var(--spacing-sm) var(--spacing-md);background-color:var(--color-background);border:1px dashed var(--color-hover);border-radius:var(--border-radius-sm);cursor:pointer;transition:all var(--transition-fast)}.file-label[_ngcontent-%COMP%]:hover{background-color:var(--color-hover)}.no-results[_ngcontent-%COMP%]{text-align:center;padding:var(--spacing-xl);color:var(--color-text-light)}.checkbox-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-xs);margin-bottom:var(--spacing-xs)}.checkbox-label[_ngcontent-%COMP%]{margin-bottom:0;cursor:pointer}.form-section[_ngcontent-%COMP%]{margin-top:var(--spacing-lg);padding-top:var(--spacing-md);border-top:1px solid var(--color-hover)}.form-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:var(--spacing-md);color:var(--color-primary)}.metadato-row[_ngcontent-%COMP%]{margin-bottom:var(--spacing-sm)}.metadato-fields[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-xs)}.metadato-fields[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{flex:1}.version-list[_ngcontent-%COMP%]{margin-bottom:var(--spacing-lg)}.version-item[_ngcontent-%COMP%]{border:1px solid var(--color-hover);border-radius:var(--border-radius-sm);margin-bottom:var(--spacing-md);overflow:hidden}.version-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-sm) var(--spacing-md);background-color:var(--color-background);border-bottom:1px solid var(--color-hover)}.version-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-md)}.version-number[_ngcontent-%COMP%]{font-weight:600;color:var(--color-primary)}.version-date[_ngcontent-%COMP%]{color:var(--color-text-light);font-size:.9rem}.version-details[_ngcontent-%COMP%]{padding:var(--spacing-md)}.version-file[_ngcontent-%COMP%], .version-user[_ngcontent-%COMP%], .version-comments[_ngcontent-%COMP%]{margin-bottom:var(--spacing-xs);display:flex;align-items:center;gap:var(--spacing-sm)}.version-file[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .version-user[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .version-comments[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--color-text-light);width:16px}.version-upload[_ngcontent-%COMP%]{padding-top:var(--spacing-lg);border-top:1px solid var(--color-hover)}.no-versions[_ngcontent-%COMP%]{padding:var(--spacing-md);text-align:center;color:var(--color-text-light);background-color:var(--color-background);border-radius:var(--border-radius-sm)}.permisos-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--spacing-md)}.permiso-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-sm) var(--spacing-md);border:1px solid var(--color-hover);border-radius:var(--border-radius-sm);margin-bottom:var(--spacing-sm)}.permiso-options[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-md)}.no-permisos[_ngcontent-%COMP%]{padding:var(--spacing-md);text-align:center;color:var(--color-text-light);background-color:var(--color-background);border-radius:var(--border-radius-sm);margin-bottom:var(--spacing-lg)}.dropdown[_ngcontent-%COMP%]{position:relative;display:inline-block}.dropdown-toggle[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-xs)}.dropdown-toggle[_ngcontent-%COMP%]:after{content:"";display:inline-block;margin-left:.255em;vertical-align:.255em;border-top:.3em solid;border-right:.3em solid transparent;border-bottom:0;border-left:.3em solid transparent}.dropdown-menu[_ngcontent-%COMP%]{position:absolute;top:100%;right:0;z-index:1000;display:none;min-width:10rem;padding:.5rem 0;margin:.125rem 0 0;font-size:1rem;color:var(--color-text);text-align:left;list-style:none;background-color:#fff;background-clip:padding-box;border:1px solid var(--color-hover);border-radius:var(--border-radius-sm);box-shadow:var(--shadow-sm)}.dropdown-menu.show[_ngcontent-%COMP%]{display:block}.dropdown-item[_ngcontent-%COMP%]{display:block;width:100%;padding:.25rem 1rem;clear:both;font-weight:400;color:var(--color-text);text-align:inherit;white-space:nowrap;background-color:transparent;border:0;cursor:pointer}.dropdown-item[_ngcontent-%COMP%]:hover, .dropdown-item[_ngcontent-%COMP%]:focus{color:var(--color-text);text-decoration:none;background-color:var(--color-hover)}@media (max-width: 992px){.filters-container[_ngcontent-%COMP%]{flex-direction:column}.search-box[_ngcontent-%COMP%], .filters[_ngcontent-%COMP%]{width:100%}}@media (max-width: 768px){.documents-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:var(--spacing-md)}.filters[_ngcontent-%COMP%]{flex-direction:column}.documents-table[_ngcontent-%COMP%]{display:block;overflow-x:auto}.permiso-row[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.permiso-options[_ngcontent-%COMP%]{margin-top:var(--spacing-sm);flex-wrap:wrap}}']})};function XP(e,t){if(e&1&&(h(0,"span",50),S(1),g()),e&2){let i=j().$implicit;E(),le(i.tipo.nombre)}}function ZP(e,t){if(e&1&&(h(0,"div",37)(1,"div",38),L(2,"i",39),g(),h(3,"div",40)(4,"h4"),S(5),g(),h(6,"div",41),G(7,XP,2,1,"span",42),h(8,"span",43),S(9),g()(),h(10,"p",44),S(11),g()(),h(12,"div",45)(13,"button",46),L(14,"i",47),g(),h(15,"button",48),L(16,"i",49),g()()()),e&2){let i=t.$implicit,n=j();E(2),I("ngClass",i.tipo?"fa-file-alt":"fa-file"),E(3),le(i.titulo),E(2),I("ngIf",i.tipo),E(2),le(n.formatearFechaRelativa(i.fecha_modificacion)),E(2),le(i.descripcion)}}function QP(e,t){e&1&&(h(0,"div",51),L(1,"i",52),h(2,"p"),S(3,"No hay documentos recientes"),g()())}function JP(e,t){if(e&1&&(h(0,"div",53)(1,"div",54)(2,"span"),S(3),g(),h(4,"span",55),S(5),g()(),h(6,"div",56),L(7,"div",57),g()()),e&2){let i=t.$implicit;E(3),le(i.nombre),E(2),le(i.valor),E(2),$r("width",i.porcentaje,"%")("background-color",i.color)}}function ek(e,t){e&1&&(h(0,"div",51),L(1,"i",58),h(2,"p"),S(3,"No hay datos disponibles"),g()())}function tk(e,t){if(e&1&&(h(0,"div",59)(1,"div",60),L(2,"i",39),g(),h(3,"div",61)(4,"p",62),S(5),g(),h(6,"span",63),S(7),g()()()),e&2){let i=t.$implicit,n=j();E(),$r("background-color",i.color),E(),I("ngClass",i.icono),E(3),le(i.descripcion),E(2),le(n.formatearFechaRelativa(i.fecha))}}function ik(e,t){e&1&&(h(0,"div",51),L(1,"i",64),h(2,"p"),S(3,"No hay actividad reciente"),g()())}function nk(e,t){if(e&1&&(h(0,"div",53)(1,"div",54)(2,"span"),S(3),g(),h(4,"span",55),S(5),g()(),h(6,"div",56),L(7,"div",57),g()()),e&2){let i=t.$implicit;E(3),le(i.nombre),E(2),le(i.valor),E(2),$r("width",i.porcentaje,"%")("background-color",i.color)}}function rk(e,t){e&1&&(h(0,"div",51),L(1,"i",58),h(2,"p"),S(3,"No hay datos disponibles"),g()())}function ok(e,t){if(e&1&&(h(0,"div",65)(1,"div",38),L(2,"i",10),g(),h(3,"div",40)(4,"h4"),S(5),g(),h(6,"div",41)(7,"span",66),S(8),g()()(),h(9,"div",45)(10,"button",46),L(11,"i",47),g()()()),e&2){let i=t.$implicit;E(5),le(i.titulo),E(3),Pe("Compartido por: ",i.creado_por.username,"")}}function ak(e,t){e&1&&(h(0,"div",51),L(1,"i",67),h(2,"p"),S(3,"No hay documentos compartidos contigo"),g()())}var ml=class e{constructor(t,i){this.router=t;this.docsService=i}currentUser={id:1,username:"admin",email:"admin@example.com",rol:"Administrador"};totalDocumentos=0;documentosPublicos=0;documentosPrivados=0;totalVersiones=0;documentosRecientes=[];documentosPorTipo=[];documentosPorArea=[];actividadReciente=[];documentosCompartidos=[];tiposDocumento=[];areas=[];documentos=[];usuarios=[];colores=["var(--color-primary)","var(--color-secondary)","var(--color-success)","var(--color-warning)","var(--color-info)"];ngOnInit(){this.cargarDatosEjemplo(),this.calcularEstadisticas(),this.prepararDocumentosRecientes(),this.prepararDocumentosPorTipo(),this.prepararDocumentosPorArea(),this.prepararActividadReciente(),this.prepararDocumentosCompartidos(),this.fetchData()}cargarDatosEjemplo(){this.tiposDocumento=[{id:1,nombre:"Contrato"},{id:2,nombre:"Factura"},{id:3,nombre:"Informe"},{id:4,nombre:"Solicitud"},{id:5,nombre:"Manual"}],this.areas=[{id:1,nombre:"Recursos Humanos"},{id:2,nombre:"Finanzas"},{id:3,nombre:"Operaciones"},{id:4,nombre:"Marketing"},{id:5,nombre:"Legal"}],this.usuarios=[{id:1,username:"admin",email:"admin@example.com",rol:"Administrador"},{id:2,username:"juan",email:"juan@example.com",rol:"Editor"},{id:3,username:"maria",email:"maria@example.com",rol:"Lector"},{id:4,username:"carlos",email:"carlos@example.com",rol:"Editor"}],this.documentos=[{id:"550e8400-e29b-41d4-a716-446655440000",titulo:"Contrato de servicios",descripcion:"Contrato de prestaci\xF3n de servicios para el cliente XYZ",tipo:this.tiposDocumento[0],area:this.areas[4],creado_por:this.usuarios[0],fecha_creacion:new Date(2023,4,15),fecha_modificacion:new Date(2023,4,20),es_publico:!1,versiones:[{id:1,documento_id:"550e8400-e29b-41d4-a716-446655440000",archivo:"/documentos/legal/contrato/contrato_servicios_v2.pdf",version:2,subido_por:this.usuarios[0],fecha_subida:new Date(2023,4,20),comentarios:"Versi\xF3n final revisada por el departamento legal",nombre_archivo:"contrato_servicios_v2.pdf"},{id:2,documento_id:"550e8400-e29b-41d4-a716-446655440000",archivo:"/documentos/legal/contrato/contrato_servicios_v1.pdf",version:1,subido_por:this.usuarios[1],fecha_subida:new Date(2023,4,15),comentarios:"Versi\xF3n inicial",nombre_archivo:"contrato_servicios_v1.pdf"}],metadatos:[{id:1,documento_id:"550e8400-e29b-41d4-a716-446655440000",clave:"Cliente",valor:"Empresa XYZ"},{id:2,documento_id:"550e8400-e29b-41d4-a716-446655440000",clave:"Valor",valor:"$5,000"}],permisos:[{id:1,documento_id:"550e8400-e29b-41d4-a716-446655440000",usuario:this.usuarios[0],puede_ver:!0,puede_editar:!0,puede_descargar:!0,puede_eliminar:!0},{id:2,documento_id:"550e8400-e29b-41d4-a716-446655440000",usuario:this.usuarios[1],puede_ver:!0,puede_editar:!0,puede_descargar:!0,puede_eliminar:!1}]},{id:"550e8400-e29b-41d4-a716-446655440001",titulo:"Factura #2023-056",descripcion:"Factura por servicios prestados en mayo 2023",tipo:this.tiposDocumento[1],area:this.areas[1],creado_por:this.usuarios[1],fecha_creacion:new Date(2023,5,1),fecha_modificacion:new Date(2023,5,1),es_publico:!1,versiones:[{id:3,documento_id:"550e8400-e29b-41d4-a716-446655440001",archivo:"/documentos/finanzas/factura/factura_2023_056.pdf",version:1,subido_por:this.usuarios[1],fecha_subida:new Date(2023,5,1),comentarios:"Factura emitida",nombre_archivo:"factura_2023_056.pdf"}],metadatos:[{id:3,documento_id:"550e8400-e29b-41d4-a716-446655440001",clave:"Monto",valor:"$1,200"},{id:4,documento_id:"550e8400-e29b-41d4-a716-446655440001",clave:"Estado",valor:"Pendiente"}]},{id:"550e8400-e29b-41d4-a716-446655440002",titulo:"Informe trimestral Q2",descripcion:"Informe de resultados del segundo trimestre",tipo:this.tiposDocumento[2],area:this.areas[2],creado_por:this.usuarios[2],fecha_creacion:new Date(2023,5,10),fecha_modificacion:new Date(2023,5,12),es_publico:!0,versiones:[{id:4,documento_id:"550e8400-e29b-41d4-a716-446655440002",archivo:"/documentos/operaciones/informe/informe_q2_v2.pdf",version:2,subido_por:this.usuarios[2],fecha_subida:new Date(2023,5,12),comentarios:"Versi\xF3n corregida con datos actualizados",nombre_archivo:"informe_q2_v2.pdf"},{id:5,documento_id:"550e8400-e29b-41d4-a716-446655440002",archivo:"/documentos/operaciones/informe/informe_q2_v1.pdf",version:1,subido_por:this.usuarios[2],fecha_subida:new Date(2023,5,10),comentarios:"Versi\xF3n inicial",nombre_archivo:"informe_q2_v1.pdf"}]},{id:"550e8400-e29b-41d4-a716-446655440003",titulo:"Manual de procedimientos",descripcion:"Manual de procedimientos internos actualizado",tipo:this.tiposDocumento[4],area:this.areas[0],creado_por:this.usuarios[0],fecha_creacion:new Date(2023,3,5),fecha_modificacion:new Date(2023,3,5),es_publico:!0,versiones:[{id:6,documento_id:"550e8400-e29b-41d4-a716-446655440003",archivo:"/documentos/rrhh/manual/manual_procedimientos.pdf",version:1,subido_por:this.usuarios[0],fecha_subida:new Date(2023,3,5),comentarios:"Versi\xF3n inicial del manual",nombre_archivo:"manual_procedimientos.pdf"}]},{id:"550e8400-e29b-41d4-a716-446655440004",titulo:"Solicitud de vacaciones",descripcion:"Formulario de solicitud de vacaciones",tipo:this.tiposDocumento[3],area:this.areas[0],creado_por:this.usuarios[3],fecha_creacion:new Date(2023,5,20),fecha_modificacion:new Date(2023,5,20),es_publico:!0,versiones:[{id:7,documento_id:"550e8400-e29b-41d4-a716-446655440004",archivo:"/documentos/rrhh/solicitud/solicitud_vacaciones.pdf",version:1,subido_por:this.usuarios[3],fecha_subida:new Date(2023,5,20),comentarios:"Formulario est\xE1ndar",nombre_archivo:"solicitud_vacaciones.pdf"}]},{id:"550e8400-e29b-41d4-a716-446655440005",titulo:"Plan de marketing 2023",descripcion:"Plan estrat\xE9gico de marketing para el a\xF1o 2023",tipo:this.tiposDocumento[2],area:this.areas[3],creado_por:this.usuarios[1],fecha_creacion:new Date(2023,0,15),fecha_modificacion:new Date(2023,2,10),es_publico:!1,versiones:[{id:8,documento_id:"550e8400-e29b-41d4-a716-446655440005",archivo:"/documentos/marketing/informe/plan_marketing_v3.pdf",version:3,subido_por:this.usuarios[1],fecha_subida:new Date(2023,2,10),comentarios:"Versi\xF3n final aprobada",nombre_archivo:"plan_marketing_v3.pdf"},{id:9,documento_id:"550e8400-e29b-41d4-a716-446655440005",archivo:"/documentos/marketing/informe/plan_marketing_v2.pdf",version:2,subido_por:this.usuarios[1],fecha_subida:new Date(2023,1,20),comentarios:"Revisi\xF3n con comentarios de direcci\xF3n",nombre_archivo:"plan_marketing_v2.pdf"},{id:10,documento_id:"550e8400-e29b-41d4-a716-446655440005",archivo:"/documentos/marketing/informe/plan_marketing_v1.pdf",version:1,subido_por:this.usuarios[1],fecha_subida:new Date(2023,0,15),comentarios:"Borrador inicial",nombre_archivo:"plan_marketing_v1.pdf"}],permisos:[{id:3,documento_id:"550e8400-e29b-41d4-a716-446655440005",usuario:this.currentUser,puede_ver:!0,puede_editar:!1,puede_descargar:!0,puede_eliminar:!1}]}]}fetchData(){this.docsService.getData().subscribe({next:t=>{console.log(t),this.documentos=t.documentos,this.tiposDocumento=t.tipos_documento,this.areas=t.areas,this.calcularEstadisticas(),this.prepararDocumentosRecientes(),this.prepararDocumentosPorTipo(),this.prepararDocumentosPorArea(),this.prepararActividadReciente(),this.prepararDocumentosCompartidos()}})}calcularEstadisticas(){this.totalDocumentos=this.documentos.length,this.documentosPublicos=this.documentos.filter(t=>t.es_publico).length,this.documentosPrivados=this.totalDocumentos-this.documentosPublicos,this.totalVersiones=this.documentos.reduce((t,i)=>t+(i.versiones?i.versiones.length:0),0)}prepararDocumentosRecientes(){let i=[...this.documentos].sort((r,o)=>o.fecha_modificacion.getTime()-r.fecha_modificacion.getTime()).slice(0,5),n=new Date;this.documentosRecientes=i.map(r=>{let o=Math.floor((n.getTime()-r.fecha_modificacion.getTime())/864e5);return Be(X({},r),{diasDesdeModificacion:o})})}prepararDocumentosPorTipo(){let t={};this.documentos.forEach(n=>{if(n.tipo){let r=n.tipo.nombre;t[r]=(t[r]||0)+1}});let i=Object.keys(t).map((n,r)=>({nombre:n,valor:t[n],porcentaje:t[n]/this.totalDocumentos*100,color:this.colores[r%this.colores.length]}));this.documentosPorTipo=i.sort((n,r)=>r.valor-n.valor)}prepararDocumentosPorArea(){let t={};this.documentos.forEach(n=>{if(n.area){let r=n.area.nombre;t[r]=(t[r]||0)+1}});let i=Object.keys(t).map((n,r)=>({nombre:n,valor:t[n],porcentaje:t[n]/this.totalDocumentos*100,color:this.colores[r%this.colores.length]}));this.documentosPorArea=i.sort((n,r)=>r.valor-n.valor)}prepararActividadReciente(){let t=[];this.documentos.forEach(i=>{t.push({id:`creacion-${i.id}`,tipo:"creacion",titulo:i.titulo,usuario:i.creado_por,fecha:i.fecha_creacion,descripcion:`${i.creado_por.username} cre\xF3 el documento "${i.titulo}"`,icono:"fa-file",color:"var(--color-primary)"}),i.versiones&&i.versiones.forEach(n=>{n.version>1&&t.push({id:`version-${n.id}`,tipo:"version",titulo:i.titulo,usuario:n.subido_por,fecha:n.fecha_subida,descripcion:`${n.subido_por.username} subi\xF3 la versi\xF3n ${n.version} de "${i.titulo}"`,icono:"fa-code-branch",color:"var(--color-info)"})}),i.permisos&&i.permisos.forEach(n=>{n.usuario.id!==i.creado_por.id&&t.push({id:`compartido-${i.id}-${n.usuario.id}`,tipo:"compartido",titulo:i.titulo,usuario:i.creado_por,fecha:i.fecha_modificacion,descripcion:`${i.creado_por.username} comparti\xF3 "${i.titulo}" con ${n.usuario.username}`,icono:"fa-share-alt",color:"var(--color-success)"})})}),t.sort((i,n)=>n.fecha.getTime()-i.fecha.getTime()),this.actividadReciente=t.slice(0,10)}prepararDocumentosCompartidos(){this.documentosCompartidos=this.documentos.filter(t=>t.creado_por.id===this.currentUser.id?!1:t.es_publico?!0:t.permisos?t.permisos.some(i=>i.usuario.id===this.currentUser.id&&i.puede_ver):!1)}irADocumentos(){this.router.navigate(["/documents"])}crearDocumento(){this.router.navigate(["/documents"],{queryParams:{action:"create"}})}formatearFechaRelativa(t){let n=new Date().getTime()-t.getTime(),r=Math.floor(n/1e3),o=Math.floor(r/60),a=Math.floor(o/60),s=Math.floor(a/24);return s>0?s===1?"Ayer":`Hace ${s} d\xEDas`:a>0?`Hace ${a} ${a===1?"hora":"horas"}`:o>0?`Hace ${o} ${o===1?"minuto":"minutos"}`:"Hace unos segundos"}static \u0275fac=function(i){return new(i||e)(de(Sn),de(Ro))};static \u0275cmp=ye({type:e,selectors:[["app-dashboard"]],decls:122,vars:14,consts:[[1,"dashboard-container"],[1,"dashboard-header"],[1,"header-title"],[1,"text-muted"],[1,"header-actions"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"stats-cards"],[1,"stat-card"],[1,"stat-icon"],[1,"fas","fa-file-alt"],[1,"stat-content"],[1,"fas","fa-code-branch"],[1,"fas","fa-lock-open"],[1,"fas","fa-lock"],[1,"dashboard-content"],[1,"dashboard-column"],[1,"dashboard-card"],[1,"card-header"],[1,"btn","btn-text",3,"click"],[1,"card-content"],[1,"documents-list"],["class","document-item",4,"ngFor","ngForOf"],["class","empty-state",4,"ngIf"],[1,"chart-container"],["class","chart-bar-item",4,"ngFor","ngForOf"],[1,"activity-list"],["class","activity-item",4,"ngFor","ngForOf"],[1,"shared-documents-list"],["class","shared-document-item",4,"ngFor","ngForOf"],[1,"quick-actions"],[1,"quick-action-card",3,"click"],[1,"quick-action-icon"],[1,"fas","fa-file-upload"],[1,"quick-action-content"],[1,"fas","fa-search"],[1,"fas","fa-user-lock"],[1,"document-item"],[1,"document-icon"],[1,"fas",3,"ngClass"],[1,"document-info"],[1,"document-meta"],["class","document-type",4,"ngIf"],[1,"document-date"],[1,"document-desc"],[1,"document-actions"],["title","Ver documento",1,"btn-icon"],[1,"fas","fa-eye"],["title","Editar documento",1,"btn-icon"],[1,"fas","fa-edit"],[1,"document-type"],[1,"empty-state"],[1,"fas","fa-file-alt","empty-icon"],[1,"chart-bar-item"],[1,"chart-bar-label"],[1,"chart-bar-value"],[1,"chart-bar"],[1,"chart-bar-fill"],[1,"fas","fa-chart-bar","empty-icon"],[1,"activity-item"],[1,"activity-icon"],[1,"activity-content"],[1,"activity-text"],[1,"activity-date"],[1,"fas","fa-history","empty-icon"],[1,"shared-document-item"],[1,"document-owner"],[1,"fas","fa-share-alt","empty-icon"]],template:function(i,n){i&1&&(h(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),S(4,"Dashboard"),g(),h(5,"p",3),S(6,"Bienvenido al sistema de gesti\xF3n documental"),g()(),h(7,"div",4)(8,"button",5),K("click",function(){return n.crearDocumento()}),L(9,"i",6),S(10," Nuevo Documento "),g()()(),h(11,"div",7)(12,"div",8)(13,"div",9),L(14,"i",10),g(),h(15,"div",11)(16,"h3"),S(17),g(),h(18,"p"),S(19,"Documentos totales"),g()()(),h(20,"div",8)(21,"div",9),L(22,"i",12),g(),h(23,"div",11)(24,"h3"),S(25),g(),h(26,"p"),S(27,"Versiones"),g()()(),h(28,"div",8)(29,"div",9),L(30,"i",13),g(),h(31,"div",11)(32,"h3"),S(33),g(),h(34,"p"),S(35,"Documentos p\xFAblicos"),g()()(),h(36,"div",8)(37,"div",9),L(38,"i",14),g(),h(39,"div",11)(40,"h3"),S(41),g(),h(42,"p"),S(43,"Documentos privados"),g()()()(),h(44,"div",15)(45,"div",16)(46,"div",17)(47,"div",18)(48,"h2"),S(49,"Documentos recientes"),g(),h(50,"button",19),K("click",function(){return n.irADocumentos()}),S(51,"Ver todos"),g()(),h(52,"div",20)(53,"div",21),G(54,ZP,17,5,"div",22)(55,QP,4,0,"div",23),g()()(),h(56,"div",17)(57,"div",18)(58,"h2"),S(59,"Documentos por tipo"),g()(),h(60,"div",20)(61,"div",24),G(62,JP,8,6,"div",25)(63,ek,4,0,"div",23),g()()()(),h(64,"div",16)(65,"div",17)(66,"div",18)(67,"h2"),S(68,"Actividad reciente"),g()(),h(69,"div",20)(70,"div",26),G(71,tk,8,5,"div",27)(72,ik,4,0,"div",23),g()()(),h(73,"div",17)(74,"div",18)(75,"h2"),S(76,"Documentos por \xE1rea"),g()(),h(77,"div",20)(78,"div",24),G(79,nk,8,6,"div",25)(80,rk,4,0,"div",23),g()()(),h(81,"div",17)(82,"div",18)(83,"h2"),S(84,"Compartidos conmigo"),g()(),h(85,"div",20)(86,"div",28),G(87,ok,12,2,"div",29)(88,ak,4,0,"div",23),g()()()()(),h(89,"div",30)(90,"div",31),K("click",function(){return n.crearDocumento()}),h(91,"div",32),L(92,"i",33),g(),h(93,"div",34)(94,"h3"),S(95,"Subir documento"),g(),h(96,"p"),S(97,"Sube un nuevo documento al sistema"),g()()(),h(98,"div",31),K("click",function(){return n.irADocumentos()}),h(99,"div",32),L(100,"i",35),g(),h(101,"div",34)(102,"h3"),S(103,"Buscar documentos"),g(),h(104,"p"),S(105,"Busca documentos por t\xEDtulo, tipo o \xE1rea"),g()()(),h(106,"div",31),K("click",function(){return n.irADocumentos()}),h(107,"div",32),L(108,"i",12),g(),h(109,"div",34)(110,"h3"),S(111,"Gestionar versiones"),g(),h(112,"p"),S(113,"Administra las versiones de tus documentos"),g()()(),h(114,"div",31),K("click",function(){return n.irADocumentos()}),h(115,"div",32),L(116,"i",36),g(),h(117,"div",34)(118,"h3"),S(119,"Gestionar permisos"),g(),h(120,"p"),S(121,"Configura qui\xE9n puede acceder a tus documentos"),g()()()()()),i&2&&(E(17),le(n.totalDocumentos),E(8),le(n.totalVersiones),E(8),le(n.documentosPublicos),E(8),le(n.documentosPrivados),E(13),I("ngForOf",n.documentosRecientes),E(),I("ngIf",n.documentosRecientes.length===0),E(7),I("ngForOf",n.documentosPorTipo),E(),I("ngIf",n.documentosPorTipo.length===0),E(8),I("ngForOf",n.actividadReciente),E(),I("ngIf",n.actividadReciente.length===0),E(7),I("ngForOf",n.documentosPorArea),E(),I("ngIf",n.documentosPorArea.length===0),E(7),I("ngForOf",n.documentosCompartidos),E(),I("ngIf",n.documentosCompartidos.length===0))},dependencies:[zt,Yi,Mi,pi],styles:[".dashboard-container[_ngcontent-%COMP%]{padding:var(--spacing-md)}.dashboard-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--spacing-lg)}.header-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:var(--spacing-xs);color:var(--color-primary)}.stats-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:var(--spacing-md);margin-bottom:var(--spacing-lg)}.stat-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:var(--border-radius-md);box-shadow:var(--shadow-sm);padding:var(--spacing-md);display:flex;align-items:center;gap:var(--spacing-md)}.stat-icon[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;background-color:var(--color-primary-light);color:#fff;display:flex;align-items:center;justify-content:center;font-size:1.5rem}.stat-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;margin-bottom:0;color:var(--color-primary)}.stat-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--color-text-light);font-size:.9rem}.dashboard-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:var(--spacing-lg);margin-bottom:var(--spacing-lg)}.dashboard-column[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-lg)}.dashboard-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:var(--border-radius-md);box-shadow:var(--shadow-sm);overflow:hidden}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-md) var(--spacing-lg);border-bottom:1px solid var(--color-hover)}.card-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.2rem;color:var(--color-primary)}.card-content[_ngcontent-%COMP%]{padding:var(--spacing-md)}.documents-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-md)}.document-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:var(--spacing-md);padding:var(--spacing-md);border-radius:var(--border-radius-sm);transition:background-color var(--transition-fast)}.document-item[_ngcontent-%COMP%]:hover{background-color:var(--color-hover)}.document-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background-color:var(--color-primary-light);color:#fff;display:flex;align-items:center;justify-content:center;font-size:1.2rem}.document-info[_ngcontent-%COMP%]{flex:1;min-width:0}.document-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 var(--spacing-xs) 0;font-size:1rem;color:var(--color-text);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.document-meta[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-md);margin-bottom:var(--spacing-xs);font-size:.85rem}.document-type[_ngcontent-%COMP%]{color:var(--color-primary);font-weight:500}.document-date[_ngcontent-%COMP%]{color:var(--color-text-light)}.document-desc[_ngcontent-%COMP%]{margin:0;font-size:.9rem;color:var(--color-text-light);display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.document-actions[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-xs)}.activity-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-md)}.activity-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:var(--spacing-md)}.activity-icon[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;color:#fff;display:flex;align-items:center;justify-content:center;font-size:.9rem;flex-shrink:0}.activity-content[_ngcontent-%COMP%]{flex:1}.activity-text[_ngcontent-%COMP%]{margin:0 0 var(--spacing-xs) 0;font-size:.9rem}.activity-date[_ngcontent-%COMP%]{font-size:.8rem;color:var(--color-text-light)}.chart-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-sm)}.chart-bar-item[_ngcontent-%COMP%]{margin-bottom:var(--spacing-sm)}.chart-bar-label[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:var(--spacing-xs);font-size:.9rem}.chart-bar-value[_ngcontent-%COMP%]{font-weight:600}.chart-bar[_ngcontent-%COMP%]{height:8px;background-color:var(--color-hover);border-radius:4px;overflow:hidden}.chart-bar-fill[_ngcontent-%COMP%]{height:100%;border-radius:4px}.shared-documents-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-sm)}.shared-document-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-md);padding:var(--spacing-sm);border-radius:var(--border-radius-sm);transition:background-color var(--transition-fast)}.shared-document-item[_ngcontent-%COMP%]:hover{background-color:var(--color-hover)}.document-owner[_ngcontent-%COMP%]{font-size:.85rem;color:var(--color-text-light)}.quick-actions[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:var(--spacing-md)}.quick-action-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:var(--border-radius-md);box-shadow:var(--shadow-sm);padding:var(--spacing-md);display:flex;align-items:center;gap:var(--spacing-md);cursor:pointer;transition:transform var(--transition-fast),box-shadow var(--transition-fast)}.quick-action-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow-md)}.quick-action-icon[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;background-color:var(--color-primary-light);color:#fff;display:flex;align-items:center;justify-content:center;font-size:1.2rem}.quick-action-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 var(--spacing-xs) 0;font-size:1rem;color:var(--color-text)}.quick-action-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.85rem;color:var(--color-text-light)}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:var(--spacing-lg);color:var(--color-text-light);text-align:center}.empty-icon[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:var(--spacing-md);opacity:.5}.btn-text[_ngcontent-%COMP%]{background:none;border:none;color:var(--color-primary);font-size:.9rem;cursor:pointer;padding:0}.btn-text[_ngcontent-%COMP%]:hover{text-decoration:underline}.btn-icon[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;background-color:transparent;border:none;cursor:pointer;color:var(--color-text);transition:all var(--transition-fast)}.btn-icon[_ngcontent-%COMP%]:hover{background-color:var(--color-hover);color:var(--color-primary)}@media (max-width: 1200px){.stats-cards[_ngcontent-%COMP%], .quick-actions[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (max-width: 992px){.dashboard-content[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media (max-width: 768px){.dashboard-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:var(--spacing-md)}.stats-cards[_ngcontent-%COMP%], .quick-actions[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};var Oo=class e{constructor(t){this.http=t}WORKFLOWS_URL=`${Dn}/workflows`;getFlujos(){return this.http.get(`${this.WORKFLOWS_URL}/flujos/`)}getFlujoById(t){return this.http.get(`${this.WORKFLOWS_URL}/flujos/${t}/`)}getFlujoCompleto(t){return this.http.get(`${this.WORKFLOWS_URL}/flujos/${t}/json/`).pipe(xn(i=>({flujo:{id:t},elementos:i.elementos,transiciones:i.transiciones})))}crearFlujo(t){return this.http.post(`${this.WORKFLOWS_URL}/flujos/`,t).pipe(xn(i=>"elementos"in i?i:{flujo:i,elementos:[],transiciones:[]}))}actualizarFlujo(t){return this.http.put(`${this.WORKFLOWS_URL}/flujos/${t.id}/`,t)}eliminarFlujo(t){return this.http.delete(`${this.WORKFLOWS_URL}/flujos/${t}/`)}validarFlujo(t){return this.http.post(`${this.WORKFLOWS_URL}/flujos/${t}/validar/`,{})}asociarFlujoTipoDocumento(t,i){return this.http.post(`${this.WORKFLOWS_URL}/flujos/${t}/asociar/`,{tipo_id:i})}crearElemento(t){return this.http.post(`${this.WORKFLOWS_URL}/elementos/`,t)}actualizarElemento(t){return this.http.put(`${this.WORKFLOWS_URL}/elementos/${t.id}/`,t)}eliminarElemento(t){return this.http.delete(`${this.WORKFLOWS_URL}/elementos/${t}/`)}crearTransicion(t){return this.http.post(`${this.WORKFLOWS_URL}/transiciones/`,t)}actualizarTransicion(t){return this.http.put(`${this.WORKFLOWS_URL}/transiciones/${t.id}/`,t)}eliminarTransicion(t){return this.http.delete(`${this.WORKFLOWS_URL}/transiciones/${t}/`)}guardarFlujoCompleto(t){return t.flujo.tipo_documento_id=t.flujo.tipo_documento,t.flujo.id?(t=this.fusionarElementosRepetidos(t),t=this.eliminarWaypoints(t),console.log("Flujo a enviar:"),console.log(t),this.http.post(`${this.WORKFLOWS_URL}/flujos/actualizar/`,t)):this.crearFlujo(t.flujo)}fusionarElementosRepetidos(t){if(!t)return t;let i={};return t.elementos.forEach(n=>{n.bpmnId&&i[n.bpmnId]?i[n.bpmnId]=X(X({},i[n.bpmnId]),n):n.bpmnId&&(i[n.bpmnId]=n)}),t.elementos=Object.values(i),t}eliminarWaypoints(t){let i=X({},t);return i.transiciones=i.transiciones.map(n=>{let r=X({},n);return delete r.waypoints,r}),i}convertirBpmnAModelo(t,i){return new zr(n=>{n.next({elementos:[],transiciones:[]}),n.complete()})}convertirModeloABpmn(t,i){return new zr(n=>{n.next(`<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" id="Definitions_1" targetNamespace="http://bpmn.io/schema/bpmn">
  <bpmn:process id="Process_1" isExecutable="false">
    <!-- Aqu\xED ir\xEDan los elementos del proceso -->
  </bpmn:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_1">
      <!-- Aqu\xED ir\xEDan los elementos visuales -->
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>`),n.complete()})}static \u0275fac=function(i){return new(i||e)(wn(Ki))};static \u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})};function sk(e,t){if(e&1){let i=Le();h(0,"div",11)(1,"div",12),L(2,"i",13),h(3,"p"),S(4),g(),h(5,"button",14),K("click",function(){ne(i);let r=j(2);return re(r.cargarFlujos())}),S(6,"Reintentar"),g()()()}if(e&2){let i=j(2);E(4),le(i.error)}}function ck(e,t){if(e&1){let i=Le();h(0,"div",18),L(1,"i",19),h(2,"h3"),S(3,"No hay flujos de trabajo"),g(),h(4,"p"),S(5,"Cree un nuevo flujo de trabajo para comenzar a automatizar sus procesos documentales."),g(),h(6,"button",5),K("click",function(){ne(i);let r=j(3);return re(r.crearNuevoFlujo())}),L(7,"i",6),S(8," Crear Flujo de Trabajo "),g()()}}function lk(e,t){if(e&1){let i=Le();h(0,"div",11)(1,"div",20)(2,"h3"),S(3),g(),h(4,"div",21)(5,"button",22),K("click",function(){let r=ne(i).$implicit,o=j(3);return re(o.verFlujo(r.id))}),L(6,"i",23),g(),h(7,"button",24),K("click",function(){let r=ne(i).$implicit,o=j(3);return re(o.editarFlujo(r.id))}),L(8,"i",25),g(),h(9,"button",26),K("click",function(){let r=ne(i).$implicit,o=j(3);return re(o.eliminarFlujo(r.id))}),L(10,"i",27),g()()(),h(11,"div",28)(12,"p",29),S(13),g(),h(14,"div",30)(15,"div",31),L(16,"i",32),h(17,"span"),S(18),xa(19,"date"),g()(),h(20,"div",31),L(21,"i",33),h(22,"span"),S(23),g()(),h(24,"div",31),L(25,"i",34),h(26,"span"),S(27),g()(),h(28,"div",31),L(29,"i",35),h(30,"span"),S(31),g()()()()()}if(e&2){let i=t.$implicit;E(3),le(i.nombre),E(10),le(i.descripcion||"Sin descripci\xF3n"),E(5),le(wa(19,7,i.fecha_creacion,"dd/MM/yyyy")),E(5),le((i.creado_por==null?null:i.creado_por.username)||"Usuario desconocido"),E(4),le(i.tipo_documento.nombre||"Tipo no asignado"),E(2),I("ngClass",i.activo?"text-success":"text-danger"),E(2),le(i.activo?"Activo":"Inactivo")}}function dk(e,t){if(e&1&&(h(0,"div",15),G(1,ck,9,0,"div",16)(2,lk,32,10,"div",17),g()),e&2){let i=j(2);E(),I("ngIf",i.flujos.length===0),E(),I("ngForOf",i.flujos)}}function uk(e,t){if(e&1&&(h(0,"div",8),G(1,sk,7,1,"div",9)(2,dk,3,2,"div",10),g()),e&2){let i=j();E(),I("ngIf",i.error),E(),I("ngIf",!i.error)}}function pk(e,t){e&1&&(h(0,"div",36),L(1,"i",37),h(2,"p"),S(3,"Cargando flujos de trabajo..."),g()())}var fl=class e{constructor(t,i){this.workflowService=t;this.router=i}flujos=[];cargando=!0;error=null;ngOnInit(){this.cargarFlujos()}cargarFlujos(){this.cargando=!0,this.workflowService.getFlujos().subscribe({next:t=>{this.flujos=t,this.cargando=!1},error:t=>{console.error("Error al cargar flujos de trabajo",t),this.error="Error al cargar los flujos de trabajo. Por favor, intente nuevamente.",this.cargando=!1}})}crearNuevoFlujo(){this.router.navigate(["/workflows/nuevo"])}editarFlujo(t){this.router.navigate(["/workflows/editar",t])}verFlujo(t){this.router.navigate(["/workflows/ver",t])}eliminarFlujo(t){confirm("\xBFEst\xE1 seguro de que desea eliminar este flujo de trabajo? Esta acci\xF3n no se puede deshacer.")&&this.workflowService.eliminarFlujo(t).subscribe({next:()=>{this.flujos=this.flujos.filter(i=>i.id!==t)},error:i=>{console.error("Error al eliminar flujo de trabajo",i),alert("Error al eliminar el flujo de trabajo. Por favor, intente nuevamente.")}})}static \u0275fac=function(i){return new(i||e)(de(Oo),de(Sn))};static \u0275cmp=ye({type:e,selectors:[["app-workflow-list"]],decls:14,vars:2,consts:[["loadingTemplate",""],[1,"workflow-container"],[1,"workflow-header"],[1,"header-title"],[1,"header-actions"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],["class","workflow-content",4,"ngIf","ngIfElse"],[1,"workflow-content"],["class","workflow-card",4,"ngIf"],["class","workflow-list",4,"ngIf"],[1,"workflow-card"],[1,"error-message"],[1,"fas","fa-exclamation-triangle"],[1,"btn","btn-outline",3,"click"],[1,"workflow-list"],["class","empty-state",4,"ngIf"],["class","workflow-card",4,"ngFor","ngForOf"],[1,"empty-state"],[1,"fas","fa-project-diagram","empty-icon"],[1,"workflow-card-header"],[1,"workflow-card-actions"],["title","Ver flujo",1,"btn-icon",3,"click"],[1,"fas","fa-eye"],["title","Editar flujo",1,"btn-icon",3,"click"],[1,"fas","fa-edit"],["title","Eliminar flujo",1,"btn-icon",3,"click"],[1,"fas","fa-trash"],[1,"workflow-card-content"],[1,"workflow-description"],[1,"workflow-meta"],[1,"workflow-meta-item"],[1,"fas","fa-calendar-alt"],[1,"fas","fa-user"],[1,"fas","fa-file-alt"],[1,"fas","fa-circle",3,"ngClass"],[1,"loading-container"],[1,"fas","fa-spinner","fa-spin"]],template:function(i,n){if(i&1){let r=Le();h(0,"div",1)(1,"div",2)(2,"div",3)(3,"h1"),S(4,"Flujos de Trabajo"),g(),h(5,"p"),S(6,"Gestione los flujos de trabajo para automatizar procesos documentales"),g()(),h(7,"div",4)(8,"button",5),K("click",function(){return ne(r),re(n.crearNuevoFlujo())}),L(9,"i",6),S(10," Nuevo Flujo "),g()()(),G(11,uk,3,2,"div",7)(12,pk,4,0,"ng-template",null,0,Kn),g()}if(i&2){let r=En(13);E(11),I("ngIf",!n.cargando)("ngIfElse",r)}},dependencies:[zt,Yi,Mi,pi,vs],styles:[".workflow-container[_ngcontent-%COMP%]{padding:var(--spacing-md)}.workflow-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--spacing-lg)}.header-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:var(--spacing-xs);color:var(--color-primary)}.header-title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--color-text-light);margin:0}.workflow-list[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:var(--spacing-md)}.workflow-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:var(--border-radius-md);box-shadow:var(--shadow-sm);overflow:hidden;transition:transform var(--transition-fast),box-shadow var(--transition-fast)}.workflow-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow-md)}.workflow-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-md) var(--spacing-lg);border-bottom:1px solid var(--color-hover);background-color:var(--color-background)}.workflow-card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.1rem;color:var(--color-primary)}.workflow-card-actions[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-xs)}.workflow-card-content[_ngcontent-%COMP%]{padding:var(--spacing-md) var(--spacing-lg)}.workflow-description[_ngcontent-%COMP%]{margin-bottom:var(--spacing-md);color:var(--color-text);font-size:.9rem;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.workflow-meta[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:var(--spacing-md)}.workflow-meta-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-xs);font-size:.85rem;color:var(--color-text-light)}.workflow-meta-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.9rem}.text-success[_ngcontent-%COMP%]{color:var(--color-success)}.text-danger[_ngcontent-%COMP%]{color:var(--color-error)}.empty-state[_ngcontent-%COMP%]{grid-column:1 / -1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:var(--spacing-xl);background-color:#fff;border-radius:var(--border-radius-md);box-shadow:var(--shadow-sm);text-align:center}.empty-icon[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:var(--spacing-md);color:var(--color-primary-light)}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:var(--spacing-sm);color:var(--color-text)}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:var(--spacing-lg);color:var(--color-text-light);max-width:500px}.error-message[_ngcontent-%COMP%]{grid-column:1 / -1;display:flex;flex-direction:column;align-items:center;padding:var(--spacing-lg);color:var(--color-error);text-align:center}.error-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:var(--spacing-md)}.error-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:var(--spacing-md)}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:var(--spacing-xl);color:var(--color-text-light)}.loading-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:var(--spacing-md)}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:var(--spacing-xs);padding:var(--spacing-sm) var(--spacing-md);border-radius:var(--border-radius-sm);font-weight:500;cursor:pointer;transition:all var(--transition-fast);border:none}.btn-primary[_ngcontent-%COMP%]{background-color:var(--color-primary);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:var(--color-primary-dark)}.btn-outline[_ngcontent-%COMP%]{background-color:transparent;border:1px solid var(--color-hover);color:var(--color-text)}.btn-outline[_ngcontent-%COMP%]:hover{background-color:var(--color-hover)}.btn-icon[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;background-color:transparent;border:none;cursor:pointer;color:var(--color-text);transition:all var(--transition-fast)}.btn-icon[_ngcontent-%COMP%]:hover{background-color:var(--color-hover);color:var(--color-primary)}@media (max-width: 768px){.workflow-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:var(--spacing-md)}.workflow-list[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};var ug=(r=>(r.INICIO="INICIO",r.FIN="FIN",r.TAREA="TAREA",r.DECISION="DECISION",r))(ug||{});function z(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}function mk(e,t){return t={exports:{}},e(t,t.exports),t.exports}var fk=mk(function(e){var t=e.exports=function(i,n){if(n||(n=16),i===void 0&&(i=128),i<=0)return"0";for(var r=Math.log(Math.pow(2,i))/Math.log(n),o=2;r===1/0;o*=2)r=Math.log(Math.pow(2,i/o))/Math.log(n)*o;for(var a=r-Math.floor(r),s="",o=0;o<Math.floor(r);o++){var c=Math.floor(Math.random()*n).toString(n);s=c+s}if(a){var l=Math.pow(n,a),c=Math.floor(Math.random()*l).toString(n);s=c+s}var d=parseInt(s,n);return d!==1/0&&d>=Math.pow(2,i)?t(i,n):s};t.rack=function(i,n,r){var o=function(s){var c=0;do{if(c++>10)if(r)i+=r;else throw new Error("too many ID collisions, use more bits");var l=t(i,n)}while(Object.hasOwnProperty.call(a,l));return a[l]=s,l},a=o.hats={};return o.get=function(s){return o.hats[s]},o.set=function(s,c){return o.hats[s]=c,o},o.bits=i||128,o.base=n||16,o}});function Yr(e){if(!(this instanceof Yr))return new Yr(e);e=e||[128,36,1],this._seed=e.length?fk.rack(e[0],e[1],e[2]):e}Yr.prototype.next=function(e){return this._seed(e||!0)};Yr.prototype.nextPrefixed=function(e,t){var i;do i=e+this.next(!0);while(this.assigned(i));return this.claim(i,t),i};Yr.prototype.claim=function(e,t){this._seed.set(e,t||!0)};Yr.prototype.assigned=function(e){return this._seed.get(e)||!1};Yr.prototype.unclaim=function(e){delete this._seed.hats[e]};Yr.prototype.clear=function(){var e=this._seed.hats,t;for(t in e)this.unclaim(t)};var rp=Yr;function Ps(e){return Array.prototype.concat.apply([],e)}var hl=Object.prototype.toString,hk=Object.prototype.hasOwnProperty;function gr(e){return e===void 0}function Pt(e){return e!==void 0}function To(e){return e==null}function oe(e){return hl.call(e)==="[object Array]"}function it(e){return hl.call(e)==="[object Object]"}function he(e){return hl.call(e)==="[object Number]"}function vt(e){let t=hl.call(e);return t==="[object Function]"||t==="[object AsyncFunction]"||t==="[object GeneratorFunction]"||t==="[object AsyncGeneratorFunction]"||t==="[object Proxy]"}function Ht(e){return hl.call(e)==="[object String]"}function gk(e){if(!oe(e))throw new Error("must supply array")}function $t(e,t){return!To(e)&&hk.call(e,t)}function ve(e,t){let i=ap(t),n;return M(e,function(r,o){if(i(r,o))return n=r,!1}),n}function op(e,t){let i=ap(t),n=oe(e)?-1:void 0;return M(e,function(r,o){if(i(r,o))return n=o,!1}),n}function fe(e,t){let i=ap(t),n=[];return M(e,function(r,o){i(r,o)&&n.push(r)}),n}function M(e,t){let i,n;if(gr(e))return;let r=oe(e)?_k:vk;for(let o in e)if($t(e,o)&&(i=e[o],n=t(i,r(o)),n===!1))return i}function hy(e,t){if(gr(e))return[];gk(e);let i=ap(t);return e.filter(function(n,r){return!i(n,r)})}function Ot(e,t,i){return M(e,function(n,r){i=t(i,n,r)}),i}function Pn(e,t){return!!Ot(e,function(i,n,r){return i&&t(n,r)},!0)}function Fi(e,t){return!!ve(e,t)}function St(e,t){let i=[];return M(e,function(n,r){i.push(t(n,r))}),i}function ks(e){return e&&Object.keys(e)||[]}function gy(e){return ks(e).length}function Io(e){return St(e,t=>t)}function Zn(e,t,i={}){return t=mg(t),M(e,function(n){let r=t(n)||"_",o=i[r];o||(o=i[r]=[]),o.push(n)}),i}function pg(e,...t){e=mg(e);let i={};return M(t,r=>Zn(r,e,i)),St(i,function(r,o){return r[0]})}var vy=pg;function wi(e,t){t=mg(t);let i=[];return M(e,function(n,r){let o=t(n,r),a={d:o,v:n};for(var s=0;s<i.length;s++){let{d:c}=i[s];if(o<c){i.splice(s,0,a);return}}i.push(a)}),St(i,n=>n.v)}function mi(e){return function(t){return Pn(e,function(i,n){return t[n]===i})}}function mg(e){return vt(e)?e:t=>t[e]}function ap(e){return vt(e)?e:t=>t===e}function vk(e){return e}function _k(e){return Number(e)}function sp(e,t){let i,n,r,o;function a(u){let p=Date.now(),m=u?0:o+t-p;if(m>0)return s(m);e.apply(r,n),c()}function s(u){i=setTimeout(a,u)}function c(){i&&clearTimeout(i),i=o=n=r=void 0}function l(){i&&a(!0),c()}function d(...u){o=Date.now(),n=u,r=this,i||s(t)}return d.flush=l,d.cancel=c,d}function jt(e,t){return e.bind(t)}function k(e,...t){return Object.assign(e,...t)}function _y(e,t,i){let n=e;return M(t,function(r,o){if(typeof r!="number"&&typeof r!="string")throw new Error("illegal key type: "+typeof r+". Key should be of type number or string.");if(r==="constructor")throw new Error("illegal key: constructor");if(r==="__proto__")throw new Error("illegal key: __proto__");let a=t[o+1],s=n[r];Pt(a)&&To(s)&&(s=n[r]=isNaN(+a)?{}:[]),gr(a)?gr(i)?delete n[r]:n[r]=i:n=s}),e}function ei(e,t){let i={},n=Object(e);return M(t,function(r){r in n&&(i[r]=e[r])}),i}function Di(e,t){let i={},n=Object(e);return M(n,function(r,o){t.indexOf(o)===-1&&(i[o]=r)}),i}function bk(e,t){return t.forEach(function(i){i&&typeof i!="string"&&!Array.isArray(i)&&Object.keys(i).forEach(function(n){if(n!=="default"&&!(n in e)){var r=Object.getOwnPropertyDescriptor(i,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return i[n]}})}})}),Object.freeze(e)}var yk=Object.prototype.toString,xk=Object.prototype.hasOwnProperty;function wk(e){return e===void 0}function Ek(e){return yk.call(e)==="[object Array]"}function Ck(e,t){return xk.call(e,t)}function by(e,t){let i,n;if(wk(e))return;let r=Ek(e)?Mk:Sk;for(let o in e)if(Ck(e,o)&&(i=e[o],n=t(i,r(o)),n===!1))return i}function Sk(e){return e}function Mk(e){return Number(e)}function Vt(e,...t){let i=e.style;return by(t,function(n){n&&by(n,function(r,o){i[o]=r})}),e}function Tt(e,t,i){return arguments.length==2?e.getAttribute(t):i===null?e.removeAttribute(t):(e.setAttribute(t,i),e)}var Dk=Object.prototype.toString;function ot(e){return new Fo(e)}function Fo(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}Fo.prototype.add=function(e){return this.list.add(e),this};Fo.prototype.remove=function(e){return Dk.call(e)=="[object RegExp]"?this.removeMatching(e):(this.list.remove(e),this)};Fo.prototype.removeMatching=function(e){let t=this.array();for(let i=0;i<t.length;i++)e.test(t[i])&&this.remove(t[i]);return this};Fo.prototype.toggle=function(e,t){return typeof t<"u"?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this};Fo.prototype.array=function(){return Array.from(this.list)};Fo.prototype.has=Fo.prototype.contains=function(e){return this.list.contains(e)};function No(e){for(var t;t=e.firstChild;)e.removeChild(t);return e}function Qn(e,t,i){var n=i?e:e.parentNode;return n&&typeof n.closest=="function"&&n.closest(t)||null}var lp={},dp,fg,hg;function yy(){dp=window.addEventListener?"addEventListener":"attachEvent",fg=window.removeEventListener?"removeEventListener":"detachEvent",hg=dp!=="addEventListener"?"on":""}var Ak=lp.bind=function(e,t,i,n){return dp||yy(),e[dp](hg+t,i,n||!1),i},Pk=lp.unbind=function(e,t,i,n){return fg||yy(),e[fg](hg+t,i,n||!1),i},Se=bk({__proto__:null,bind:Ak,unbind:Pk,default:lp},[lp]),xy=["focus","blur"];function kk(e,t,i,n,r){return xy.indexOf(i)!==-1&&(r=!0),Se.bind(e,i,function(o){var a=o.target||o.srcElement;o.delegateTarget=Qn(a,t,!0),o.delegateTarget&&n.call(e,o)},r)}function Rk(e,t,i,n){return xy.indexOf(t)!==-1&&(n=!0),Se.unbind(e,t,i,n)}var ti={bind:kk,unbind:Rk},Ok=Tk,wy=!1,cp;typeof document<"u"&&(cp=document.createElement("div"),cp.innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',wy=!cp.getElementsByTagName("link").length,cp=void 0);var Kt={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:wy?[1,"X<div>","</div>"]:[0,"",""]};Kt.td=Kt.th=[3,"<table><tbody><tr>","</tr></tbody></table>"];Kt.option=Kt.optgroup=[1,'<select multiple="multiple">',"</select>"];Kt.thead=Kt.tbody=Kt.colgroup=Kt.caption=Kt.tfoot=[1,"<table>","</table>"];Kt.polyline=Kt.ellipse=Kt.polygon=Kt.circle=Kt.text=Kt.line=Kt.path=Kt.rect=Kt.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];function Tk(e,t){if(typeof e!="string")throw new TypeError("String expected");t||(t=document);var i=/<([\w:]+)/.exec(e);if(!i)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var n=i[1];if(n=="body"){var c=t.createElement("html");return c.innerHTML=e,c.removeChild(c.lastChild)}var r=Object.prototype.hasOwnProperty.call(Kt,n)?Kt[n]:Kt._default,o=r[0],a=r[1],s=r[2],c=t.createElement("div");for(c.innerHTML=a+e+s;o--;)c=c.lastChild;if(c.firstChild==c.lastChild)return c.removeChild(c.firstChild);for(var l=t.createDocumentFragment();c.firstChild;)l.appendChild(c.removeChild(c.firstChild));return l}var qe=Ok;function up(e,t){return e&&typeof e.matches=="function"&&e.matches(t)||!1}function He(e,t){return t=t||document,t.querySelector(e)}function gl(e,t){return t=t||document,t.querySelectorAll(e)}function Ni(e){e.parentNode&&e.parentNode.removeChild(e)}function Ik(e,t){if(e.ownerDocument!==t.ownerDocument)try{return t.ownerDocument.importNode(e,!0)}catch{}return e}function My(e,t){return t.appendChild(Ik(e,t))}function me(e,t){return My(t,e),e}var _g=2,Dy={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":_g,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":_g,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1};function Fk(e,t){return Dy[t]?e.style[t]:e.getAttributeNS(null,t)}function Ay(e,t,i){var n=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=Dy[n];r?(r===_g&&typeof i=="number"&&(i=String(i)+"px"),e.style[n]=i):e.setAttributeNS(null,t,i)}function Nk(e,t){var i=Object.keys(t),n,r;for(n=0,r;r=i[n];n++)Ay(e,r,t[r])}function J(e,t,i){if(typeof t=="string")if(i!==void 0)Ay(e,t,i);else return Fk(e,t);else Nk(e,t);return e}var Lk=Object.prototype.toString;function Re(e){return new Lo(e)}function Lo(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}Lo.prototype.add=function(e){return this.list.add(e),this};Lo.prototype.remove=function(e){return Lk.call(e)=="[object RegExp]"?this.removeMatching(e):(this.list.remove(e),this)};Lo.prototype.removeMatching=function(e){let t=this.array();for(let i=0;i<t.length;i++)e.test(t[i])&&this.remove(t[i]);return this};Lo.prototype.toggle=function(e,t){return typeof t<"u"?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this};Lo.prototype.array=function(){return Array.from(this.list)};Lo.prototype.has=Lo.prototype.contains=function(e){return this.list.contains(e)};function Kr(e){for(var t;t=e.firstChild;)e.removeChild(t);return e}function yg(e){return e.cloneNode(!0)}var xg={svg:"http://www.w3.org/2000/svg"},Ey='<svg xmlns="'+xg.svg+'"';function Py(e){var t=!1;e.substring(0,4)==="<svg"?e.indexOf(xg.svg)===-1&&(e=Ey+e.substring(4)):(e=Ey+">"+e+"</svg>",t=!0);var i=Bk(e);if(!t)return i;for(var n=document.createDocumentFragment(),r=i.firstChild;r.firstChild;)n.appendChild(r.firstChild);return n}function Bk(e){var t;return t=new DOMParser,t.async=!1,t.parseFromString(e,"text/xml")}function ie(e,t){var i;return e=e.trim(),e.charAt(0)==="<"?(i=Py(e).firstChild,i=document.importNode(i,!0)):i=document.createElementNS(xg.svg,e),t&&J(i,t),i}var gg=null;function bg(){return gg===null&&(gg=ie("svg")),gg}function Cy(e,t){var i,n,r=Object.keys(t);for(i=0;n=r[i];i++)e[n]=t[n];return e}function ky(e,t,i,n,r,o){var a=bg().createSVGMatrix();switch(arguments.length){case 0:return a;case 1:return Cy(a,e);case 6:return Cy(a,{a:e,b:t,c:i,d:n,e:r,f:o})}}function Rs(e){return e?bg().createSVGTransformFromMatrix(e):bg().createSVGTransform()}var Sy=/([&<>]{1})/g,jk=/([&<>\n\r"]{1})/g,Vk={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"'"};function vg(e,t){function i(n,r){return Vk[r]||r}return e.replace(t,i)}function Ry(e,t){var i,n,r,o,a;switch(e.nodeType){case 3:t.push(vg(e.textContent,Sy));break;case 1:if(t.push("<",e.tagName),e.hasAttributes())for(r=e.attributes,i=0,n=r.length;i<n;++i)o=r.item(i),t.push(" ",o.name,'="',vg(o.value,jk),'"');if(e.hasChildNodes()){for(t.push(">"),a=e.childNodes,i=0,n=a.length;i<n;++i)Ry(a.item(i),t);t.push("</",e.tagName,">")}else t.push("/>");break;case 8:t.push("<!--",vg(e.nodeValue,Sy),"-->");break;case 4:t.push("<![CDATA[",e.nodeValue,"]]>");break;default:throw new Error("unable to handle node "+e.nodeType)}return t}function zk(e,t){var i=Py(t);if(Kr(e),!!t){$k(i)||(i=i.documentElement);for(var n=Wk(i.childNodes),r=0;r<n.length;r++)My(n[r],e)}}function Hk(e){for(var t=e.firstChild,i=[];t;)Ry(t,i),t=t.nextSibling;return i.join("")}function $k(e){return e.nodeName==="#document-fragment"}function wg(e,t){if(t!==void 0){try{zk(e,t)}catch(i){throw new Error("error parsing SVG: "+i.message)}return e}else return Hk(e)}function Wk(e){return Array.prototype.slice.call(e)}function Qe(e){var t=e.parentNode;return t&&t.removeChild(e),e}function Uk(e,t){return t instanceof SVGMatrix?e.createSVGTransformFromMatrix(t):t}function Gk(e,t){var i,n;for(e.clear(),i=0;n=t[i];i++)e.appendItem(Uk(e,n))}function Ea(e,t){var i=e.transform.baseVal;return t&&(Array.isArray(t)||(t=[t]),Gk(i,t)),i.consolidate()}var qk=/^class[ {]/;function Yk(e){return qk.test(e.toString())}function Cg(e){return Array.isArray(e)}function Eg(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function pp(...e){e.length===1&&Cg(e[0])&&(e=e[0]),e=[...e];let t=e.pop();return t.$inject=e,t}var Kk=/constructor\s*[^(]*\(\s*([^)]*)\)/m,Xk=/^(?:async\s+)?(?:function\s*[^(]*)?(?:\(\s*([^)]*)\)|(\w+))/m,Zk=/\/\*([^*]*)\*\//m;function Qk(e){if(typeof e!="function")throw new Error(`Cannot annotate "${e}". Expected a function!`);let t=e.toString().match(Yk(e)?Kk:Xk);if(!t)return[];let i=t[1]||t[2];return i&&i.split(",").map(n=>{let r=n.match(Zk);return(r&&r[1]||n).trim()})||[]}function Sg(e,t){let i=t||{get:function(C,w){if(n.push(C),w===!1)return null;throw s(`No provider for "${C}"!`)}},n=[],r=this._providers=Object.create(i._providers||null),o=this._instances=Object.create(null),a=o.injector=this,s=function(C){let w=n.join(" -> ");return n.length=0,new Error(w?`${C} (Resolving: ${w})`:C)};function c(C,w){if(!r[C]&&C.includes(".")){let P=C.split("."),T=c(P.shift());for(;P.length;)T=T[P.shift()];return T}if(Eg(o,C))return o[C];if(Eg(r,C)){if(n.indexOf(C)!==-1)throw n.push(C),s("Cannot resolve circular dependency!");return n.push(C),o[C]=r[C][0](r[C][1]),n.pop(),o[C]}return i.get(C,w)}function l(C,w){if(typeof w>"u"&&(w={}),typeof C!="function")if(Cg(C))C=pp(C.slice());else throw s(`Cannot invoke "${C}". Expected a function!`);let T=(C.$inject||Qk(C)).map(H=>Eg(w,H)?w[H]:c(H));return{fn:C,dependencies:T}}function d(C){let{fn:w,dependencies:P}=l(C),T=Function.prototype.bind.call(w,null,...P);return new T}function u(C,w,P){let{fn:T,dependencies:H}=l(C,P);return T.apply(w,H)}function p(C){return pp(w=>C.get(w))}function m(C,w){if(w&&w.length){let P=Object.create(null),T=Object.create(null),H=[],N=[],W=[],$,Q,Y,ae;for(let Ie in r)$=r[Ie],w.indexOf(Ie)!==-1&&($[2]==="private"?(Q=H.indexOf($[3]),Q===-1?(Y=$[3].createChild([],w),ae=p(Y),H.push($[3]),N.push(Y),W.push(ae),P[Ie]=[ae,Ie,"private",Y]):P[Ie]=[W[Q],Ie,"private",N[Q]]):P[Ie]=[$[2],$[1]],T[Ie]=!0),($[2]==="factory"||$[2]==="type")&&$[1].$scope&&w.forEach(di=>{$[1].$scope.indexOf(di)!==-1&&(P[Ie]=[$[2],$[1]],T[di]=!0)});w.forEach(Ie=>{if(!T[Ie])throw new Error('No provider for "'+Ie+'". Cannot use provider from the parent!')}),C.unshift(P)}return new Sg(C,a)}let f={factory:u,type:d,value:function(C){return C}};function _(C,w){let P=C.__init__||[];return function(){P.forEach(T=>{typeof T=="string"?w.get(T):w.invoke(T)})}}function b(C){let w=C.__exports__;if(w){let P=C.__modules__,T=Object.keys(C).reduce((Q,Y)=>(Y!=="__exports__"&&Y!=="__modules__"&&Y!=="__init__"&&Y!=="__depends__"&&(Q[Y]=C[Y]),Q),Object.create(null)),H=(P||[]).concat(T),N=m(H),W=pp(function(Q){return N.get(Q)});w.forEach(function(Q){r[Q]=[W,Q,"private",N]});let $=(C.__init__||[]).slice();return $.unshift(function(){N.init()}),C=Object.assign({},C,{__init__:$}),_(C,N)}return Object.keys(C).forEach(function(P){if(P==="__init__"||P==="__depends__")return;let T=C[P];if(T[2]==="private"){r[P]=T;return}let H=T[0],N=T[1];r[P]=[f[H],Jk(H,N),H]}),_(C,a)}function D(C,w){return C.indexOf(w)!==-1||(C=(w.__depends__||[]).reduce(D,C),C.indexOf(w)!==-1)?C:C.concat(w)}function R(C){let w=C.reduce(D,[]).map(b),P=!1;return function(){P||(P=!0,w.forEach(T=>T()))}}this.get=c,this.invoke=u,this.instantiate=d,this.createChild=m,this.init=R(e)}function Jk(e,t){return e!=="value"&&Cg(t)&&(t=pp(t.slice())),t}var eR=1e3;function kn(e,t){var i=this;t=t||eR,e.on(["render.shape","render.connection"],t,function(n,r){var o=n.type,a=r.element,s=r.gfx,c=r.attrs;if(i.canRender(a))return o==="render.shape"?i.drawShape(s,a,c):i.drawConnection(s,a,c)}),e.on(["render.getShapePath","render.getConnectionPath"],t,function(n,r){if(i.canRender(r))return n.type==="render.getShapePath"?i.getShapePath(r):i.getConnectionPath(r)})}kn.prototype.canRender=function(e){};kn.prototype.drawShape=function(e,t){};kn.prototype.drawConnection=function(e,t){};kn.prototype.getShapePath=function(e){};kn.prototype.getConnectionPath=function(e){};function Xr(e){return e.flat().join(",").replace(/,?([A-Za-z]),?/g,"$1")}function tR(e){return["M",e.x,e.y]}function Mg(e){return["L",e.x,e.y]}function iR(e,t,i){return["C",e.x,e.y,t.x,t.y,i.x,i.y]}function nR(e,t){let i=e.length,n=[tR(e[0])];for(let r=1;r<i;r++){let o=e[r-1],a=e[r],s=e[r+1];if(!s||!t){n.push(Mg(a));continue}let c=Math.min(t,Dg(a.x-o.x,a.y-o.y),Dg(s.x-a.x,s.y-a.y));if(!c){n.push(Mg(a));continue}let l=mp(a,o,c),d=mp(a,o,c*.5),u=mp(a,s,c),p=mp(a,s,c*.5);n.push(Mg(l)),n.push(iR(d,p,u))}return n}function mp(e,t,i){let n=t.x-e.x,r=t.y-e.y,o=Dg(n,r),a=i/o;return{x:e.x+n*a,y:e.y+r*a}}function Dg(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))}function Bo(e,t,i){he(t)&&(i=t,t=null),t||(t={});let n=ie("path",t);return he(i)&&(n.dataset.cornerRadius=String(i)),Ag(n,e)}function Ag(e,t){let i=parseInt(e.dataset.cornerRadius,10)||0;return J(e,{d:Xr(nR(t,i))}),e}function jo(e){return fe(e,function(t){return!ve(e,function(i){return i!==t&&Ty(t,i)})})}function Ty(e,t){if(t){if(e===t)return t;if(e.parent)return Ty(e.parent,t)}}function Oy(e,t,i){var n=!i||e.indexOf(t)===-1;return n&&e.push(t),n}function Jn(e,t,i){i=i||0,oe(e)||(e=[e]),M(e,function(n,r){var o=t(n,r,i);oe(o)&&o.length&&Jn(o,t,i+1)})}function rR(e,t,i){var n=[],r=[];return Jn(e,function(o,a,s){Oy(n,o,t);var c=o.children;if((i===-1||s<i)&&c&&Oy(r,c,t))return c}),n}function vr(e,t){return rR(e,!t,-1)}function Iy(e,t,i){gr(t)&&(t=!0),it(t)&&(i=t,t=!0),i=i||{};var n=vl(i.allShapes),r=vl(i.allConnections),o=vl(i.enclosedElements),a=vl(i.enclosedConnections),s=vl(i.topLevel,t&&Zn(e,function(d){return d.id}));function c(d){s[d.source.id]&&s[d.target.id]&&(s[d.id]=[d]),n[d.source.id]&&n[d.target.id]&&(a[d.id]=o[d.id]=d),r[d.id]=d}function l(d){if(o[d.id]=d,d.waypoints)a[d.id]=r[d.id]=d;else return n[d.id]=d,M(d.incoming,c),M(d.outgoing,c),d.children}return Jn(e,l),{allShapes:n,allConnections:r,topLevel:s,enclosedConnections:a,enclosedElements:o}}function Je(e,t){t=!!t,oe(e)||(e=[e]);var i,n,r,o;return M(e,function(a){var s=a;a.waypoints&&!t&&(s=Je(a.waypoints,!0));var c=s.x,l=s.y,d=s.height||0,u=s.width||0;(c<i||i===void 0)&&(i=c),(l<n||n===void 0)&&(n=l),(c+u>r||r===void 0)&&(r=c+u),(l+d>o||o===void 0)&&(o=l+d)}),{x:i,y:n,height:o-n,width:r-i}}function fp(e,t){var i={};return M(e,function(n){var r=n;r.waypoints&&(r=Je(r)),!he(t.y)&&r.x>t.x&&(i[n.id]=n),!he(t.x)&&r.y>t.y&&(i[n.id]=n),r.x>t.x&&r.y>t.y&&(he(t.width)&&he(t.height)&&r.width+r.x<t.width+t.x&&r.height+r.y<t.height+t.y||!he(t.width)||!he(t.height))&&(i[n.id]=n)}),i}function hp(e){return"waypoints"in e?"connection":"x"in e?"shape":"root"}function gp(e){return!!(e&&e.isFrame)}function vl(e,t){return k({},e||{},t||{})}var oR=1;function _r(e,t){kn.call(this,e,oR),this.CONNECTION_STYLE=t.style(["no-fill"],{strokeWidth:5,stroke:"fuchsia"}),this.SHAPE_STYLE=t.style({fill:"white",stroke:"fuchsia",strokeWidth:2}),this.FRAME_STYLE=t.style(["no-fill"],{stroke:"fuchsia",strokeDasharray:4,strokeWidth:2})}z(_r,kn);_r.prototype.canRender=function(){return!0};_r.prototype.drawShape=function(t,i,n){var r=ie("rect");return J(r,{x:0,y:0,width:i.width||0,height:i.height||0}),gp(i)?J(r,k({},this.FRAME_STYLE,n||{})):J(r,k({},this.SHAPE_STYLE,n||{})),me(t,r),r};_r.prototype.drawConnection=function(t,i,n){var r=Bo(i.waypoints,k({},this.CONNECTION_STYLE,n||{}));return me(t,r),r};_r.prototype.getShapePath=function(t){var i=t.x,n=t.y,r=t.width,o=t.height,a=[["M",i,n],["l",r,0],["l",0,o],["l",-r,0],["z"]];return Xr(a)};_r.prototype.getConnectionPath=function(t){var i=t.waypoints,n,r,o=[];for(n=0;r=i[n];n++)r=r.original||r,o.push([n===0?"M":"L",r.x,r.y]);return Xr(o)};_r.$inject=["eventBus","styles"];function Pg(){var e={"no-fill":{fill:"none"},"no-border":{strokeOpacity:0},"no-events":{pointerEvents:"none"}},t=this;this.cls=function(i,n,r){var o=this.style(n,r);return k(o,{class:i})},this.style=function(i,n){!oe(i)&&!n&&(n=i,i=[]);var r=Ot(i,function(o,a){return k(o,e[a]||{})},{});return n?k(r,n):r},this.computeStyle=function(i,n,r){return oe(n)||(r=n,n=[]),t.style(n||[],k({},r,i||{}))}}var Fy={__init__:["defaultRenderer"],defaultRenderer:["type",_r],styles:["type",Pg]};function at(e,t){if(!e||!t)return-1;var i=e.indexOf(t);return i!==-1&&e.splice(i,1),i}function et(e,t,i){if(!(!e||!t)){typeof i!="number"&&(i=-1);var n=e.indexOf(t);if(n!==-1){if(n===i)return;if(i!==-1)e.splice(n,1);else return}i!==-1?e.splice(i,0,t):e.push(t)}}function Os(e,t){return!e||!t?-1:e.indexOf(t)}function Vo(e,t){return!e||!t?-1:Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Ts(e,t,i,n){if(typeof n>"u"&&(n=5),!e||!t||!i)return!1;var r=(t.x-e.x)*(i.y-e.y)-(t.y-e.y)*(i.x-e.x),o=Vo(e,t);return Math.abs(r/o)<=n}var aR=2;function Xi(e,t){var i=Array.from(arguments).flat();let n={x:"v",y:"h"};for(let[r,o]of Object.entries(n))if(sR(r,i))return o;return!1}function sR(e,t){let i=t[0];return Pn(t,function(n){return Math.abs(i[e]-n[e])<=aR})}function kg(e,t,i){return i=i||0,e.x>t.x-i&&e.y>t.y-i&&e.x<t.x+t.width+i&&e.y<t.y+t.height+i}function _l(e,t){return{x:Math.round(e.x+(t.x-e.x)/2),y:Math.round(e.y+(t.y-e.y)/2)}}var cR=/,?([a-z]),?/gi,Ny=parseFloat,Wt=Math,zo=Wt.PI,br=Wt.min,yr=Wt.max,Ly=Wt.pow,$o=Wt.abs,lR=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?[\s]*,?[\s]*)+)/ig,dR=/(-?\d*\.?\d*(?:e[-+]?\d+)?)[\s]*,?[\s]*/ig,_p=Array.isArray||function(e){return e instanceof Array};function Og(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function bl(e){if(typeof e=="function"||Object(e)!==e)return e;var t=new e.constructor;for(var i in e)Og(e,i)&&(t[i]=bl(e[i]));return t}function uR(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return e.push(e.splice(i,1)[0])}function pR(e){function t(){var i=Array.prototype.slice.call(arguments,0),n=i.join("\u2400"),r=t.cache=t.cache||{},o=t.count=t.count||[];return Og(r,n)?(uR(o,n),r[n]):(o.length>=1e3&&delete r[o.shift()],o.push(n),r[n]=e(...arguments),r[n])}return t}function mR(e){if(!e)return null;var t=Is(e);if(t.arr)return bl(t.arr);var i={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},n=[];return _p(e)&&_p(e[0])&&(n=bl(e)),n.length||String(e).replace(lR,function(r,o,a){var s=[],c=o.toLowerCase();for(a.replace(dR,function(l,d){d&&s.push(+d)}),c=="m"&&s.length>2&&(n.push([o,...s.splice(0,2)]),c="l",o=o=="m"?"l":"L");s.length>=i[c]&&(n.push([o,...s.splice(0,i[c])]),!!i[c]););}),n.toString=Is.toString,t.arr=bl(n),n}function Is(e){var t=Is.ps=Is.ps||{};return t[e]?t[e].sleep=100:t[e]={sleep:100},setTimeout(function(){for(var i in t)Og(t,i)&&i!=e&&(t[i].sleep--,!t[i].sleep&&delete t[i])}),t[e]}function Rg(e,t,i,n){return arguments.length===1&&(t=e.y,i=e.width,n=e.height,e=e.x),{x:e,y:t,width:i,height:n,x2:e+i,y2:t+n}}function Uy(){return this.join(",").replace(cR,"$1")}function bp(e){var t=bl(e);return t.toString=Uy,t}function By(e,t,i,n,r,o,a,s,c){var l=1-c,d=Ly(l,3),u=Ly(l,2),p=c*c,m=p*c,f=d*e+u*3*c*i+l*3*c*c*r+m*a,_=d*t+u*3*c*n+l*3*c*c*o+m*s;return{x:yp(f),y:yp(_)}}function jy(e){var t=_R(...e);return Rg(t.x0,t.y0,t.x1-t.x0,t.y1-t.y0)}function Ho(e,t,i){return t>=e.x&&t<=e.x+e.width&&i>=e.y&&i<=e.y+e.height}function fR(e,t){return e=Rg(e),t=Rg(t),Ho(t,e.x,e.y)||Ho(t,e.x2,e.y)||Ho(t,e.x,e.y2)||Ho(t,e.x2,e.y2)||Ho(e,t.x,t.y)||Ho(e,t.x2,t.y)||Ho(e,t.x,t.y2)||Ho(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)}function Vy(e,t,i,n,r){var o=-3*t+9*i-9*n+3*r,a=e*o+6*t-12*i+6*n;return e*a-3*t+3*i}function zy(e,t,i,n,r,o,a,s,c){c==null&&(c=1),c=c>1?1:c<0?0:c;for(var l=c/2,d=12,u=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],p=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],m=0,f=0;f<d;f++){var _=l*u[f]+l,b=Vy(_,e,i,r,a),D=Vy(_,t,n,o,s),R=b*b+D*D;m+=p[f]*Wt.sqrt(R)}return l*m}function hR(e,t,i,n,r,o,a,s){if(!(yr(e,i)<br(r,a)||br(e,i)>yr(r,a)||yr(t,n)<br(o,s)||br(t,n)>yr(o,s))){var c=(e*n-t*i)*(r-a)-(e-i)*(r*s-o*a),l=(e*n-t*i)*(o-s)-(t-n)*(r*s-o*a),d=(e-i)*(o-s)-(t-n)*(r-a);if(d){var u=yp(c/d),p=yp(l/d),m=+u.toFixed(2),f=+p.toFixed(2);if(!(m<+br(e,i).toFixed(2)||m>+yr(e,i).toFixed(2)||m<+br(r,a).toFixed(2)||m>+yr(r,a).toFixed(2)||f<+br(t,n).toFixed(2)||f>+yr(t,n).toFixed(2)||f<+br(o,s).toFixed(2)||f>+yr(o,s).toFixed(2)))return{x:u,y:p}}}}function yp(e){return Math.round(e*1e11)/1e11}function gR(e,t,i){var n=jy(e),r=jy(t);if(!fR(n,r))return i?0:[];for(var o=zy(...e),a=zy(...t),s=Hy(e)?1:~~(o/5)||1,c=Hy(t)?1:~~(a/5)||1,l=[],d=[],u={},p=i?0:[],m=0;m<s+1;m++){var f=By(...e,m/s);l.push({x:f.x,y:f.y,t:m/s})}for(m=0;m<c+1;m++)f=By(...t,m/c),d.push({x:f.x,y:f.y,t:m/c});for(m=0;m<s;m++)for(var _=0;_<c;_++){var b=l[m],D=l[m+1],R=d[_],C=d[_+1],w=$o(D.x-b.x)<.01?"y":"x",P=$o(C.x-R.x)<.01?"y":"x",T=hR(b.x,b.y,D.x,D.y,R.x,R.y,C.x,C.y),H;if(T){if(H=T.x.toFixed(9)+"#"+T.y.toFixed(9),u[H])continue;u[H]=!0;var N=b.t+$o((T[w]-b[w])/(D[w]-b[w]))*(D.t-b.t),W=R.t+$o((T[P]-R[P])/(C[P]-R[P]))*(C.t-R.t);N>=0&&N<=1&&W>=0&&W<=1&&(i?p++:p.push({x:T.x,y:T.y,t1:N,t2:W}))}}return p}function yl(e,t,i){e=Wy(e),t=Wy(t);for(var n,r,o,a,s,c,l,d,u,p,m=i?0:[],f=0,_=e.length;f<_;f++){var b=e[f];if(b[0]=="M")n=s=b[1],r=c=b[2];else{b[0]=="C"?(u=[n,r,...b.slice(1)],n=u[6],r=u[7]):(u=[n,r,n,r,s,c,s,c],n=s,r=c);for(var D=0,R=t.length;D<R;D++){var C=t[D];if(C[0]=="M")o=l=C[1],a=d=C[2];else{C[0]=="C"?(p=[o,a,...C.slice(1)],o=p[6],a=p[7]):(p=[o,a,o,a,l,d,l,d],o=l,a=d);var w=gR(u,p,i);if(i)m+=w;else{for(var P=0,T=w.length;P<T;P++)w[P].segment1=f,w[P].segment2=D,w[P].bez1=u,w[P].bez2=p;m=m.concat(w)}}}}}return m}function vR(e){var t=Is(e);if(t.abs)return bp(t.abs);if((!_p(e)||!_p(e&&e[0]))&&(e=mR(e)),!e||!e.length)return[["M",0,0]];var i=[],n=0,r=0,o=0,a=0,s=0,c;e[0][0]=="M"&&(n=+e[0][1],r=+e[0][2],o=n,a=r,s++,i[0]=["M",n,r]);for(var l,d,u=s,p=e.length;u<p;u++){if(i.push(l=[]),d=e[u],c=d[0],c!=c.toUpperCase())switch(l[0]=c.toUpperCase(),l[0]){case"A":l[1]=d[1],l[2]=d[2],l[3]=d[3],l[4]=d[4],l[5]=d[5],l[6]=+d[6]+n,l[7]=+d[7]+r;break;case"V":l[1]=+d[1]+r;break;case"H":l[1]=+d[1]+n;break;case"M":o=+d[1]+n,a=+d[2]+r;default:for(var m=1,f=d.length;m<f;m++)l[m]=+d[m]+(m%2?n:r)}else for(var _=0,b=d.length;_<b;_++)l[_]=d[_];switch(c=c.toUpperCase(),l[0]){case"Z":n=+o,r=+a;break;case"H":n=l[1];break;case"V":r=l[1];break;case"M":o=l[l.length-2],a=l[l.length-1];default:n=l[l.length-2],r=l[l.length-1]}}return i.toString=Uy,t.abs=bp(i),i}function Hy(e){return e[0]===e[2]&&e[1]===e[3]&&e[4]===e[6]&&e[5]===e[7]}function vp(e,t,i,n){return[e,t,i,n,i,n]}function $y(e,t,i,n,r,o){var a=.3333333333333333,s=2/3;return[a*e+s*i,a*t+s*n,a*r+s*i,a*o+s*n,r,o]}function Gy(e,t,i,n,r,o,a,s,c,l){var d=zo*120/180,u=zo/180*(+r||0),p=[],m,f=pR(function(A,x,y){var F=A*Wt.cos(y)-x*Wt.sin(y),B=A*Wt.sin(y)+x*Wt.cos(y);return{x:F,y:B}});if(l)H=l[0],N=l[1],P=l[2],T=l[3];else{m=f(e,t,-u),e=m.x,t=m.y,m=f(s,c,-u),s=m.x,c=m.y;var _=(e-s)/2,b=(t-c)/2,D=_*_/(i*i)+b*b/(n*n);D>1&&(D=Wt.sqrt(D),i=D*i,n=D*n);var R=i*i,C=n*n,w=(o==a?-1:1)*Wt.sqrt($o((R*C-R*b*b-C*_*_)/(R*b*b+C*_*_))),P=w*i*b/n+(e+s)/2,T=w*-n*_/i+(t+c)/2,H=Wt.asin(((t-T)/n).toFixed(9)),N=Wt.asin(((c-T)/n).toFixed(9));H=e<P?zo-H:H,N=s<P?zo-N:N,H<0&&(H=zo*2+H),N<0&&(N=zo*2+N),a&&H>N&&(H=H-zo*2),!a&&N>H&&(N=N-zo*2)}var W=N-H;if($o(W)>d){var $=N,Q=s,Y=c;N=H+d*(a&&N>H?1:-1),s=P+i*Wt.cos(N),c=T+n*Wt.sin(N),p=Gy(s,c,i,n,r,0,a,Q,Y,[N,$,P,T])}W=N-H;var ae=Wt.cos(H),Ie=Wt.sin(H),di=Wt.cos(N),ut=Wt.sin(N),$e=Wt.tan(W/4),Wi=4/3*i*$e,Ui=4/3*n*$e,At=[e,t],ri=[e+Wi*Ie,t-Ui*ae],Z=[s+Wi*ut,c-Ui*di],ee=[s,c];if(ri[0]=2*At[0]-ri[0],ri[1]=2*At[1]-ri[1],l)return[ri,Z,ee].concat(p);p=[ri,Z,ee].concat(p).join().split(",");for(var _e=[],Ue=0,Ri=p.length;Ue<Ri;Ue++)_e[Ue]=Ue%2?f(p[Ue-1],p[Ue],u).y:f(p[Ue],p[Ue+1],u).x;return _e}function _R(e,t,i,n,r,o,a,s){for(var c=[],l=[[],[]],d,u,p,m,f,_,b,D,R=0;R<2;++R){if(R==0?(u=6*e-12*i+6*r,d=-3*e+9*i-9*r+3*a,p=3*i-3*e):(u=6*t-12*n+6*o,d=-3*t+9*n-9*o+3*s,p=3*n-3*t),$o(d)<1e-12){if($o(u)<1e-12)continue;m=-p/u,0<m&&m<1&&c.push(m);continue}b=u*u-4*p*d,D=Wt.sqrt(b),!(b<0)&&(f=(-u+D)/(2*d),0<f&&f<1&&c.push(f),_=(-u-D)/(2*d),0<_&&_<1&&c.push(_))}for(var C=c.length,w=C,P;C--;)m=c[C],P=1-m,l[0][C]=P*P*P*e+3*P*P*m*i+3*P*m*m*r+m*m*m*a,l[1][C]=P*P*P*t+3*P*P*m*n+3*P*m*m*o+m*m*m*s;return l[0][w]=e,l[1][w]=t,l[0][w+1]=a,l[1][w+1]=s,l[0].length=l[1].length=w+2,{x0:br(...l[0]),y0:br(...l[1]),x1:yr(...l[0]),y1:yr(...l[1])}}function Wy(e){var t=Is(e);if(t.curve)return bp(t.curve);for(var i=vR(e),n={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},r=function(m,f,_){var b,D;if(!m)return["C",f.x,f.y,f.x,f.y,f.x,f.y];switch(!(m[0]in{T:1,Q:1})&&(f.qx=f.qy=null),m[0]){case"M":f.X=m[1],f.Y=m[2];break;case"A":m=["C",...Gy(f.x,f.y,...m.slice(1))];break;case"S":_=="C"||_=="S"?(b=f.x*2-f.bx,D=f.y*2-f.by):(b=f.x,D=f.y),m=["C",b,D,...m.slice(1)];break;case"T":_=="Q"||_=="T"?(f.qx=f.x*2-f.qx,f.qy=f.y*2-f.qy):(f.qx=f.x,f.qy=f.y),m=["C",...$y(f.x,f.y,f.qx,f.qy,m[1],m[2])];break;case"Q":f.qx=m[1],f.qy=m[2],m=["C",...$y(f.x,f.y,m[1],m[2],m[3],m[4])];break;case"L":m=["C",...vp(f.x,f.y,m[1],m[2])];break;case"H":m=["C",...vp(f.x,f.y,m[1],f.y)];break;case"V":m=["C",...vp(f.x,f.y,f.x,m[1])];break;case"Z":m=["C",...vp(f.x,f.y,f.X,f.Y)];break}return m},o=function(m,f){if(m[f].length>7){m[f].shift();for(var _=m[f];_.length;)a[f]="A",m.splice(f++,0,["C",..._.splice(0,6)]);m.splice(f,1),d=i.length}},a=[],s="",c="",l=0,d=i.length;l<d;l++){i[l]&&(s=i[l][0]),s!="C"&&(a[l]=s,l&&(c=a[l-1])),i[l]=r(i[l],n,c),a[l]!="A"&&s=="C"&&(a[l]="C"),o(i,l);var u=i[l],p=u.length;n.x=u[p-2],n.y=u[p-1],n.bx=Ny(u[p-4])||n.x,n.by=Ny(u[p-3])||n.y}return t.curve=bp(i),i}function Fe(e){return it(e)&&$t(e,"waypoints")}function xe(e){return it(e)&&$t(e,"labelTarget")}function xp(e){return{x:Math.round(e.x),y:Math.round(e.y),width:Math.round(e.width),height:Math.round(e.height)}}function Rn(e){return{x:Math.round(e.x),y:Math.round(e.y)}}function ce(e){return{top:e.y,right:e.x+(e.width||0),bottom:e.y+(e.height||0),left:e.x}}function Ca(e){return{x:e.left,y:e.top,width:e.right-e.left,height:e.bottom-e.top}}function bR(e){return Rn({x:e.x+(e.width||0)/2,y:e.y+(e.height||0)/2})}function yR(e){for(var t=e.waypoints,i=t.reduce(function(l,d,u){var p=t[u-1];if(p){var m=l[l.length-1],f=m&&m.endLength||0,_=wR(p,d);l.push({start:p,end:d,startLength:f,endLength:f+_,length:_})}return l},[]),n=i.reduce(function(l,d){return l+d.length},0),r=n/2,o=0,a=i[o];a.endLength<r;)a=i[++o];var s=(r-a.startLength)/a.length,c={x:a.start.x+(a.end.x-a.start.x)*s,y:a.start.y+(a.end.y-a.start.y)*s};return c}function ue(e){return Fe(e)?yR(e):bR(e)}function xt(e,t,i){i=i||0,it(i)||(i={x:i,y:i});var n=ce(e),r=ce(t),o=n.bottom+i.y<=r.top,a=n.left-i.x>=r.right,s=n.top-i.y>=r.bottom,c=n.right+i.x<=r.left,l=o?"top":s?"bottom":null,d=c?"left":a?"right":null;return d&&l?l+"-"+d:d||l||"intersect"}function xl(e,t,i){var n=xR(e,t);return n.length===1||n.length===2&&Vo(n[0],n[1])<1?Rn(n[0]):n.length>1?(n=wi(n,function(r){var o=Math.floor(r.t2*100)||1;return o=100-o,o=(o<10?"0":"")+o,r.segment2+"#"+o}),Rn(n[i?0:n.length-1])):null}function xR(e,t){return yl(e,t)}function qy(e){e=e.slice();for(var t=0,i,n,r;e[t];)i=e[t],n=e[t-1],r=e[t+1],Vo(i,r)===0||Ts(n,r,i)?e.splice(t,1):t++;return e}function wR(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function wp(e,t){return Math.round(e*t)/t}function Yy(e){return he(e)?e+"px":e}function ER(e){for(;e.parent;)e=e.parent;return e}function CR(e){e=k({},{width:"100%",height:"100%"},e);let t=e.container||document.body,i=document.createElement("div");return i.setAttribute("class","djs-container djs-parent"),Vt(i,{position:"relative",overflow:"hidden",width:Yy(e.width),height:Yy(e.height)}),t.appendChild(i),i}function Ky(e,t,i){let n=ie("g");Re(n).add(t);let r=i!==void 0?i:e.childNodes.length-1;return e.insertBefore(n,e.childNodes[r]||null),n}var SR="base",Xy=0,MR=1,DR={shape:["x","y","width","height"],connection:["waypoints"]};function ke(e,t,i,n){this._eventBus=t,this._elementRegistry=n,this._graphicsFactory=i,this._rootsIdx=0,this._layers={},this._planes=[],this._rootElement=null,this._focused=!1,this._init(e||{})}ke.$inject=["config.canvas","eventBus","graphicsFactory","elementRegistry"];ke.prototype._init=function(e){let t=this._eventBus,i=this._container=CR(e),n=this._svg=ie("svg");J(n,{width:"100%",height:"100%"}),Tt(n,"tabindex",0),e.autoFocus&&t.on("element.hover",()=>{this.restoreFocus()}),t.on("element.mousedown",500,o=>{this.focus()}),n.addEventListener("focusin",()=>{this._setFocused(!0)}),n.addEventListener("focusout",()=>{this._setFocused(!1)}),me(i,n);let r=this._viewport=Ky(n,"viewport");e.deferUpdate&&(this._viewboxChanged=sp(jt(this._viewboxChanged,this),300)),t.on("diagram.init",()=>{t.fire("canvas.init",{svg:n,viewport:r})}),t.on(["shape.added","connection.added","shape.removed","connection.removed","elements.changed","root.set"],()=>{delete this._cachedViewbox}),t.on("diagram.destroy",500,this._destroy,this),t.on("diagram.clear",500,this._clear,this)};ke.prototype._destroy=function(){this._eventBus.fire("canvas.destroy",{svg:this._svg,viewport:this._viewport});let e=this._container.parentNode;e&&e.removeChild(this._container),delete this._svg,delete this._container,delete this._layers,delete this._planes,delete this._rootElement,delete this._viewport};ke.prototype._setFocused=function(e){e!=this._focused&&(this._focused=e,this._eventBus.fire("canvas.focus.changed",{focused:e}))};ke.prototype._clear=function(){this._elementRegistry.getAll().forEach(t=>{let i=hp(t);i==="root"?this.removeRootElement(t):this._removeElement(t,i)}),this._planes=[],this._rootElement=null,delete this._cachedViewbox};ke.prototype.focus=function(){this._svg.focus({preventScroll:!0}),this._setFocused(!0)};ke.prototype.restoreFocus=function(){document.activeElement===document.body&&this.focus()};ke.prototype.isFocused=function(){return this._focused};ke.prototype.getDefaultLayer=function(){return this.getLayer(SR,Xy)};ke.prototype.getLayer=function(e,t){if(!e)throw new Error("must specify a name");let i=this._layers[e];if(i||(i=this._layers[e]=this._createLayer(e,t)),typeof t<"u"&&i.index!==t)throw new Error("layer <"+e+"> already created at index <"+t+">");return i.group};ke.prototype._getChildIndex=function(e){return Ot(this._layers,function(t,i){return i.visible&&e>=i.index&&t++,t},0)};ke.prototype._createLayer=function(e,t){typeof t>"u"&&(t=MR);let i=this._getChildIndex(t);return{group:Ky(this._viewport,"layer-"+e,i),index:t,visible:!0}};ke.prototype.showLayer=function(e){if(!e)throw new Error("must specify a name");let t=this._layers[e];if(!t)throw new Error("layer <"+e+"> does not exist");let i=this._viewport,n=t.group,r=t.index;if(t.visible)return n;let o=this._getChildIndex(r);return i.insertBefore(n,i.childNodes[o]||null),t.visible=!0,n};ke.prototype.hideLayer=function(e){if(!e)throw new Error("must specify a name");let t=this._layers[e];if(!t)throw new Error("layer <"+e+"> does not exist");let i=t.group;return t.visible&&(Qe(i),t.visible=!1),i};ke.prototype._removeLayer=function(e){let t=this._layers[e];t&&(delete this._layers[e],Qe(t.group))};ke.prototype.getActiveLayer=function(){let e=this._findPlaneForRoot(this.getRootElement());return e?e.layer:null};ke.prototype.findRoot=function(e){return typeof e=="string"&&(e=this._elementRegistry.get(e)),e?(this._findPlaneForRoot(ER(e))||{}).rootElement:void 0};ke.prototype.getRootElements=function(){return this._planes.map(function(e){return e.rootElement})};ke.prototype._findPlaneForRoot=function(e){return ve(this._planes,function(t){return t.rootElement===e})};ke.prototype.getContainer=function(){return this._container};ke.prototype._updateMarker=function(e,t,i){let n;e.id||(e=this._elementRegistry.get(e)),e.markers=e.markers||new Set,n=this._elementRegistry._elements[e.id],n&&(M([n.gfx,n.secondaryGfx],function(r){r&&(i?(e.markers.add(t),Re(r).add(t)):(e.markers.delete(t),Re(r).remove(t)))}),this._eventBus.fire("element.marker.update",{element:e,gfx:n.gfx,marker:t,add:!!i}))};ke.prototype.addMarker=function(e,t){this._updateMarker(e,t,!0)};ke.prototype.removeMarker=function(e,t){this._updateMarker(e,t,!1)};ke.prototype.hasMarker=function(e,t){return e.id||(e=this._elementRegistry.get(e)),e.markers?e.markers.has(t):!1};ke.prototype.toggleMarker=function(e,t){this.hasMarker(e,t)?this.removeMarker(e,t):this.addMarker(e,t)};ke.prototype.getRootElement=function(){let e=this._rootElement;return e||this._planes.length?e:this.setRootElement(this.addRootElement(null))};ke.prototype.addRootElement=function(e){let t=this._rootsIdx++;e||(e={id:"__implicitroot_"+t,children:[],isImplicit:!0});let i=e.layer="root-"+t;this._ensureValid("root",e);let n=this.getLayer(i,Xy);return this.hideLayer(i),this._addRoot(e,n),this._planes.push({rootElement:e,layer:n}),e};ke.prototype.removeRootElement=function(e){if(typeof e=="string"&&(e=this._elementRegistry.get(e)),!!this._findPlaneForRoot(e))return this._removeRoot(e),this._removeLayer(e.layer),this._planes=this._planes.filter(function(i){return i.rootElement!==e}),this._rootElement===e&&(this._rootElement=null),e};ke.prototype.setRootElement=function(e){if(e===this._rootElement)return e;let t;if(!e)throw new Error("rootElement required");return t=this._findPlaneForRoot(e),t||(e=this.addRootElement(e)),this._setRoot(e),e};ke.prototype._removeRoot=function(e){let t=this._elementRegistry,i=this._eventBus;i.fire("root.remove",{element:e}),i.fire("root.removed",{element:e}),t.remove(e)};ke.prototype._addRoot=function(e,t){let i=this._elementRegistry,n=this._eventBus;n.fire("root.add",{element:e}),i.add(e,t),n.fire("root.added",{element:e,gfx:t})};ke.prototype._setRoot=function(e,t){let i=this._rootElement;i&&(this._elementRegistry.updateGraphics(i,null,!0),this.hideLayer(i.layer)),e&&(t||(t=this._findPlaneForRoot(e).layer),this._elementRegistry.updateGraphics(e,this._svg,!0),this.showLayer(e.layer)),this._rootElement=e,this._eventBus.fire("root.set",{element:e})};ke.prototype._ensureValid=function(e,t){if(!t.id)throw new Error("element must have an id");if(this._elementRegistry.get(t.id))throw new Error("element <"+t.id+"> already exists");let i=DR[e];if(!Pn(i,function(r){return typeof t[r]<"u"}))throw new Error("must supply { "+i.join(", ")+" } with "+e)};ke.prototype._setParent=function(e,t,i){et(t.children,e,i),e.parent=t};ke.prototype._addElement=function(e,t,i,n){i=i||this.getRootElement();let r=this._eventBus,o=this._graphicsFactory;this._ensureValid(e,t),r.fire(e+".add",{element:t,parent:i}),this._setParent(t,i,n);let a=o.create(e,t,n);return this._elementRegistry.add(t,a),o.update(e,t,a),r.fire(e+".added",{element:t,gfx:a}),t};ke.prototype.addShape=function(e,t,i){return this._addElement("shape",e,t,i)};ke.prototype.addConnection=function(e,t,i){return this._addElement("connection",e,t,i)};ke.prototype._removeElement=function(e,t){let i=this._elementRegistry,n=this._graphicsFactory,r=this._eventBus;if(e=i.get(e.id||e),!!e)return r.fire(t+".remove",{element:e}),n.remove(e),at(e.parent&&e.parent.children,e),e.parent=null,r.fire(t+".removed",{element:e}),i.remove(e),e};ke.prototype.removeShape=function(e){return this._removeElement(e,"shape")};ke.prototype.removeConnection=function(e){return this._removeElement(e,"connection")};ke.prototype.getGraphics=function(e,t){return this._elementRegistry.getGraphics(e,t)};ke.prototype._changeViewbox=function(e){this._eventBus.fire("canvas.viewbox.changing"),e.apply(this),this._cachedViewbox=null,this._viewboxChanged()};ke.prototype._viewboxChanged=function(){this._eventBus.fire("canvas.viewbox.changed",{viewbox:this.viewbox()})};ke.prototype.viewbox=function(e){if(e===void 0&&this._cachedViewbox)return structuredClone(this._cachedViewbox);let t=this._viewport,i=this.getSize(),n,r,o,a,s,c,l;if(e)this._changeViewbox(function(){s=Math.min(i.width/e.width,i.height/e.height);let d=this._svg.createSVGMatrix().scale(s).translate(-e.x,-e.y);Ea(t,d)});else return o=this._rootElement?this.getActiveLayer():null,n=o&&o.getBBox()||{},a=Ea(t),r=a?a.matrix:ky(),s=wp(r.a,1e3),c=wp(-r.e||0,1e3),l=wp(-r.f||0,1e3),e=this._cachedViewbox={x:c?c/s:0,y:l?l/s:0,width:i.width/s,height:i.height/s,scale:s,inner:{width:n.width||0,height:n.height||0,x:n.x||0,y:n.y||0},outer:i},e;return e};ke.prototype.scroll=function(e){let t=this._viewport,i=t.getCTM();return e&&this._changeViewbox(function(){e=k({dx:0,dy:0},e||{}),i=this._svg.createSVGMatrix().translate(e.dx,e.dy).multiply(i),Zy(t,i)}),{x:i.e,y:i.f}};ke.prototype.scrollToElement=function(e,t){let i=100;typeof e=="string"&&(e=this._elementRegistry.get(e));let n=this.findRoot(e);if(n!==this.getRootElement()&&this.setRootElement(n),n===e)return;t||(t={}),typeof t=="number"&&(i=t),t={top:t.top||i,right:t.right||i,bottom:t.bottom||i,left:t.left||i};let r=Je(e),o=ce(r),a=this.viewbox(),s=this.zoom(),c,l;a.y+=t.top/s,a.x+=t.left/s,a.width-=(t.right+t.left)/s,a.height-=(t.bottom+t.top)/s;let d=ce(a);if(!(r.width<a.width&&r.height<a.height))c=r.x-a.x,l=r.y-a.y;else{let p=Math.max(0,o.right-d.right),m=Math.min(0,o.left-d.left),f=Math.max(0,o.bottom-d.bottom),_=Math.min(0,o.top-d.top);c=p||m,l=f||_}this.scroll({dx:-c*s,dy:-l*s})};ke.prototype.zoom=function(e,t){if(!e)return this.viewbox(e).scale;if(e==="fit-viewport")return this._fitViewport(t);let i,n;return this._changeViewbox(function(){typeof t!="object"&&(i=this.viewbox().outer,t={x:i.width/2,y:i.height/2}),n=this._setZoom(e,t)}),wp(n.a,1e3)};function Zy(e,t){let i="matrix("+t.a+","+t.b+","+t.c+","+t.d+","+t.e+","+t.f+")";e.setAttribute("transform",i)}ke.prototype._fitViewport=function(e){let t=this.viewbox(),i=t.outer,n=t.inner,r,o;return n.x>=0&&n.y>=0&&n.x+n.width<=i.width&&n.y+n.height<=i.height&&!e?o={x:0,y:0,width:Math.max(n.width+n.x,i.width),height:Math.max(n.height+n.y,i.height)}:(r=Math.min(1,i.width/n.width,i.height/n.height),o={x:n.x+(e?n.width/2-i.width/r/2:0),y:n.y+(e?n.height/2-i.height/r/2:0),width:i.width/r,height:i.height/r}),this.viewbox(o),this.viewbox(!1).scale};ke.prototype._setZoom=function(e,t){let i=this._svg,n=this._viewport,r=i.createSVGMatrix(),o=i.createSVGPoint(),a,s,c,l,d;c=n.getCTM();let u=c.a;return t?(a=k(o,t),s=a.matrixTransform(c.inverse()),l=r.translate(s.x,s.y).scale(1/u*e).translate(-s.x,-s.y),d=c.multiply(l)):d=r.scale(e),Zy(this._viewport,d),d};ke.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}};ke.prototype.getAbsoluteBBox=function(e){let t=this.viewbox(),i;e.waypoints?i=this.getGraphics(e).getBBox():i=e;let n=i.x*t.scale-t.x*t.scale,r=i.y*t.scale-t.y*t.scale,o=i.width*t.scale,a=i.height*t.scale;return{x:n,y:r,width:o,height:a}};ke.prototype.resized=function(){delete this._cachedViewbox,this._eventBus.fire("canvas.resized")};var Fs="data-element-id";function Li(e){this._elements={},this._eventBus=e}Li.$inject=["eventBus"];Li.prototype.add=function(e,t,i){var n=e.id;this._validateId(n),J(t,Fs,n),i&&J(i,Fs,n),this._elements[n]={element:e,gfx:t,secondaryGfx:i}};Li.prototype.remove=function(e){var t=this._elements,i=e.id||e,n=i&&t[i];n&&(J(n.gfx,Fs,""),n.secondaryGfx&&J(n.secondaryGfx,Fs,""),delete t[i])};Li.prototype.updateId=function(e,t){this._validateId(t),typeof e=="string"&&(e=this.get(e)),this._eventBus.fire("element.updateId",{element:e,newId:t});var i=this.getGraphics(e),n=this.getGraphics(e,!0);this.remove(e),e.id=t,this.add(e,i,n)};Li.prototype.updateGraphics=function(e,t,i){var n=e.id||e,r=this._elements[n];return i?r.secondaryGfx=t:r.gfx=t,t&&J(t,Fs,n),t};Li.prototype.get=function(e){var t;typeof e=="string"?t=e:t=e&&J(e,Fs);var i=this._elements[t];return i&&i.element};Li.prototype.filter=function(e){var t=[];return this.forEach(function(i,n){e(i,n)&&t.push(i)}),t};Li.prototype.find=function(e){for(var t=this._elements,i=Object.keys(t),n=0;n<i.length;n++){var r=i[n],o=t[r],a=o.element,s=o.gfx;if(e(a,s))return a}};Li.prototype.getAll=function(){return this.filter(function(e){return e})};Li.prototype.forEach=function(e){var t=this._elements;Object.keys(t).forEach(function(i){var n=t[i],r=n.element,o=n.gfx;return e(r,o)})};Li.prototype.getGraphics=function(e,t){var i=e.id||e,n=this._elements[i];return n&&(t?n.secondaryGfx:n.gfx)};Li.prototype._validateId=function(e){if(!e)throw new Error("element must have an id");if(this._elements[e])throw new Error("element with id "+e+" already added")};function AR(e,t,i,n){var r=i.inverse;return Object.defineProperty(e,"remove",{value:function(o){var a=this.indexOf(o);return a!==-1&&(this.splice(a,1),t.unset(o,r,n)),o}}),Object.defineProperty(e,"contains",{value:function(o){return this.indexOf(o)!==-1}}),Object.defineProperty(e,"add",{value:function(o,a){var s=this.indexOf(o);if(typeof a>"u"){if(s!==-1)return;a=this.length}s!==-1&&this.splice(s,1),this.splice(a,0,o),s===-1&&t.set(o,r,n)}}),Object.defineProperty(e,"__refs_collection",{value:!0}),e}function PR(e){return e.__refs_collection===!0}function kR(e,t){return Object.prototype.hasOwnProperty.call(e,t.name||t)}function Qy(e,t,i){var n=AR(i[t.name]||[],e,t,i);Object.defineProperty(i,t.name,{enumerable:t.enumerable,value:n}),n.length&&n.forEach(function(r){e.set(r,t.inverse,i)})}function RR(e,t,i){var n=t.inverse,r=i[t.name];Object.defineProperty(i,t.name,{configurable:t.configurable,enumerable:t.enumerable,get:function(){return r},set:function(o){if(o!==r){var a=r;r=null,a&&e.unset(a,n,i),r=o,e.set(r,n,i)}}})}function un(e,t){if(!(this instanceof un))return new un(e,t);e.inverse=t,t.inverse=e,this.props={},this.props[e.name]=e,this.props[t.name]=t}un.prototype.bind=function(e,t){if(typeof t=="string"){if(!this.props[t])throw new Error("no property <"+t+"> in ref");t=this.props[t]}t.collection?Qy(this,t,e):RR(this,t,e)};un.prototype.ensureRefsCollection=function(e,t){var i=e[t.name];return PR(i)||Qy(this,t,e),i};un.prototype.ensureBound=function(e,t){kR(e,t)||this.bind(e,t)};un.prototype.unset=function(e,t,i){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).remove(i):e[t.name]=void 0)};un.prototype.set=function(e,t,i){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).add(i):e[t.name]=i)};var Tg=new un({name:"children",enumerable:!0,collection:!0},{name:"parent"}),e0=new un({name:"labels",enumerable:!0,collection:!0},{name:"labelTarget"}),Jy=new un({name:"attachers",collection:!0},{name:"host"}),t0=new un({name:"outgoing",collection:!0},{name:"source"}),i0=new un({name:"incoming",collection:!0},{name:"target"});function Ns(){Object.defineProperty(this,"businessObject",{writable:!0}),Object.defineProperty(this,"label",{get:function(){return this.labels[0]},set:function(e){var t=this.label,i=this.labels;!e&&t?i.remove(t):i.add(e,0)}}),Tg.bind(this,"parent"),e0.bind(this,"labels"),t0.bind(this,"outgoing"),i0.bind(this,"incoming")}function wl(){Ns.call(this),Tg.bind(this,"children"),Jy.bind(this,"host"),Jy.bind(this,"attachers")}z(wl,Ns);function n0(){Ns.call(this),Tg.bind(this,"children")}z(n0,wl);function r0(){wl.call(this),e0.bind(this,"labelTarget")}z(r0,wl);function o0(){Ns.call(this),t0.bind(this,"source"),i0.bind(this,"target")}z(o0,Ns);var OR={connection:o0,shape:wl,label:r0,root:n0};function a0(e,t){var i=OR[e];if(!i)throw new Error("unknown type: <"+e+">");return k(new i,t)}function s0(e){return e instanceof Ns}function On(){this._uid=12}On.prototype.createRoot=function(e){return this.create("root",e)};On.prototype.createLabel=function(e){return this.create("label",e)};On.prototype.createShape=function(e){return this.create("shape",e)};On.prototype.createConnection=function(e){return this.create("connection",e)};On.prototype.create=function(e,t){return t=k({},t||{}),t.id||(t.id=e+"_"+this._uid++),a0(e,t)};var Ep="__fn",c0=1e3,TR=Array.prototype.slice;function Ai(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}Ai.prototype.on=function(e,t,i,n){if(e=oe(e)?e:[e],vt(t)&&(n=i,i=t,t=c0),!he(t))throw new Error("priority must be a number");var r=i;n&&(r=jt(i,n),r[Ep]=i[Ep]||i);var o=this;e.forEach(function(a){o._addListener(a,{priority:t,callback:r,next:null})})};Ai.prototype.once=function(e,t,i,n){var r=this;if(vt(t)&&(n=i,i=t,t=c0),!he(t))throw new Error("priority must be a number");function o(){o.__isTomb=!0;var a=i.apply(n,arguments);return r.off(e,o),a}o[Ep]=i,this.on(e,t,o)};Ai.prototype.off=function(e,t){e=oe(e)?e:[e];var i=this;e.forEach(function(n){i._removeListener(n,t)})};Ai.prototype.createEvent=function(e){var t=new El;return t.init(e),t};Ai.prototype.fire=function(e,t){var i,n,r,o;if(o=TR.call(arguments),typeof e=="object"&&(t=e,e=t.type),!e)throw new Error("no event type specified");if(n=this._listeners[e],!!n){t instanceof El?i=t:i=this.createEvent(t),o[0]=i;var a=i.type;e!==a&&(i.type=e);try{r=this._invokeListeners(i,o,n)}finally{e!==a&&(i.type=a)}return r===void 0&&i.defaultPrevented&&(r=!1),r}};Ai.prototype.handleError=function(e){return this.fire("error",{error:e})===!1};Ai.prototype._destroy=function(){this._listeners={}};Ai.prototype._invokeListeners=function(e,t,i){for(var n;i&&!e.cancelBubble;)n=this._invokeListener(e,t,i),i=i.next;return n};Ai.prototype._invokeListener=function(e,t,i){var n;if(i.callback.__isTomb)return n;try{n=IR(i.callback,t),n!==void 0&&(e.returnValue=n,e.stopPropagation()),n===!1&&e.preventDefault()}catch(r){if(!this.handleError(r))throw console.error("unhandled error in event listener",r),r}return n};Ai.prototype._addListener=function(e,t){var i=this._getListeners(e),n;if(!i){this._setListeners(e,t);return}for(;i;){if(i.priority<t.priority){t.next=i,n?n.next=t:this._setListeners(e,t);return}n=i,i=i.next}n.next=t};Ai.prototype._getListeners=function(e){return this._listeners[e]};Ai.prototype._setListeners=function(e,t){this._listeners[e]=t};Ai.prototype._removeListener=function(e,t){var i=this._getListeners(e),n,r,o;if(!t){this._setListeners(e,null);return}for(;i;)n=i.next,o=i.callback,(o===t||o[Ep]===t)&&(r?r.next=n:this._setListeners(e,n)),r=i,i=n};function El(){}El.prototype.stopPropagation=function(){this.cancelBubble=!0};El.prototype.preventDefault=function(){this.defaultPrevented=!0};El.prototype.init=function(e){k(this,e||{})};function IR(e,t){return e.apply(null,t)}function er(e){return e.childNodes[0]}function l0(e){return e.parentNode.childNodes[1]}function Ls(e,t,i,n,r){var o=Rs();o.setTranslate(t,i);var a=Rs();a.setRotate(n||0,0,0);var s=Rs();s.setScale(r||1,r||1),Ea(e,[o,a,s])}function mt(e,t,i){var n=Rs();n.setTranslate(t,i),Ea(e,n)}function Cp(e,t){var i=Rs();i.setRotate(t,0,0),Ea(e,i)}function Bi(e,t){this._eventBus=e,this._elementRegistry=t}Bi.$inject=["eventBus","elementRegistry"];Bi.prototype._getChildrenContainer=function(e){var t=this._elementRegistry.getGraphics(e),i;return e.parent?(i=l0(t),i||(i=ie("g"),Re(i).add("djs-children"),me(t.parentNode,i))):i=t,i};Bi.prototype._clear=function(e){var t=er(e);return No(t),t};Bi.prototype._createContainer=function(e,t,i,n){var r=ie("g");Re(r).add("djs-group"),typeof i<"u"?d0(r,t,t.childNodes[i]):me(t,r);var o=ie("g");Re(o).add("djs-element"),Re(o).add("djs-"+e),n&&Re(o).add("djs-frame"),me(r,o);var a=ie("g");return Re(a).add("djs-visual"),me(o,a),o};Bi.prototype.create=function(e,t,i){var n=this._getChildrenContainer(t.parent);return this._createContainer(e,n,i,gp(t))};Bi.prototype.updateContainments=function(e){var t=this,i=this._elementRegistry,n;n=Ot(e,function(r,o){return o.parent&&(r[o.parent.id]=o.parent),r},{}),M(n,function(r){var o=r.children;if(o){var a=t._getChildrenContainer(r);M(o.slice().reverse(),function(s){var c=i.getGraphics(s);d0(c.parentNode,a)})}})};Bi.prototype.drawShape=function(e,t,i={}){var n=this._eventBus;return n.fire("render.shape",{gfx:e,element:t,attrs:i})};Bi.prototype.getShapePath=function(e){var t=this._eventBus;return t.fire("render.getShapePath",e)};Bi.prototype.drawConnection=function(e,t,i={}){var n=this._eventBus;return n.fire("render.connection",{gfx:e,element:t,attrs:i})};Bi.prototype.getConnectionPath=function(e){var t=this._eventBus;return t.fire("render.getConnectionPath",e)};Bi.prototype.update=function(e,t,i){if(t.parent){var n=this._clear(i);if(e==="shape")this.drawShape(n,t),mt(i,t.x,t.y);else if(e==="connection")this.drawConnection(n,t);else throw new Error("unknown type: "+e);t.hidden?J(i,"display","none"):J(i,"display","block")}};Bi.prototype.remove=function(e){var t=this._elementRegistry.getGraphics(e);Qe(t.parentNode)};function d0(e,t,i){var n=i||t.firstChild;e!==n&&t.insertBefore(e,n)}var u0={__depends__:[Fy],__init__:["canvas"],canvas:["type",ke],elementRegistry:["type",Li],elementFactory:["type",On],eventBus:["type",Ai],graphicsFactory:["type",Bi]};function FR(e){var t=new Sg(e);return t.init(),t}function NR(e){e=e||{};var t={config:["value",e]},i=[t,u0].concat(e.modules||[]);return FR(i)}function xr(e,t){this._injector=t||NR(e),this.get("eventBus").fire("diagram.init")}xr.prototype.get=function(e,t){return this._injector.get(e,t)};xr.prototype.invoke=function(e,t,i){return this._injector.invoke(e,t,i)};xr.prototype.destroy=function(){this.get("eventBus").fire("diagram.destroy")};xr.prototype.clear=function(){this.get("eventBus").fire("diagram.clear")};function Ng(){}Ng.prototype.get=function(e){return this.$model.properties.get(this,e)};Ng.prototype.set=function(e,t){this.$model.properties.set(this,e,t)};function m0(e,t){this.model=e,this.properties=t}m0.prototype.createType=function(e){var t=this.model,i=this.properties,n=Object.create(Ng.prototype);M(e.properties,function(a){!a.isMany&&a.default!==void 0&&(n[a.name]=a.default)}),i.defineModel(n,t),i.defineDescriptor(n,e);var r=e.ns.name;function o(a){i.define(this,"$type",{value:r,enumerable:!0}),i.define(this,"$attrs",{value:{}}),i.define(this,"$parent",{writable:!0}),M(a,jt(function(s,c){this.set(c,s)},this))}return o.prototype=n,o.hasType=n.$instanceOf=this.model.hasType,i.defineModel(o,t),i.defineDescriptor(o,e),o};var LR={String:!0,Boolean:!0,Integer:!0,Real:!0,Element:!0},f0={String:function(e){return e},Boolean:function(e){return e==="true"},Integer:function(e){return parseInt(e,10)},Real:function(e){return parseFloat(e)}};function Sp(e,t){var i=f0[e];return i?i(t):t}function Ig(e){return!!LR[e]}function Lg(e){return!!f0[e]}function fi(e,t){var i=e.split(/:/),n,r;if(i.length===1)n=e,r=t;else if(i.length===2)n=i[1],r=i[0];else throw new Error("expected <prefix:localName> or <localName>, got "+e);return e=(r?r+":":"")+n,{name:e,prefix:r,localName:n}}function pn(e){this.ns=e,this.name=e.name,this.allTypes=[],this.allTypesByName={},this.properties=[],this.propertiesByName={}}pn.prototype.build=function(){return ei(this,["ns","name","allTypes","allTypesByName","properties","propertiesByName","bodyProperty","idProperty"])};pn.prototype.addProperty=function(e,t,i){typeof t=="boolean"&&(i=t,t=void 0),this.addNamedProperty(e,i!==!1);var n=this.properties;t!==void 0?n.splice(t,0,e):n.push(e)};pn.prototype.replaceProperty=function(e,t,i){var n=e.ns,r=this.properties,o=this.propertiesByName,a=e.name!==t.name;if(e.isId){if(!t.isId)throw new Error("property <"+t.ns.name+"> must be id property to refine <"+e.ns.name+">");this.setIdProperty(t,!1)}if(e.isBody){if(!t.isBody)throw new Error("property <"+t.ns.name+"> must be body property to refine <"+e.ns.name+">");this.setBodyProperty(t,!1)}var s=r.indexOf(e);if(s===-1)throw new Error("property <"+n.name+"> not found in property list");r.splice(s,1),this.addProperty(t,i?void 0:s,a),o[n.name]=o[n.localName]=t};pn.prototype.redefineProperty=function(e,t,i){var n=e.ns.prefix,r=t.split("#"),o=fi(r[0],n),a=fi(r[1],o.prefix).name,s=this.propertiesByName[a];if(s)this.replaceProperty(s,e,i);else throw new Error("refined property <"+a+"> not found");delete e.redefines};pn.prototype.addNamedProperty=function(e,t){var i=e.ns,n=this.propertiesByName;t&&(this.assertNotDefined(e,i.name),this.assertNotDefined(e,i.localName)),n[i.name]=n[i.localName]=e};pn.prototype.removeNamedProperty=function(e){var t=e.ns,i=this.propertiesByName;delete i[t.name],delete i[t.localName]};pn.prototype.setBodyProperty=function(e,t){if(t&&this.bodyProperty)throw new Error("body property defined multiple times (<"+this.bodyProperty.ns.name+">, <"+e.ns.name+">)");this.bodyProperty=e};pn.prototype.setIdProperty=function(e,t){if(t&&this.idProperty)throw new Error("id property defined multiple times (<"+this.idProperty.ns.name+">, <"+e.ns.name+">)");this.idProperty=e};pn.prototype.assertNotTrait=function(e){if((e.extends||[]).length)throw new Error(`cannot create <${e.name}> extending <${e.extends}>`)};pn.prototype.assertNotDefined=function(e,t){var i=e.name,n=this.propertiesByName[i];if(n)throw new Error("property <"+i+"> already defined; override of <"+n.definedBy.ns.name+"#"+n.ns.name+"> by <"+e.definedBy.ns.name+"#"+e.ns.name+"> not allowed without redefines")};pn.prototype.hasProperty=function(e){return this.propertiesByName[e]};pn.prototype.addTrait=function(e,t){t&&this.assertNotTrait(e);var i=this.allTypesByName,n=this.allTypes,r=e.name;r in i||(M(e.properties,jt(function(o){o=k({},o,{name:o.ns.localName,inherited:t}),Object.defineProperty(o,"definedBy",{value:e});var a=o.replaces,s=o.redefines;a||s?this.redefineProperty(o,a||s,a):(o.isBody&&this.setBodyProperty(o),o.isId&&this.setIdProperty(o),this.addProperty(o))},this)),n.push(e),i[r]=e)};function Wo(e,t){this.packageMap={},this.typeMap={},this.packages=[],this.properties=t,M(e,jt(this.registerPackage,this))}Wo.prototype.getPackage=function(e){return this.packageMap[e]};Wo.prototype.getPackages=function(){return this.packages};Wo.prototype.registerPackage=function(e){e=k({},e);var t=this.packageMap;p0(t,e,"prefix"),p0(t,e,"uri"),M(e.types,jt(function(i){this.registerType(i,e)},this)),t[e.uri]=t[e.prefix]=e,this.packages.push(e)};Wo.prototype.registerType=function(e,t){e=k({},e,{superClass:(e.superClass||[]).slice(),extends:(e.extends||[]).slice(),properties:(e.properties||[]).slice(),meta:k(e.meta||{})});var i=fi(e.name,t.prefix),n=i.name,r={};M(e.properties,jt(function(o){var a=fi(o.name,i.prefix),s=a.name;Ig(o.type)||(o.type=fi(o.type,a.prefix).name),k(o,{ns:a,name:s}),r[s]=o},this)),k(e,{ns:i,name:n,propertiesByName:r}),M(e.extends,jt(function(o){var a=fi(o,i.prefix),s=this.typeMap[a.name];s.traits=s.traits||[],s.traits.push(n)},this)),this.definePackage(e,t),this.typeMap[n]=e};Wo.prototype.mapTypes=function(e,t,i){var n=Ig(e.name)?{name:e.name}:this.typeMap[e.name],r=this;function o(c,l){var d=fi(c,Ig(c)?"":e.prefix);r.mapTypes(d,t,l)}function a(c){return o(c,!0)}function s(c){return o(c,!1)}if(!n)throw new Error("unknown type <"+e.name+">");M(n.superClass,i?a:s),t(n,!i),M(n.traits,a)};Wo.prototype.getEffectiveDescriptor=function(e){var t=fi(e),i=new pn(t);this.mapTypes(t,function(r,o){i.addTrait(r,o)});var n=i.build();return this.definePackage(n,n.allTypes[n.allTypes.length-1].$pkg),n};Wo.prototype.definePackage=function(e,t){this.properties.define(e,"$pkg",{value:t})};function p0(e,t,i){var n=t[i];if(n in e)throw new Error("package with "+i+" <"+n+"> already defined")}function Sa(e){this.model=e}Sa.prototype.set=function(e,t,i){if(!Ht(t)||!t.length)throw new TypeError("property name must be a non-empty string");var n=this.getProperty(e,t),r=n&&n.name;BR(i)?n?delete e[r]:delete e.$attrs[Fg(t)]:n?r in e?e[r]=i:h0(e,n,i):e.$attrs[Fg(t)]=i};Sa.prototype.get=function(e,t){var i=this.getProperty(e,t);if(!i)return e.$attrs[Fg(t)];var n=i.name;return!e[n]&&i.isMany&&h0(e,i,[]),e[n]};Sa.prototype.define=function(e,t,i){if(!i.writable){var n=i.value;i=k({},i,{get:function(){return n}}),delete i.value}Object.defineProperty(e,t,i)};Sa.prototype.defineDescriptor=function(e,t){this.define(e,"$descriptor",{value:t})};Sa.prototype.defineModel=function(e,t){this.define(e,"$model",{value:t})};Sa.prototype.getProperty=function(e,t){var i=this.model,n=i.getPropertyDescriptor(e,t);if(n)return n;if(t.includes(":"))return null;let r=i.config.strict;if(typeof r<"u"){let o=new TypeError(`unknown property <${t}> on <${e.$type}>`);if(r)throw o;typeof console<"u"&&console.warn(o)}return null};function BR(e){return typeof e>"u"}function h0(e,t,i){Object.defineProperty(e,t.name,{enumerable:!t.isReference,writable:!0,value:i,configurable:!0})}function Fg(e){return e.replace(/^:/,"")}function Zi(e,t={}){this.properties=new Sa(this),this.factory=new m0(this,this.properties),this.registry=new Wo(e,this.properties),this.typeCache={},this.config=t}Zi.prototype.create=function(e,t){var i=this.getType(e);if(!i)throw new Error("unknown type <"+e+">");return new i(t)};Zi.prototype.getType=function(e){var t=this.typeCache,i=Ht(e)?e:e.ns.name,n=t[i];return n||(e=this.registry.getEffectiveDescriptor(i),n=t[i]=this.factory.createType(e)),n};Zi.prototype.createAny=function(e,t,i){var n=fi(e),r={$type:e,$instanceOf:function(a){return a===this.$type},get:function(a){return this[a]},set:function(a,s){_y(this,[a],s)}},o={name:e,isGeneric:!0,ns:{prefix:n.prefix,localName:n.localName,uri:t}};return this.properties.defineDescriptor(r,o),this.properties.defineModel(r,this),this.properties.define(r,"get",{enumerable:!1,writable:!0}),this.properties.define(r,"set",{enumerable:!1,writable:!0}),this.properties.define(r,"$parent",{enumerable:!1,writable:!0}),this.properties.define(r,"$instanceOf",{enumerable:!1,writable:!0}),M(i,function(a,s){it(a)&&a.value!==void 0?r[a.name]=a.value:r[s]=a}),r};Zi.prototype.getPackage=function(e){return this.registry.getPackage(e)};Zi.prototype.getPackages=function(){return this.registry.getPackages()};Zi.prototype.getElementDescriptor=function(e){return e.$descriptor};Zi.prototype.hasType=function(e,t){t===void 0&&(t=e,e=this);var i=e.$model.getElementDescriptor(e);return t in i.allTypesByName};Zi.prototype.getPropertyDescriptor=function(e,t){return this.getElementDescriptor(e).propertiesByName[t]};Zi.prototype.getTypeDescriptor=function(e){return this.registry.typeMap[e]};var g0=String.fromCharCode,jR=Object.prototype.hasOwnProperty,VR=/&#(\d+);|&#x([0-9a-f]+);|&(\w+);/ig,Cl={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'};Object.keys(Cl).forEach(function(e){Cl[e.toUpperCase()]=Cl[e]});function zR(e,t,i,n){return n?jR.call(Cl,n)?Cl[n]:"&"+n+";":g0(t||parseInt(i,16))}function Ma(e){return e.length>3&&e.indexOf("&")!==-1?e.replace(VR,zR):e}var v0="non-whitespace outside of root node";function Bs(e){return new Error(e)}function _0(e){return"missing namespace for prefix <"+e+">"}function Mp(e){return{get:e,enumerable:!0}}function HR(e){var t={},i;for(i in e)t[i]=e[i];return t}function Bg(e){return e+"$uri"}function $R(e){var t={},i,n;for(i in e)n=e[i],t[n]=n,t[Bg(n)]=i;return t}function b0(){return{line:0,column:0}}function WR(e){throw e}function jg(e){if(!this)return new jg(e);var t=e&&e.proxy,i,n,r,o,a=WR,s,c,l,d,u=b0,p=!1,m=!1,f=null,_=!1,b;function D(w){w instanceof Error||(w=Bs(w)),f=w,a(w,u)}function R(w){s&&(w instanceof Error||(w=Bs(w)),s(w,u))}this.on=function(w,P){if(typeof P!="function")throw Bs("required args <name, cb>");switch(w){case"openTag":n=P;break;case"text":i=P;break;case"closeTag":r=P;break;case"error":a=P;break;case"warn":s=P;break;case"cdata":o=P;break;case"attention":d=P;break;case"question":l=P;break;case"comment":c=P;break;default:throw Bs("unsupported event: "+w)}return this},this.ns=function(w){if(typeof w>"u"&&(w={}),typeof w!="object")throw Bs("required args <nsMap={}>");var P={},T;for(T in w)P[T]=w[T];return m=!0,b=P,this},this.parse=function(w){if(typeof w!="string")throw Bs("required args <xml=string>");return f=null,C(w),u=b0,_=!1,f},this.stop=function(){_=!0};function C(w){var P=m?[]:null,T=m?$R(b):null,H,N=[],W=0,$=!1,Q=!1,Y=0,ae=0,Ie,di,ut,$e,Wi,Ui,At,ri,Z,ee="",_e=0,Ue;function Ri(){if(Ue!==null)return Ue;var x,y,F,B=m&&T.xmlns,q=m&&p?[]:null,te=_e,be=ee,We=be.length,qt,Lt,oi,yn,ct,Vr={},yu={},sn,Ne,tt;e:for(;te<We;te++)if(sn=!1,Ne=be.charCodeAt(te),!(Ne===32||Ne<14&&Ne>8)){for((Ne<65||Ne>122||Ne>90&&Ne<97)&&Ne!==95&&Ne!==58&&(R("illegal first char attribute name"),sn=!0),tt=te+1;tt<We;tt++)if(Ne=be.charCodeAt(tt),!(Ne>96&&Ne<123||Ne>64&&Ne<91||Ne>47&&Ne<59||Ne===46||Ne===45||Ne===95)){if(Ne===32||Ne<14&&Ne>8){R("missing attribute value"),te=tt;continue e}if(Ne===61)break;R("illegal attribute name char"),sn=!0}if(ct=be.substring(te,tt),ct==="xmlns:xmlns"&&(R("illegal declaration of xmlns"),sn=!0),Ne=be.charCodeAt(tt+1),Ne===34)tt=be.indexOf('"',te=tt+2),tt===-1&&(tt=be.indexOf("'",te),tt!==-1&&(R("attribute value quote missmatch"),sn=!0));else if(Ne===39)tt=be.indexOf("'",te=tt+2),tt===-1&&(tt=be.indexOf('"',te),tt!==-1&&(R("attribute value quote missmatch"),sn=!0));else for(R("missing attribute value quotes"),sn=!0,tt=tt+1;tt<We&&(Ne=be.charCodeAt(tt+1),!(Ne===32||Ne<14&&Ne>8));tt++);for(tt===-1&&(R("missing closing quotes"),tt=We,sn=!0),sn||(oi=be.substring(te,tt)),te=tt;tt+1<We&&(Ne=be.charCodeAt(tt+1),!(Ne===32||Ne<14&&Ne>8));tt++)te===tt&&(R("illegal character after attribute end"),sn=!0);if(te=tt+1,sn)continue e;if(ct in yu){R("attribute <"+ct+"> already defined");continue}if(yu[ct]=!0,!m){Vr[ct]=oi;continue}if(p){if(Lt=ct==="xmlns"?"xmlns":ct.charCodeAt(0)===120&&ct.substr(0,6)==="xmlns:"?ct.substr(6):null,Lt!==null){if(x=Ma(oi),y=Bg(Lt),yn=b[x],!yn){if(Lt==="xmlns"||y in T&&T[y]!==x)do yn="ns"+W++;while(typeof T[yn]<"u");else yn=Lt;b[x]=yn}T[Lt]!==yn&&(qt||(T=HR(T),qt=!0),T[Lt]=yn,Lt==="xmlns"&&(T[Bg(yn)]=x,B=yn),T[y]=x),Vr[ct]=oi;continue}q.push(ct,oi);continue}if(Ne=ct.indexOf(":"),Ne===-1){Vr[ct]=oi;continue}if(!(F=T[ct.substring(0,Ne)])){R(_0(ct.substring(0,Ne)));continue}ct=B===F?ct.substr(Ne+1):F+ct.substr(Ne),Vr[ct]=oi}if(p)for(te=0,We=q.length;te<We;te++){if(ct=q[te++],oi=q[te],Ne=ct.indexOf(":"),Ne!==-1){if(!(F=T[ct.substring(0,Ne)])){R(_0(ct.substring(0,Ne)));continue}ct=B===F?ct.substr(Ne+1):F+ct.substr(Ne)}Vr[ct]=oi}return Ue=Vr}function A(){for(var x=/(\r\n|\r|\n)/g,y=0,F=0,B=0,q=ae,te,be;Y>=B&&(te=x.exec(w),!(!te||(q=te[0].length+te.index,q>Y)));)y+=1,B=q;return Y==-1?(F=q,be=w.substring(ae)):ae===0?be=w.substring(ae,Y):(F=Y-B,be=ae==-1?w.substring(Y):w.substring(Y,ae+1)),{data:be,line:y,column:F}}for(u=A,t&&(Z=Object.create({},{name:Mp(function(){return At}),originalName:Mp(function(){return ri}),attrs:Mp(Ri),ns:Mp(function(){return T})}));ae!==-1;){if(w.charCodeAt(ae)===60?Y=ae:Y=w.indexOf("<",ae),Y===-1){if(N.length)return D("unexpected end of file");if(ae===0)return D("missing start tag");ae<w.length&&w.substring(ae).trim()&&R(v0);return}if(ae!==Y){if(N.length){if(i&&(i(w.substring(ae,Y),Ma,u),_))return}else if(w.substring(ae,Y).trim()&&(R(v0),_))return}if($e=w.charCodeAt(Y+1),$e===33){if(ut=w.charCodeAt(Y+2),ut===91&&w.substr(Y+3,6)==="CDATA["){if(ae=w.indexOf("]]>",Y),ae===-1)return D("unclosed cdata");if(o&&(o(w.substring(Y+9,ae),u),_))return;ae+=3;continue}if(ut===45&&w.charCodeAt(Y+3)===45){if(ae=w.indexOf("-->",Y),ae===-1)return D("unclosed comment");if(c&&(c(w.substring(Y+4,ae),Ma,u),_))return;ae+=3;continue}}if($e===63){if(ae=w.indexOf("?>",Y),ae===-1)return D("unclosed question");if(l&&(l(w.substring(Y,ae+2),u),_))return;ae+=2;continue}for(Ie=Y+1;;Ie++){if(Wi=w.charCodeAt(Ie),isNaN(Wi))return ae=-1,D("unclosed tag");if(Wi===34)ut=w.indexOf('"',Ie+1),Ie=ut!==-1?ut:Ie;else if(Wi===39)ut=w.indexOf("'",Ie+1),Ie=ut!==-1?ut:Ie;else if(Wi===62){ae=Ie;break}}if($e===33){if(d&&(d(w.substring(Y,ae+1),Ma,u),_))return;ae+=1;continue}if(Ue={},$e===47){if($=!1,Q=!0,!N.length)return D("missing open tag");if(Ie=At=N.pop(),ut=Y+2+Ie.length,w.substring(Y+2,ut)!==Ie)return D("closing tag mismatch");for(;ut<ae;ut++)if($e=w.charCodeAt(ut),!($e===32||$e>8&&$e<14))return D("close tag")}else{if(w.charCodeAt(ae-1)===47?(Ie=At=w.substring(Y+1,ae-1),$=!0,Q=!0):(Ie=At=w.substring(Y+1,ae),$=!0,Q=!1),!($e>96&&$e<123||$e>64&&$e<91||$e===95||$e===58))return D("illegal first char nodeName");for(ut=1,di=Ie.length;ut<di;ut++)if($e=Ie.charCodeAt(ut),!($e>96&&$e<123||$e>64&&$e<91||$e>47&&$e<59||$e===45||$e===95||$e==46)){if($e===32||$e<14&&$e>8){At=Ie.substring(0,ut),Ue=null;break}return D("invalid nodeName")}Q||N.push(At)}if(m){if(H=T,$&&(Q||P.push(H),Ue===null&&(p=Ie.indexOf("xmlns",ut)!==-1)&&(_e=ut,ee=Ie,Ri(),p=!1)),ri=At,$e=At.indexOf(":"),$e!==-1){if(Ui=T[At.substring(0,$e)],!Ui)return D("missing namespace on <"+ri+">");At=At.substr($e+1)}else Ui=T.xmlns;Ui&&(At=Ui+":"+At)}if($&&(_e=ut,ee=Ie,n&&(t?n(Z,Ma,Q,u):n(At,Ri,Ma,Q,u),_)))return;if(Q){if(r&&(r(t?Z:At,Ma,$,u),_))return;m&&($?T=H:T=P.pop())}ae+=1}}}function y0(e){return e.xml&&e.xml.tagAlias==="lowerCase"}var Vg={xsi:"http://www.w3.org/2001/XMLSchema-instance",xml:"http://www.w3.org/XML/1998/namespace"},x0="property";function w0(e){return e.xml&&e.xml.serialize}function UR(e){let t=w0(e);return t!==x0&&(t||null)}function GR(e){return e.charAt(0).toUpperCase()+e.slice(1)}function E0(e,t){return y0(t)?e.prefix+":"+GR(e.localName):e.name}function qR(e,t){var i=e.name,n=e.localName,r=t&&t.xml&&t.xml.typePrefix;return r&&n.indexOf(r)===0?e.prefix+":"+n.slice(r.length):i}function YR(e,t,i){let n=fi(e,t.xmlns),r=`${t[n.prefix]||n.prefix}:${n.localName}`,o=fi(r);var a=i.getPackage(o.prefix);return qR(o,a)}function Uo(e){return new Error(e)}function Zr(e){return e.$descriptor}function KR(e){k(this,e),this.elementsById={},this.references=[],this.warnings=[],this.addReference=function(t){this.references.push(t)},this.addElement=function(t){if(!t)throw Uo("expected element");var i=this.elementsById,n=Zr(t),r=n.idProperty,o;if(r&&(o=t.get(r.name),o)){if(!/^([a-z][\w-.]*:)?[a-z_][\w-.]*$/i.test(o))throw new Error("illegal ID <"+o+">");if(i[o])throw Uo("duplicate ID <"+o+">");i[o]=t}},this.addWarning=function(t){this.warnings.push(t)}}function Sl(){}Sl.prototype.handleEnd=function(){};Sl.prototype.handleText=function(){};Sl.prototype.handleNode=function(){};function zg(){}zg.prototype=Object.create(Sl.prototype);zg.prototype.handleNode=function(){return this};function Vs(){}Vs.prototype=Object.create(Sl.prototype);Vs.prototype.handleText=function(e){this.body=(this.body||"")+e};function Ml(e,t){this.property=e,this.context=t}Ml.prototype=Object.create(Vs.prototype);Ml.prototype.handleNode=function(e){if(this.element)throw Uo("expected no sub nodes");return this.element=this.createReference(e),this};Ml.prototype.handleEnd=function(){this.element.id=this.body};Ml.prototype.createReference=function(e){return{property:this.property.ns.name,id:""}};function Hg(e,t){this.element=t,this.propertyDesc=e}Hg.prototype=Object.create(Vs.prototype);Hg.prototype.handleEnd=function(){var e=this.body||"",t=this.element,i=this.propertyDesc;e=Sp(i.type,e),i.isMany?t.get(i.name).push(e):t.set(i.name,e)};function Dp(){}Dp.prototype=Object.create(Vs.prototype);Dp.prototype.handleNode=function(e){var t=this,i=this.element;return i?t=this.handleChild(e):(i=this.element=this.createElement(e),this.context.addElement(i)),t};function Pi(e,t,i){this.model=e,this.type=e.getType(t),this.context=i}Pi.prototype=Object.create(Dp.prototype);Pi.prototype.addReference=function(e){this.context.addReference(e)};Pi.prototype.handleText=function(e){var t=this.element,i=Zr(t),n=i.bodyProperty;if(!n)throw Uo("unexpected body text <"+e+">");Vs.prototype.handleText.call(this,e)};Pi.prototype.handleEnd=function(){var e=this.body,t=this.element,i=Zr(t),n=i.bodyProperty;n&&e!==void 0&&(e=Sp(n.type,e),t.set(n.name,e))};Pi.prototype.createElement=function(e){var t=e.attributes,i=this.type,n=Zr(i),r=this.context,o=new i({}),a=this.model,s;return M(t,function(c,l){var d=n.propertiesByName[l],u;d&&d.isReference?d.isMany?(u=c.split(" "),M(u,function(p){r.addReference({element:o,property:d.ns.name,id:p})})):r.addReference({element:o,property:d.ns.name,id:c}):(d?c=Sp(d.type,c):l==="xmlns"?l=":"+l:(s=fi(l,n.ns.prefix),a.getPackage(s.prefix)&&r.addWarning({message:"unknown attribute <"+l+">",element:o,property:l,value:c})),o.set(l,c))}),o};Pi.prototype.getPropertyForNode=function(e){var t=e.name,i=fi(t),n=this.type,r=this.model,o=Zr(n),a=i.name,s=o.propertiesByName[a];if(s&&!s.isAttr){let l=UR(s);if(l){let d=e.attributes[l];if(d){let u=YR(d,e.ns,r),p=r.getType(u);return k({},s,{effectiveType:Zr(p).name})}}return s}var c=r.getPackage(i.prefix);if(c){let l=E0(i,c),d=r.getType(l);if(s=ve(o.properties,function(u){return!u.isVirtual&&!u.isReference&&!u.isAttribute&&d.hasType(u.type)}),s)return k({},s,{effectiveType:Zr(d).name})}else if(s=ve(o.properties,function(l){return!l.isReference&&!l.isAttribute&&l.type==="Element"}),s)return s;throw Uo("unrecognized element <"+i.name+">")};Pi.prototype.toString=function(){return"ElementDescriptor["+Zr(this.type).name+"]"};Pi.prototype.valueHandler=function(e,t){return new Hg(e,t)};Pi.prototype.referenceHandler=function(e){return new Ml(e,this.context)};Pi.prototype.handler=function(e){return e==="Element"?new js(this.model,e,this.context):new Pi(this.model,e,this.context)};Pi.prototype.handleChild=function(e){var t,i,n,r;if(t=this.getPropertyForNode(e),n=this.element,i=t.effectiveType||t.type,Lg(i))return this.valueHandler(t,n);t.isReference?r=this.referenceHandler(t).handleNode(e):r=this.handler(i).handleNode(e);var o=r.element;return o!==void 0&&(t.isMany?n.get(t.name).push(o):n.set(t.name,o),t.isReference?(k(o,{element:n}),this.context.addReference(o)):o.$parent=n),r};function $g(e,t,i){Pi.call(this,e,t,i)}$g.prototype=Object.create(Pi.prototype);$g.prototype.createElement=function(e){var t=e.name,i=fi(t),n=this.model,r=this.type,o=n.getPackage(i.prefix),a=o&&E0(i,o)||t;if(!r.hasType(a))throw Uo("unexpected element <"+e.originalName+">");return Pi.prototype.createElement.call(this,e)};function js(e,t,i){this.model=e,this.context=i}js.prototype=Object.create(Dp.prototype);js.prototype.createElement=function(e){var t=e.name,i=fi(t),n=i.prefix,r=e.ns[n+"$uri"],o=e.attributes;return this.model.createAny(t,r,o)};js.prototype.handleChild=function(e){var t=new js(this.model,"Element",this.context).handleNode(e),i=this.element,n=t.element,r;return n!==void 0&&(r=i.$children=i.$children||[],r.push(n),n.$parent=i),t};js.prototype.handleEnd=function(){this.body&&(this.element.$body=this.body)};function Ap(e){e instanceof Zi&&(e={model:e}),k(this,{lax:!1},e)}Ap.prototype.fromXML=function(e,t,i){var n=t.rootHandler;t instanceof Pi?(n=t,t={}):typeof t=="string"?(n=this.handler(t),t={}):typeof n=="string"&&(n=this.handler(n));var r=this.model,o=this.lax,a=new KR(k({},t,{rootHandler:n})),s=new jg({proxy:!0}),c=XR();n.context=a,c.push(n);function l(P,T,H){var N=T(),W=N.line,$=N.column,Q=N.data;Q.charAt(0)==="<"&&Q.indexOf(" ")!==-1&&(Q=Q.slice(0,Q.indexOf(" "))+">");var Y="unparsable content "+(Q?Q+" ":"")+`detected
	line: `+W+`
	column: `+$+`
	nested error: `+P.message;if(H)return a.addWarning({message:Y,error:P}),!0;throw Uo(Y)}function d(P,T){return l(P,T,!0)}function u(){var P=a.elementsById,T=a.references,H,N;for(H=0;N=T[H];H++){var W=N.element,$=P[N.id],Q=Zr(W).propertiesByName[N.property];if($||a.addWarning({message:"unresolved reference <"+N.id+">",element:N.element,property:N.property,value:N.id}),Q.isMany){var Y=W.get(Q.name),ae=Y.indexOf(N);ae===-1&&(ae=Y.length),$?Y[ae]=$:Y.splice(ae,1)}else W.set(Q.name,$)}}function p(){c.pop().handleEnd()}var m=/^<\?xml /i,f=/ encoding="([^"]+)"/i,_=/^utf-8$/i;function b(P){if(m.test(P)){var T=f.exec(P),H=T&&T[1];!H||_.test(H)||a.addWarning({message:"unsupported document encoding <"+H+">, falling back to UTF-8"})}}function D(P,T){var H=c.peek();try{c.push(H.handleNode(P))}catch(N){l(N,T,o)&&c.push(new zg)}}function R(P,T){try{c.peek().handleText(P)}catch(H){d(H,T)}}function C(P,T){P.trim()&&R(P,T)}var w=r.getPackages().reduce(function(P,T){return P[T.uri]=T.prefix,P},Object.entries(Vg).reduce(function(P,[T,H]){return P[H]=T,P},r.config&&r.config.nsMap||{}));return s.ns(w).on("openTag",function(P,T,H,N){var W=P.attrs||{},$=Object.keys(W).reduce(function(Y,ae){var Ie=T(W[ae]);return Y[ae]=Ie,Y},{}),Q={name:P.name,originalName:P.originalName,attributes:$,ns:P.ns};D(Q,N)}).on("question",b).on("closeTag",p).on("cdata",R).on("text",function(P,T,H){C(T(P),H)}).on("error",l).on("warn",d),new Promise(function(P,T){var H;try{s.parse(e),u()}catch(Y){H=Y}var N=n.element;!H&&!N&&(H=Uo("failed to parse document as <"+n.type.$descriptor.name+">"));var W=a.warnings,$=a.references,Q=a.elementsById;return H?(H.warnings=W,T(H)):P({rootElement:N,elementsById:Q,references:$,warnings:W})})};Ap.prototype.handler=function(e){return new $g(this.model,e)};function XR(){var e=[];return Object.defineProperty(e,"peek",{value:function(){return this[this.length-1]}}),e}var ZR=`<?xml version="1.0" encoding="UTF-8"?>
`,QR=/<|>|'|"|&|\n\r|\n/g,C0=/<|>|&/g;function wr(e){this.prefixMap={},this.uriMap={},this.used={},this.wellknown=[],this.custom=[],this.parent=e,this.defaultPrefixMap=e&&e.defaultPrefixMap||{}}wr.prototype.mapDefaultPrefixes=function(e){this.defaultPrefixMap=e};wr.prototype.defaultUriByPrefix=function(e){return this.defaultPrefixMap[e]};wr.prototype.byUri=function(e){return this.uriMap[e]||this.parent&&this.parent.byUri(e)};wr.prototype.add=function(e,t){this.uriMap[e.uri]=e,t?this.wellknown.push(e):this.custom.push(e),this.mapPrefix(e.prefix,e.uri)};wr.prototype.uriByPrefix=function(e){return this.prefixMap[e||"xmlns"]||this.parent&&this.parent.uriByPrefix(e)};wr.prototype.mapPrefix=function(e,t){this.prefixMap[e||"xmlns"]=t};wr.prototype.getNSKey=function(e){return e.prefix!==void 0?e.uri+"|"+e.prefix:e.uri};wr.prototype.logUsed=function(e){var t=e.uri,i=this.getNSKey(e);this.used[i]=this.byUri(t),this.parent&&this.parent.logUsed(e)};wr.prototype.getUsed=function(e){var t=[].concat(this.wellknown,this.custom);return t.filter(i=>{var n=this.getNSKey(i);return this.used[n]})};function JR(e){return e.charAt(0).toLowerCase()+e.slice(1)}function eO(e,t){return y0(t)?JR(e):e}function S0(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function M0(e){return Ht(e)?e:(e.prefix?e.prefix+":":"")+e.localName}function tO(e){return e.getUsed().filter(function(t){return t.prefix!=="xml"}).map(function(t){var i="xmlns"+(t.prefix?":"+t.prefix:"");return{name:i,value:t.uri}})}function iO(e,t){return t.isGeneric?k({localName:t.ns.localName},e):k({localName:eO(t.ns.localName,t.$pkg)},e)}function nO(e,t){return k({localName:t.ns.localName},e)}function rO(e){var t=e.$descriptor;return fe(t.properties,function(i){var n=i.name;if(i.isVirtual||!$t(e,n))return!1;var r=e[n];return r===i.default||r===null?!1:i.isMany?r.length:!0})}var oO={"\n":"#10","\n\r":"#10",'"':"#34","'":"#39","<":"#60",">":"#62","&":"#38"},aO={"<":"lt",">":"gt","&":"amp"};function D0(e,t,i){return e=Ht(e)?e:""+e,e.replace(t,function(n){return"&"+i[n]+";"})}function sO(e){return D0(e,QR,oO)}function cO(e){return D0(e,C0,aO)}function lO(e){return fe(e,function(t){return t.isAttr})}function dO(e){return fe(e,function(t){return!t.isAttr})}function Wg(e){this.tagName=e}Wg.prototype.build=function(e){return this.element=e,this};Wg.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"+this.element.id+"</"+this.tagName+">").appendNewLine()};function Da(){}Da.prototype.serializeValue=Da.prototype.serializeTo=function(e){e.append(this.escape?cO(this.value):this.value)};Da.prototype.build=function(e,t){return this.value=t,e.type==="String"&&t.search(C0)!==-1&&(this.escape=!0),this};function Ug(e){this.tagName=e}S0(Ug,Da);Ug.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"),this.serializeValue(e),e.append("</"+this.tagName+">").appendNewLine()};function Mt(e,t){this.body=[],this.attrs=[],this.parent=e,this.propertyDescriptor=t}Mt.prototype.build=function(e){this.element=e;var t=e.$descriptor,i=this.propertyDescriptor,n,r,o=t.isGeneric;return o?n=this.parseGenericNsAttributes(e):n=this.parseNsAttributes(e),i?this.ns=this.nsPropertyTagName(i):this.ns=this.nsTagName(t),this.tagName=this.addTagName(this.ns),o?this.parseGenericContainments(e):(r=rO(e),this.parseAttributes(lO(r)),this.parseContainments(dO(r))),this.parseGenericAttributes(e,n),this};Mt.prototype.nsTagName=function(e){var t=this.logNamespaceUsed(e.ns);return iO(t,e)};Mt.prototype.nsPropertyTagName=function(e){var t=this.logNamespaceUsed(e.ns);return nO(t,e)};Mt.prototype.isLocalNs=function(e){return e.uri===this.ns.uri};Mt.prototype.nsAttributeName=function(e){var t;if(Ht(e)?t=fi(e):t=e.ns,e.inherited)return{localName:t.localName};var i=this.logNamespaceUsed(t);return this.getNamespaces().logUsed(i),this.isLocalNs(i)?{localName:t.localName}:k({localName:t.localName},i)};Mt.prototype.parseGenericNsAttributes=function(e){return Object.entries(e).filter(([t,i])=>!t.startsWith("$")&&this.parseNsAttribute(e,t,i)).map(([t,i])=>({name:t,value:i}))};Mt.prototype.parseGenericContainments=function(e){var t=e.$body;t&&this.body.push(new Da().build({type:"String"},t));var i=e.$children;i&&M(i,n=>{this.body.push(new Mt(this).build(n))})};Mt.prototype.parseNsAttribute=function(e,t,i){var n=e.$model,r=fi(t),o;if(r.prefix==="xmlns"&&(o={prefix:r.localName,uri:i}),!r.prefix&&r.localName==="xmlns"&&(o={uri:i}),!o)return{name:t,value:i};if(n&&n.getPackage(i))this.logNamespace(o,!0,!0);else{var a=this.logNamespaceUsed(o,!0);this.getNamespaces().logUsed(a)}};Mt.prototype.parseNsAttributes=function(e){var t=this,i=e.$attrs,n=[];return M(i,function(r,o){var a=t.parseNsAttribute(e,o,r);a&&n.push(a)}),n};Mt.prototype.parseGenericAttributes=function(e,t){var i=this;M(t,function(n){try{i.addAttribute(i.nsAttributeName(n.name),n.value)}catch(r){typeof console<"u"&&console.warn(`missing namespace information for <${n.name}=${n.value}> on`,e,r)}})};Mt.prototype.parseContainments=function(e){var t=this,i=this.body,n=this.element;M(e,function(r){var o=n.get(r.name),a=r.isReference,s=r.isMany;if(s||(o=[o]),r.isBody)i.push(new Da().build(r,o[0]));else if(Lg(r.type))M(o,function(l){i.push(new Ug(t.addTagName(t.nsPropertyTagName(r))).build(r,l))});else if(a)M(o,function(l){i.push(new Wg(t.addTagName(t.nsPropertyTagName(r))).build(l))});else{var c=w0(r);M(o,function(l){var d;c?c===x0?d=new Mt(t,r):d=new Pp(t,r,c):d=new Mt(t),i.push(d.build(l))})}})};Mt.prototype.getNamespaces=function(e){var t=this.namespaces,i=this.parent,n;return t||(n=i&&i.getNamespaces(),e||!n?this.namespaces=t=new wr(n):t=n),t};Mt.prototype.logNamespace=function(e,t,i){var n=this.getNamespaces(i),r=e.uri,o=e.prefix,a=n.byUri(r);return(!a||i)&&n.add(e,t),n.mapPrefix(o,r),e};Mt.prototype.logNamespaceUsed=function(e,t){var i=this.getNamespaces(t),n=e.prefix,r=e.uri,o,a,s;if(!n&&!r)return{localName:e.localName};if(s=i.defaultUriByPrefix(n),r=r||s||i.uriByPrefix(n),!r)throw new Error("no namespace uri given for prefix <"+n+">");if(e=i.byUri(r),!e&&!n&&(e=this.logNamespace({uri:r},s===r,!0)),!e){for(o=n,a=1;i.uriByPrefix(o);)o=n+"_"+a++;e=this.logNamespace({prefix:o,uri:r},s===r)}return n&&i.mapPrefix(n,r),e};Mt.prototype.parseAttributes=function(e){var t=this,i=this.element;M(e,function(n){var r=i.get(n.name);if(n.isReference)if(!n.isMany)r=r.id;else{var o=[];M(r,function(a){o.push(a.id)}),r=o.join(" ")}t.addAttribute(t.nsAttributeName(n),r)})};Mt.prototype.addTagName=function(e){var t=this.logNamespaceUsed(e);return this.getNamespaces().logUsed(t),M0(e)};Mt.prototype.addAttribute=function(e,t){var i=this.attrs;Ht(t)&&(t=sO(t));var n=op(i,function(o){return o.name.localName===e.localName&&o.name.uri===e.uri&&o.name.prefix===e.prefix}),r={name:e,value:t};n!==-1?i.splice(n,1,r):i.push(r)};Mt.prototype.serializeAttributes=function(e){var t=this.attrs,i=this.namespaces;i&&(t=tO(i).concat(t)),M(t,function(n){e.append(" ").append(M0(n.name)).append('="').append(n.value).append('"')})};Mt.prototype.serializeTo=function(e){var t=this.body[0],i=t&&t.constructor!==Da;e.appendIndent().append("<"+this.tagName),this.serializeAttributes(e),e.append(t?">":" />"),t&&(i&&e.appendNewLine().indent(),M(this.body,function(n){n.serializeTo(e)}),i&&e.unindent().appendIndent(),e.append("</"+this.tagName+">")),e.appendNewLine()};function Pp(e,t,i){Mt.call(this,e,t),this.serialization=i}S0(Pp,Mt);Pp.prototype.parseNsAttributes=function(e){var t=Mt.prototype.parseNsAttributes.call(this,e).filter(a=>a.name!==this.serialization),i=e.$descriptor;if(i.name===this.propertyDescriptor.type)return t;var n=this.typeNs=this.nsTagName(i);this.getNamespaces().logUsed(this.typeNs);var r=e.$model.getPackage(n.uri),o=r.xml&&r.xml.typePrefix||"";return this.addAttribute(this.nsAttributeName(this.serialization),(n.prefix?n.prefix+":":"")+o+i.ns.localName),t};Pp.prototype.isLocalNs=function(e){return e.uri===(this.typeNs||this.ns).uri};function uO(){this.value="",this.write=function(e){this.value+=e}}function pO(e,t){var i=[""];this.append=function(n){return e.write(n),this},this.appendNewLine=function(){return t&&e.write(`
`),this},this.appendIndent=function(){return t&&e.write(i.join("  ")),this},this.indent=function(){return i.push(""),this},this.unindent=function(){return i.pop(),this}}function A0(e){e=k({format:!1,preamble:!0},e||{});function t(i,n){var r=n||new uO,o=new pO(r,e.format);e.preamble&&o.append(ZR);var a=new Mt,s=i.$model;if(a.getNamespaces().mapDefaultPrefixes(mO(s)),a.build(i).serializeTo(o),!n)return r.value}return{toXML:t}}function mO(e){let t=e.config&&e.config.nsMap||{},i={};for(let n in Vg)i[n]=Vg[n];for(let n in t){let r=t[n];i[r]=n}for(let n of e.getPackages())i[n.prefix]=n.uri;return i}function kp(e,t){Zi.call(this,e,t)}kp.prototype=Object.create(Zi.prototype);kp.prototype.fromXML=function(e,t,i){Ht(t)||(i=t,t="bpmn:Definitions");var n=new Ap(k({model:this,lax:!0},i)),r=n.handler(t);return n.fromXML(e,r)};kp.prototype.toXML=function(e,t){var i=new A0(t);return new Promise(function(n,r){try{var o=i.toXML(e);return n({xml:o})}catch(a){return r(a)}})};var fO="BPMN20",hO="http://www.omg.org/spec/BPMN/20100524/MODEL",gO="bpmn",vO=[],_O=[{name:"Interface",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"operations",type:"Operation",isMany:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"Operation",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"inMessageRef",type:"Message",isReference:!0},{name:"outMessageRef",type:"Message",isReference:!0},{name:"errorRef",type:"Error",isMany:!0,isReference:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"EndPoint",superClass:["RootElement"]},{name:"Auditing",superClass:["BaseElement"]},{name:"GlobalTask",superClass:["CallableElement"],properties:[{name:"resources",type:"ResourceRole",isMany:!0}]},{name:"Monitoring",superClass:["BaseElement"]},{name:"Performer",superClass:["ResourceRole"]},{name:"Process",superClass:["FlowElementsContainer","CallableElement"],properties:[{name:"processType",type:"ProcessType",isAttr:!0},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"properties",type:"Property",isMany:!0},{name:"laneSets",isMany:!0,replaces:"FlowElementsContainer#laneSets",type:"LaneSet"},{name:"flowElements",isMany:!0,replaces:"FlowElementsContainer#flowElements",type:"FlowElement"},{name:"artifacts",type:"Artifact",isMany:!0},{name:"resources",type:"ResourceRole",isMany:!0},{name:"correlationSubscriptions",type:"CorrelationSubscription",isMany:!0},{name:"supports",type:"Process",isMany:!0,isReference:!0},{name:"definitionalCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"isExecutable",isAttr:!0,type:"Boolean"}]},{name:"LaneSet",superClass:["BaseElement"],properties:[{name:"lanes",type:"Lane",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Lane",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"partitionElementRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"partitionElement",type:"BaseElement"},{name:"flowNodeRef",type:"FlowNode",isMany:!0,isReference:!0},{name:"childLaneSet",type:"LaneSet",xml:{serialize:"xsi:type"}}]},{name:"GlobalManualTask",superClass:["GlobalTask"]},{name:"ManualTask",superClass:["Task"]},{name:"UserTask",superClass:["Task"],properties:[{name:"renderings",type:"Rendering",isMany:!0},{name:"implementation",isAttr:!0,type:"String"}]},{name:"Rendering",superClass:["BaseElement"]},{name:"HumanPerformer",superClass:["Performer"]},{name:"PotentialOwner",superClass:["HumanPerformer"]},{name:"GlobalUserTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"renderings",type:"Rendering",isMany:!0}]},{name:"Gateway",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"gatewayDirection",type:"GatewayDirection",default:"Unspecified",isAttr:!0}]},{name:"EventBasedGateway",superClass:["Gateway"],properties:[{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"eventGatewayType",type:"EventBasedGatewayType",isAttr:!0,default:"Exclusive"}]},{name:"ComplexGateway",superClass:["Gateway"],properties:[{name:"activationCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ExclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"InclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ParallelGateway",superClass:["Gateway"]},{name:"RootElement",isAbstract:!0,superClass:["BaseElement"]},{name:"Relationship",superClass:["BaseElement"],properties:[{name:"type",isAttr:!0,type:"String"},{name:"direction",type:"RelationshipDirection",isAttr:!0},{name:"source",isMany:!0,isReference:!0,type:"Element"},{name:"target",isMany:!0,isReference:!0,type:"Element"}]},{name:"BaseElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,type:"String",isId:!0},{name:"documentation",type:"Documentation",isMany:!0},{name:"extensionDefinitions",type:"ExtensionDefinition",isMany:!0,isReference:!0},{name:"extensionElements",type:"ExtensionElements"}]},{name:"Extension",properties:[{name:"mustUnderstand",default:!1,isAttr:!0,type:"Boolean"},{name:"definition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"extensionAttributeDefinitions",type:"ExtensionAttributeDefinition",isMany:!0}]},{name:"ExtensionAttributeDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"type",isAttr:!0,type:"String"},{name:"isReference",default:!1,isAttr:!0,type:"Boolean"},{name:"extensionDefinition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionElements",properties:[{name:"valueRef",isAttr:!0,isReference:!0,type:"Element"},{name:"values",type:"Element",isMany:!0},{name:"extensionAttributeDefinition",type:"ExtensionAttributeDefinition",isAttr:!0,isReference:!0}]},{name:"Documentation",superClass:["BaseElement"],properties:[{name:"text",type:"String",isBody:!0},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Event",isAbstract:!0,superClass:["FlowNode","InteractionNode"],properties:[{name:"properties",type:"Property",isMany:!0}]},{name:"IntermediateCatchEvent",superClass:["CatchEvent"]},{name:"IntermediateThrowEvent",superClass:["ThrowEvent"]},{name:"EndEvent",superClass:["ThrowEvent"]},{name:"StartEvent",superClass:["CatchEvent"],properties:[{name:"isInterrupting",default:!0,isAttr:!0,type:"Boolean"}]},{name:"ThrowEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"inputSet",type:"InputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"CatchEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"parallelMultiple",isAttr:!0,type:"Boolean",default:!1},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"outputSet",type:"OutputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"BoundaryEvent",superClass:["CatchEvent"],properties:[{name:"cancelActivity",default:!0,isAttr:!0,type:"Boolean"},{name:"attachedToRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"EventDefinition",isAbstract:!0,superClass:["RootElement"]},{name:"CancelEventDefinition",superClass:["EventDefinition"]},{name:"ErrorEventDefinition",superClass:["EventDefinition"],properties:[{name:"errorRef",type:"Error",isAttr:!0,isReference:!0}]},{name:"TerminateEventDefinition",superClass:["EventDefinition"]},{name:"EscalationEventDefinition",superClass:["EventDefinition"],properties:[{name:"escalationRef",type:"Escalation",isAttr:!0,isReference:!0}]},{name:"Escalation",properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"escalationCode",isAttr:!0,type:"String"}],superClass:["RootElement"]},{name:"CompensateEventDefinition",superClass:["EventDefinition"],properties:[{name:"waitForCompletion",isAttr:!0,type:"Boolean",default:!0},{name:"activityRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"TimerEventDefinition",superClass:["EventDefinition"],properties:[{name:"timeDate",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeCycle",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeDuration",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"LinkEventDefinition",superClass:["EventDefinition"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"target",type:"LinkEventDefinition",isReference:!0},{name:"source",type:"LinkEventDefinition",isMany:!0,isReference:!0}]},{name:"MessageEventDefinition",superClass:["EventDefinition"],properties:[{name:"messageRef",type:"Message",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"ConditionalEventDefinition",superClass:["EventDefinition"],properties:[{name:"condition",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"SignalEventDefinition",superClass:["EventDefinition"],properties:[{name:"signalRef",type:"Signal",isAttr:!0,isReference:!0}]},{name:"Signal",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ImplicitThrowEvent",superClass:["ThrowEvent"]},{name:"DataState",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"ItemAwareElement",superClass:["BaseElement"],properties:[{name:"itemSubjectRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"dataState",type:"DataState"}]},{name:"DataAssociation",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"ItemAwareElement",isMany:!0,isReference:!0},{name:"targetRef",type:"ItemAwareElement",isReference:!0},{name:"transformation",type:"FormalExpression",xml:{serialize:"property"}},{name:"assignment",type:"Assignment",isMany:!0}]},{name:"DataInput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"inputSetRef",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithOptional",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithWhileExecuting",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"DataOutput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"outputSetRef",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithOptional",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithWhileExecuting",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"InputSet",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"dataInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"optionalInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"whileExecutingInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"outputSetRefs",type:"OutputSet",isMany:!0,isReference:!0}]},{name:"OutputSet",superClass:["BaseElement"],properties:[{name:"dataOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"inputSetRefs",type:"InputSet",isMany:!0,isReference:!0},{name:"optionalOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"whileExecutingOutputRefs",type:"DataOutput",isMany:!0,isReference:!0}]},{name:"Property",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"DataInputAssociation",superClass:["DataAssociation"]},{name:"DataOutputAssociation",superClass:["DataAssociation"]},{name:"InputOutputSpecification",superClass:["BaseElement"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"inputSets",type:"InputSet",isMany:!0},{name:"outputSets",type:"OutputSet",isMany:!0}]},{name:"DataObject",superClass:["FlowElement","ItemAwareElement"],properties:[{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"}]},{name:"InputOutputBinding",properties:[{name:"inputDataRef",type:"InputSet",isAttr:!0,isReference:!0},{name:"outputDataRef",type:"OutputSet",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"Assignment",superClass:["BaseElement"],properties:[{name:"from",type:"Expression",xml:{serialize:"xsi:type"}},{name:"to",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"DataStore",superClass:["RootElement","ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"capacity",isAttr:!0,type:"Integer"},{name:"isUnlimited",default:!0,isAttr:!0,type:"Boolean"}]},{name:"DataStoreReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataStoreRef",type:"DataStore",isAttr:!0,isReference:!0}]},{name:"DataObjectReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataObjectRef",type:"DataObject",isAttr:!0,isReference:!0}]},{name:"ConversationLink",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ConversationAssociation",superClass:["BaseElement"],properties:[{name:"innerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0},{name:"outerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0}]},{name:"CallConversation",superClass:["ConversationNode"],properties:[{name:"calledCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"Conversation",superClass:["ConversationNode"]},{name:"SubConversation",superClass:["ConversationNode"],properties:[{name:"conversationNodes",type:"ConversationNode",isMany:!0}]},{name:"ConversationNode",isAbstract:!0,superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"messageFlowRefs",type:"MessageFlow",isMany:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0}]},{name:"GlobalConversation",superClass:["Collaboration"]},{name:"PartnerEntity",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"PartnerRole",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"CorrelationProperty",superClass:["RootElement"],properties:[{name:"correlationPropertyRetrievalExpression",type:"CorrelationPropertyRetrievalExpression",isMany:!0},{name:"name",isAttr:!0,type:"String"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Error",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"errorCode",isAttr:!0,type:"String"}]},{name:"CorrelationKey",superClass:["BaseElement"],properties:[{name:"correlationPropertyRef",type:"CorrelationProperty",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Expression",superClass:["BaseElement"],isAbstract:!1,properties:[{name:"body",isBody:!0,type:"String"}]},{name:"FormalExpression",superClass:["Expression"],properties:[{name:"language",isAttr:!0,type:"String"},{name:"evaluatesToTypeRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Message",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"itemRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"ItemDefinition",superClass:["RootElement"],properties:[{name:"itemKind",type:"ItemKind",isAttr:!0},{name:"structureRef",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"import",type:"Import",isAttr:!0,isReference:!0}]},{name:"FlowElement",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"categoryValueRef",type:"CategoryValue",isMany:!0,isReference:!0}]},{name:"SequenceFlow",superClass:["FlowElement"],properties:[{name:"isImmediate",isAttr:!0,type:"Boolean"},{name:"conditionExpression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"sourceRef",type:"FlowNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"FlowNode",isAttr:!0,isReference:!0}]},{name:"FlowElementsContainer",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"laneSets",type:"LaneSet",isMany:!0},{name:"flowElements",type:"FlowElement",isMany:!0}]},{name:"CallableElement",isAbstract:!0,superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"supportedInterfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"ioBinding",type:"InputOutputBinding",isMany:!0,xml:{serialize:"property"}}]},{name:"FlowNode",isAbstract:!0,superClass:["FlowElement"],properties:[{name:"incoming",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"outgoing",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"lanes",type:"Lane",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"CorrelationPropertyRetrievalExpression",superClass:["BaseElement"],properties:[{name:"messagePath",type:"FormalExpression"},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"CorrelationPropertyBinding",superClass:["BaseElement"],properties:[{name:"dataPath",type:"FormalExpression"},{name:"correlationPropertyRef",type:"CorrelationProperty",isAttr:!0,isReference:!0}]},{name:"Resource",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"resourceParameters",type:"ResourceParameter",isMany:!0}]},{name:"ResourceParameter",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isRequired",isAttr:!0,type:"Boolean"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"CorrelationSubscription",superClass:["BaseElement"],properties:[{name:"correlationKeyRef",type:"CorrelationKey",isAttr:!0,isReference:!0},{name:"correlationPropertyBinding",type:"CorrelationPropertyBinding",isMany:!0}]},{name:"MessageFlow",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"MessageFlowAssociation",superClass:["BaseElement"],properties:[{name:"innerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0},{name:"outerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0}]},{name:"InteractionNode",isAbstract:!0,properties:[{name:"incomingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0},{name:"outgoingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"Participant",superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"interfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"participantMultiplicity",type:"ParticipantMultiplicity"},{name:"endPointRefs",type:"EndPoint",isMany:!0,isReference:!0},{name:"processRef",type:"Process",isAttr:!0,isReference:!0}]},{name:"ParticipantAssociation",superClass:["BaseElement"],properties:[{name:"innerParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"outerParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"ParticipantMultiplicity",properties:[{name:"minimum",default:0,isAttr:!0,type:"Integer"},{name:"maximum",default:1,isAttr:!0,type:"Integer"}],superClass:["BaseElement"]},{name:"Collaboration",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"participants",type:"Participant",isMany:!0},{name:"messageFlows",type:"MessageFlow",isMany:!0},{name:"artifacts",type:"Artifact",isMany:!0},{name:"conversations",type:"ConversationNode",isMany:!0},{name:"conversationAssociations",type:"ConversationAssociation"},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0},{name:"messageFlowAssociations",type:"MessageFlowAssociation",isMany:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"choreographyRef",type:"Choreography",isMany:!0,isReference:!0},{name:"conversationLinks",type:"ConversationLink",isMany:!0}]},{name:"ChoreographyActivity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"loopType",type:"ChoreographyLoopType",default:"None",isAttr:!0}]},{name:"CallChoreography",superClass:["ChoreographyActivity"],properties:[{name:"calledChoreographyRef",type:"Choreography",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"SubChoreography",superClass:["ChoreographyActivity","FlowElementsContainer"],properties:[{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"ChoreographyTask",superClass:["ChoreographyActivity"],properties:[{name:"messageFlowRef",type:"MessageFlow",isMany:!0,isReference:!0}]},{name:"Choreography",superClass:["Collaboration","FlowElementsContainer"]},{name:"GlobalChoreographyTask",superClass:["Choreography"],properties:[{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"TextAnnotation",superClass:["Artifact"],properties:[{name:"text",type:"String"},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Group",superClass:["Artifact"],properties:[{name:"categoryValueRef",type:"CategoryValue",isAttr:!0,isReference:!0}]},{name:"Association",superClass:["Artifact"],properties:[{name:"associationDirection",type:"AssociationDirection",isAttr:!0},{name:"sourceRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"targetRef",type:"BaseElement",isAttr:!0,isReference:!0}]},{name:"Category",superClass:["RootElement"],properties:[{name:"categoryValue",type:"CategoryValue",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Artifact",isAbstract:!0,superClass:["BaseElement"]},{name:"CategoryValue",superClass:["BaseElement"],properties:[{name:"categorizedFlowElements",type:"FlowElement",isMany:!0,isVirtual:!0,isReference:!0},{name:"value",isAttr:!0,type:"String"}]},{name:"Activity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"isForCompensation",default:!1,isAttr:!0,type:"Boolean"},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"boundaryEventRefs",type:"BoundaryEvent",isMany:!0,isReference:!0},{name:"properties",type:"Property",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"startQuantity",default:1,isAttr:!0,type:"Integer"},{name:"resources",type:"ResourceRole",isMany:!0},{name:"completionQuantity",default:1,isAttr:!0,type:"Integer"},{name:"loopCharacteristics",type:"LoopCharacteristics"}]},{name:"ServiceTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"SubProcess",superClass:["Activity","FlowElementsContainer","InteractionNode"],properties:[{name:"triggeredByEvent",default:!1,isAttr:!0,type:"Boolean"},{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"LoopCharacteristics",isAbstract:!0,superClass:["BaseElement"]},{name:"MultiInstanceLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"isSequential",default:!1,isAttr:!0,type:"Boolean"},{name:"behavior",type:"MultiInstanceBehavior",default:"All",isAttr:!0},{name:"loopCardinality",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopDataInputRef",type:"ItemAwareElement",isReference:!0},{name:"loopDataOutputRef",type:"ItemAwareElement",isReference:!0},{name:"inputDataItem",type:"DataInput",xml:{serialize:"property"}},{name:"outputDataItem",type:"DataOutput",xml:{serialize:"property"}},{name:"complexBehaviorDefinition",type:"ComplexBehaviorDefinition",isMany:!0},{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"oneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0},{name:"noneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0}]},{name:"StandardLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"testBefore",default:!1,isAttr:!0,type:"Boolean"},{name:"loopCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopMaximum",type:"Integer",isAttr:!0}]},{name:"CallActivity",superClass:["Activity","InteractionNode"],properties:[{name:"calledElement",type:"String",isAttr:!0}]},{name:"Task",superClass:["Activity","InteractionNode"]},{name:"SendTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ReceiveTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ScriptTask",superClass:["Task"],properties:[{name:"scriptFormat",isAttr:!0,type:"String"},{name:"script",type:"String"}]},{name:"BusinessRuleTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"AdHocSubProcess",superClass:["SubProcess"],properties:[{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"ordering",type:"AdHocOrdering",isAttr:!0},{name:"cancelRemainingInstances",default:!0,isAttr:!0,type:"Boolean"}]},{name:"Transaction",superClass:["SubProcess"],properties:[{name:"protocol",isAttr:!0,type:"String"},{name:"method",isAttr:!0,type:"String"}]},{name:"GlobalScriptTask",superClass:["GlobalTask"],properties:[{name:"scriptLanguage",isAttr:!0,type:"String"},{name:"script",isAttr:!0,type:"String"}]},{name:"GlobalBusinessRuleTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"ComplexBehaviorDefinition",superClass:["BaseElement"],properties:[{name:"condition",type:"FormalExpression"},{name:"event",type:"ImplicitThrowEvent"}]},{name:"ResourceRole",superClass:["BaseElement"],properties:[{name:"resourceRef",type:"Resource",isReference:!0},{name:"resourceParameterBindings",type:"ResourceParameterBinding",isMany:!0},{name:"resourceAssignmentExpression",type:"ResourceAssignmentExpression"},{name:"name",isAttr:!0,type:"String"}]},{name:"ResourceParameterBinding",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"parameterRef",type:"ResourceParameter",isAttr:!0,isReference:!0}],superClass:["BaseElement"]},{name:"ResourceAssignmentExpression",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}}],superClass:["BaseElement"]},{name:"Import",properties:[{name:"importType",isAttr:!0,type:"String"},{name:"location",isAttr:!0,type:"String"},{name:"namespace",isAttr:!0,type:"String"}]},{name:"Definitions",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"targetNamespace",isAttr:!0,type:"String"},{name:"expressionLanguage",default:"http://www.w3.org/1999/XPath",isAttr:!0,type:"String"},{name:"typeLanguage",default:"http://www.w3.org/2001/XMLSchema",isAttr:!0,type:"String"},{name:"imports",type:"Import",isMany:!0},{name:"extensions",type:"Extension",isMany:!0},{name:"rootElements",type:"RootElement",isMany:!0},{name:"diagrams",isMany:!0,type:"bpmndi:BPMNDiagram"},{name:"exporter",isAttr:!0,type:"String"},{name:"relationships",type:"Relationship",isMany:!0},{name:"exporterVersion",isAttr:!0,type:"String"}]}],bO=[{name:"ProcessType",literalValues:[{name:"None"},{name:"Public"},{name:"Private"}]},{name:"GatewayDirection",literalValues:[{name:"Unspecified"},{name:"Converging"},{name:"Diverging"},{name:"Mixed"}]},{name:"EventBasedGatewayType",literalValues:[{name:"Parallel"},{name:"Exclusive"}]},{name:"RelationshipDirection",literalValues:[{name:"None"},{name:"Forward"},{name:"Backward"},{name:"Both"}]},{name:"ItemKind",literalValues:[{name:"Physical"},{name:"Information"}]},{name:"ChoreographyLoopType",literalValues:[{name:"None"},{name:"Standard"},{name:"MultiInstanceSequential"},{name:"MultiInstanceParallel"}]},{name:"AssociationDirection",literalValues:[{name:"None"},{name:"One"},{name:"Both"}]},{name:"MultiInstanceBehavior",literalValues:[{name:"None"},{name:"One"},{name:"All"},{name:"Complex"}]},{name:"AdHocOrdering",literalValues:[{name:"Parallel"},{name:"Sequential"}]}],yO={tagAlias:"lowerCase",typePrefix:"t"},xO={name:fO,uri:hO,prefix:gO,associations:vO,types:_O,enumerations:bO,xml:yO},wO="BPMNDI",EO="http://www.omg.org/spec/BPMN/20100524/DI",CO="bpmndi",SO=[{name:"BPMNDiagram",properties:[{name:"plane",type:"BPMNPlane",redefines:"di:Diagram#rootElement"},{name:"labelStyle",type:"BPMNLabelStyle",isMany:!0}],superClass:["di:Diagram"]},{name:"BPMNPlane",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"}],superClass:["di:Plane"]},{name:"BPMNShape",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"isHorizontal",isAttr:!0,type:"Boolean"},{name:"isExpanded",isAttr:!0,type:"Boolean"},{name:"isMarkerVisible",isAttr:!0,type:"Boolean"},{name:"label",type:"BPMNLabel"},{name:"isMessageVisible",isAttr:!0,type:"Boolean"},{name:"participantBandKind",type:"ParticipantBandKind",isAttr:!0},{name:"choreographyActivityShape",type:"BPMNShape",isAttr:!0,isReference:!0}],superClass:["di:LabeledShape"]},{name:"BPMNEdge",properties:[{name:"label",type:"BPMNLabel"},{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"sourceElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#source"},{name:"targetElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#target"},{name:"messageVisibleKind",type:"MessageVisibleKind",isAttr:!0,default:"initiating"}],superClass:["di:LabeledEdge"]},{name:"BPMNLabel",properties:[{name:"labelStyle",type:"BPMNLabelStyle",isAttr:!0,isReference:!0,redefines:"di:DiagramElement#style"}],superClass:["di:Label"]},{name:"BPMNLabelStyle",properties:[{name:"font",type:"dc:Font"}],superClass:["di:Style"]}],MO=[{name:"ParticipantBandKind",literalValues:[{name:"top_initiating"},{name:"middle_initiating"},{name:"bottom_initiating"},{name:"top_non_initiating"},{name:"middle_non_initiating"},{name:"bottom_non_initiating"}]},{name:"MessageVisibleKind",literalValues:[{name:"initiating"},{name:"non_initiating"}]}],DO=[],AO={name:wO,uri:EO,prefix:CO,types:SO,enumerations:MO,associations:DO},PO="DC",kO="http://www.omg.org/spec/DD/20100524/DC",RO="dc",OO=[{name:"Boolean"},{name:"Integer"},{name:"Real"},{name:"String"},{name:"Font",properties:[{name:"name",type:"String",isAttr:!0},{name:"size",type:"Real",isAttr:!0},{name:"isBold",type:"Boolean",isAttr:!0},{name:"isItalic",type:"Boolean",isAttr:!0},{name:"isUnderline",type:"Boolean",isAttr:!0},{name:"isStrikeThrough",type:"Boolean",isAttr:!0}]},{name:"Point",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0}]},{name:"Bounds",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0},{name:"width",type:"Real",isAttr:!0},{name:"height",type:"Real",isAttr:!0}]}],TO=[],IO={name:PO,uri:kO,prefix:RO,types:OO,associations:TO},FO="DI",NO="http://www.omg.org/spec/DD/20100524/DI",LO="di",BO=[{name:"DiagramElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"extension",type:"Extension"},{name:"owningDiagram",type:"Diagram",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"owningElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"modelElement",isReadOnly:!0,isVirtual:!0,isReference:!0,type:"Element"},{name:"style",type:"Style",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"ownedElement",type:"DiagramElement",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Node",isAbstract:!0,superClass:["DiagramElement"]},{name:"Edge",isAbstract:!0,superClass:["DiagramElement"],properties:[{name:"source",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"target",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"waypoint",isUnique:!1,isMany:!0,type:"dc:Point",xml:{serialize:"xsi:type"}}]},{name:"Diagram",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"rootElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0},{name:"name",isAttr:!0,type:"String"},{name:"documentation",isAttr:!0,type:"String"},{name:"resolution",isAttr:!0,type:"Real"},{name:"ownedStyle",type:"Style",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Shape",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Plane",isAbstract:!0,superClass:["Node"],properties:[{name:"planeElement",type:"DiagramElement",subsettedProperty:"DiagramElement-ownedElement",isMany:!0}]},{name:"LabeledEdge",isAbstract:!0,superClass:["Edge"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"LabeledShape",isAbstract:!0,superClass:["Shape"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"Label",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Style",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"}]},{name:"Extension",properties:[{name:"values",isMany:!0,type:"Element"}]}],jO=[],VO={tagAlias:"lowerCase"},zO={name:FO,uri:NO,prefix:LO,types:BO,associations:jO,xml:VO},HO="bpmn.io colors for BPMN",$O="http://bpmn.io/schema/bpmn/biocolor/1.0",WO="bioc",UO=[{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]}],GO=[],qO=[],YO={name:HO,uri:$O,prefix:WO,types:UO,enumerations:GO,associations:qO},KO="BPMN in Color",XO="http://www.omg.org/spec/BPMN/non-normative/color/1.0",ZO="color",QO=[{name:"ColoredLabel",extends:["bpmndi:BPMNLabel"],properties:[{name:"color",isAttr:!0,type:"String"}]},{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"background-color",isAttr:!0,type:"String"},{name:"border-color",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"border-color",isAttr:!0,type:"String"}]}],JO=[],eT=[],tT={name:KO,uri:XO,prefix:ZO,types:QO,enumerations:JO,associations:eT},iT={bpmn:xO,bpmndi:AO,dc:IO,di:zO,bioc:YO,color:tT};function P0(e,t){let i=k({},iT,e);return new kp(i,t)}function ci(e){return e?"<"+e.$type+(e.id?' id="'+e.id:"")+'" />':"<null>"}var nT="Tried to access di from the businessObject. The di is available through the diagram element only. For more information, see https://github.com/bpmn-io/bpmn-js/issues/1472";function Rp(e){$t(e,"di")||Object.defineProperty(e,"di",{enumerable:!1,get:function(){throw new Error(nT)}})}function ji(e,t){return e.$instanceOf(t)}function rT(e){return ve(e.rootElements,function(t){return ji(t,"bpmn:Process")||ji(t,"bpmn:Collaboration")})}function Gg(e){var t={},i=[],n={};function r(Z,ee){return function(_e){Z(_e,ee)}}function o(Z){t[Z.id]=Z}function a(Z){return t[Z.id]}function s(Z,ee){var _e=Z.gfx;if(_e)throw new Error(`already rendered ${ci(Z)}`);return e.element(Z,n[Z.id],ee)}function c(Z,ee){return e.root(Z,n[Z.id],ee)}function l(Z,ee){try{var _e=n[Z.id]&&s(Z,ee);return o(Z),_e}catch(Ue){d(Ue.message,{element:Z,error:Ue}),console.error(`failed to import ${ci(Z)}`,Ue)}}function d(Z,ee){e.error(Z,ee)}var u=this.registerDi=function(ee){var _e=ee.bpmnElement;_e?n[_e.id]?d(`multiple DI elements defined for ${ci(_e)}`,{element:_e}):(n[_e.id]=ee,Rp(_e)):d(`no bpmnElement referenced in ${ci(ee)}`,{element:ee})};function p(Z){m(Z.plane)}function m(Z){u(Z),M(Z.planeElement,f)}function f(Z){u(Z)}this.handleDefinitions=function(ee,_e){var Ue=ee.diagrams;if(_e&&Ue.indexOf(_e)===-1)throw new Error("diagram not part of <bpmn:Definitions />");if(!_e&&Ue&&Ue.length&&(_e=Ue[0]),!_e)throw new Error("no diagram to display");n={},p(_e);var Ri=_e.plane;if(!Ri)throw new Error(`no plane for ${ci(_e)}`);var A=Ri.bpmnElement;if(!A)if(A=rT(ee),A)d(`correcting missing bpmnElement on ${ci(Ri)} to ${ci(A)}`),Ri.bpmnElement=A,u(Ri);else throw new Error("no process or collaboration to display");var x=c(A,Ri);if(ji(A,"bpmn:Process")||ji(A,"bpmn:SubProcess"))b(A,x);else if(ji(A,"bpmn:Collaboration"))At(A,x),D(ee.rootElements,x);else throw new Error(`unsupported bpmnElement for ${ci(Ri)}: ${ci(A)}`);_(i)};var _=this.handleDeferred=function(){for(var ee;i.length;)ee=i.shift(),ee()};function b(Z,ee){$e(Z,ee),W(Z.ioSpecification,ee),N(Z.artifacts,ee),o(Z)}function D(Z,ee){var _e=fe(Z,function(Ue){return!a(Ue)&&ji(Ue,"bpmn:Process")&&Ue.laneSets});_e.forEach(r(b,ee))}function R(Z,ee){l(Z,ee)}function C(Z,ee){M(Z,r(R,ee))}function w(Z,ee){l(Z,ee)}function P(Z,ee){l(Z,ee)}function T(Z,ee){l(Z,ee)}function H(Z,ee){l(Z,ee)}function N(Z,ee){M(Z,function(_e){ji(_e,"bpmn:Association")?i.push(function(){H(_e,ee)}):H(_e,ee)})}function W(Z,ee){Z&&(M(Z.dataInputs,r(P,ee)),M(Z.dataOutputs,r(T,ee)))}var $=this.handleSubProcess=function(ee,_e){$e(ee,_e),N(ee.artifacts,_e)};function Q(Z,ee){var _e=l(Z,ee);ji(Z,"bpmn:SubProcess")&&$(Z,_e||ee),ji(Z,"bpmn:Activity")&&W(Z.ioSpecification,ee),i.push(function(){M(Z.dataInputAssociations,r(w,ee)),M(Z.dataOutputAssociations,r(w,ee))})}function Y(Z,ee){l(Z,ee)}function ae(Z,ee){l(Z,ee)}function Ie(Z,ee){i.push(function(){var _e=l(Z,ee);Z.childLaneSet&&di(Z.childLaneSet,_e||ee),ri(Z)})}function di(Z,ee){M(Z.lanes,r(Ie,ee))}function ut(Z,ee){M(Z,r(di,ee))}function $e(Z,ee){Wi(Z.flowElements,ee),Z.laneSets&&ut(Z.laneSets,ee)}function Wi(Z,ee){M(Z,function(_e){ji(_e,"bpmn:SequenceFlow")?i.push(function(){Y(_e,ee)}):ji(_e,"bpmn:BoundaryEvent")?i.unshift(function(){Q(_e,ee)}):ji(_e,"bpmn:FlowNode")?Q(_e,ee):ji(_e,"bpmn:DataObject")||(ji(_e,"bpmn:DataStoreReference")||ji(_e,"bpmn:DataObjectReference")?ae(_e,ee):d(`unrecognized flowElement ${ci(_e)} in context ${ci(ee&&ee.businessObject)}`,{element:_e,context:ee}))})}function Ui(Z,ee){var _e=l(Z,ee),Ue=Z.processRef;Ue&&b(Ue,_e||ee)}function At(Z,ee){M(Z.participants,r(Ui,ee)),i.push(function(){C(Z.messageFlows,ee)}),N(Z.artifacts,ee)}function ri(Z){M(Z.flowNodeRef,function(ee){var _e=ee.get("lanes");_e&&_e.push(Z)})}}function v(e,t){var i=U(e);return i&&typeof i.$instanceOf=="function"&&i.$instanceOf(t)}function ge(e,t){return Fi(t,function(i){return v(e,i)})}function U(e){return e&&e.businessObject||e}function Me(e){return e&&e.di}function k0(e,t,i){var n,r,o,a,s=[];function c(l,d){var u={root:function(_,b){return n.add(_,b)},element:function(_,b,D){return n.add(_,b,D)},error:function(_,b){s.push({message:_,context:b})}},p=new Gg(u);d=d||l.diagrams&&l.diagrams[0];var m=oT(l,d);if(!m)throw new Error("no diagram to display");M(m,function(_){p.handleDefinitions(l,_)});var f=d.plane.bpmnElement.id;o.setRootElement(o.findRoot(f+"_plane")||o.findRoot(f))}return new Promise(function(l,d){try{return n=e.get("bpmnImporter"),r=e.get("eventBus"),o=e.get("canvas"),r.fire("import.render.start",{definitions:t}),c(t,i),r.fire("import.render.complete",{error:a,warnings:s}),l({warnings:s})}catch(u){return u.warnings=s,d(u)}})}function oT(e,t){if(!(!t||!t.plane)){var i=t.plane.bpmnElement,n=i;!v(i,"bpmn:Process")&&!v(i,"bpmn:Collaboration")&&(n=aT(i));var r;v(n,"bpmn:Collaboration")?r=n:r=ve(e.rootElements,function(l){if(v(l,"bpmn:Collaboration"))return ve(l.participants,function(d){return d.processRef===n})});var o=[n];r&&(o=St(r.participants,function(l){return l.processRef}),o.push(r));var a=R0(o),s=[t],c=[i];return M(e.diagrams,function(l){if(l.plane){var d=l.plane.bpmnElement;a.indexOf(d)!==-1&&c.indexOf(d)===-1&&(s.push(l),c.push(d))}}),s}}function R0(e){var t=[];return M(e,function(i){i&&(t.push(i),t=t.concat(R0(i.flowElements)))}),t}function aT(e){for(var t=e;t;){if(v(t,"bpmn:Process"))return t;t=t.$parent}}var sT='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.02 5.57" width="53" height="21"><path fill="currentColor" d="M1.88.92v.14c0 .41-.13.68-.4.8.33.14.46.44.46.86v.33c0 .61-.33.95-.95.95H0V0h.95c.65 0 .93.3.93.92zM.63.57v1.06h.24c.24 0 .38-.1.38-.43V.98c0-.28-.1-.4-.32-.4zm0 1.63v1.22h.36c.2 0 .32-.1.32-.39v-.35c0-.37-.12-.48-.4-.48H.63zM4.18.99v.52c0 .64-.31.98-.94.98h-.3V4h-.62V0h.92c.63 0 .94.35.94.99zM2.94.57v1.35h.3c.2 0 .3-.09.3-.37v-.6c0-.29-.1-.38-.3-.38h-.3zm2.89 2.27L6.25 0h.88v4h-.6V1.12L6.1 3.99h-.6l-.46-2.82v2.82h-.55V0h.87zM8.14 1.1V4h-.56V0h.79L9 2.4V0h.56v4h-.64zm2.49 2.29v.6h-.6v-.6zM12.12 1c0-.63.33-1 .95-1 .61 0 .95.37.95 1v2.04c0 .64-.34 1-.95 1-.62 0-.95-.37-.95-1zm.62 2.08c0 .28.13.39.33.39s.32-.1.32-.4V.98c0-.29-.12-.4-.32-.4s-.33.11-.33.4z"/><path fill="currentColor" d="M0 4.53h14.02v1.04H0zM11.08 0h.63v.62h-.63zm.63 4V1h-.63v2.98z"/></svg>',qg=sT,Yg={verticalAlign:"middle"},Kg={color:"#404040"},cT={zIndex:"1001",position:"fixed",top:"0",left:"0",right:"0",bottom:"0"},lT={width:"100%",height:"100%",background:"rgba(40,40,40,0.2)"},dT={position:"absolute",left:"50%",top:"40%",transform:"translate(-50%)",width:"260px",padding:"10px",background:"white",boxShadow:"0 1px 4px rgba(0,0,0,0.3)",fontFamily:"Helvetica, Arial, sans-serif",fontSize:"14px",display:"flex",lineHeight:"1.3"},uT='<div class="bjs-powered-by-lightbox"><div class="backdrop"></div><div class="notice"><a href="https://bpmn.io" target="_blank" rel="noopener" class="link">'+qg+'</a><span>Web-based tooling for BPMN, DMN and forms powered by <a href="https://bpmn.io" target="_blank" rel="noopener">bpmn.io</a>.</span></div></div>',Er;function pT(){Er=qe(uT),Vt(Er,cT),Vt(He("svg",Er),Yg),Vt(He(".backdrop",Er),lT),Vt(He(".notice",Er),dT),Vt(He(".link",Er),Kg,{margin:"15px 20px 15px 10px",alignSelf:"center"})}function O0(){Er||(pT(),ti.bind(Er,".backdrop","click",function(e){document.body.removeChild(Er)})),document.body.appendChild(Er)}function _t(e){e=k({},fT,e),this._moddle=this._createModdle(e),this._container=this._createContainer(e),this._init(this._container,this._moddle,e),gT(this._container)}z(_t,xr);_t.prototype.importXML=function(t,i){return ps(this,null,function*(){let n=this;function r(a){return n.get("eventBus").createEvent(a)}let o=[];try{t=this._emit("import.parse.start",{xml:t})||t;let a;try{a=yield this._moddle.fromXML(t,"bpmn:Definitions")}catch(p){throw this._emit("import.parse.complete",{error:p}),p}let s=a.rootElement,c=a.references,l=a.warnings,d=a.elementsById;o=o.concat(l),s=this._emit("import.parse.complete",r({error:null,definitions:s,elementsById:d,references:c,warnings:o}))||s;let u=yield this.importDefinitions(s,i);return o=o.concat(u.warnings),this._emit("import.done",{error:null,warnings:o}),{warnings:o}}catch(a){let s=a;throw o=o.concat(s.warnings||[]),Op(s,o),s=mT(s),this._emit("import.done",{error:s,warnings:s.warnings}),s}})};_t.prototype.importDefinitions=function(t,i){return ps(this,null,function*(){return this._setDefinitions(t),{warnings:(yield this.open(i)).warnings}})};_t.prototype.open=function(t){return ps(this,null,function*(){let i=this._definitions,n=t;if(!i){let o=new Error("no XML imported");throw Op(o,[]),o}if(typeof t=="string"&&(n=hT(i,t),!n)){let o=new Error("BPMNDiagram <"+t+"> not found");throw Op(o,[]),o}try{this.clear()}catch(o){throw Op(o,[]),o}let{warnings:r}=yield k0(this,i,n);return{warnings:r}})};_t.prototype.saveXML=function(t){return ps(this,null,function*(){t=t||{};let i=this._definitions,n,r;try{if(!i)throw new Error("no definitions loaded");i=this._emit("saveXML.start",{definitions:i})||i,r=(yield this._moddle.toXML(i,t)).xml,r=this._emit("saveXML.serialized",{xml:r})||r}catch(a){n=a}let o=n?{error:n}:{xml:r};if(this._emit("saveXML.done",o),n)throw n;return o})};_t.prototype.saveSVG=function(){return ps(this,null,function*(){this._emit("saveSVG.start");let t,i;try{let n=this.get("canvas"),r=n.getActiveLayer(),o=He(":scope > defs",n._svg),a=wg(r),s=o?"<defs>"+wg(o)+"</defs>":"",c=r.getBBox();t=`<?xml version="1.0" encoding="utf-8"?>
<!-- created with bpmn-js / http://bpmn.io -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="`+c.width+'" height="'+c.height+'" viewBox="'+c.x+" "+c.y+" "+c.width+" "+c.height+'" version="1.1">'+s+a+"</svg>"}catch(n){i=n}if(this._emit("saveSVG.done",{error:i,svg:t}),i)throw i;return{svg:t}})};_t.prototype._setDefinitions=function(e){this._definitions=e};_t.prototype.getModules=function(){return this._modules};_t.prototype.clear=function(){this.getDefinitions()&&xr.prototype.clear.call(this)};_t.prototype.destroy=function(){xr.prototype.destroy.call(this),Ni(this._container)};_t.prototype.on=function(e,t,i,n){return this.get("eventBus").on(e,t,i,n)};_t.prototype.off=function(e,t){this.get("eventBus").off(e,t)};_t.prototype.attachTo=function(e){if(!e)throw new Error("parentNode required");this.detach(),e.get&&e.constructor.prototype.jquery&&(e=e.get(0)),typeof e=="string"&&(e=He(e)),e.appendChild(this._container),this._emit("attach",{}),this.get("canvas").resized()};_t.prototype.getDefinitions=function(){return this._definitions};_t.prototype.detach=function(){let e=this._container,t=e.parentNode;t&&(this._emit("detach",{}),t.removeChild(e))};_t.prototype._init=function(e,t,i){let n=i.modules||this.getModules(i),r=i.additionalModules||[],o=[{bpmnjs:["value",this],moddle:["value",t]}],a=[].concat(o,n,r),s=k(Di(i,["additionalModules"]),{canvas:k({},i.canvas,{container:e}),modules:a});xr.call(this,s),i&&i.container&&this.attachTo(i.container)};_t.prototype._emit=function(e,t){return this.get("eventBus").fire(e,t)};_t.prototype._createContainer=function(e){let t=qe('<div class="bjs-container"></div>');return Vt(t,{width:T0(e.width),height:T0(e.height),position:e.position}),t};_t.prototype._createModdle=function(e){let t=k({},this._moddleExtensions,e.moddleExtensions);return new P0(t)};_t.prototype._modules=[];function Op(e,t){return e.warnings=t,e}function mT(e){let i=/unparsable content <([^>]+)> detected([\s\S]*)$/.exec(e.message);return i&&(e.message="unparsable content <"+i[1]+"> detected; this may indicate an invalid BPMN 2.0 diagram file"+i[2]),e}var fT={width:"100%",height:"100%",position:"relative"};function T0(e){return e+(he(e)?"px":"")}function hT(e,t){return t&&ve(e.diagrams,function(i){return i.id===t})||null}function gT(e){let i='<a href="http://bpmn.io" target="_blank" class="bjs-powered-by" title="Powered by bpmn.io" >'+qg+"</a>",n=qe(i);Vt(He("svg",n),Yg),Vt(n,Kg,{position:"absolute",bottom:"15px",right:"15px",zIndex:"100"}),e.appendChild(n),Se.bind(n,"click",function(r){O0(),r.preventDefault()})}function Aa(e){_t.call(this,e),this.on("import.parse.complete",function(t){t.error||this._collectIds(t.definitions,t.elementsById)},this),this.on("diagram.destroy",function(){this.get("moddle").ids.clear()},this)}z(Aa,_t);Aa.prototype._createModdle=function(e){var t=_t.prototype._createModdle.call(this,e);return t.ids=new rp([32,36,1]),t};Aa.prototype._collectIds=function(e,t){var i=e.$model,n=i.ids,r;n.clear();for(r in t)n.claim(r,t[r])};function we(e,t){return v(e,"bpmn:CallActivity")?!1:v(e,"bpmn:SubProcess")?(t=t||Me(e),t&&v(t,"bpmndi:BPMNPlane")?!0:t&&!!t.isExpanded):v(e,"bpmn:Participant")?!!U(e).processRef:!0}function nt(e){if(!(!v(e,"bpmn:Participant")&&!v(e,"bpmn:Lane"))){var t=Me(e).isHorizontal;return t===void 0?!0:t}}function I0(e){return e&&U(e).isInterrupting!==!1}function kt(e){return e&&!!U(e).triggeredByEvent}function Qr(e,t){var i=U(e).eventDefinitions;return Fi(i,function(n){return v(n,t)})}function F0(e){return Qr(e,"bpmn:ErrorEventDefinition")}function N0(e){return Qr(e,"bpmn:EscalationEventDefinition")}function L0(e){return Qr(e,"bpmn:CompensateEventDefinition")}var zs={width:90,height:20},B0=15;function Tn(e){return v(e,"bpmn:Event")||v(e,"bpmn:Gateway")||v(e,"bpmn:DataStoreReference")||v(e,"bpmn:DataObjectReference")||v(e,"bpmn:DataInput")||v(e,"bpmn:DataOutput")||v(e,"bpmn:SequenceFlow")||v(e,"bpmn:MessageFlow")||v(e,"bpmn:Group")}function Go(e){return xe(e.label)}function vT(e){var t=e.length/2-1,i=e[Math.floor(t)],n=e[Math.ceil(t+.01)],r=_T(e),o=Math.atan((n.y-i.y)/(n.x-i.x)),a=r.x,s=r.y;return Math.abs(o)<Math.PI/2?s-=B0:a+=B0,{x:a,y:s}}function _T(e){var t=e.length/2-1,i=e[Math.floor(t)],n=e[Math.ceil(t+.01)];return{x:i.x+(n.x-i.x)/2,y:i.y+(n.y-i.y)/2}}function Dl(e){return e.waypoints?vT(e.waypoints):v(e,"bpmn:Group")?{x:e.x+e.width/2,y:e.y+zs.height/2}:{x:e.x+e.width/2,y:e.y+e.height+zs.height/2}}function j0(e,t){var i,n,r,o=e.label;return o&&o.bounds?(r=o.bounds,n={width:Math.max(zs.width,r.width),height:r.height},i={x:r.x+r.width/2,y:r.y+r.height/2}):(i=Dl(t),n=zs),k({x:i.x-n.width/2,y:i.y-n.height/2},n)}function V0(e){if(v(e,"bpmn:FlowElement")||v(e,"bpmn:Participant")||v(e,"bpmn:Lane")||v(e,"bpmn:SequenceFlow")||v(e,"bpmn:MessageFlow")||v(e,"bpmn:DataInput")||v(e,"bpmn:DataOutput"))return"name";if(v(e,"bpmn:TextAnnotation"))return"text";if(v(e,"bpmn:Group"))return"categoryValueRef"}function bT(e){var t=e.categoryValueRef;return t&&t.value||""}function hi(e){var t=e.businessObject,i=V0(t);if(i)return i==="categoryValueRef"?bT(t):t[i]||""}function z0(e,t){var i=e.businessObject,n=V0(i);if(n)if(n==="categoryValueRef"){if(!i[n])return e;i[n].value=t}else i[n]=t;return e}var Tp="hsl(225, 10%, 15%)",yT="white";function tr(e,t){return Fi(e.eventDefinitions,function(i){return i.$type===t})}function H0(e){return e.$type==="bpmn:IntermediateThrowEvent"||e.$type==="bpmn:EndEvent"}function $0(e){var t=e.dataObjectRef;return e.isCollection||t&&t.isCollection}function je(e,t,i){var n=Me(e);return i||n.get("color:background-color")||n.get("bioc:fill")||t||yT}function se(e,t,i){var n=Me(e);return i||n.get("color:border-color")||n.get("bioc:stroke")||t||Tp}function Hs(e,t,i,n){var r=Me(e),o=r.get("label");return n||o&&o.get("color:color")||t||se(e,i)}function W0(e){var t=e.x+e.width/2,i=e.y+e.height/2,n=e.width/2,r=[["M",t,i],["m",0,-n],["a",n,n,0,1,1,0,2*n],["a",n,n,0,1,1,0,-2*n],["z"]];return Xr(r)}function U0(e,t){var i=e.x,n=e.y,r=e.width,o=e.height,a=[["M",i+t,n],["l",r-t*2,0],["a",t,t,0,0,1,t,t],["l",0,o-t*2],["a",t,t,0,0,1,-t,t],["l",t*2-r,0],["a",t,t,0,0,1,-t,-t],["l",0,t*2-o],["a",t,t,0,0,1,t,-t],["z"]];return Xr(a)}function G0(e){var t=e.width,i=e.height,n=e.x,r=e.y,o=t/2,a=i/2,s=[["M",n+o,r],["l",o,a],["l",-o,a],["l",-o,-a],["z"]];return Xr(s)}function q0(e){var t=e.x,i=e.y,n=e.width,r=e.height,o=[["M",t,i],["l",n,0],["l",0,r],["l",-n,0],["z"]];return Xr(o)}function $s(e,t={}){return{width:mn(e,t),height:Vi(e,t)}}function mn(e,t={}){return $t(t,"width")?t.width:e.width}function Vi(e,t={}){return $t(t,"height")?t.height:e.height}var xT=new rp,wT=10,Ip=3,ET=1.5,Fp=10,Ws=.95,CT=1,ST=.25;function Jr(e,t,i,n,r,o,a){kn.call(this,t,a);var s=e&&e.defaultFillColor,c=e&&e.defaultStrokeColor,l=e&&e.defaultLabelColor;function d(A){return i.computeStyle(A,{strokeLinecap:"round",strokeLinejoin:"round",stroke:Tp,strokeWidth:2,fill:"white"})}function u(A){return i.computeStyle(A,["no-fill"],{strokeLinecap:"round",strokeLinejoin:"round",stroke:Tp,strokeWidth:2})}function p(A,x){var{ref:y={x:0,y:0},scale:F=1,element:B,parentGfx:q=r._svg}=x,te=ie("marker",{id:A,viewBox:"0 0 20 20",refX:y.x,refY:y.y,markerWidth:20*F,markerHeight:20*F,orient:"auto"});me(te,B);var be=He(":scope > defs",q);be||(be=ie("defs"),me(q,be)),me(be,te)}function m(A,x,y,F){var B=xT.nextPrefixed("marker-");return f(A,B,x,y,F),"url(#"+B+")"}function f(A,x,y,F,B){if(y==="sequenceflow-end"){var q=ie("path",X({d:"M 1 5 L 11 10 L 1 15 Z"},d({fill:B,stroke:B,strokeWidth:1})));p(x,{element:q,ref:{x:11,y:10},scale:.5,parentGfx:A})}if(y==="messageflow-start"){var te=ie("circle",X({cx:6,cy:6,r:3.5},d({fill:F,stroke:B,strokeWidth:1,strokeDasharray:[1e4,1]})));p(x,{element:te,ref:{x:6,y:6},parentGfx:A})}if(y==="messageflow-end"){var be=ie("path",X({d:"m 1 5 l 0 -3 l 7 3 l -7 3 z"},d({fill:F,stroke:B,strokeWidth:1,strokeDasharray:[1e4,1]})));p(x,{element:be,ref:{x:8.5,y:5},parentGfx:A})}if(y==="association-start"){var We=ie("path",X({d:"M 11 5 L 1 10 L 11 15"},u({fill:"none",stroke:B,strokeWidth:1.5,strokeDasharray:[1e4,1]})));p(x,{element:We,ref:{x:1,y:10},scale:.5,parentGfx:A})}if(y==="association-end"){var qt=ie("path",X({d:"M 1 5 L 11 10 L 1 15"},u({fill:"none",stroke:B,strokeWidth:1.5,strokeDasharray:[1e4,1]})));p(x,{element:qt,ref:{x:11,y:10},scale:.5,parentGfx:A})}if(y==="conditional-flow-marker"){var Lt=ie("path",X({d:"M 0 10 L 8 6 L 16 10 L 8 14 Z"},d({fill:F,stroke:B})));p(x,{element:Lt,ref:{x:-1,y:10},scale:.5,parentGfx:A})}if(y==="conditional-default-flow-marker"){var oi=ie("path",X({d:"M 6 4 L 10 16"},d({stroke:B,fill:"none"})));p(x,{element:oi,ref:{x:0,y:10},scale:.5,parentGfx:A})}}function _(A,x,y,F,B={}){it(F)&&(B=F,F=0),F=F||0,B=d(B);var q=x/2,te=y/2,be=ie("circle",X({cx:q,cy:te,r:Math.round((x+y)/4-F)},B));return me(A,be),be}function b(A,x,y,F,B,q){it(B)&&(q=B,B=0),B=B||0,q=d(q);var te=ie("rect",X({x:B,y:B,width:x-B*2,height:y-B*2,rx:F,ry:F},q));return me(A,te),te}function D(A,x,y,F){var B=x/2,q=y/2,te=[{x:B,y:0},{x,y:q},{x:B,y},{x:0,y:q}],be=te.map(function(qt){return qt.x+","+qt.y}).join(" ");F=d(F);var We=ie("polygon",Be(X({},F),{points:be}));return me(A,We),We}function R(A,x,y,F){y=u(y);var B=Bo(x,y,F);return me(A,B),B}function C(A,x,y){return R(A,x,y,5)}function w(A,x,y){y=u(y);var F=ie("path",Be(X({},y),{d:x}));return me(A,F),F}function P(A,x,y,F){return w(x,y,k({"data-marker":A},F))}function T(A){return Ri[A]}function H(A){return function(x,y,F){return T(A)(x,y,F)}}var N={"bpmn:MessageEventDefinition":function(A,x,y={},F){var B=n.getScaledPath("EVENT_MESSAGE",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:y.width||x.width,containerHeight:y.height||x.height,position:{mx:.235,my:.315}}),q=F?se(x,c,y.stroke):je(x,s,y.fill),te=F?je(x,s,y.fill):se(x,c,y.stroke),be=w(A,B,{fill:q,stroke:te,strokeWidth:1});return be},"bpmn:TimerEventDefinition":function(A,x,y={}){var F=y.width||x.width,B=y.height||x.height,q=y.width?1:2,te=_(A,F,B,.2*B,{fill:je(x,s,y.fill),stroke:se(x,c,y.stroke),strokeWidth:q}),be=n.getScaledPath("EVENT_TIMER_WH",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:F,containerHeight:B,position:{mx:.5,my:.5}});w(A,be,{stroke:se(x,c,y.stroke),strokeWidth:q});for(var We=0;We<12;We++){var qt=n.getScaledPath("EVENT_TIMER_LINE",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:F,containerHeight:B,position:{mx:.5,my:.5}}),Lt=F/2,oi=B/2;w(A,qt,{strokeWidth:1,stroke:se(x,c,y.stroke),transform:"rotate("+We*30+","+oi+","+Lt+")"})}return te},"bpmn:EscalationEventDefinition":function(A,x,y={},F){var B=n.getScaledPath("EVENT_ESCALATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:y.width||x.width,containerHeight:y.height||x.height,position:{mx:.5,my:.2}}),q=F?se(x,c,y.stroke):je(x,s,y.fill);return w(A,B,{fill:q,stroke:se(x,c,y.stroke),strokeWidth:1})},"bpmn:ConditionalEventDefinition":function(A,x,y={}){var F=n.getScaledPath("EVENT_CONDITIONAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:y.width||x.width,containerHeight:y.height||x.height,position:{mx:.5,my:.222}});return w(A,F,{fill:je(x,s,y.fill),stroke:se(x,c,y.stroke),strokeWidth:1})},"bpmn:LinkEventDefinition":function(A,x,y={},F){var B=n.getScaledPath("EVENT_LINK",{xScaleFactor:1,yScaleFactor:1,containerWidth:x.width,containerHeight:x.height,position:{mx:.57,my:.263}}),q=F?se(x,c,y.stroke):je(x,s,y.fill);return w(A,B,{fill:q,stroke:se(x,c,y.stroke),strokeWidth:1})},"bpmn:ErrorEventDefinition":function(A,x,y={},F){var B=n.getScaledPath("EVENT_ERROR",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:y.width||x.width,containerHeight:y.height||x.height,position:{mx:.2,my:.722}}),q=F?se(x,c,y.stroke):je(x,s,y.fill);return w(A,B,{fill:q,stroke:se(x,c,y.stroke),strokeWidth:1})},"bpmn:CancelEventDefinition":function(A,x,y={},F){var B=n.getScaledPath("EVENT_CANCEL_45",{xScaleFactor:1,yScaleFactor:1,containerWidth:x.width,containerHeight:x.height,position:{mx:.638,my:-.055}}),q=F?se(x,c,y.stroke):"none",te=w(A,B,{fill:q,stroke:se(x,c,y.stroke),strokeWidth:1});return Cp(te,45),te},"bpmn:CompensateEventDefinition":function(A,x,y={},F){var B=n.getScaledPath("EVENT_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:y.width||x.width,containerHeight:y.height||x.height,position:{mx:.22,my:.5}}),q=F?se(x,c,y.stroke):je(x,s,y.fill);return w(A,B,{fill:q,stroke:se(x,c,y.stroke),strokeWidth:1})},"bpmn:SignalEventDefinition":function(A,x,y={},F){var B=n.getScaledPath("EVENT_SIGNAL",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:y.width||x.width,containerHeight:y.height||x.height,position:{mx:.5,my:.2}}),q=F?se(x,c,y.stroke):je(x,s,y.fill);return w(A,B,{strokeWidth:1,fill:q,stroke:se(x,c,y.stroke)})},"bpmn:MultipleEventDefinition":function(A,x,y={},F){var B=n.getScaledPath("EVENT_MULTIPLE",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:y.width||x.width,containerHeight:y.height||x.height,position:{mx:.211,my:.36}}),q=F?se(x,c,y.stroke):je(x,s,y.fill);return w(A,B,{fill:q,stroke:se(x,c,y.stroke),strokeWidth:1})},"bpmn:ParallelMultipleEventDefinition":function(A,x,y={}){var F=n.getScaledPath("EVENT_PARALLEL_MULTIPLE",{xScaleFactor:1.2,yScaleFactor:1.2,containerWidth:y.width||x.width,containerHeight:y.height||x.height,position:{mx:.458,my:.194}});return w(A,F,{fill:je(x,s,y.fill),stroke:se(x,c,y.stroke),strokeWidth:1})},"bpmn:TerminateEventDefinition":function(A,x,y={}){var F=_(A,x.width,x.height,8,{fill:se(x,c,y.stroke),stroke:se(x,c,y.stroke),strokeWidth:4});return F}};function W(A,x,y={},F){var B=U(A),q=H0(B),te=F||A;return B.get("eventDefinitions")&&B.get("eventDefinitions").length>1?B.get("parallelMultiple")?N["bpmn:ParallelMultipleEventDefinition"](x,te,y,q):N["bpmn:MultipleEventDefinition"](x,te,y,q):tr(B,"bpmn:MessageEventDefinition")?N["bpmn:MessageEventDefinition"](x,te,y,q):tr(B,"bpmn:TimerEventDefinition")?N["bpmn:TimerEventDefinition"](x,te,y,q):tr(B,"bpmn:ConditionalEventDefinition")?N["bpmn:ConditionalEventDefinition"](x,te,y,q):tr(B,"bpmn:SignalEventDefinition")?N["bpmn:SignalEventDefinition"](x,te,y,q):tr(B,"bpmn:EscalationEventDefinition")?N["bpmn:EscalationEventDefinition"](x,te,y,q):tr(B,"bpmn:LinkEventDefinition")?N["bpmn:LinkEventDefinition"](x,te,y,q):tr(B,"bpmn:ErrorEventDefinition")?N["bpmn:ErrorEventDefinition"](x,te,y,q):tr(B,"bpmn:CancelEventDefinition")?N["bpmn:CancelEventDefinition"](x,te,y,q):tr(B,"bpmn:CompensateEventDefinition")?N["bpmn:CompensateEventDefinition"](x,te,y,q):tr(B,"bpmn:TerminateEventDefinition")?N["bpmn:TerminateEventDefinition"](x,te,y,q):null}var $={ParticipantMultiplicityMarker:function(A,x,y={}){var F=mn(x,y),B=Vi(x,y),q=n.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:F,containerHeight:B,position:{mx:(F/2-6)/F,my:(B-15)/B}});P("participant-multiplicity",A,q,{strokeWidth:2,fill:je(x,s,y.fill),stroke:se(x,c,y.stroke)})},SubProcessMarker:function(A,x,y={}){var F=b(A,14,14,0,{strokeWidth:1,fill:je(x,s,y.fill),stroke:se(x,c,y.stroke)});mt(F,x.width/2-7.5,x.height-20);var B=n.getScaledPath("MARKER_SUB_PROCESS",{xScaleFactor:1.5,yScaleFactor:1.5,containerWidth:x.width,containerHeight:x.height,position:{mx:(x.width/2-7.5)/x.width,my:(x.height-20)/x.height}});P("sub-process",A,B,{fill:je(x,s,y.fill),stroke:se(x,c,y.stroke)})},ParallelMarker:function(A,x,y){var F=mn(x,y),B=Vi(x,y),q=n.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:F,containerHeight:B,position:{mx:(F/2+y.parallel)/F,my:(B-20)/B}});P("parallel",A,q,{fill:je(x,s,y.fill),stroke:se(x,c,y.stroke)})},SequentialMarker:function(A,x,y){var F=n.getScaledPath("MARKER_SEQUENTIAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:x.width,containerHeight:x.height,position:{mx:(x.width/2+y.seq)/x.width,my:(x.height-19)/x.height}});P("sequential",A,F,{fill:je(x,s,y.fill),stroke:se(x,c,y.stroke)})},CompensationMarker:function(A,x,y){var F=n.getScaledPath("MARKER_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:x.width,containerHeight:x.height,position:{mx:(x.width/2+y.compensation)/x.width,my:(x.height-13)/x.height}});P("compensation",A,F,{strokeWidth:1,fill:je(x,s,y.fill),stroke:se(x,c,y.stroke)})},LoopMarker:function(A,x,y){var F=mn(x,y),B=Vi(x,y),q=n.getScaledPath("MARKER_LOOP",{xScaleFactor:1,yScaleFactor:1,containerWidth:F,containerHeight:B,position:{mx:(F/2+y.loop)/F,my:(B-7)/B}});P("loop",A,q,{strokeWidth:1.5,fill:"none",stroke:se(x,c,y.stroke),strokeMiterlimit:.5})},AdhocMarker:function(A,x,y){var F=mn(x,y),B=Vi(x,y),q=n.getScaledPath("MARKER_ADHOC",{xScaleFactor:1,yScaleFactor:1,containerWidth:F,containerHeight:B,position:{mx:(F/2+y.adhoc)/F,my:(B-15)/B}});P("adhoc",A,q,{strokeWidth:1,fill:se(x,c,y.stroke),stroke:se(x,c,y.stroke)})}};function Q(A,x,y,F){$[A](x,y,F)}function Y(A,x,y,F={}){F={fill:F.fill,stroke:F.stroke,width:mn(x,F),height:Vi(x,F)};var B=U(x),q=y&&y.includes("SubProcessMarker");q?F=Be(X({},F),{seq:-21,parallel:-22,compensation:-42,loop:-18,adhoc:10}):F=Be(X({},F),{seq:-5,parallel:-6,compensation:-27,loop:0,adhoc:10}),M(y,function(We){Q(We,A,x,F)}),B.get("isForCompensation")&&Q("CompensationMarker",A,x,F),v(B,"bpmn:AdHocSubProcess")&&Q("AdhocMarker",A,x,F);var te=B.get("loopCharacteristics"),be=te&&te.get("isSequential");te&&(be===void 0&&Q("LoopMarker",A,x,F),be===!1&&Q("ParallelMarker",A,x,F),be===!0&&Q("SequentialMarker",A,x,F))}function ae(A,x,y={}){y=k({size:{width:100}},y);var F=o.createText(x||"",y);return Re(F).add("djs-label"),me(A,F),F}function Ie(A,x,y,F={}){var B=U(x),q=$s({x:x.x,y:x.y,width:x.width,height:x.height},F);return ae(A,B.name,{align:y,box:q,padding:7,style:{fill:Hs(x,l,c,F.stroke)}})}function di(A,x,y={}){var F={width:90,height:30,x:x.width/2+x.x,y:x.height/2+x.y};return ae(A,hi(x),{box:F,fitBox:!0,style:k({},o.getExternalStyle(),{fill:Hs(x,l,c,y.stroke)})})}function ut(A,x,y,F={}){var B=nt(y),q=ae(A,x,{box:{height:30,width:B?Vi(y,F):mn(y,F)},align:"center-middle",style:{fill:Hs(y,l,c,F.stroke)}});if(B){var te=-1*Vi(y,F);Ls(q,0,-te,270)}}function $e(A,x,y={}){var{width:F,height:B}=$s(x,y);return b(A,F,B,Fp,Be(X({},y),{fill:je(x,s,y.fill),fillOpacity:Ws,stroke:se(x,c,y.stroke)}))}function Wi(A,x,y={}){var F=U(x),B=je(x,s,y.fill),q=se(x,c,y.stroke);return(F.get("associationDirection")==="One"||F.get("associationDirection")==="Both")&&(y.markerEnd=m(A,"association-end",B,q)),F.get("associationDirection")==="Both"&&(y.markerStart=m(A,"association-start",B,q)),y=Ye(y,["markerStart","markerEnd"]),C(A,x.waypoints,Be(X({},y),{stroke:q,strokeDasharray:"0, 5"}))}function Ui(A,x,y={}){var F=je(x,s,y.fill),B=se(x,c,y.stroke),q=n.getScaledPath("DATA_OBJECT_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:x.width,containerHeight:x.height,position:{mx:.474,my:.296}}),te=w(A,q,{fill:F,fillOpacity:Ws,stroke:B}),be=U(x);if($0(be)){var We=n.getScaledPath("DATA_OBJECT_COLLECTION_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:x.width,containerHeight:x.height,position:{mx:.33,my:(x.height-18)/x.height}});w(A,We,{strokeWidth:2,fill:F,stroke:B})}return te}function At(A,x,y={}){return _(A,x.width,x.height,Be(X({fillOpacity:Ws},y),{fill:je(x,s,y.fill),stroke:se(x,c,y.stroke)}))}function ri(A,x,y={}){return D(A,x.width,x.height,{fill:je(x,s,y.fill),fillOpacity:Ws,stroke:se(x,c,y.stroke)})}function Z(A,x,y={}){var F=b(A,mn(x,y),Vi(x,y),0,{fill:je(x,s,y.fill),fillOpacity:y.fillOpacity||Ws,stroke:se(x,c,y.stroke),strokeWidth:1.5}),B=U(x);if(v(B,"bpmn:Lane")){var q=B.get("name");ut(A,q,x,y)}return F}function ee(A,x,y={}){var F=$e(A,x,y),B=we(x);if(kt(x)&&(J(F,{strokeDasharray:"0, 5.5",strokeWidth:2.5}),!B)){var q=U(x).flowElements||[],te=q.filter(be=>v(be,"bpmn:StartEvent"));te.length===1&&_e(te[0],A,y,x)}return Ie(A,x,B?"center-top":"center-middle",y),B?Y(A,x,void 0,y):Y(A,x,["SubProcessMarker"],y),F}function _e(A,x,y,F){var B=22,q={fill:je(F,s,y.fill),stroke:se(F,c,y.stroke),width:B,height:B},te=U(A).isInterrupting,be=te?0:3,We=te?1:1.2,qt=20,Lt=(B-qt)/2,oi="translate("+Lt+","+Lt+")";_(x,qt,qt,{fill:q.fill,stroke:q.stroke,strokeWidth:We,strokeDasharray:be,transform:oi}),W(A,x,q,F)}function Ue(A,x,y={}){var F=$e(A,x,y);return Ie(A,x,"center-middle",y),Y(A,x,void 0,y),F}var Ri=this.handlers={"bpmn:AdHocSubProcess":function(A,x,y={}){return we(x)?y=Ye(y,["fill","stroke","width","height"]):y=Ye(y,["fill","stroke"]),ee(A,x,y)},"bpmn:Association":function(A,x,y={}){return y=Ye(y,["fill","stroke"]),Wi(A,x,y)},"bpmn:BoundaryEvent":function(A,x,y={}){var{renderIcon:F=!0}=y;y=Ye(y,["fill","stroke"]);var B=U(x),q=B.get("cancelActivity");y={strokeWidth:1.5,fill:je(x,s,y.fill),fillOpacity:CT,stroke:se(x,c,y.stroke)},q||(y.strokeDasharray="6");var te=At(A,x,y);return _(A,x.width,x.height,Ip,Be(X({},y),{fill:"none"})),F&&W(x,A,y),te},"bpmn:BusinessRuleTask":function(A,x,y={}){y=Ye(y,["fill","stroke"]);var F=Ue(A,x,y),B=n.getScaledPath("TASK_TYPE_BUSINESS_RULE_MAIN",{abspos:{x:8,y:8}}),q=w(A,B);J(q,{fill:je(x,s,y.fill),stroke:se(x,c,y.stroke),strokeWidth:1});var te=n.getScaledPath("TASK_TYPE_BUSINESS_RULE_HEADER",{abspos:{x:8,y:8}}),be=w(A,te);return J(be,{fill:se(x,c,y.stroke),stroke:se(x,c,y.stroke),strokeWidth:1}),F},"bpmn:CallActivity":function(A,x,y={}){return y=Ye(y,["fill","stroke"]),ee(A,x,X({strokeWidth:5},y))},"bpmn:ComplexGateway":function(A,x,y={}){y=Ye(y,["fill","stroke"]);var F=ri(A,x,y),B=n.getScaledPath("GATEWAY_COMPLEX",{xScaleFactor:.5,yScaleFactor:.5,containerWidth:x.width,containerHeight:x.height,position:{mx:.46,my:.26}});return w(A,B,{fill:se(x,c,y.stroke),stroke:se(x,c,y.stroke),strokeWidth:1}),F},"bpmn:DataInput":function(A,x,y={}){y=Ye(y,["fill","stroke"]);var F=n.getRawPath("DATA_ARROW"),B=Ui(A,x,y);return w(A,F,{fill:"none",stroke:se(x,c,y.stroke),strokeWidth:1}),B},"bpmn:DataInputAssociation":function(A,x,y={}){return y=Ye(y,["fill","stroke"]),Wi(A,x,Be(X({},y),{markerEnd:m(A,"association-end",je(x,s,y.fill),se(x,c,y.stroke))}))},"bpmn:DataObject":function(A,x,y={}){return y=Ye(y,["fill","stroke"]),Ui(A,x,y)},"bpmn:DataObjectReference":H("bpmn:DataObject"),"bpmn:DataOutput":function(A,x,y={}){y=Ye(y,["fill","stroke"]);var F=n.getRawPath("DATA_ARROW"),B=Ui(A,x,y);return w(A,F,{strokeWidth:1,fill:je(x,s,y.fill),stroke:se(x,c,y.stroke)}),B},"bpmn:DataOutputAssociation":function(A,x,y={}){return y=Ye(y,["fill","stroke"]),Wi(A,x,Be(X({},y),{markerEnd:m(A,"association-end",je(x,s,y.fill),se(x,c,y.stroke))}))},"bpmn:DataStoreReference":function(A,x,y={}){y=Ye(y,["fill","stroke"]);var F=n.getScaledPath("DATA_STORE",{xScaleFactor:1,yScaleFactor:1,containerWidth:x.width,containerHeight:x.height,position:{mx:0,my:.133}});return w(A,F,{fill:je(x,s,y.fill),fillOpacity:Ws,stroke:se(x,c,y.stroke),strokeWidth:2})},"bpmn:EndEvent":function(A,x,y={}){var{renderIcon:F=!0}=y;y=Ye(y,["fill","stroke"]);var B=At(A,x,Be(X({},y),{strokeWidth:4}));return F&&W(x,A,y),B},"bpmn:EventBasedGateway":function(A,x,y={}){y=Ye(y,["fill","stroke"]);var F=U(x),B=ri(A,x,y);_(A,x.width,x.height,x.height*.2,{fill:je(x,"none",y.fill),stroke:se(x,c,y.stroke),strokeWidth:1});var q=F.get("eventGatewayType"),te=!!F.get("instantiate");function be(){var qt=n.getScaledPath("GATEWAY_EVENT_BASED",{xScaleFactor:.18,yScaleFactor:.18,containerWidth:x.width,containerHeight:x.height,position:{mx:.36,my:.44}});w(A,qt,{fill:"none",stroke:se(x,c,y.stroke),strokeWidth:2})}if(q==="Parallel"){var We=n.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:x.width,containerHeight:x.height,position:{mx:.474,my:.296}});w(A,We,{fill:"none",stroke:se(x,c,y.stroke),strokeWidth:1})}else q==="Exclusive"&&(te||_(A,x.width,x.height,x.height*.26,{fill:"none",stroke:se(x,c,y.stroke),strokeWidth:1}),be());return B},"bpmn:ExclusiveGateway":function(A,x,y={}){y=Ye(y,["fill","stroke"]);var F=ri(A,x,y),B=n.getScaledPath("GATEWAY_EXCLUSIVE",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:x.width,containerHeight:x.height,position:{mx:.32,my:.3}}),q=Me(x);return q.get("isMarkerVisible")&&w(A,B,{fill:se(x,c,y.stroke),stroke:se(x,c,y.stroke),strokeWidth:1}),F},"bpmn:Gateway":function(A,x,y={}){return y=Ye(y,["fill","stroke"]),ri(A,x,y)},"bpmn:Group":function(A,x,y={}){return y=Ye(y,["fill","stroke","width","height"]),b(A,x.width,x.height,Fp,{stroke:se(x,c,y.stroke),strokeWidth:1.5,strokeDasharray:"10, 6, 0, 6",fill:"none",pointerEvents:"none",width:mn(x,y),height:Vi(x,y)})},"bpmn:InclusiveGateway":function(A,x,y={}){y=Ye(y,["fill","stroke"]);var F=ri(A,x,y);return _(A,x.width,x.height,x.height*.24,{fill:je(x,s,y.fill),stroke:se(x,c,y.stroke),strokeWidth:2.5}),F},"bpmn:IntermediateEvent":function(A,x,y={}){var{renderIcon:F=!0}=y;y=Ye(y,["fill","stroke"]);var B=At(A,x,Be(X({},y),{strokeWidth:1.5}));return _(A,x.width,x.height,Ip,{fill:"none",stroke:se(x,c,y.stroke),strokeWidth:1.5}),F&&W(x,A,y),B},"bpmn:IntermediateCatchEvent":H("bpmn:IntermediateEvent"),"bpmn:IntermediateThrowEvent":H("bpmn:IntermediateEvent"),"bpmn:Lane":function(A,x,y={}){return y=Ye(y,["fill","stroke","width","height"]),Z(A,x,Be(X({},y),{fillOpacity:ST}))},"bpmn:ManualTask":function(A,x,y={}){y=Ye(y,["fill","stroke"]);var F=Ue(A,x,y),B=n.getScaledPath("TASK_TYPE_MANUAL",{abspos:{x:17,y:15}});return w(A,B,{fill:je(x,s,y.fill),stroke:se(x,c,y.stroke),strokeWidth:.5}),F},"bpmn:MessageFlow":function(A,x,y={}){y=Ye(y,["fill","stroke"]);var F=U(x),B=Me(x),q=je(x,s,y.fill),te=se(x,c,y.stroke),be=C(A,x.waypoints,{markerEnd:m(A,"messageflow-end",q,te),markerStart:m(A,"messageflow-start",q,te),stroke:te,strokeDasharray:"10, 11",strokeWidth:1.5});if(F.get("messageRef")){var We=be.getPointAtLength(be.getTotalLength()/2),qt=n.getScaledPath("MESSAGE_FLOW_MARKER",{abspos:{x:We.x,y:We.y}}),Lt={strokeWidth:1};B.get("messageVisibleKind")==="initiating"?(Lt.fill=q,Lt.stroke=te):(Lt.fill=te,Lt.stroke=q);var oi=w(A,qt,Lt),yn=F.get("messageRef"),ct=yn.get("name"),Vr=ae(A,ct,{align:"center-top",fitBox:!0,style:{fill:te}}),yu=oi.getBBox(),sn=Vr.getBBox(),Ne=We.x-sn.width/2,tt=We.y+yu.height/2+wT;Ls(Vr,Ne,tt,0)}return be},"bpmn:ParallelGateway":function(A,x,y={}){y=Ye(y,["fill","stroke"]);var F=ri(A,x,y),B=n.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.6,yScaleFactor:.6,containerWidth:x.width,containerHeight:x.height,position:{mx:.46,my:.2}});return w(A,B,{fill:se(x,c,y.stroke),stroke:se(x,c,y.stroke),strokeWidth:1}),F},"bpmn:Participant":function(A,x,y={}){y=Ye(y,["fill","stroke","width","height"]);var F=Z(A,x,y),B=we(x),q=nt(x),te=U(x),be=te.get("name");if(B){var We=q?[{x:30,y:0},{x:30,y:Vi(x,y)}]:[{x:0,y:30},{x:mn(x,y),y:30}];R(A,We,{stroke:se(x,c,y.stroke),strokeWidth:ET}),ut(A,be,x,y)}else{var qt=$s(x,y);q||(qt.height=mn(x,y),qt.width=Vi(x,y));var Lt=ae(A,be,{box:qt,align:"center-middle",style:{fill:Hs(x,l,c,y.stroke)}});if(!q){var oi=-1*Vi(x,y);Ls(Lt,0,-oi,270)}}return te.get("participantMultiplicity")&&Q("ParticipantMultiplicityMarker",A,x,y),F},"bpmn:ReceiveTask":function(A,x,y={}){y=Ye(y,["fill","stroke"]);var F=U(x),B=Ue(A,x,y),q;return F.get("instantiate")?(_(A,28,28,20*.22,{fill:je(x,s,y.fill),stroke:se(x,c,y.stroke),strokeWidth:1}),q=n.getScaledPath("TASK_TYPE_INSTANTIATING_SEND",{abspos:{x:7.77,y:9.52}})):q=n.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:21,containerHeight:14,position:{mx:.3,my:.4}}),w(A,q,{fill:je(x,s,y.fill),stroke:se(x,c,y.stroke),strokeWidth:1}),B},"bpmn:ScriptTask":function(A,x,y={}){y=Ye(y,["fill","stroke"]);var F=Ue(A,x,y),B=n.getScaledPath("TASK_TYPE_SCRIPT",{abspos:{x:15,y:20}});return w(A,B,{fill:je(x,s,y.fill),stroke:se(x,c,y.stroke),strokeWidth:1}),F},"bpmn:SendTask":function(A,x,y={}){y=Ye(y,["fill","stroke"]);var F=Ue(A,x,y),B=n.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:1,yScaleFactor:1,containerWidth:21,containerHeight:14,position:{mx:.285,my:.357}});return w(A,B,{fill:se(x,c,y.stroke),stroke:je(x,s,y.fill),strokeWidth:1}),F},"bpmn:SequenceFlow":function(A,x,y={}){y=Ye(y,["fill","stroke"]);var F=je(x,s,y.fill),B=se(x,c,y.stroke),q=C(A,x.waypoints,{markerEnd:m(A,"sequenceflow-end",F,B),stroke:B}),te=U(x),{source:be}=x;if(be){var We=U(be);te.get("conditionExpression")&&v(We,"bpmn:Activity")&&J(q,{markerStart:m(A,"conditional-flow-marker",F,B)}),We.get("default")&&(v(We,"bpmn:Gateway")||v(We,"bpmn:Activity"))&&We.get("default")===te&&J(q,{markerStart:m(A,"conditional-default-flow-marker",F,B)})}return q},"bpmn:ServiceTask":function(A,x,y={}){y=Ye(y,["fill","stroke"]);var F=Ue(A,x,y);_(A,10,10,{fill:je(x,s,y.fill),stroke:"none",transform:"translate(6, 6)"});var B=n.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:12,y:18}});w(A,B,{fill:je(x,s,y.fill),stroke:se(x,c,y.stroke),strokeWidth:1}),_(A,10,10,{fill:je(x,s,y.fill),stroke:"none",transform:"translate(11, 10)"});var q=n.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:17,y:22}});return w(A,q,{fill:je(x,s,y.fill),stroke:se(x,c,y.stroke),strokeWidth:1}),F},"bpmn:StartEvent":function(A,x,y={}){var{renderIcon:F=!0}=y;y=Ye(y,["fill","stroke"]);var B=U(x);B.get("isInterrupting")||(y=Be(X({},y),{strokeDasharray:"6"}));var q=At(A,x,y);return F&&W(x,A,y),q},"bpmn:SubProcess":function(A,x,y={}){return we(x)?y=Ye(y,["fill","stroke","width","height"]):y=Ye(y,["fill","stroke"]),ee(A,x,y)},"bpmn:Task":function(A,x,y={}){return y=Ye(y,["fill","stroke"]),Ue(A,x,y)},"bpmn:TextAnnotation":function(A,x,y={}){y=Ye(y,["fill","stroke","width","height"]);var{width:F,height:B}=$s(x,y),q=b(A,F,B,0,0,{fill:"none",stroke:"none"}),te=n.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:F,containerHeight:B,position:{mx:0,my:0}});w(A,te,{stroke:se(x,c,y.stroke)});var be=U(x),We=be.get("text")||"";return ae(A,We,{align:"left-top",box:$s(x,y),padding:7,style:{fill:Hs(x,l,c,y.stroke)}}),q},"bpmn:Transaction":function(A,x,y={}){we(x)?y=Ye(y,["fill","stroke","width","height"]):y=Ye(y,["fill","stroke"]);var F=ee(A,x,X({strokeWidth:1.5},y)),B=i.style(["no-fill","no-events"],{stroke:se(x,c,y.stroke),strokeWidth:1.5}),q=we(x);return q||(y={}),b(A,mn(x,y),Vi(x,y),Fp-Ip,Ip,B),F},"bpmn:UserTask":function(A,x,y={}){y=Ye(y,["fill","stroke"]);var F=Ue(A,x,y),B=15,q=12,te=n.getScaledPath("TASK_TYPE_USER_1",{abspos:{x:B,y:q}});w(A,te,{fill:je(x,s,y.fill),stroke:se(x,c,y.stroke),strokeWidth:.5});var be=n.getScaledPath("TASK_TYPE_USER_2",{abspos:{x:B,y:q}});w(A,be,{fill:je(x,s,y.fill),stroke:se(x,c,y.stroke),strokeWidth:.5});var We=n.getScaledPath("TASK_TYPE_USER_3",{abspos:{x:B,y:q}});return w(A,We,{fill:se(x,c,y.stroke),stroke:se(x,c,y.stroke),strokeWidth:.5}),F},label:function(A,x,y={}){return di(A,x,y)}};this._drawPath=w,this._renderer=T}z(Jr,kn);Jr.$inject=["config.bpmnRenderer","eventBus","styles","pathMap","canvas","textRenderer"];Jr.prototype.canRender=function(e){return v(e,"bpmn:BaseElement")};Jr.prototype.drawShape=function(e,t,i={}){var{type:n}=t,r=this._renderer(n);return r(e,t,i)};Jr.prototype.drawConnection=function(e,t,i={}){var{type:n}=t,r=this._renderer(n);return r(e,t,i)};Jr.prototype.getShapePath=function(e){return v(e,"bpmn:Event")?W0(e):v(e,"bpmn:Activity")?U0(e,Fp):v(e,"bpmn:Gateway")?G0(e):q0(e)};function Ye(e,t=[]){return t.reduce((i,n)=>(e[n]&&(i[n]=e[n]),i),{})}var MT=0,DT={width:150,height:50};function AT(e){var t=e.split("-");return{horizontal:t[0]||"center",vertical:t[1]||"top"}}function PT(e){return it(e)?k({top:0,left:0,right:0,bottom:0},e):{top:e,left:e,right:e,bottom:e}}function kT(e,t){t.textContent=e;var i;try{var n,r=e==="";return t.textContent=r?"dummy":e,i=t.getBBox(),n={width:i.width+i.x*2,height:i.height},r&&(n.width=0),n}catch(o){return console.log(o),{width:0,height:0}}}function RT(e,t,i){for(var n=e.shift(),r=n,o;;){if(o=kT(r,i),o.width=r?o.width:0,r===" "||r===""||o.width<Math.round(t)||r.length<2)return OT(e,r,n,o);r=IT(r,o.width,t)}}function OT(e,t,i,n){if(t.length<i.length){var r=i.slice(t.length).trim();e.unshift(r)}return{width:n.width,height:n.height,text:t}}var Y0="\xAD";function TT(e,t){var i=e.split(/(\s|-|\u00AD)/g),n,r=[],o=0;if(i.length>1)for(;n=i.shift();)if(n.length+o<t)r.push(n),o+=n.length;else{(n==="-"||n===Y0)&&r.pop();break}var a=r[r.length-1];return a&&a===Y0&&(r[r.length-1]="-"),r.join("")}function IT(e,t,i){var n=Math.max(e.length*(i/t),1),r=TT(e,n);return r||(r=e.slice(0,Math.max(Math.round(n-1),1))),r}function FT(){var e=document.getElementById("helper-svg");return e||(e=ie("svg"),J(e,{id:"helper-svg"}),Vt(e,{visibility:"hidden",position:"fixed",width:0,height:0}),document.body.appendChild(e)),e}function Us(e){this._config=k({},{size:DT,padding:MT,style:{},align:"center-top"},e||{})}Us.prototype.createText=function(e,t){return this.layoutText(e,t).element};Us.prototype.getDimensions=function(e,t){return this.layoutText(e,t).dimensions};Us.prototype.layoutText=function(e,t){var i=k({},this._config.size,t.box),n=k({},this._config.style,t.style),r=AT(t.align||this._config.align),o=PT(t.padding!==void 0?t.padding:this._config.padding),a=t.fitBox||!1,s=NT(n),c=e.split(/\u00AD?\r?\n/),l=[],d=i.width-o.left-o.right,u=ie("text");J(u,{x:0,y:0}),J(u,n);var p=FT();for(me(p,u);c.length;)l.push(RT(c,d,u));r.vertical==="middle"&&(o.top=o.bottom=0);var m=Ot(l,function(R,C,w){return R+(s||C.height)},0)+o.top+o.bottom,f=Ot(l,function(R,C,w){return C.width>R?C.width:R},0),_=o.top;r.vertical==="middle"&&(_+=(i.height-m)/2),_-=(s||l[0].height)/4;var b=ie("text");J(b,n),M(l,function(R){var C;switch(_+=s||R.height,r.horizontal){case"left":C=o.left;break;case"right":C=(a?f:d)-o.right-R.width;break;default:C=Math.max(((a?f:d)-R.width)/2+o.left,0)}var w=ie("tspan");J(w,{x:C,y:_}),w.textContent=R.text,me(b,w)}),Qe(u);var D={width:f,height:m};return{dimensions:D,element:b}};function NT(e){if("fontSize"in e&&"lineHeight"in e)return e.lineHeight*parseInt(e.fontSize,10)}var LT=12,BT=1.2,jT=30;function Np(e){var t=k({fontFamily:"Arial, sans-serif",fontSize:LT,fontWeight:"normal",lineHeight:BT},e&&e.defaultStyle||{}),i=parseInt(t.fontSize,10)-1,n=k({},t,{fontSize:i},e&&e.externalStyle||{}),r=new Us({style:t});this.getExternalLabelBounds=function(o,a){var s=r.getDimensions(a,{box:{width:90,height:30},style:n});return{x:Math.round(o.x+o.width/2-s.width/2),y:Math.round(o.y),width:Math.ceil(s.width),height:Math.ceil(s.height)}},this.getTextAnnotationBounds=function(o,a){var s=r.getDimensions(a,{box:o,style:t,align:"left-top",padding:5});return{x:o.x,y:o.y,width:o.width,height:Math.max(jT,Math.round(s.height))}},this.createText=function(o,a){return r.createText(o,a||{})},this.getDefaultStyle=function(){return t},this.getExternalStyle=function(){return n}}Np.$inject=["config.textRenderer"];function Xg(){this.pathMap={EVENT_MESSAGE:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:36,width:36,heightElements:[6,14],widthElements:[10.5,21]},EVENT_SIGNAL:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x1},0 Z",height:36,width:36,heightElements:[18],widthElements:[10,20]},EVENT_ESCALATION:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x0},-{e.y1} l -{e.x0},{e.y1} Z",height:36,width:36,heightElements:[20,7],widthElements:[8]},EVENT_CONDITIONAL:{d:"M {e.x0},{e.y0} l {e.x1},0 l 0,{e.y2} l -{e.x1},0 Z M {e.x2},{e.y3} l {e.x0},0 M {e.x2},{e.y4} l {e.x0},0 M {e.x2},{e.y5} l {e.x0},0 M {e.x2},{e.y6} l {e.x0},0 M {e.x2},{e.y7} l {e.x0},0 M {e.x2},{e.y8} l {e.x0},0 ",height:36,width:36,heightElements:[8.5,14.5,18,11.5,14.5,17.5,20.5,23.5,26.5],widthElements:[10.5,14.5,12.5]},EVENT_LINK:{d:"m {mx},{my} 0,{e.y0} -{e.x1},0 0,{e.y1} {e.x1},0 0,{e.y0} {e.x0},-{e.y2} -{e.x0},-{e.y2} z",height:36,width:36,heightElements:[4.4375,6.75,7.8125],widthElements:[9.84375,13.5]},EVENT_ERROR:{d:"m {mx},{my} {e.x0},-{e.y0} {e.x1},-{e.y1} {e.x2},{e.y2} {e.x3},-{e.y3} -{e.x4},{e.y4} -{e.x5},-{e.y5} z",height:36,width:36,heightElements:[.023,8.737,8.151,16.564,10.591,8.714],widthElements:[.085,6.672,6.97,4.273,5.337,6.636]},EVENT_CANCEL_45:{d:"m {mx},{my} -{e.x1},0 0,{e.x0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:36,width:36,heightElements:[4.75,8.5],widthElements:[4.75,8.5]},EVENT_COMPENSATION:{d:"m {mx},{my} {e.x0},-{e.y0} 0,{e.y1} z m {e.x1},-{e.y2} {e.x2},-{e.y3} 0,{e.y1} -{e.x2},-{e.y3} z",height:36,width:36,heightElements:[6.5,13,.4,6.1],widthElements:[9,9.3,8.7]},EVENT_TIMER_WH:{d:"M {mx},{my} l {e.x0},-{e.y0} m -{e.x0},{e.y0} l {e.x1},{e.y1} ",height:36,width:36,heightElements:[10,2],widthElements:[3,7]},EVENT_TIMER_LINE:{d:"M {mx},{my} m {e.x0},{e.y0} l -{e.x1},{e.y1} ",height:36,width:36,heightElements:[10,3],widthElements:[0,0]},EVENT_MULTIPLE:{d:"m {mx},{my} {e.x1},-{e.y0} {e.x1},{e.y0} -{e.x0},{e.y1} -{e.x2},0 z",height:36,width:36,heightElements:[6.28099,12.56199],widthElements:[3.1405,9.42149,12.56198]},EVENT_PARALLEL_MULTIPLE:{d:"m {mx},{my} {e.x0},0 0,{e.y1} {e.x1},0 0,{e.y0} -{e.x1},0 0,{e.y1} -{e.x0},0 0,-{e.y1} -{e.x1},0 0,-{e.y0} {e.x1},0 z",height:36,width:36,heightElements:[2.56228,7.68683],widthElements:[2.56228,7.68683]},GATEWAY_EXCLUSIVE:{d:"m {mx},{my} {e.x0},{e.y0} {e.x1},{e.y0} {e.x2},0 {e.x4},{e.y2} {e.x4},{e.y1} {e.x2},0 {e.x1},{e.y3} {e.x0},{e.y3} {e.x3},0 {e.x5},{e.y1} {e.x5},{e.y2} {e.x3},0 z",height:17.5,width:17.5,heightElements:[8.5,6.5312,-6.5312,-8.5],widthElements:[6.5,-6.5,3,-3,5,-5]},GATEWAY_PARALLEL:{d:"m {mx},{my} 0,{e.y1} -{e.x1},0 0,{e.y0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:30,width:30,heightElements:[5,12.5],widthElements:[5,12.5]},GATEWAY_EVENT_BASED:{d:"m {mx},{my} {e.x0},{e.y0} {e.x0},{e.y1} {e.x1},{e.y2} {e.x2},0 z",height:11,width:11,heightElements:[-6,6,12,-12],widthElements:[9,-3,-12]},GATEWAY_COMPLEX:{d:"m {mx},{my} 0,{e.y0} -{e.x0},-{e.y1} -{e.x1},{e.y2} {e.x0},{e.y1} -{e.x2},0 0,{e.y3} {e.x2},0  -{e.x0},{e.y1} l {e.x1},{e.y2} {e.x0},-{e.y1} 0,{e.y0} {e.x3},0 0,-{e.y0} {e.x0},{e.y1} {e.x1},-{e.y2} -{e.x0},-{e.y1} {e.x2},0 0,-{e.y3} -{e.x2},0 {e.x0},-{e.y1} -{e.x1},-{e.y2} -{e.x0},{e.y1} 0,-{e.y0} -{e.x3},0 z",height:17.125,width:17.125,heightElements:[4.875,3.4375,2.125,3],widthElements:[3.4375,2.125,4.875,3]},DATA_OBJECT_PATH:{d:"m 0,0 {e.x1},0 {e.x0},{e.y0} 0,{e.y1} -{e.x2},0 0,-{e.y2} {e.x1},0 0,{e.y0} {e.x0},0",height:61,width:51,heightElements:[10,50,60],widthElements:[10,40,50,60]},DATA_OBJECT_COLLECTION_PATH:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},DATA_ARROW:{d:"m 5,9 9,0 0,-3 5,5 -5,5 0,-3 -9,0 z",height:61,width:51,heightElements:[],widthElements:[]},DATA_STORE:{d:"m  {mx},{my} l  0,{e.y2} c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 l  0,-{e.y2} c -{e.x0},-{e.y1} -{e.x1},-{e.y1} -{e.x2},0c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1} {e.x2},0m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0",height:61,width:61,heightElements:[7,10,45],widthElements:[2,58,60]},TEXT_ANNOTATION:{d:"m {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0",height:30,width:10,heightElements:[30],widthElements:[10]},MARKER_SUB_PROCESS:{d:"m{mx},{my} m 7,2 l 0,10 m -5,-5 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_PARALLEL:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},MARKER_SEQUENTIAL:{d:"m{mx},{my} m 0,3 l 10,0 m -10,3 l 10,0 m -10,3 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_COMPENSATION:{d:"m {mx},{my} 7,-5 0,10 z m 7.1,-0.3 6.9,-4.7 0,10 -6.9,-4.7 z",height:10,width:21,heightElements:[],widthElements:[]},MARKER_LOOP:{d:"m {mx},{my} c 3.526979,0 6.386161,-2.829858 6.386161,-6.320661 0,-3.490806 -2.859182,-6.320661 -6.386161,-6.320661 -3.526978,0 -6.38616,2.829855 -6.38616,6.320661 0,1.745402 0.714797,3.325567 1.870463,4.469381 0.577834,0.571908 1.265885,1.034728 2.029916,1.35457 l -0.718163,-3.909793 m 0.718163,3.909793 -3.885211,0.802902",height:13.9,width:13.7,heightElements:[],widthElements:[]},MARKER_ADHOC:{d:"m {mx},{my} m 0.84461,2.64411 c 1.05533,-1.23780996 2.64337,-2.07882 4.29653,-1.97997996 2.05163,0.0805 3.85579,1.15803 5.76082,1.79107 1.06385,0.34139996 2.24454,0.1438 3.18759,-0.43767 0.61743,-0.33642 1.2775,-0.64078 1.7542,-1.17511 0,0.56023 0,1.12046 0,1.6807 -0.98706,0.96237996 -2.29792,1.62393996 -3.6918,1.66181996 -1.24459,0.0927 -2.46671,-0.2491 -3.59505,-0.74812 -1.35789,-0.55965 -2.75133,-1.33436996 -4.27027,-1.18121996 -1.37741,0.14601 -2.41842,1.13685996 -3.44288,1.96782996 z",height:4,width:15,heightElements:[],widthElements:[]},TASK_TYPE_SEND:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:14,width:21,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_SCRIPT:{d:"m {mx},{my} c 9.966553,-6.27276 -8.000926,-7.91932 2.968968,-14.938 l -8.802728,0 c -10.969894,7.01868 6.997585,8.66524 -2.968967,14.938 z m -7,-12 l 5,0 m -4.5,3 l 4.5,0 m -3,3 l 5,0m -4,3 l 5,0",height:15,width:12.6,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_USER_1:{d:"m {mx},{my} c 0.909,-0.845 1.594,-2.049 1.594,-3.385 0,-2.554 -1.805,-4.62199999 -4.357,-4.62199999 -2.55199998,0 -4.28799998,2.06799999 -4.28799998,4.62199999 0,1.348 0.974,2.562 1.89599998,3.405 -0.52899998,0.187 -5.669,2.097 -5.794,4.7560005 v 6.718 h 17 v -6.718 c 0,-2.2980005 -5.5279996,-4.5950005 -6.0509996,-4.7760005 zm -8,6 l 0,5.5 m 11,0 l 0,-5"},TASK_TYPE_USER_2:{d:"m {mx},{my} m 2.162,1.009 c 0,2.4470005 -2.158,4.4310005 -4.821,4.4310005 -2.66499998,0 -4.822,-1.981 -4.822,-4.4310005 "},TASK_TYPE_USER_3:{d:"m {mx},{my} m -6.9,-3.80 c 0,0 2.25099998,-2.358 4.27399998,-1.177 2.024,1.181 4.221,1.537 4.124,0.965 -0.098,-0.57 -0.117,-3.79099999 -4.191,-4.13599999 -3.57499998,0.001 -4.20799998,3.36699999 -4.20699998,4.34799999 z"},TASK_TYPE_MANUAL:{d:"m {mx},{my} c 0.234,-0.01 5.604,0.008 8.029,0.004 0.808,0 1.271,-0.172 1.417,-0.752 0.227,-0.898 -0.334,-1.314 -1.338,-1.316 -2.467,-0.01 -7.886,-0.004 -8.108,-0.004 -0.014,-0.079 0.016,-0.533 0,-0.61 0.195,-0.042 8.507,0.006 9.616,0.002 0.877,-0.007 1.35,-0.438 1.353,-1.208 0.003,-0.768 -0.479,-1.09 -1.35,-1.091 -2.968,-0.002 -9.619,-0.013 -9.619,-0.013 v -0.591 c 0,0 5.052,-0.016 7.225,-0.016 0.888,-0.002 1.354,-0.416 1.351,-1.193 -0.006,-0.761 -0.492,-1.196 -1.361,-1.196 -3.473,-0.005 -10.86,-0.003 -11.0829995,-0.003 -0.022,-0.047 -0.045,-0.094 -0.069,-0.139 0.3939995,-0.319 2.0409995,-1.626 2.4149995,-2.017 0.469,-0.4870005 0.519,-1.1650005 0.162,-1.6040005 -0.414,-0.511 -0.973,-0.5 -1.48,-0.236 -1.4609995,0.764 -6.5999995,3.6430005 -7.7329995,4.2710005 -0.9,0.499 -1.516,1.253 -1.882,2.19 -0.37000002,0.95 -0.17,2.01 -0.166,2.979 0.004,0.718 -0.27300002,1.345 -0.055,2.063 0.629,2.087 2.425,3.312 4.859,3.318 4.6179995,0.014 9.2379995,-0.139 13.8569995,-0.158 0.755,-0.004 1.171,-0.301 1.182,-1.033 0.012,-0.754 -0.423,-0.969 -1.183,-0.973 -1.778,-0.01 -5.824,-0.004 -6.04,-0.004 10e-4,-0.084 0.003,-0.586 10e-4,-0.67 z"},TASK_TYPE_INSTANTIATING_SEND:{d:"m {mx},{my} l 0,8.4 l 12.6,0 l 0,-8.4 z l 6.3,3.6 l 6.3,-3.6"},TASK_TYPE_SERVICE:{d:"m {mx},{my} v -1.71335 c 0.352326,-0.0705 0.703932,-0.17838 1.047628,-0.32133 0.344416,-0.14465 0.665822,-0.32133 0.966377,-0.52145 l 1.19431,1.18005 1.567487,-1.57688 -1.195028,-1.18014 c 0.403376,-0.61394 0.683079,-1.29908 0.825447,-2.01824 l 1.622133,-0.01 v -2.2196 l -1.636514,0.01 c -0.07333,-0.35153 -0.178319,-0.70024 -0.323564,-1.04372 -0.145244,-0.34406 -0.321407,-0.6644 -0.522735,-0.96217 l 1.131035,-1.13631 -1.583305,-1.56293 -1.129598,1.13589 c -0.614052,-0.40108 -1.302883,-0.68093 -2.022633,-0.82247 l 0.0093,-1.61852 h -2.241173 l 0.0042,1.63124 c -0.353763,0.0736 -0.705369,0.17977 -1.049785,0.32371 -0.344415,0.14437 -0.665102,0.32092 -0.9635006,0.52046 l -1.1698628,-1.15823 -1.5667691,1.5792 1.1684265,1.15669 c -0.4026573,0.61283 -0.68308,1.29797 -0.8247287,2.01713 l -1.6588041,0.003 v 2.22174 l 1.6724648,-0.006 c 0.073327,0.35077 0.1797598,0.70243 0.3242851,1.04472 0.1452428,0.34448 0.3214064,0.6644 0.5227339,0.96066 l -1.1993431,1.19723 1.5840256,1.56011 1.1964668,-1.19348 c 0.6140517,0.40346 1.3028827,0.68232 2.0233517,0.82331 l 7.19e-4,1.69892 h 2.226848 z m 0.221462,-3.9957 c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_SERVICE_FILL:{d:"m {mx},{my} c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_BUSINESS_RULE_HEADER:{d:"m {mx},{my} 0,4 20,0 0,-4 z"},TASK_TYPE_BUSINESS_RULE_MAIN:{d:"m {mx},{my} 0,12 20,0 0,-12 zm 0,8 l 20,0 m -13,-4 l 0,8"},MESSAGE_FLOW_MARKER:{d:"m {mx},{my} m -10.5 ,-7 l 0,14 l 21,0 l 0,-14 z l 10.5,6 l 10.5,-6"}},this.getRawPath=function(t){return this.pathMap[t].d},this.getScaledPath=function(t,i){var n=this.pathMap[t],r,o;i.abspos?(r=i.abspos.x,o=i.abspos.y):(r=i.containerWidth*i.position.mx,o=i.containerHeight*i.position.my);var a={};if(i.position){for(var s=i.containerHeight/n.height*i.yScaleFactor,c=i.containerWidth/n.width*i.xScaleFactor,l=0;l<n.heightElements.length;l++)a["y"+l]=n.heightElements[l]*s;for(var d=0;d<n.widthElements.length;d++)a["x"+d]=n.widthElements[d]*c}var u=$T(n.d,{mx:r,my:o,e:a});return u}}var VT=/\{([^{}]+)\}/g,zT=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g;function HT(e,t,i){var n=i;return t.replace(zT,function(r,o,a,s,c){o=o||s,n&&(o in n&&(n=n[o]),typeof n=="function"&&c&&(n=n()))}),n=(n==null||n==i?e:n)+"",n}function $T(e,t){return String(e).replace(VT,function(i,n){return HT(i,n,t)})}var K0={__init__:["bpmnRenderer"],bpmnRenderer:["type",Jr],textRenderer:["type",Np],pathMap:["type",Xg]};function Zg(e,t){return t=t||{},e.replace(/{([^}]+)}/g,function(i,n){return t[n]||"{"+n+"}"})}var qo={translate:["value",Zg]};function Lp(e,t,i){return k({id:e.id,type:e.$type,businessObject:e,di:t},i)}function WT(e,t,i){var n=e.waypoint;return!n||n.length<2?[ue(t),ue(i)]:n.map(function(r){return{x:r.x,y:r.y}})}function X0(e,t,i){return new Error(`element ${ci(t)} referenced by ${ci(e)}#${i} not yet drawn`)}function ir(e,t,i,n,r){this._eventBus=e,this._canvas=t,this._elementFactory=i,this._elementRegistry=n,this._textRenderer=r}ir.$inject=["eventBus","canvas","elementFactory","elementRegistry","textRenderer"];ir.prototype.add=function(e,t,i){var n,r,o;if(v(t,"bpmndi:BPMNPlane")){var a=v(e,"bpmn:SubProcess")?{id:e.id+"_plane"}:{};n=this._elementFactory.createRoot(Lp(e,t,a)),this._canvas.addRootElement(n)}else if(v(t,"bpmndi:BPMNShape")){var s=!we(e,t),c=GT(e);r=i&&(i.hidden||i.collapsed);var l=t.bounds;n=this._elementFactory.createShape(Lp(e,t,{collapsed:s,hidden:r,x:Math.round(l.x),y:Math.round(l.y),width:Math.round(l.width),height:Math.round(l.height),isFrame:c})),v(e,"bpmn:BoundaryEvent")&&this._attachBoundary(e,n),v(e,"bpmn:Lane")&&(o=0),v(e,"bpmn:DataStoreReference")&&(UT(i,ue(l))||(i=this._canvas.findRoot(i))),this._canvas.addShape(n,i,o)}else if(v(t,"bpmndi:BPMNEdge")){var d=this._getSource(e),u=this._getTarget(e);r=i&&(i.hidden||i.collapsed),n=this._elementFactory.createConnection(Lp(e,t,{hidden:r,source:d,target:u,waypoints:WT(t,d,u)})),v(e,"bpmn:DataAssociation")&&(i=this._canvas.findRoot(i)),this._canvas.addConnection(n,i,o)}else throw new Error(`unknown di ${ci(t)} for element ${ci(e)}`);return Tn(e)&&hi(n)&&this.addLabel(e,t,n),this._eventBus.fire("bpmnElement.added",{element:n}),n};ir.prototype._attachBoundary=function(e,t){var i=e.attachedToRef;if(!i)throw new Error(`missing ${ci(e)}#attachedToRef`);var n=this._elementRegistry.get(i.id),r=n&&n.attachers;if(!n)throw X0(e,i,"attachedToRef");t.host=n,r||(n.attachers=r=[]),r.indexOf(t)===-1&&r.push(t)};ir.prototype.addLabel=function(e,t,i){var n,r,o;return n=j0(t,i),r=hi(i),r&&(n=this._textRenderer.getExternalLabelBounds(n,r)),o=this._elementFactory.createLabel(Lp(e,t,{id:e.id+"_label",labelTarget:i,type:"label",hidden:i.hidden||!hi(i),x:Math.round(n.x),y:Math.round(n.y),width:Math.round(n.width),height:Math.round(n.height)})),this._canvas.addShape(o,i.parent)};ir.prototype._getConnectedElement=function(e,t){var i,n,r=e.$type;if(n=e[t+"Ref"],t==="source"&&r==="bpmn:DataInputAssociation"&&(n=n&&n[0]),(t==="source"&&r==="bpmn:DataOutputAssociation"||t==="target"&&r==="bpmn:DataInputAssociation")&&(n=e.$parent),i=n&&this._getElement(n),i)return i;throw n?X0(e,n,t+"Ref"):new Error(`${ci(e)}#${t} Ref not specified`)};ir.prototype._getSource=function(e){return this._getConnectedElement(e,"source")};ir.prototype._getTarget=function(e){return this._getConnectedElement(e,"target")};ir.prototype._getElement=function(e){return this._elementRegistry.get(e.id)};function UT(e,t){var i=t.x,n=t.y;return i>=e.x&&i<=e.x+e.width&&n>=e.y&&n<=e.y+e.height}function GT(e){return v(e,"bpmn:Group")}var Z0={__depends__:[qo],bpmnImporter:["type",ir]};var Q0={__depends__:[K0,Z0]};function Cr(e){this._counter=0,this._prefix=(e?e+"-":"")+Math.floor(Math.random()*1e9)+"-"}Cr.prototype.next=function(){return this._prefix+ ++this._counter};var qT=new Cr("ov"),YT=500;function Xt(e,t,i,n){this._eventBus=t,this._canvas=i,this._elementRegistry=n,this._ids=qT,this._overlayDefaults=k({show:null,scale:!0},e&&e.defaults),this._overlays={},this._overlayContainers=[],this._overlayRoot=KT(i.getContainer()),this._init()}Xt.$inject=["config.overlays","eventBus","canvas","elementRegistry"];Xt.prototype.get=function(e){if(Ht(e)&&(e={id:e}),Ht(e.element)&&(e.element=this._elementRegistry.get(e.element)),e.element){var t=this._getOverlayContainer(e.element,!0);return t?e.type?fe(t.overlays,mi({type:e.type})):t.overlays.slice():[]}else return e.type?fe(this._overlays,mi({type:e.type})):e.id?this._overlays[e.id]:null};Xt.prototype.add=function(e,t,i){if(it(t)&&(i=t,t=null),e.id||(e=this._elementRegistry.get(e)),!i.position)throw new Error("must specifiy overlay position");if(!i.html)throw new Error("must specifiy overlay html");if(!e)throw new Error("invalid element specified");var n=this._ids.next();return i=k({},this._overlayDefaults,i,{id:n,type:t,element:e,html:i.html}),this._addOverlay(i),n};Xt.prototype.remove=function(e){var t=this.get(e)||[];oe(t)||(t=[t]);var i=this;M(t,function(n){var r=i._getOverlayContainer(n.element,!0);if(n&&(Ni(n.html),Ni(n.htmlContainer),delete n.htmlContainer,delete n.element,delete i._overlays[n.id]),r){var o=r.overlays.indexOf(n);o!==-1&&r.overlays.splice(o,1)}})};Xt.prototype.isShown=function(){return this._overlayRoot.style.display!=="none"};Xt.prototype.show=function(){Bp(this._overlayRoot)};Xt.prototype.hide=function(){Bp(this._overlayRoot,!1)};Xt.prototype.clear=function(){this._overlays={},this._overlayContainers=[],No(this._overlayRoot)};Xt.prototype._updateOverlayContainer=function(e){var t=e.element,i=e.html,n=t.x,r=t.y;if(t.waypoints){var o=Je(t);n=o.x,r=o.y}J0(i,n,r),Tt(e.html,"data-container-id",t.id)};Xt.prototype._updateOverlay=function(e){var t=e.position,i=e.htmlContainer,n=e.element,r=t.left,o=t.top;if(t.right!==void 0){var a;n.waypoints?a=Je(n).width:a=n.width,r=t.right*-1+a}if(t.bottom!==void 0){var s;n.waypoints?s=Je(n).height:s=n.height,o=t.bottom*-1+s}J0(i,r||0,o||0),this._updateOverlayVisibilty(e,this._canvas.viewbox())};Xt.prototype._createOverlayContainer=function(e){var t=qe('<div class="djs-overlays" />');Vt(t,{position:"absolute"}),this._overlayRoot.appendChild(t);var i={html:t,element:e,overlays:[]};return this._updateOverlayContainer(i),this._overlayContainers.push(i),i};Xt.prototype._updateRoot=function(e){var t=e.scale||1,i="matrix("+[t,0,0,t,-1*e.x*t,-1*e.y*t].join(",")+")";ex(this._overlayRoot,i)};Xt.prototype._getOverlayContainer=function(e,t){var i=ve(this._overlayContainers,function(n){return n.element===e});return!i&&!t?this._createOverlayContainer(e):i};Xt.prototype._addOverlay=function(e){var t=e.id,i=e.element,n=e.html,r,o;n.get&&n.constructor.prototype.jquery&&(n=n.get(0)),Ht(n)&&(n=qe(n)),o=this._getOverlayContainer(i),r=qe('<div class="djs-overlay" data-overlay-id="'+t+'">'),Vt(r,{position:"absolute"}),r.appendChild(n),e.type&&ot(r).add("djs-overlay-"+e.type);var a=this._canvas.findRoot(i),s=this._canvas.getRootElement();Bp(r,a===s),e.htmlContainer=r,o.overlays.push(e),o.html.appendChild(r),this._overlays[t]=e,this._updateOverlay(e),this._updateOverlayVisibilty(e,this._canvas.viewbox())};Xt.prototype._updateOverlayVisibilty=function(e,t){var i=e.show,n=this._canvas.findRoot(e.element),r=i&&i.minZoom,o=i&&i.maxZoom,a=e.htmlContainer,s=this._canvas.getRootElement(),c=!0;(n!==s||i&&(Pt(r)&&r>t.scale||Pt(o)&&o<t.scale))&&(c=!1),Bp(a,c),this._updateOverlayScale(e,t)};Xt.prototype._updateOverlayScale=function(e,t){var i=e.scale,n,r,o=e.htmlContainer,a,s="";i!==!0&&(i===!1?(n=1,r=1):(n=i.min,r=i.max),Pt(n)&&t.scale<n&&(a=(1/t.scale||1)*n),Pt(r)&&t.scale>r&&(a=(1/t.scale||1)*r)),Pt(a)&&(s="scale("+a+","+a+")"),ex(o,s)};Xt.prototype._updateOverlaysVisibilty=function(e){var t=this;M(this._overlays,function(i){t._updateOverlayVisibilty(i,e)})};Xt.prototype._init=function(){var e=this._eventBus,t=this;function i(n){t._updateRoot(n),t._updateOverlaysVisibilty(n),t.show()}e.on("canvas.viewbox.changing",function(n){t.hide()}),e.on("canvas.viewbox.changed",function(n){i(n.viewbox)}),e.on(["shape.remove","connection.remove"],function(n){var r=n.element,o=t.get({element:r});M(o,function(c){t.remove(c.id)});var a=t._getOverlayContainer(r);if(a){Ni(a.html);var s=t._overlayContainers.indexOf(a);s!==-1&&t._overlayContainers.splice(s,1)}}),e.on("element.changed",YT,function(n){var r=n.element,o=t._getOverlayContainer(r,!0);o&&(M(o.overlays,function(a){t._updateOverlay(a)}),t._updateOverlayContainer(o))}),e.on("element.marker.update",function(n){var r=t._getOverlayContainer(n.element,!0);r&&ot(r.html)[n.add?"add":"remove"](n.marker)}),e.on("root.set",function(){t._updateOverlaysVisibilty(t._canvas.viewbox())}),e.on("diagram.clear",this.clear,this)};function KT(e){var t=qe('<div class="djs-overlay-container" />');return Vt(t,{position:"absolute",width:0,height:0}),e.insertBefore(t,e.firstChild),t}function J0(e,t,i){Vt(e,{left:t+"px",top:i+"px"})}function Bp(e,t){e.style.display=t===!1?"none":""}function ex(e,t){e.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach(function(i){e.style[i+"transform"]=t})}var Yo={__init__:["overlays"],overlays:["type",Xt]};function jp(e,t,i,n){e.on("element.changed",function(r){var o=r.element;(o.parent||o===t.getRootElement())&&(r.gfx=i.getGraphics(o)),r.gfx&&e.fire(hp(o)+".changed",r)}),e.on("elements.changed",function(r){var o=r.elements;o.forEach(function(a){e.fire("element.changed",{element:a})}),n.updateContainments(o)}),e.on("shape.changed",function(r){n.update("shape",r.element,r.gfx)}),e.on("connection.changed",function(r){n.update("connection",r.element,r.gfx)})}jp.$inject=["eventBus","canvas","elementRegistry","graphicsFactory"];var Gs={__init__:["changeSupport"],changeSupport:["type",jp]};var XT=1e3;function V(e){this._eventBus=e}V.$inject=["eventBus"];function ZT(e,t){return function(i){return e.call(t||null,i.context,i.command,i)}}V.prototype.on=function(e,t,i,n,r,o){if((vt(t)||he(t))&&(o=r,r=n,n=i,i=t,t=null),vt(i)&&(o=r,r=n,n=i,i=XT),it(r)&&(o=r,r=!1),!vt(n))throw new Error("handlerFn must be a function");oe(e)||(e=[e]);var a=this._eventBus;M(e,function(s){var c=["commandStack",s,t].filter(function(l){return l}).join(".");a.on(c,i,r?ZT(n,o):n,o)})};V.prototype.canExecute=eo("canExecute");V.prototype.preExecute=eo("preExecute");V.prototype.preExecuted=eo("preExecuted");V.prototype.execute=eo("execute");V.prototype.executed=eo("executed");V.prototype.postExecute=eo("postExecute");V.prototype.postExecuted=eo("postExecuted");V.prototype.revert=eo("revert");V.prototype.reverted=eo("reverted");function eo(e){return function(i,n,r,o,a){(vt(i)||he(i))&&(a=o,o=r,r=n,n=i,i=null),this.on(i,e,n,r,o,a)}}function Al(e,t){t.invoke(V,this),this.executed(function(i){var n=i.context;n.rootElement?e.setRootElement(n.rootElement):n.rootElement=e.getRootElement()}),this.revert(function(i){var n=i.context;n.rootElement&&e.setRootElement(n.rootElement)})}z(Al,V);Al.$inject=["canvas","injector"];var tx={__init__:["rootElementsBehavior"],rootElementsBehavior:["type",Al]};function to(e){return CSS.escape(e)}var QT={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Vp(e){return e=""+e,e&&e.replace(/[&<>"']/g,function(t){return QT[t]})}var ix="_plane";function Qg(e){var t=e.id;return JT(t)}function In(e){var t=e.id;return v(e,"bpmn:SubProcess")?nx(t):t}function Ko(e){return nx(e)}function qs(e){var t=Me(e);return v(t,"bpmndi:BPMNPlane")}function nx(e){return e+ix}function JT(e){return e.replace(new RegExp(ix+"$"),"")}var eI="bjs-breadcrumbs-shown";function zp(e,t,i){var n=qe('<ul class="bjs-breadcrumbs"></ul>'),r=i.getContainer(),o=ot(r);r.appendChild(n);var a=[];e.on("element.changed",function(c){var l=c.element,d=U(l),u=ve(a,function(p){return p===d});u&&s()});function s(c){c&&(a=tI(c));var l=a.flatMap(function(u){var p=i.findRoot(In(u))||i.findRoot(u.id);if(!p&&v(u,"bpmn:Process")){var m=t.find(function(b){var D=U(b);return D&&D.get("processRef")===u});p=m&&i.findRoot(m.id)}if(!p)return[];var f=Vp(u.name||u.id),_=qe('<li><span class="bjs-crumb"><a title="'+f+'">'+f+"</a></span></li>");return _.addEventListener("click",function(){i.setRootElement(p)}),_});n.innerHTML="";var d=l.length>1;o.toggle(eI,d),l.forEach(function(u){n.appendChild(u)})}e.on("root.set",function(c){s(c.element)})}zp.$inject=["eventBus","elementRegistry","canvas"];function tI(e){for(var t=U(e),i=[],n=t;n;n=n.$parent)(v(n,"bpmn:SubProcess")||v(n,"bpmn:Process"))&&i.push(n);return i.reverse()}function Hp(e,t){var i=null,n=new iI;e.on("root.set",function(r){var o=r.element,a=t.viewbox(),s=n.get(o);if(n.set(i,{x:a.x,y:a.y,zoom:a.scale}),i=o,!(!v(o,"bpmn:SubProcess")&&!s)){s=s||{x:0,y:0,zoom:1};var c=(a.x-s.x)*a.scale,l=(a.y-s.y)*a.scale;(c!==0||l!==0)&&t.scroll({dx:c,dy:l}),s.zoom!==a.scale&&t.zoom(s.zoom,{x:0,y:0})}}),e.on("diagram.clear",function(){n.clear(),i=null})}Hp.$inject=["eventBus","canvas"];function iI(){this._entries=[],this.set=function(e,t){var i=!1;for(var n in this._entries)if(this._entries[n][0]===e){this._entries[n][1]=t,i=!0;break}i||this._entries.push([e,t])},this.get=function(e){for(var t in this._entries)if(this._entries[t][0]===e)return this._entries[t][1];return null},this.clear=function(){this._entries.length=0},this.remove=function(e){var t=-1;for(var i in this._entries)if(this._entries[i][0]===e){t=i;break}t!==-1&&this._entries.splice(t,1)}}var rx={x:180,y:160};function io(e,t){this._eventBus=e,this._moddle=t;var i=this;e.on("import.render.start",1500,function(n,r){i._handleImport(r.definitions)})}io.prototype._handleImport=function(e){if(e.diagrams){var t=this;this._definitions=e,this._processToDiagramMap={},e.diagrams.forEach(function(n){!n.plane||!n.plane.bpmnElement||(t._processToDiagramMap[n.plane.bpmnElement.id]=n)});var i=e.diagrams.filter(n=>n.plane).flatMap(n=>t._createNewDiagrams(n.plane));i.forEach(function(n){t._movePlaneElementsToOrigin(n.plane)})}};io.prototype._createNewDiagrams=function(e){var t=this,i=[],n=[];e.get("planeElement").forEach(function(o){var a=o.bpmnElement;if(a){var s=a.$parent;v(a,"bpmn:SubProcess")&&!o.isExpanded&&i.push(a),rI(a,e)&&n.push({diElement:o,parent:s})}});var r=[];return i.forEach(function(o){if(!t._processToDiagramMap[o.id]){var a=t._createDiagram(o);t._processToDiagramMap[o.id]=a,r.push(a)}}),n.forEach(function(o){for(var a=o.diElement,s=o.parent;s&&i.indexOf(s)===-1;)s=s.$parent;if(s){var c=t._processToDiagramMap[s.id];t._moveToDiPlane(a,c.plane)}}),r};io.prototype._movePlaneElementsToOrigin=function(e){var t=e.get("planeElement"),i=nI(e),n={x:i.x-rx.x,y:i.y-rx.y};t.forEach(function(r){r.waypoint?r.waypoint.forEach(function(o){o.x=o.x-n.x,o.y=o.y-n.y}):r.bounds&&(r.bounds.x=r.bounds.x-n.x,r.bounds.y=r.bounds.y-n.y)})};io.prototype._moveToDiPlane=function(e,t){var i=ox(e),n=i.plane.get("planeElement");n.splice(n.indexOf(e),1),t.get("planeElement").push(e)};io.prototype._createDiagram=function(e){var t=this._moddle.create("bpmndi:BPMNPlane",{bpmnElement:e}),i=this._moddle.create("bpmndi:BPMNDiagram",{plane:t});return t.$parent=i,t.bpmnElement=e,i.$parent=this._definitions,this._definitions.diagrams.push(i),i};io.$inject=["eventBus","moddle"];function ox(e){return v(e,"bpmndi:BPMNDiagram")?e:ox(e.$parent)}function nI(e){var t={top:1/0,right:-1/0,bottom:-1/0,left:1/0};return e.planeElement.forEach(function(i){if(i.bounds){var n=ce(i.bounds);t.top=Math.min(n.top,t.top),t.left=Math.min(n.left,t.left)}}),Ca(t)}function rI(e,t){var i=e.$parent;return!(!v(i,"bpmn:SubProcess")||i===t.bpmnElement||ge(e,["bpmn:DataInputAssociation","bpmn:DataOutputAssociation"]))}var $p=250,oI='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4.81801948,3.50735931 L10.4996894,9.1896894 L10.5,4 L12,4 L12,12 L4,12 L4,10.5 L9.6896894,10.4996894 L3.75735931,4.56801948 C3.46446609,4.27512627 3.46446609,3.80025253 3.75735931,3.50735931 C4.05025253,3.21446609 4.52512627,3.21446609 4.81801948,3.50735931 Z"/></svg>',aI="bjs-drilldown-empty";function Sr(e,t,i,n,r){V.call(this,t),this._canvas=e,this._eventBus=t,this._elementRegistry=i,this._overlays=n,this._translate=r;var o=this;this.executed("shape.toggleCollapse",$p,function(a){var s=a.shape;o._canDrillDown(s)?o._addOverlay(s):o._removeOverlay(s)},!0),this.reverted("shape.toggleCollapse",$p,function(a){var s=a.shape;o._canDrillDown(s)?o._addOverlay(s):o._removeOverlay(s)},!0),this.executed(["shape.create","shape.move","shape.delete"],$p,function(a){var s=a.oldParent,c=a.newParent||a.parent,l=a.shape;o._canDrillDown(l)&&o._addOverlay(l),o._updateDrilldownOverlay(s),o._updateDrilldownOverlay(c),o._updateDrilldownOverlay(l)},!0),this.reverted(["shape.create","shape.move","shape.delete"],$p,function(a){var s=a.oldParent,c=a.newParent||a.parent,l=a.shape;o._canDrillDown(l)&&o._addOverlay(l),o._updateDrilldownOverlay(s),o._updateDrilldownOverlay(c),o._updateDrilldownOverlay(l)},!0),t.on("import.render.complete",function(){i.filter(function(a){return o._canDrillDown(a)}).map(function(a){o._addOverlay(a)})})}z(Sr,V);Sr.prototype._updateDrilldownOverlay=function(e){var t=this._canvas;if(e){var i=t.findRoot(e);i&&this._updateOverlayVisibility(i)}};Sr.prototype._canDrillDown=function(e){var t=this._canvas;return v(e,"bpmn:SubProcess")&&t.findRoot(In(e))};Sr.prototype._updateOverlayVisibility=function(e){var t=this._overlays,i=U(e),n=t.get({element:i.id,type:"drilldown"})[0];if(n){var r=i&&i.get("flowElements")&&i.get("flowElements").length;ot(n.html).toggle(aI,!r)}};Sr.prototype._addOverlay=function(e){var t=this._canvas,i=this._overlays,n=U(e),r=i.get({element:e,type:"drilldown"});r.length&&this._removeOverlay(e);var o=qe('<button type="button" class="bjs-drilldown">'+oI+"</button>"),a=n.get("name")||n.get("id"),s=this._translate("Open {element}",{element:a});o.setAttribute("title",s),o.addEventListener("click",function(){t.setRootElement(t.findRoot(In(e)))}),i.add(e,"drilldown",{position:{bottom:-7,right:-8},html:o}),this._updateOverlayVisibility(e)};Sr.prototype._removeOverlay=function(e){var t=this._overlays;t.remove({element:e,type:"drilldown"})};Sr.$inject=["canvas","eventBus","elementRegistry","overlays","translate"];var ax={__depends__:[Yo,Gs,tx],__init__:["drilldownBreadcrumbs","drilldownOverlayBehavior","drilldownCentering","subprocessCompatibility"],drilldownBreadcrumbs:["type",zp],drilldownCentering:["type",Hp],drilldownOverlayBehavior:["type",Sr],subprocessCompatibility:["type",io]};function sx(e){!e||typeof e.stopPropagation!="function"||e.stopPropagation()}function no(e){return e.originalEvent||e.srcEvent}function Wp(e){sx(e),sx(no(e))}function Fn(e){return e.pointers&&e.pointers.length&&(e=e.pointers[0]),e.touches&&e.touches.length&&(e=e.touches[0]),e?{x:e.clientX,y:e.clientY}:null}function Up(){return/mac/i.test(navigator.platform)}function cx(e,t){return(no(e)||e).button===t}function fn(e){return cx(e,0)}function lx(e){return cx(e,1)}function ro(e){var t=no(e)||e;return fn(e)?Up()?t.metaKey:t.ctrlKey:!1}function Pa(e){var t=no(e)||e;return fn(e)&&t.shiftKey}function sI(e){return!0}function Gp(e){return fn(e)||lx(e)}var dx=500;function qp(e,t,i){var n=this;function r(N,W,$){if(!s(N,W)){var Q,Y,ae;$?Y=t.getGraphics($):(Q=W.delegateTarget||W.target,Q&&(Y=Q,$=t.get(Y))),!(!Y||!$)&&(ae=e.fire(N,{element:$,gfx:Y,originalEvent:W}),ae===!1&&(W.stopPropagation(),W.preventDefault()))}}var o={};function a(N){return o[N]}function s(N,W){var $=l[N]||fn;return!$(W)}var c={click:"element.click",contextmenu:"element.contextmenu",dblclick:"element.dblclick",mousedown:"element.mousedown",mousemove:"element.mousemove",mouseover:"element.hover",mouseout:"element.out",mouseup:"element.mouseup"},l={"element.contextmenu":sI,"element.mousedown":Gp,"element.mouseup":Gp,"element.click":Gp,"element.dblclick":Gp};function d(N,W,$){var Q=c[N];if(!Q)throw new Error("unmapped DOM event name <"+N+">");return r(Q,W,$)}var u="svg, .djs-element";function p(N,W,$,Q){var Y=o[$]=function(ae){r($,ae)};Q&&(l[$]=Q),Y.$delegate=ti.bind(N,u,W,Y)}function m(N,W,$){var Q=a($);Q&&ti.unbind(N,W,Q.$delegate)}function f(N){M(c,function(W,$){p(N,$,W)})}function _(N){M(c,function(W,$){m(N,$,W)})}e.on("canvas.destroy",function(N){_(N.svg)}),e.on("canvas.init",function(N){f(N.svg)}),e.on(["shape.added","connection.added"],function(N){var W=N.element,$=N.gfx;e.fire("interactionEvents.createHit",{element:W,gfx:$})}),e.on(["shape.changed","connection.changed"],dx,function(N){var W=N.element,$=N.gfx;e.fire("interactionEvents.updateHit",{element:W,gfx:$})}),e.on("interactionEvents.createHit",dx,function(N){var W=N.element,$=N.gfx;n.createDefaultHit(W,$)}),e.on("interactionEvents.updateHit",function(N){var W=N.element,$=N.gfx;n.updateDefaultHit(W,$)});var b=P("djs-hit djs-hit-stroke"),D=P("djs-hit djs-hit-click-stroke"),R=P("djs-hit djs-hit-all"),C=P("djs-hit djs-hit-no-move"),w={all:R,"click-stroke":D,stroke:b,"no-move":C};function P(N,W){return W=k({stroke:"white",strokeWidth:15},W||{}),i.cls(N,["no-fill","no-border"],W)}function T(N,W){var $=w[W];if(!$)throw new Error("invalid hit type <"+W+">");return J(N,$),N}function H(N,W){me(N,W)}this.removeHits=function(N){var W=gl(".djs-hit",N);M(W,Qe)},this.createDefaultHit=function(N,W){var $=N.waypoints,Q=N.isFrame,Y;return $?this.createWaypointsHit(W,$):(Y=Q?"stroke":"all",this.createBoxHit(W,Y,{width:N.width,height:N.height}))},this.createWaypointsHit=function(N,W){var $=Bo(W);return T($,"stroke"),H(N,$),$},this.createBoxHit=function(N,W,$){$=k({x:0,y:0},$);var Q=ie("rect");return T(Q,W),J(Q,$),H(N,Q),Q},this.updateDefaultHit=function(N,W){var $=He(".djs-hit",W);if($)return N.waypoints?Ag($,N.waypoints):J($,{width:N.width,height:N.height}),$},this.fire=r,this.triggerMouseEvent=d,this.mouseHandler=a,this.registerEvent=p,this.unregisterEvent=m}qp.$inject=["eventBus","elementRegistry","styles"];var Xo={__init__:["interactionEvents"],interactionEvents:["type",qp]};function Zo(e,t){this._eventBus=e,this._canvas=t,this._selectedElements=[];var i=this;e.on(["shape.remove","connection.remove"],function(n){var r=n.element;i.deselect(r)}),e.on(["diagram.clear","root.set"],function(n){i.select(null)})}Zo.$inject=["eventBus","canvas"];Zo.prototype.deselect=function(e){var t=this._selectedElements,i=t.indexOf(e);if(i!==-1){var n=t.slice();t.splice(i,1),this._eventBus.fire("selection.changed",{oldSelection:n,newSelection:t})}};Zo.prototype.get=function(){return this._selectedElements};Zo.prototype.isSelected=function(e){return this._selectedElements.indexOf(e)!==-1};Zo.prototype.select=function(e,t){var i=this._selectedElements,n=i.slice();oe(e)||(e=e?[e]:[]);var r=this._canvas,o=r.getRootElement();e=e.filter(function(a){var s=r.findRoot(a);return o===s}),t?M(e,function(a){i.indexOf(a)===-1&&i.push(a)}):this._selectedElements=i=e.slice(),this._eventBus.fire("selection.changed",{oldSelection:n,newSelection:i})};var ux="hover",px="selected";function Yp(e,t){this._canvas=e;function i(r,o){e.addMarker(r,o)}function n(r,o){e.removeMarker(r,o)}t.on("element.hover",function(r){i(r.element,ux)}),t.on("element.out",function(r){n(r.element,ux)}),t.on("selection.changed",function(r){function o(l){n(l,px)}function a(l){i(l,px)}var s=r.oldSelection,c=r.newSelection;M(s,function(l){c.indexOf(l)===-1&&o(l)}),M(c,function(l){s.indexOf(l)===-1&&a(l)})})}Yp.$inject=["canvas","eventBus"];function Kp(e,t,i,n){e.on("create.end",500,function(r){var o=r.context,a=o.canExecute,s=o.elements,c=o.hints||{},l=c.autoSelect;if(a){if(l===!1)return;oe(l)?t.select(l):t.select(s.filter(cI))}}),e.on("connect.end",500,function(r){var o=r.context,a=o.connection;a&&t.select(a)}),e.on("shape.move.end",500,function(r){var o=r.previousSelection||[],a=n.get(r.context.shape.id),s=ve(o,function(c){return a.id===c.id});s||t.select(a)}),e.on("element.click",function(r){if(fn(r)){var o=r.element;o===i.getRootElement()&&(o=null);var a=t.isSelected(o),s=t.get().length>1,c=Pa(r);if(a&&s)return c?t.deselect(o):t.select(o);a?t.deselect(o):t.select(o,c)}})}Kp.$inject=["eventBus","selection","canvas","elementRegistry"];function cI(e){return!e.hidden}var Ut={__init__:["selectionVisuals","selectionBehavior"],__depends__:[Xo],selection:["type",Zo],selectionVisuals:["type",Yp],selectionBehavior:["type",Kp]};function nr(e){_t.call(this,e)}z(nr,_t);nr.prototype._modules=[Q0,ax,Yo,Ut,qo];nr.prototype._moddleExtensions={};var mx=["c","C"],fx=["v","V"],hx=["y","Y"],Jg=["z","Z"];function gx(e){return e.ctrlKey||e.metaKey||e.shiftKey||e.altKey}function gi(e){return e.altKey?!1:e.ctrlKey||e.metaKey}function It(e,t){return e=oe(e)?e:[e],e.indexOf(t.key)!==-1||e.indexOf(t.code)!==-1}function Xp(e){return e.shiftKey}function vx(e){return gi(e)&&It(mx,e)}function _x(e){return gi(e)&&It(fx,e)}function bx(e){return gi(e)&&!Xp(e)&&It(Jg,e)}function yx(e){return gi(e)&&(It(hx,e)||It(Jg,e)&&Xp(e))}var Zp="keyboard.keydown",lI="keyboard.keyup",dI=1e3,xx="Keyboard binding is now implicit; explicit binding to an element got removed. For more information, see https://github.com/bpmn-io/diagram-js/issues/661";function vi(e,t){var i=this;this._config=e=e||{},this._eventBus=t,this._keydownHandler=this._keydownHandler.bind(this),this._keyupHandler=this._keyupHandler.bind(this),t.on("diagram.destroy",function(){i._fire("destroy"),i.unbind()}),e.bindTo&&console.error("unsupported configuration <keyboard.bindTo>",new Error(xx));var n=e&&e.bind!==!1;t.on("canvas.init",function(r){i._target=r.svg,n&&i.bind(),i._fire("init")})}vi.$inject=["config.keyboard","eventBus"];vi.prototype._keydownHandler=function(e){this._keyHandler(e,Zp)};vi.prototype._keyupHandler=function(e){this._keyHandler(e,lI)};vi.prototype._keyHandler=function(e,t){var i;if(!this._isEventIgnored(e)){var n={keyEvent:e};i=this._eventBus.fire(t||Zp,n),i&&e.preventDefault()}};vi.prototype._isEventIgnored=function(e){return!1};vi.prototype.bind=function(e){e&&console.error("unsupported argument <node>",new Error(xx)),this.unbind(),e=this._node=this._target,Se.bind(e,"keydown",this._keydownHandler),Se.bind(e,"keyup",this._keyupHandler),this._fire("bind")};vi.prototype.getBinding=function(){return this._node};vi.prototype.unbind=function(){var e=this._node;e&&(this._fire("unbind"),Se.unbind(e,"keydown",this._keydownHandler),Se.unbind(e,"keyup",this._keyupHandler)),this._node=null};vi.prototype._fire=function(e){this._eventBus.fire("keyboard."+e,{node:this._node})};vi.prototype.addListener=function(e,t,i){vt(e)&&(i=t,t=e,e=dI),this._eventBus.on(i||Zp,e,t)};vi.prototype.removeListener=function(e,t){this._eventBus.off(t||Zp,e)};vi.prototype.hasModifier=gx;vi.prototype.isCmd=gi;vi.prototype.isShift=Xp;vi.prototype.isKey=It;var uI=500;function oo(e,t){var i=this;e.on("editorActions.init",uI,function(n){var r=n.editorActions;i.registerBindings(t,r)})}oo.$inject=["eventBus","keyboard"];oo.prototype.registerBindings=function(e,t){function i(n,r){t.isRegistered(n)&&e.addListener(r)}i("undo",function(n){var r=n.keyEvent;if(bx(r))return t.trigger("undo"),!0}),i("redo",function(n){var r=n.keyEvent;if(yx(r))return t.trigger("redo"),!0}),i("copy",function(n){var r=n.keyEvent;if(vx(r))return t.trigger("copy"),!0}),i("paste",function(n){var r=n.keyEvent;if(_x(r))return t.trigger("paste"),!0}),i("stepZoom",function(n){var r=n.keyEvent;if(It(["+","Add","="],r)&&gi(r))return t.trigger("stepZoom",{value:1}),!0}),i("stepZoom",function(n){var r=n.keyEvent;if(It(["-","Subtract"],r)&&gi(r))return t.trigger("stepZoom",{value:-1}),!0}),i("zoom",function(n){var r=n.keyEvent;if(It("0",r)&&gi(r))return t.trigger("zoom",{value:1}),!0}),i("removeSelection",function(n){var r=n.keyEvent;if(It(["Backspace","Delete","Del"],r))return t.trigger("removeSelection"),!0})};var Ys={__init__:["keyboard","keyboardBindings"],keyboard:["type",vi],keyboardBindings:["type",oo]};var pI={moveSpeed:50,moveSpeedAccelerated:200};function Qp(e,t,i){var n=this;this._config=k({},pI,e||{}),t.addListener(r);function r(o){var a=o.keyEvent,s=n._config;if(t.isCmd(a)&&t.isKey(["ArrowLeft","Left","ArrowUp","Up","ArrowDown","Down","ArrowRight","Right"],a)){var c=t.isShift(a)?s.moveSpeedAccelerated:s.moveSpeed,l;switch(a.key){case"ArrowLeft":case"Left":l="left";break;case"ArrowUp":case"Up":l="up";break;case"ArrowRight":case"Right":l="right";break;case"ArrowDown":case"Down":l="down";break}return n.moveCanvas({speed:c,direction:l}),!0}}this.moveCanvas=function(o){var a=0,s=0,c=o.speed,l=c/Math.min(Math.sqrt(i.viewbox().scale),1);switch(o.direction){case"left":a=l;break;case"up":s=l;break;case"right":a=-l;break;case"down":s=-l;break}i.scroll({dx:a,dy:s})}}Qp.$inject=["config.keyboardMove","keyboard","canvas"];var Jp={__depends__:[Ys],__init__:["keyboardMove"],keyboardMove:["type",Qp]};var mI=/^djs-cursor-.*$/;function ka(e){var t=ot(document.body);t.removeMatching(mI),e&&t.add("djs-cursor-"+e)}function em(){ka(null)}var fI=5e3;function tm(e,t){t=t||"element.click";function i(){return!1}return e.once(t,fI,i),function(){e.off(t,i)}}function Ks(e){return{x:e.x+e.width/2,y:e.y+e.height/2}}function _i(e,t){return{x:e.x-t.x,y:e.y-t.y}}var hI=15;function im(e,t){var i;function n(s){return a(s.originalEvent)}e.on("canvas.focus.changed",function(s){s.focused?e.on("element.mousedown",500,n):e.off("element.mousedown",n)});function r(s){var c=i.start,l=i.button,d=Fn(s),u=_i(d,c);if(!i.dragging&&gI(u)>hI&&(i.dragging=!0,l===0&&tm(e),ka("grab")),i.dragging){var p=i.last||i.start;u=_i(d,p),t.scroll({dx:u.x,dy:u.y}),i.last=d}s.preventDefault()}function o(s){Se.unbind(document,"mousemove",r),Se.unbind(document,"mouseup",o),i=null,em()}function a(s){if(!Qn(s.target,".djs-draggable")){var c=s.button;if(!(c>=2||s.ctrlKey||s.shiftKey||s.altKey))return i={button:c,start:Fn(s)},Se.bind(document,"mousemove",r),Se.bind(document,"mouseup",o),!0}}this.isActive=function(){return!!i}}im.$inject=["eventBus","canvas"];function gI(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}var nm={__init__:["moveCanvas"],moveCanvas:["type",im]};function Pl(e){return Math.log(e)/Math.log(10)}function ev(e,t){var i=Pl(e.min),n=Pl(e.max),r=Math.abs(i)+Math.abs(n);return r/t}function wx(e,t){return Math.max(e.min,Math.min(e.max,t))}var vI=Math.sign||function(e){return e>=0?1:-1},tv={min:.2,max:4},Ex=10,_I=.1,bI=.75;function Nn(e,t,i){e=e||{},this._enabled=!1,this._canvas=i,this._container=i._container,this._handleWheel=jt(this._handleWheel,this),this._totalDelta=0,this._scale=e.scale||bI;var n=this;t.on("canvas.focus.changed",function(r){n._init(r.focused&&e.enabled!==!1)})}Nn.$inject=["config.zoomScroll","eventBus","canvas"];Nn.prototype.scroll=function(t){this._canvas.scroll(t)};Nn.prototype.reset=function(){this._canvas.zoom("fit-viewport")};Nn.prototype.zoom=function(t,i){var n=ev(tv,Ex*2);this._totalDelta+=t,Math.abs(this._totalDelta)>_I&&(this._zoom(t,i,n),this._totalDelta=0)};Nn.prototype._handleWheel=function(t){if(this._canvas.isFocused()){var i=this._container;t.preventDefault();var n=t.ctrlKey||Up()&&t.metaKey,r=t.shiftKey,o=-1*this._scale,a;if(n?o*=t.deltaMode===0?.02:.32:o*=t.deltaMode===0?1:16,n){var s=i.getBoundingClientRect(),c={x:t.clientX-s.left,y:t.clientY-s.top};a=Math.sqrt(Math.pow(t.deltaY,2)+Math.pow(t.deltaX,2))*vI(t.deltaY)*o,this.zoom(a,c)}else r?a={dx:o*t.deltaY,dy:0}:a={dx:o*t.deltaX,dy:o*t.deltaY},this.scroll(a)}};Nn.prototype.stepZoom=function(t,i){var n=ev(tv,Ex);this._zoom(t,i,n)};Nn.prototype._zoom=function(e,t,i){var n=this._canvas,r=e>0?1:-1,o=Pl(n.zoom()),a=Math.round(o/i)*i;a+=i*r;var s=Math.pow(10,a);n.zoom(wx(tv,s),t)};Nn.prototype.toggle=function(t){var i=this._container,n=this._handleWheel,r=this._enabled;return typeof t>"u"&&(t=!r),r!==t&&Se[t?"bind":"unbind"](i,"wheel",n,!1),this._enabled=t,t};Nn.prototype._init=function(e){this.toggle(e)};var rm={__init__:["zoomScroll"],zoomScroll:["type",Nn]};function ao(e){nr.call(this,e)}z(ao,nr);ao.prototype._navigationModules=[Jp,nm,rm];ao.prototype._modules=[].concat(nr.prototype._modules,ao.prototype._navigationModules);function iv(e){return e&&e[e.length-1]}function Cx(e){return e.y}function Sx(e){return e.x}var yI={left:Sx,center:Sx,right:function(e){return e.x+e.width},top:Cx,middle:Cx,bottom:function(e){return e.y+e.height}};function Qo(e,t){this._modeling=e,this._rules=t}Qo.$inject=["modeling","rules"];Qo.prototype._getOrientationDetails=function(e){var t=["top","bottom","middle"],i="x",n="width";return t.indexOf(e)!==-1&&(i="y",n="height"),{axis:i,dimension:n}};Qo.prototype._isType=function(e,t){return t.indexOf(e)!==-1};Qo.prototype._alignmentPosition=function(e,t){var i=this._getOrientationDetails(e),n=i.axis,r=i.dimension,o={},a={},s=!1,c,l,d;function u(p,m){return Math.round((p[n]+m[n]+m[r])/2)}if(this._isType(e,["left","top"]))o[e]=t[0][n];else if(this._isType(e,["right","bottom"]))d=iv(t),o[e]=d[n]+d[r];else if(this._isType(e,["center","middle"])){if(M(t,function(p){var m=p[n]+Math.round(p[r]/2);a[m]?a[m].elements.push(p):a[m]={elements:[p],center:m}}),c=wi(a,function(p){return p.elements.length>1&&(s=!0),p.elements.length}),s)return o[e]=iv(c).center,o;l=t[0],t=wi(t,function(p){return p[n]+p[r]}),d=iv(t),o[e]=u(l,d)}return o};Qo.prototype.trigger=function(e,t){var i=this._modeling,n,r=fe(e,function(c){return!(c.waypoints||c.host||c.labelTarget)});if(n=this._rules.allowed("elements.align",{elements:r}),oe(n)&&(r=n),!(r.length<2||!n)){var o=yI[t],a=wi(r,o),s=this._alignmentPosition(t,a);i.alignElements(a,s)}};var Mx={__init__:["alignElements"],alignElements:["type",Qo]};var xI=new Cr;function Jo(e){this._scheduled={},e.on("diagram.destroy",()=>{Object.keys(this._scheduled).forEach(t=>{this.cancel(t)})})}Jo.$inject=["eventBus"];Jo.prototype.schedule=function(e,t=xI.next()){this.cancel(t);let i=this._schedule(e,t);return this._scheduled[t]=i,i.promise};Jo.prototype._schedule=function(e,t){let i=wI();return{executionId:setTimeout(()=>{try{this._scheduled[t]=null;try{i.resolve(e())}catch(r){i.reject(r)}}catch(r){console.error("Scheduler#_schedule execution failed",r)}}),promise:i.promise}};Jo.prototype.cancel=function(e){let t=this._scheduled[e];t&&(this._cancel(t),this._scheduled[e]=null)};Jo.prototype._cancel=function(e){clearTimeout(e.executionId)};function wI(){let e={};return e.promise=new Promise((t,i)=>{e.resolve=t,e.reject=i}),e}var Dx={scheduler:["type",Jo]};var EI="djs-element-hidden",om=".entry",CI=1e3,Ax=8,SI=300;function Ft(e,t,i,n){this._canvas=e,this._elementRegistry=t,this._eventBus=i,this._scheduler=n,this._current=null,this._init()}Ft.$inject=["canvas","elementRegistry","eventBus","scheduler"];Ft.prototype._init=function(){var e=this;this._eventBus.on("selection.changed",function(t){var i=t.newSelection,n=i.length?i.length===1?i[0]:i:null;n?e.open(n,!0):e.close()}),this._eventBus.on("elements.changed",function(t){var i=t.elements,n=e._current;if(n){var r=n.target,o=oe(r)?r:[r],a=o.filter(function(c){return i.includes(c)});if(a.length){e.close();var s=o.filter(function(c){return e._elementRegistry.get(c.id)});s.length&&e._updateAndOpen(s.length>1?s:s[0])}}}),this._eventBus.on("canvas.viewbox.changed",function(){e._updatePosition()}),this._eventBus.on("element.marker.update",function(t){if(e.isOpen()){var i=t.element,n=e._current,r=oe(n.target)?n.target:[n.target];r.includes(i)&&e._updateVisibility()}}),this._container=this._createContainer()};Ft.prototype._createContainer=function(){var e=qe('<div class="djs-context-pad-parent"></div>');return this._canvas.getContainer().appendChild(e),e};Ft.prototype.registerProvider=function(e,t){t||(t=e,e=CI),this._eventBus.on("contextPad.getProviders",e,function(i){i.providers.push(t)})};Ft.prototype.getEntries=function(e){var t=this._getProviders(),i=oe(e)?"getMultiElementContextPadEntries":"getContextPadEntries",n={};return M(t,function(r){if(vt(r[i])){var o=r[i](e);vt(o)?n=o(n):M(o,function(a,s){n[s]=a})}}),n};Ft.prototype.trigger=function(e,t,i){var n=this,r,o,a=t.delegateTarget||t.target;if(!a)return t.preventDefault();if(r=Tt(a,"data-action"),o=t.originalEvent||t,e==="mouseover"){this._timeout=setTimeout(function(){n._mouseout=n.triggerEntry(r,"hover",o,i)},SI);return}else if(e==="mouseout"){clearTimeout(this._timeout),this._mouseout&&(this._mouseout(),this._mouseout=null);return}return this.triggerEntry(r,e,o,i)};Ft.prototype.triggerEntry=function(e,t,i,n){if(this.isShown()){var r=this._current.target,o=this._current.entries,a=o[e];if(a){var s=a.action;if(this._eventBus.fire("contextPad.trigger",{entry:a,event:i})!==!1){if(vt(s)){if(t==="click")return s(i,r,n)}else if(s[t])return s[t](i,r,n);i.preventDefault()}}}};Ft.prototype.open=function(e,t){!t&&this.isOpen(e)||(this.close(),this._updateAndOpen(e))};Ft.prototype._getProviders=function(){var e=this._eventBus.createEvent({type:"contextPad.getProviders",providers:[]});return this._eventBus.fire(e),e.providers};Ft.prototype._updateAndOpen=function(e){var t=this.getEntries(e),i=this._createHtml(e),n;M(t,function(r,o){var a=r.group||"default",s=qe(r.html||'<div class="entry" draggable="true"></div>'),c;Tt(s,"data-action",o),c=He("[data-group="+to(a)+"]",i),c||(c=qe('<div class="group"></div>'),Tt(c,"data-group",a),i.appendChild(c)),c.appendChild(s),r.className&&MI(s,r.className),r.title&&Tt(s,"title",r.title),r.imageUrl&&(n=qe("<img>"),Tt(n,"src",r.imageUrl),n.style.width="100%",n.style.height="100%",s.appendChild(n))}),ot(i).add("open"),this._current={entries:t,html:i,target:e},this._updatePosition(),this._updateVisibility(),this._eventBus.fire("contextPad.open",{current:this._current})};Ft.prototype._createHtml=function(e){var t=this,i=qe('<div class="djs-context-pad"></div>');return ti.bind(i,om,"click",function(n){t.trigger("click",n)}),ti.bind(i,om,"dragstart",function(n){t.trigger("dragstart",n)}),ti.bind(i,om,"mouseover",function(n){t.trigger("mouseover",n)}),ti.bind(i,om,"mouseout",function(n){t.trigger("mouseout",n)}),Se.bind(i,"mousedown",function(n){n.stopPropagation()}),this._container.appendChild(i),this._eventBus.fire("contextPad.create",{target:e,pad:i}),i};Ft.prototype.getPad=function(e){console.warn(new Error("ContextPad#getPad is deprecated and will be removed in future library versions, cf. https://github.com/bpmn-io/diagram-js/pull/888"));let t;return this.isOpen()&&AI(this._current.target,e)?t=this._current.html:t=this._createHtml(e),{html:t}};Ft.prototype.close=function(){this.isOpen()&&(clearTimeout(this._timeout),this._container.innerHTML="",this._eventBus.fire("contextPad.close",{current:this._current}),this._current=null)};Ft.prototype.isOpen=function(e){var t=this._current;if(!t)return!1;if(!e)return!0;var i=t.target;return oe(e)!==oe(i)?!1:oe(e)?e.length===i.length&&Pn(e,function(n){return i.includes(n)}):i===e};Ft.prototype.isShown=function(){return this.isOpen()&&ot(this._current.html).has("open")};Ft.prototype.show=function(){this.isOpen()&&(ot(this._current.html).add("open"),this._updatePosition(),this._eventBus.fire("contextPad.show",{current:this._current}))};Ft.prototype.hide=function(){this.isOpen()&&(ot(this._current.html).remove("open"),this._eventBus.fire("contextPad.hide",{current:this._current}))};Ft.prototype._getPosition=function(e){if(!oe(e)&&Fe(e)){var t=this._canvas.viewbox(),i=DI(e),n=i.x*t.scale-t.x*t.scale,r=i.y*t.scale-t.y*t.scale;return{left:n+Ax*this._canvas.zoom(),top:r}}var o=this._canvas.getContainer(),a=o.getBoundingClientRect(),s=this._getTargetBounds(e);return{left:s.right-a.left+Ax*this._canvas.zoom(),top:s.top-a.top}};Ft.prototype._updatePosition=function(){let e=()=>{if(this.isOpen()){var t=this._current.html,i=this._getPosition(this._current.target);"x"in i&&"y"in i?(t.style.left=i.x+"px",t.style.top=i.y+"px"):["top","right","bottom","left"].forEach(function(n){n in i&&(t.style[n]=i[n]+"px")})}};this._scheduler.schedule(e,"ContextPad#_updatePosition")};Ft.prototype._updateVisibility=function(){let e=()=>{if(this.isOpen()){var t=this,i=this._current.target,n=oe(i)?i:[i],r=n.some(function(o){return t._canvas.hasMarker(o,EI)});r?t.hide():t.show()}};this._scheduler.schedule(e,"ContextPad#_updateVisibility")};Ft.prototype._getTargetBounds=function(e){var t=this,i=oe(e)?e:[e],n=i.map(function(r){return t._canvas.getGraphics(r)});return n.reduce(function(r,o){let a=o.getBoundingClientRect();return r.top=Math.min(r.top,a.top),r.right=Math.max(r.right,a.right),r.bottom=Math.max(r.bottom,a.bottom),r.left=Math.min(r.left,a.left),r.x=r.left,r.y=r.top,r.width=r.right-r.left,r.height=r.bottom-r.top,r},{top:1/0,right:-1/0,bottom:-1/0,left:1/0})};function MI(e,t){var i=ot(e);t=oe(t)?t:t.split(/\s+/g),t.forEach(function(n){i.add(n)})}function DI(e){return e.waypoints[e.waypoints.length-1]}function AI(e,t){return e=oe(e)?e:[e],t=oe(t)?t:[t],e.length===t.length&&Pn(e,function(i){return t.includes(i)})}var am={__depends__:[Xo,Dx,Yo],contextPad:["type",Ft]};var dm,Dt,Tx,PI,Ra,Px,Ix,Fx,Nx,ov,nv,rv,kI,Rl={},Lx=[],RI=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,um=Array.isArray;function so(e,t){for(var i in t)e[i]=t[i];return e}function av(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function pm(e,t,i){var n,r,o,a={};for(o in t)o=="key"?n=t[o]:o=="ref"?r=t[o]:a[o]=t[o];if(arguments.length>2&&(a.children=arguments.length>3?dm.call(arguments,2):i),typeof e=="function"&&e.defaultProps!=null)for(o in e.defaultProps)a[o]==null&&(a[o]=e.defaultProps[o]);return cm(e,a,n,r,null)}function cm(e,t,i,n,r){var o={type:e,props:t,key:i,ref:n,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:r??++Tx,__i:-1,__u:0};return r==null&&Dt.vnode!=null&&Dt.vnode(o),o}function mm(e){return e.children}function kl(e,t){this.props=e,this.context=t}function Xs(e,t){if(t==null)return e.__?Xs(e.__,e.__i+1):null;for(var i;t<e.__k.length;t++)if((i=e.__k[t])!=null&&i.__e!=null)return i.__e;return typeof e.type=="function"?Xs(e):null}function Bx(e){var t,i;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((i=e.__k[t])!=null&&i.__e!=null){e.__e=e.__c.base=i.__e;break}return Bx(e)}}function kx(e){(!e.__d&&(e.__d=!0)&&Ra.push(e)&&!lm.__r++||Px!=Dt.debounceRendering)&&((Px=Dt.debounceRendering)||Ix)(lm)}function lm(){for(var e,t,i,n,r,o,a,s=1;Ra.length;)Ra.length>s&&Ra.sort(Fx),e=Ra.shift(),s=Ra.length,e.__d&&(i=void 0,r=(n=(t=e).__v).__e,o=[],a=[],t.__P&&((i=so({},n)).__v=n.__v+1,Dt.vnode&&Dt.vnode(i),sv(t.__P,i,n,t.__n,t.__P.namespaceURI,32&n.__u?[r]:null,o,r??Xs(n),!!(32&n.__u),a),i.__v=n.__v,i.__.__k[i.__i]=i,zx(o,i,a),i.__e!=r&&Bx(i)));lm.__r=0}function jx(e,t,i,n,r,o,a,s,c,l,d){var u,p,m,f,_,b,D=n&&n.__k||Lx,R=t.length;for(c=OI(i,t,D,c,R),u=0;u<R;u++)(m=i.__k[u])!=null&&(p=m.__i==-1?Rl:D[m.__i]||Rl,m.__i=u,b=sv(e,m,p,r,o,a,s,c,l,d),f=m.__e,m.ref&&p.ref!=m.ref&&(p.ref&&cv(p.ref,null,m),d.push(m.ref,m.__c||f,m)),_==null&&f!=null&&(_=f),4&m.__u||p.__k===m.__k?c=Vx(m,c,e):typeof m.type=="function"&&b!==void 0?c=b:f&&(c=f.nextSibling),m.__u&=-7);return i.__e=_,c}function OI(e,t,i,n,r){var o,a,s,c,l,d=i.length,u=d,p=0;for(e.__k=new Array(r),o=0;o<r;o++)(a=t[o])!=null&&typeof a!="boolean"&&typeof a!="function"?(c=o+p,(a=e.__k[o]=typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?cm(null,a,null,null,null):um(a)?cm(mm,{children:a},null,null,null):a.constructor==null&&a.__b>0?cm(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):a).__=e,a.__b=e.__b+1,s=null,(l=a.__i=TI(a,i,c,u))!=-1&&(u--,(s=i[l])&&(s.__u|=2)),s==null||s.__v==null?(l==-1&&(r>d?p--:r<d&&p++),typeof a.type!="function"&&(a.__u|=4)):l!=c&&(l==c-1?p--:l==c+1?p++:(l>c?p--:p++,a.__u|=4))):e.__k[o]=null;if(u)for(o=0;o<d;o++)(s=i[o])!=null&&(2&s.__u)==0&&(s.__e==n&&(n=Xs(s)),$x(s,s));return n}function Vx(e,t,i){var n,r;if(typeof e.type=="function"){for(n=e.__k,r=0;n&&r<n.length;r++)n[r]&&(n[r].__=e,t=Vx(n[r],t,i));return t}e.__e!=t&&(t&&e.type&&!i.contains(t)&&(t=Xs(e)),i.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function TI(e,t,i,n){var r,o,a=e.key,s=e.type,c=t[i];if(c===null&&e.key==null||c&&a==c.key&&s==c.type&&(2&c.__u)==0)return i;if(n>(c!=null&&(2&c.__u)==0?1:0))for(r=i-1,o=i+1;r>=0||o<t.length;){if(r>=0){if((c=t[r])&&(2&c.__u)==0&&a==c.key&&s==c.type)return r;r--}if(o<t.length){if((c=t[o])&&(2&c.__u)==0&&a==c.key&&s==c.type)return o;o++}}return-1}function Rx(e,t,i){t[0]=="-"?e.setProperty(t,i??""):e[t]=i==null?"":typeof i!="number"||RI.test(t)?i:i+"px"}function sm(e,t,i,n,r){var o;e:if(t=="style")if(typeof i=="string")e.style.cssText=i;else{if(typeof n=="string"&&(e.style.cssText=n=""),n)for(t in n)i&&t in i||Rx(e.style,t,"");if(i)for(t in i)n&&i[t]==n[t]||Rx(e.style,t,i[t])}else if(t[0]=="o"&&t[1]=="n")o=t!=(t=t.replace(Nx,"$1")),t=t.toLowerCase()in e||t=="onFocusOut"||t=="onFocusIn"?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=i,i?n?i.u=n.u:(i.u=ov,e.addEventListener(t,o?rv:nv,o)):e.removeEventListener(t,o?rv:nv,o);else{if(r=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=i??"";break e}catch{}typeof i=="function"||(i==null||i===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&i==1?"":i))}}function Ox(e){return function(t){if(this.l){var i=this.l[t.type+e];if(t.t==null)t.t=ov++;else if(t.t<i.u)return;return i(Dt.event?Dt.event(t):t)}}}function sv(e,t,i,n,r,o,a,s,c,l){var d,u,p,m,f,_,b,D,R,C,w,P,T,H,N,W,$,Q=t.type;if(t.constructor!=null)return null;128&i.__u&&(c=!!(32&i.__u),o=[s=t.__e=i.__e]),(d=Dt.__b)&&d(t);e:if(typeof Q=="function")try{if(D=t.props,R="prototype"in Q&&Q.prototype.render,C=(d=Q.contextType)&&n[d.__c],w=d?C?C.props.value:d.__:n,i.__c?b=(u=t.__c=i.__c).__=u.__E:(R?t.__c=u=new Q(D,w):(t.__c=u=new kl(D,w),u.constructor=Q,u.render=FI),C&&C.sub(u),u.props=D,u.state||(u.state={}),u.context=w,u.__n=n,p=u.__d=!0,u.__h=[],u._sb=[]),R&&u.__s==null&&(u.__s=u.state),R&&Q.getDerivedStateFromProps!=null&&(u.__s==u.state&&(u.__s=so({},u.__s)),so(u.__s,Q.getDerivedStateFromProps(D,u.__s))),m=u.props,f=u.state,u.__v=t,p)R&&Q.getDerivedStateFromProps==null&&u.componentWillMount!=null&&u.componentWillMount(),R&&u.componentDidMount!=null&&u.__h.push(u.componentDidMount);else{if(R&&Q.getDerivedStateFromProps==null&&D!==m&&u.componentWillReceiveProps!=null&&u.componentWillReceiveProps(D,w),!u.__e&&u.shouldComponentUpdate!=null&&u.shouldComponentUpdate(D,u.__s,w)===!1||t.__v==i.__v){for(t.__v!=i.__v&&(u.props=D,u.state=u.__s,u.__d=!1),t.__e=i.__e,t.__k=i.__k,t.__k.some(function(Y){Y&&(Y.__=t)}),P=0;P<u._sb.length;P++)u.__h.push(u._sb[P]);u._sb=[],u.__h.length&&a.push(u);break e}u.componentWillUpdate!=null&&u.componentWillUpdate(D,u.__s,w),R&&u.componentDidUpdate!=null&&u.__h.push(function(){u.componentDidUpdate(m,f,_)})}if(u.context=w,u.props=D,u.__P=e,u.__e=!1,T=Dt.__r,H=0,R){for(u.state=u.__s,u.__d=!1,T&&T(t),d=u.render(u.props,u.state,u.context),N=0;N<u._sb.length;N++)u.__h.push(u._sb[N]);u._sb=[]}else do u.__d=!1,T&&T(t),d=u.render(u.props,u.state,u.context),u.state=u.__s;while(u.__d&&++H<25);u.state=u.__s,u.getChildContext!=null&&(n=so(so({},n),u.getChildContext())),R&&!p&&u.getSnapshotBeforeUpdate!=null&&(_=u.getSnapshotBeforeUpdate(m,f)),W=d,d!=null&&d.type===mm&&d.key==null&&(W=Hx(d.props.children)),s=jx(e,um(W)?W:[W],t,i,n,r,o,a,s,c,l),u.base=t.__e,t.__u&=-161,u.__h.length&&a.push(u),b&&(u.__E=u.__=null)}catch(Y){if(t.__v=null,c||o!=null)if(Y.then){for(t.__u|=c?160:128;s&&s.nodeType==8&&s.nextSibling;)s=s.nextSibling;o[o.indexOf(s)]=null,t.__e=s}else for($=o.length;$--;)av(o[$]);else t.__e=i.__e,t.__k=i.__k;Dt.__e(Y,t,i)}else o==null&&t.__v==i.__v?(t.__k=i.__k,t.__e=i.__e):s=t.__e=II(i.__e,t,i,n,r,o,a,c,l);return(d=Dt.diffed)&&d(t),128&t.__u?void 0:s}function zx(e,t,i){for(var n=0;n<i.length;n++)cv(i[n],i[++n],i[++n]);Dt.__c&&Dt.__c(t,e),e.some(function(r){try{e=r.__h,r.__h=[],e.some(function(o){o.call(r)})}catch(o){Dt.__e(o,r.__v)}})}function Hx(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:um(e)?e.map(Hx):so({},e)}function II(e,t,i,n,r,o,a,s,c){var l,d,u,p,m,f,_,b=i.props,D=t.props,R=t.type;if(R=="svg"?r="http://www.w3.org/2000/svg":R=="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),o!=null){for(l=0;l<o.length;l++)if((m=o[l])&&"setAttribute"in m==!!R&&(R?m.localName==R:m.nodeType==3)){e=m,o[l]=null;break}}if(e==null){if(R==null)return document.createTextNode(D);e=document.createElementNS(r,R,D.is&&D),s&&(Dt.__m&&Dt.__m(t,o),s=!1),o=null}if(R==null)b===D||s&&e.data==D||(e.data=D);else{if(o=o&&dm.call(e.childNodes),b=i.props||Rl,!s&&o!=null)for(b={},l=0;l<e.attributes.length;l++)b[(m=e.attributes[l]).name]=m.value;for(l in b)if(m=b[l],l!="children"){if(l=="dangerouslySetInnerHTML")u=m;else if(!(l in D)){if(l=="value"&&"defaultValue"in D||l=="checked"&&"defaultChecked"in D)continue;sm(e,l,null,m,r)}}for(l in D)m=D[l],l=="children"?p=m:l=="dangerouslySetInnerHTML"?d=m:l=="value"?f=m:l=="checked"?_=m:s&&typeof m!="function"||b[l]===m||sm(e,l,m,b[l],r);if(d)s||u&&(d.__html==u.__html||d.__html==e.innerHTML)||(e.innerHTML=d.__html),t.__k=[];else if(u&&(e.innerHTML=""),jx(t.type=="template"?e.content:e,um(p)?p:[p],t,i,n,R=="foreignObject"?"http://www.w3.org/1999/xhtml":r,o,a,o?o[0]:i.__k&&Xs(i,0),s,c),o!=null)for(l=o.length;l--;)av(o[l]);s||(l="value",R=="progress"&&f==null?e.removeAttribute("value"):f!=null&&(f!==e[l]||R=="progress"&&!f||R=="option"&&f!=b[l])&&sm(e,l,f,b[l],r),l="checked",_!=null&&_!=e[l]&&sm(e,l,_,b[l],r))}return e}function cv(e,t,i){try{if(typeof e=="function"){var n=typeof e.__u=="function";n&&e.__u(),n&&t==null||(e.__u=e(t))}else e.current=t}catch(r){Dt.__e(r,i)}}function $x(e,t,i){var n,r;if(Dt.unmount&&Dt.unmount(e),(n=e.ref)&&(n.current&&n.current!=e.__e||cv(n,null,t)),(n=e.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(o){Dt.__e(o,t)}n.base=n.__P=null}if(n=e.__k)for(r=0;r<n.length;r++)n[r]&&$x(n[r],t,i||typeof e.type!="function");i||av(e.__e),e.__c=e.__=e.__e=void 0}function FI(e,t,i){return this.constructor(e,i)}function fm(e,t,i){var n,r,o,a;t==document&&(t=document.documentElement),Dt.__&&Dt.__(e,t),r=(n=typeof i=="function")?null:i&&i.__k||t.__k,o=[],a=[],sv(t,e=(!n&&i||t).__k=pm(mm,null,[e]),r||Rl,Rl,t.namespaceURI,!n&&i?[i]:r?null:t.firstChild?dm.call(t.childNodes):null,o,!n&&i?i:r?r.__e:t.firstChild,n,a),zx(o,e,a)}dm=Lx.slice,Dt={__e:function(e,t,i,n){for(var r,o,a;t=t.__;)if((r=t.__c)&&!r.__)try{if((o=r.constructor)&&o.getDerivedStateFromError!=null&&(r.setState(o.getDerivedStateFromError(e)),a=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(e,n||{}),a=r.__d),a)return r.__E=r}catch(s){e=s}throw e}},Tx=0,PI=function(e){return e!=null&&e.constructor==null},kl.prototype.setState=function(e,t){var i;i=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=so({},this.state),typeof e=="function"&&(e=e(so({},i),this.props)),e&&so(i,e),e!=null&&this.__v&&(t&&this._sb.push(t),kx(this))},kl.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),kx(this))},kl.prototype.render=mm,Ra=[],Ix=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Fx=function(e,t){return e.__v.__b-t.__v.__b},lm.__r=0,Nx=/(PointerCapture)$|Capture$/i,ov=0,nv=Ox(!1),rv=Ox(!0),kI=0;var Ux=function(e,t,i,n){var r;t[0]=0;for(var o=1;o<t.length;o++){var a=t[o++],s=t[o]?(t[0]|=a?1:2,i[t[o++]]):t[++o];a===3?n[0]=s:a===4?n[1]=Object.assign(n[1]||{},s):a===5?(n[1]=n[1]||{})[t[++o]]=s:a===6?n[1][t[++o]]+=s+"":a?(r=e.apply(s,Ux(e,s,i,["",null])),n.push(r),s[0]?t[0]|=2:(t[o-2]=0,t[o]=r)):n.push(s)}return n},Wx=new Map;function Gx(e){var t=Wx.get(this);return t||(t=new Map,Wx.set(this,t)),(t=Ux(this,t.get(e)||(t.set(e,t=function(i){for(var n,r,o=1,a="",s="",c=[0],l=function(p){o===1&&(p||(a=a.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?c.push(0,p,a):o===3&&(p||a)?(c.push(3,p,a),o=2):o===2&&a==="..."&&p?c.push(4,p,0):o===2&&a&&!p?c.push(5,0,!0,a):o>=5&&((a||!p&&o===5)&&(c.push(o,0,a,r),o=6),p&&(c.push(o,p,0,r),o=6)),a=""},d=0;d<i.length;d++){d&&(o===1&&l(),l(d));for(var u=0;u<i[d].length;u++)n=i[d][u],o===1?n==="<"?(l(),c=[c],o=3):a+=n:o===4?a==="--"&&n===">"?(o=1,a=""):a=n+a[0]:s?n===s?s="":a+=n:n==='"'||n==="'"?s=n:n===">"?(l(),o=1):o&&(n==="="?(o=5,r=a,a=""):n==="/"&&(o<5||i[d][u+1]===">")?(l(),o===3&&(c=c[0]),o=c,(c=c[0]).push(2,0,o),o=0):n===" "||n==="	"||n===`
`||n==="\r"?(l(),o=2):a+=n),o===3&&a==="!--"&&(o=4,c=c[0])}return l(),c}(e)),t),arguments,[])).length>1?t:t[0]}var ft=Gx.bind(pm);var Zs,Gt,lv,qx,Ol=0,tw=[],Zt=Dt,Yx=Zt.__b,Kx=Zt.__r,Xx=Zt.diffed,Zx=Zt.__c,Qx=Zt.unmount,Jx=Zt.__;function gm(e,t){Zt.__h&&Zt.__h(Gt,e,Ol||t),Ol=0;var i=Gt.__H||(Gt.__H={__:[],__h:[]});return e>=i.__.length&&i.__.push({}),i.__[e]}function Tl(e){return Ol=1,iw(nw,e)}function iw(e,t,i){var n=gm(Zs++,2);if(n.t=e,!n.__c&&(n.__=[i?i(t):nw(void 0,t),function(s){var c=n.__N?n.__N[0]:n.__[0],l=n.t(c,s);c!==l&&(n.__N=[l,n.__[1]],n.__c.setState({}))}],n.__c=Gt,!Gt.__f)){var r=function(s,c,l){if(!n.__c.__H)return!0;var d=n.__c.__H.__.filter(function(p){return!!p.__c});if(d.every(function(p){return!p.__N}))return!o||o.call(this,s,c,l);var u=n.__c.props!==s;return d.forEach(function(p){if(p.__N){var m=p.__[0];p.__=p.__N,p.__N=void 0,m!==p.__[0]&&(u=!0)}}),o&&o.call(this,s,c,l)||u};Gt.__f=!0;var o=Gt.shouldComponentUpdate,a=Gt.componentWillUpdate;Gt.componentWillUpdate=function(s,c,l){if(this.__e){var d=o;o=void 0,r(s,c,l),o=d}a&&a.call(this,s,c,l)},Gt.shouldComponentUpdate=r}return n.__N||n.__}function Il(e,t){var i=gm(Zs++,3);!Zt.__s&&uv(i.__H,t)&&(i.__=e,i.u=t,Gt.__H.__h.push(i))}function Qs(e,t){var i=gm(Zs++,4);!Zt.__s&&uv(i.__H,t)&&(i.__=e,i.u=t,Gt.__h.push(i))}function Fl(e){return Ol=5,Mr(function(){return{current:e}},[])}function Mr(e,t){var i=gm(Zs++,7);return uv(i.__H,t)&&(i.__=e(),i.__H=t,i.__h=e),i.__}function Oa(e,t){return Ol=8,Mr(function(){return e},t)}function NI(){for(var e;e=tw.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(hm),e.__H.__h.forEach(dv),e.__H.__h=[]}catch(t){e.__H.__h=[],Zt.__e(t,e.__v)}}Zt.__b=function(e){Gt=null,Yx&&Yx(e)},Zt.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Jx&&Jx(e,t)},Zt.__r=function(e){Kx&&Kx(e),Zs=0;var t=(Gt=e.__c).__H;t&&(lv===Gt?(t.__h=[],Gt.__h=[],t.__.forEach(function(i){i.__N&&(i.__=i.__N),i.u=i.__N=void 0})):(t.__h.forEach(hm),t.__h.forEach(dv),t.__h=[],Zs=0)),lv=Gt},Zt.diffed=function(e){Xx&&Xx(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(tw.push(t)!==1&&qx===Zt.requestAnimationFrame||((qx=Zt.requestAnimationFrame)||LI)(NI)),t.__H.__.forEach(function(i){i.u&&(i.__H=i.u),i.u=void 0})),lv=Gt=null},Zt.__c=function(e,t){t.some(function(i){try{i.__h.forEach(hm),i.__h=i.__h.filter(function(n){return!n.__||dv(n)})}catch(n){t.some(function(r){r.__h&&(r.__h=[])}),t=[],Zt.__e(n,i.__v)}}),Zx&&Zx(e,t)},Zt.unmount=function(e){Qx&&Qx(e);var t,i=e.__c;i&&i.__H&&(i.__H.__.forEach(function(n){try{hm(n)}catch(r){t=r}}),i.__H=void 0,t&&Zt.__e(t,i.__v))};var ew=typeof requestAnimationFrame=="function";function LI(e){var t,i=function(){clearTimeout(n),ew&&cancelAnimationFrame(t),setTimeout(e)},n=setTimeout(i,100);ew&&(t=requestAnimationFrame(i))}function hm(e){var t=Gt,i=e.__c;typeof i=="function"&&(e.__c=void 0,i()),Gt=t}function dv(e){var t=Gt;e.__c=e.__(),Gt=t}function uv(e,t){return!e||e.length!==t.length||t.some(function(i,n){return i!==e[n]})}function nw(e,t){return typeof t=="function"?t(e):t}function rw(e){var t,i,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(i=rw(e[t]))&&(n&&(n+=" "),n+=i)}else for(i in e)e[i]&&(n&&(n+=" "),n+=i);return n}function BI(){for(var e,t,i=0,n="",r=arguments.length;i<r;i++)(e=arguments[i])&&(t=rw(e))&&(n&&(n+=" "),n+=t);return n}var Ta=BI;function pv(e){let{headerEntries:t,onSelect:i,selectedEntry:n,setSelectedEntry:r,title:o}=e,a=Mr(()=>jI(t),[t]);return ft`
    <div class="djs-popup-header">
      <h3 class="djs-popup-title" title=${o}>${o}</h3>
      ${a.map(s=>ft`
        <ul key=${s.id} class="djs-popup-header-group" data-header-group=${s.id}>

          ${s.entries.map(c=>ft`
            <li key=${c.id}>
              <${c.action?"button":"span"}
                class=${VI(c,c===n)}
                onClick=${l=>c.action&&i(l,c)}
                title=${c.title||c.label}
                data-id=${c.id}
                onMouseEnter=${()=>c.action&&r(c)}
                onMouseLeave=${()=>c.action&&r(null)}
                onFocus=${()=>c.action&&r(c)}
                onBlur=${()=>c.action&&r(null)}
              >
                ${c.imageUrl&&ft`<img class="djs-popup-entry-icon" src=${c.imageUrl} alt="" />`||c.imageHtml&&ft`<div class="djs-popup-entry-icon" dangerouslySetInnerHTML=${{__html:c.imageHtml}} />`}
                ${c.label?ft`
                  <span class="djs-popup-label">${c.label}</span>
                `:null}
              </${c.action?"button":"span"}>
            </li>
          `)}
        </ul>
      `)}
    </div>
  `}function jI(e){return e.reduce((t,i)=>{let n=i.group||"default",r=t.find(o=>o.id===n);return r?r.entries.push(i):t.push({id:n,entries:[i]}),t},[])}function VI(e,t){return Ta("entry",e.className,e.active?"active":"",e.disabled?"disabled":"",t?"selected":"")}function mv(e){let{entry:t,selected:i,onMouseEnter:n,onMouseLeave:r,onAction:o}=e;return ft`
    <li
      class=${Ta("entry",{selected:i})}
      data-id=${t.id}
      title=${t.title||t.label}
      tabIndex="0"
      onClick=${o}
      onFocus=${n}
      onBlur=${r}
      onMouseEnter=${n}
      onMouseLeave=${r}
      onDragStart=${a=>o(a,t,"dragstart")}
      draggable=${!0}
    >
      <div class="djs-popup-entry-content">
        <span
          class=${Ta("djs-popup-entry-name",t.className)}
        >
          ${t.imageUrl&&ft`<img class="djs-popup-entry-icon" src=${t.imageUrl} alt="" />`||t.imageHtml&&ft`<div class="djs-popup-entry-icon" dangerouslySetInnerHTML=${{__html:t.imageHtml}} />`}

          ${t.label?ft`
            <span class="djs-popup-label">
              ${t.label}
            </span>
          `:null}
        </span>
        ${t.description&&ft`
          <span
            class="djs-popup-entry-description"
            title=${t.description}
          >
            ${t.description}
          </span>
        `}
      </div>
      ${t.documentationRef&&ft`
        <div class="djs-popup-entry-docs">
          <a
            href="${t.documentationRef}"
            onClick=${a=>a.stopPropagation()}
            title="Open element documentation"
            target="_blank"
            rel="noopener"
          >
            <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M10.6368 10.6375V5.91761H11.9995V10.6382C11.9995 10.9973 11.8623 11.3141 11.5878 11.5885C11.3134 11.863 10.9966 12.0002 10.6375 12.0002H1.36266C0.982345 12.0002 0.660159 11.8681 0.396102 11.6041C0.132044 11.34 1.52588e-05 11.0178 1.52588e-05 10.6375V1.36267C1.52588e-05 0.98236 0.132044 0.660173 0.396102 0.396116C0.660159 0.132058 0.982345 2.95639e-05 1.36266 2.95639e-05H5.91624V1.36267H1.36266V10.6375H10.6368ZM12 0H7.2794L7.27873 1.36197H9.68701L3.06507 7.98391L4.01541 8.93425L10.6373 2.31231V4.72059H12V0Z" fill="#818798"/>
            </svg>
          </a>
        </div>
      `}
    </li>
  `}function fv(e){let s=e,{selectedEntry:t,setSelectedEntry:i,entries:n}=s,r=eb(s,["selectedEntry","setSelectedEntry","entries"]),o=Fl(),a=Mr(()=>zI(n),[n]);return Qs(()=>{let c=o.current;if(!c)return;let l=c.querySelector(".selected");l&&HI(l)},[t]),ft`
    <div class="djs-popup-results" ref=${o}>
      ${a.map(c=>ft`
        ${c.name&&ft`
          <div key=${c.id} class="entry-header" title=${c.name}>
            ${c.name}
          </div>
        `}
        <ul class="djs-popup-group" data-group=${c.id}>
          ${c.entries.map(l=>ft`
            <${mv}
              key=${l.id}
              entry=${l}
              selected=${l===t}
              onMouseEnter=${()=>i(l)}
              onMouseLeave=${()=>i(null)}
              ...${r}
            />
          `)}
        </ul>
      `)}
    </div>
  `}function zI(e){let t=[],i=o=>t.find(a=>o.id===a.id),n=o=>!!i(o),r=o=>typeof o=="string"?{id:o}:o;return e.forEach(o=>{let a=o.group?r(o.group):{id:"default"};n(a)?i(a).entries.push(o):t.push(Be(X({},a),{entries:[o]}))}),t}function HI(e){typeof e.scrollIntoViewIfNeeded=="function"?e.scrollIntoViewIfNeeded():e.scrollIntoView({scrollMode:"if-needed",block:"nearest"})}function hv(e){let{onClose:t,onSelect:i,className:n,headerEntries:r,position:o,title:a,width:s,scale:c,search:l,emptyPlaceholder:d,searchFn:u,entries:p,onOpened:m,onClosed:f}=e,_=Mr(()=>Pt(l)?p.length>5:!1,[l,p]),[b,D]=Tl(""),R=Oa((Y,ae)=>{if(!_)return Y;if(!ae.trim())return Y.filter(({rank:di=0})=>di>=0);let Ie=Y.filter(({searchable:di})=>di!==!1);return u(Ie,ae,{keys:["label","search","description"]}).map(({item:di})=>di)},[_]),[C,w]=Tl(R(p,b)),[P,T]=Tl(C[0]),H=Oa(Y=>{T(Y[0]),w(Y)},[P,w,T]);Il(()=>{H(R(p,b))},[b,p]);let N=Oa(Y=>{let Ie=C.indexOf(P)+Y;Ie<0&&(Ie=C.length-1),Ie>=C.length&&(Ie=0),T(C[Ie])},[C,P,T]),W=Oa(Y=>{if(Y.key==="Enter"&&P)return i(Y,P);if(Y.key==="ArrowUp")return N(-1),Y.preventDefault();if(Y.key==="ArrowDown")return N(1),Y.preventDefault()},[i,P,N]),$=Oa(Y=>{up(Y.target,"input")&&D(()=>Y.target.value)},[D]);Il(()=>(m(),()=>{f()}),[]);let Q=Mr(()=>a||r.length>0,[a,r]);return ft`
    <${ow}
      onClose=${t}
      onKeyup=${$}
      onKeydown=${W}
      className=${n}
      position=${o}
      width=${s}
      scale=${c}
    >
      ${Q&&ft`
        <${pv}
          headerEntries=${r}
          onSelect=${i}
          selectedEntry=${P}
          setSelectedEntry=${T}
          title=${a}
        />
      `}
      ${p.length>0&&ft`
        <div class="djs-popup-body">

          ${_&&ft`
          <div class="djs-popup-search">
            <svg class="djs-popup-search-icon" width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M9.0325 8.5H9.625L13.3675 12.25L12.25 13.3675L8.5 9.625V9.0325L8.2975 8.8225C7.4425 9.5575 6.3325 10 5.125 10C2.4325 10 0.25 7.8175 0.25 5.125C0.25 2.4325 2.4325 0.25 5.125 0.25C7.8175 0.25 10 2.4325 10 5.125C10 6.3325 9.5575 7.4425 8.8225 8.2975L9.0325 8.5ZM1.75 5.125C1.75 6.9925 3.2575 8.5 5.125 8.5C6.9925 8.5 8.5 6.9925 8.5 5.125C8.5 3.2575 6.9925 1.75 5.125 1.75C3.2575 1.75 1.75 3.2575 1.75 5.125Z" fill="#22242A"/>
            </svg>
            <input type="text" spellcheck=${!1} aria-label="${a}" />
          </div>
          `}

          <${fv}
            entries=${C}
            selectedEntry=${P}
            setSelectedEntry=${T}
            onAction=${i}
          />
        </div>
      `}
    ${d&&C.length===0&&ft`
      <div class="djs-popup-no-results">${vt(d)?d(b):d}</div>
    `}
    </${ow}>
  `}function ow(e){let{onClose:t,onKeydown:i,onKeyup:n,className:r,children:o,position:a}=e,s=Fl();return Qs(()=>{if(typeof a!="function")return;let c=s.current,l=a(c);c.style.left=`${l.x}px`,c.style.top=`${l.y}px`},[s.current,a]),Qs(()=>{let c=s.current;if(!c)return;(c.querySelector("input")||c).focus()},[]),Il(()=>{let c=d=>{if(d.key==="Escape")return d.preventDefault(),t()},l=d=>{if(!Qn(d.target,".djs-popup",!0))return t()};return document.documentElement.addEventListener("keydown",c),document.body.addEventListener("click",l),()=>{document.documentElement.removeEventListener("keydown",c),document.body.removeEventListener("click",l)}},[]),ft`
    <div
      class=${Ta("djs-popup",r)}
      style=${$I(e)}
      onKeydown=${i}
      onKeyup=${n}
      ref=${s}
      tabIndex="-1"
    >
      ${o}
    </div>
  `}function $I(e){return{transform:`scale(${e.scale})`,width:`${e.width}px`,"transform-origin":"top left"}}var WI="data-id",aw=["contextPad.close","canvas.viewbox.changing","commandStack.changed"],UI=1e3;function wt(e,t,i,n){this._eventBus=t,this._canvas=i,this._search=n,this._current=null;var r=Pt(e&&e.scale)?e.scale:{min:1,max:1};this._config={scale:r},t.on("diagram.destroy",()=>{this.close()}),t.on("element.changed",o=>{let a=this.isOpen()&&this._current.target;o.element===a&&this.refresh()})}wt.$inject=["config.popupMenu","eventBus","canvas","search"];wt.prototype._render=function(){let{position:e,providerId:t,entries:i,headerEntries:n,emptyPlaceholder:r,options:o}=this._current,a=Object.entries(i).map(([p,m])=>X({id:p},m)),s=Object.entries(n).map(([p,m])=>X({id:p},m)),c=e&&(p=>this._ensureVisible(p,e)),l=this._updateScale(this._current.container);fm(ft`
      <${hv}
        onClose=${p=>this.close(p)}
        onSelect=${(p,m,f)=>this.trigger(p,m,f)}
        position=${c}
        className=${t}
        entries=${a}
        headerEntries=${s}
        emptyPlaceholder=${r}
        scale=${l}
        onOpened=${this._onOpened.bind(this)}
        onClosed=${this._onClosed.bind(this)}
        searchFn=${this._search}
        ...${X({},o)}
      />
    `,this._current.container)};wt.prototype.open=function(e,t,i,n){if(!e)throw new Error("target is missing");if(!t)throw new Error("providers for <"+t+"> not found");if(!i)throw new Error("position is missing");this.isOpen()&&this.close();let{entries:r,headerEntries:o,emptyPlaceholder:a}=this._getContext(e,t);this._current={position:i,providerId:t,target:e,entries:r,headerEntries:o,emptyPlaceholder:a,container:this._createContainer({provider:t}),options:n},this._emit("open"),this._bindAutoClose(),this._render()};wt.prototype.refresh=function(){if(!this.isOpen())return;let{target:e,providerId:t}=this._current,{entries:i,headerEntries:n,emptyPlaceholder:r}=this._getContext(e,t);this._current=Be(X({},this._current),{entries:i,headerEntries:n,emptyPlaceholder:r}),this._emit("refresh"),this._render()};wt.prototype._getContext=function(e,t){let i=this._getProviders(t);if(!i||!i.length)throw new Error("provider for <"+t+"> not found");let n=this._getEntries(e,i),r=this._getHeaderEntries(e,i),o=this._getEmptyPlaceholder(i);return{entries:n,headerEntries:r,emptyPlaceholder:o,empty:!(Object.keys(n).length||Object.keys(r).length)}};wt.prototype.close=function(){this.isOpen()&&(this._emit("close"),this.reset(),this._canvas.restoreFocus(),this._current=null)};wt.prototype.reset=function(){let e=this._current.container;fm(null,e),Ni(e)};wt.prototype._emit=function(e,t){this._eventBus.fire(`popupMenu.${e}`,t)};wt.prototype._onOpened=function(){this._emit("opened")};wt.prototype._onClosed=function(){this._emit("closed")};wt.prototype._createContainer=function(e){var t=this._canvas,i=t.getContainer();let n=qe(`<div class="djs-popup-parent djs-scrollable" data-popup=${e.provider}></div>`);return i.appendChild(n),n};wt.prototype._bindAutoClose=function(){this._eventBus.once(aw,this.close,this)};wt.prototype._unbindAutoClose=function(){this._eventBus.off(aw,this.close,this)};wt.prototype._updateScale=function(){var e=this._canvas.zoom(),t=this._config.scale,i,n,r=e;return t!==!0&&(t===!1?(i=1,n=1):(i=t.min,n=t.max),Pt(i)&&e<i&&(r=i),Pt(n)&&e>n&&(r=n)),r};wt.prototype._ensureVisible=function(e,t){var i=document.documentElement.getBoundingClientRect(),n=e.getBoundingClientRect(),r={},o=t.x,a=t.y;return t.x+n.width>i.width&&(r.x=!0),t.y+n.height>i.height&&(r.y=!0),r.x&&r.y?(o=t.x-n.width,a=t.y-n.height):r.x?(o=t.x-n.width,a=t.y):r.y&&t.y<n.height?(o=t.x,a=10):r.y&&(o=t.x,a=t.y-n.height),t.y<i.top&&(a=t.y+n.height),{x:o,y:a}};wt.prototype.isEmpty=function(e,t){if(!e)throw new Error("target is missing");if(!t)throw new Error("provider ID is missing");let i=this._getProviders(t);return!i||!i.length?!0:this._getContext(e,t).empty};wt.prototype.registerProvider=function(e,t,i){i||(i=t,t=UI),this._eventBus.on("popupMenu.getProviders."+e,t,function(n){n.providers.push(i)})};wt.prototype._getProviders=function(e){var t=this._eventBus.createEvent({type:"popupMenu.getProviders."+e,providers:[]});return this._eventBus.fire(t),t.providers};wt.prototype._getEntries=function(e,t){var i={};return M(t,function(n){if(!n.getPopupMenuEntries){M(n.getEntries(e),function(o){var a=o.id;if(!a)throw new Error("entry ID is missing");i[a]=Di(o,["id"])});return}var r=n.getPopupMenuEntries(e);vt(r)?i=r(i):M(r,function(o,a){i[a]=o})}),i};wt.prototype._getHeaderEntries=function(e,t){var i={};return M(t,function(n){if(!n.getPopupMenuHeaderEntries){if(!n.getHeaderEntries)return;M(n.getHeaderEntries(e),function(o){var a=o.id;if(!a)throw new Error("entry ID is missing");i[a]=Di(o,["id"])});return}var r=n.getPopupMenuHeaderEntries(e);vt(r)?i=r(i):M(r,function(o,a){i[a]=o})}),i};wt.prototype._getEmptyPlaceholder=function(e){let t=e.find(i=>vt(i.getEmptyPlaceholder));return t&&t.getEmptyPlaceholder()};wt.prototype.isOpen=function(){return!!this._current};wt.prototype.trigger=function(e,t,i="click"){if(e.preventDefault(),!t){let r=Qn(e.delegateTarget||e.target,".entry",!0),o=Tt(r,WI);t=X({id:o},this._getEntry(o))}let n=t.action;if(this._emit("trigger",{entry:t,event:e})!==!1){if(vt(n)){if(i==="click")return n(e,t)}else if(n[i])return n[i](e,t)}};wt.prototype._getEntry=function(e){var t=this._current.entries[e]||this._current.headerEntries[e];if(!t)throw new Error("entry not found");return t};function gv(e,t,i){let{keys:n}=i;if(t=t.trim().toLowerCase(),!t)throw new Error("<pattern> must not be empty");let r=t.trim().toLowerCase().split(/\s+/);return e.flatMap(o=>{let a=GI(o,r,n);return a?{item:o,tokens:a}:[]}).sort(qI(n))}function GI(e,t,i){let{matchedWords:n,tokens:r}=i.reduce((o,a)=>{let s=e[a],{tokens:c,matchedWords:l}=oe(s)?s.reduce((d,u)=>{let{tokens:p,matchedWords:m}=lw(u,t);return{tokens:[...d.tokens,p],matchedWords:X(X({},d.matchedWords),m)}},{matchedWords:{},tokens:[]}):lw(s,t);return{tokens:Be(X({},o.tokens),{[a]:c}),matchedWords:X(X({},o.matchedWords),l)}},{matchedWords:{},tokens:{}});return Object.keys(n).length!==t.length?null:r}function qI(e){return(t,i)=>{let n=0,r=1;for(let o of e){let a=YI(t.tokens[o],i.tokens[o]);if(a!==0){n+=a*r,r*=.9;continue}let s=KI(t.item[o],i.item[o]);if(s!==0){n+=s*r,r*=.9;continue}}return n}}function YI(e,t){return sw(t)-sw(e)}function sw(e){return e.reduce((t,i)=>t+dw(i),0)}function dw(e){if(oe(e))return Math.max(...e.map(dw));let t=Math.log(e.value.length);return e.match?(e.start?e.end?131.9:7.87:e.wordStart?2.19:1)*t:-.07*t}function cw(e=""){return oe(e)?e.join(", "):e}function KI(e,t){return cw(e).localeCompare(cw(t))}function lw(e,t){if(!e)return{tokens:[],matchedWords:{}};let i=[],n={},r=t.map(XI),o=[`(?<all>${r.join("\\s+")})`,...r].join("|"),a=new RegExp(o,"ig"),s,c=0;for(;s=a.exec(e);){let[l]=s,d=s.index,u=s.index+l.length,p=d===0,m=u===e.length,f=!!s.groups.all,_=p||/\s/.test(e.charAt(d-1)),b=m||/\s/.test(e.charAt(u));s.index>c&&i.push({value:e.slice(c,s.index),index:c}),i.push({value:l,index:s.index,match:!0,wordStart:_,wordEnd:b,start:p,end:m,all:f});let D=f?t:[l];for(let R of D)n[R.toLowerCase()]=!0;c=s.index+l.length}return c<e.length&&i.push({value:e.slice(c),index:c}),{tokens:i,matchedWords:n}}function XI(e){return e.replace(/[/\-\\^$*+?.()|[\]{}]/g,"\\$&")}var vm={search:["value",gv]};var Js={__depends__:[vm],__init__:["popupMenu"],popupMenu:["type",wt]};var ZI={align:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2000 2000">
              <line x1="200" y1="150" x2="200" y2="1850" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
              <rect x="500" y="150" width="1300" height="700" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
              <rect x="500" y="1150" width="700" height="700" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,bottom:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="150" y1="1650" x2="1650" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="150" y="350" width="600" height="1300" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="1050" y="850" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,center:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="900" y1="150" x2="900" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="250" y="150" width="1300" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="500" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,left:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="100" y1="150" x2="100" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="100" y="150" width="1300" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="100" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,right:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="1650" y1="150" x2="1650" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="350" y="150" width="1300" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="850" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,top:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="150" y1="150" x2="1650" y2="150" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="150" y="150" width="600" height="1300" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="1050" y="150" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,middle:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="150" y1="900" x2="1650" y2="900" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="150" y="250" width="600" height="1300" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="1050" y="500" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`},_m=ZI;var QI=900;function ea(e,t,i,n){e.registerProvider(QI,this),this._contextPad=e,this._popupMenu=t,this._translate=i,this._canvas=n}ea.$inject=["contextPad","popupMenu","translate","canvas"];ea.prototype.getMultiElementContextPadEntries=function(e){var t={};return this._isAllowed(e)&&k(t,this._getEntries(e)),t};ea.prototype._isAllowed=function(e){return!this._popupMenu.isEmpty(e,"align-elements")};ea.prototype._getEntries=function(){var e=this;return{"align-elements":{group:"align-elements",title:e._translate("Align elements"),html:`<div class="entry">${_m.align}</div>`,action:{click:function(t,i){var n=e._getMenuPosition(i);k(n,{cursor:{x:t.x,y:t.y}}),e._popupMenu.open(i,"align-elements",n)}}}}};ea.prototype._getMenuPosition=function(e){var t=5,i=this._contextPad.getPad(e).html,n=i.getBoundingClientRect(),r={x:n.left,y:n.bottom+t};return r};var JI=["left","center","right","top","middle","bottom"];function Ia(e,t,i,n){this._alignElements=t,this._translate=i,this._popupMenu=e,this._rules=n,e.registerProvider("align-elements",this)}Ia.$inject=["popupMenu","alignElements","translate","rules"];Ia.prototype.getPopupMenuEntries=function(e){var t={};return this._isAllowed(e)&&k(t,this._getEntries(e)),t};Ia.prototype._isAllowed=function(e){return this._rules.allowed("elements.align",{elements:e})};Ia.prototype._getEntries=function(e){var t=this._alignElements,i=this._translate,n=this._popupMenu,r={};return M(JI,function(o){r["align-elements-"+o]={group:"align",title:i("Align elements "+o),className:"bjs-align-elements-menu-entry",imageHtml:_m[o],action:function(){t.trigger(e,o),n.close()}}}),r};function Ei(e){V.call(this,e),this.init()}Ei.$inject=["eventBus"];z(Ei,V);Ei.prototype.addRule=function(e,t,i){var n=this;typeof e=="string"&&(e=[e]),e.forEach(function(r){n.canExecute(r,t,function(o,a,s){return i(o)},!0)})};Ei.prototype.init=function(){};function ec(e){Ei.call(this,e)}ec.$inject=["eventBus"];z(ec,Ei);ec.prototype.init=function(){this.addRule("elements.align",function(e){var t=e.elements,i=fe(t,function(n){return!(n.waypoints||n.host||n.labelTarget)});return i=jo(i),i.length<2?!1:i})};var uw={__depends__:[Mx,am,Js],__init__:["alignElementsContextPadProvider","alignElementsMenuProvider","bpmnAlignElements"],alignElementsContextPadProvider:["type",ea],alignElementsMenuProvider:["type",Ia],bpmnAlignElements:["type",ec]};var e2=10,_v=50,t2=250;function bm(e,t,i,n){for(var r;r=i2(e,i,t);)i=n(t,i,r);return i}function ym(e){return function(t,i,n){var r={x:i.x,y:i.y};return["x","y"].forEach(function(o){var a=e[o];if(a){var s=o==="x"?"width":"height",c=a.margin,l=a.minDistance;c<0?r[o]=Math.min(n[o]+c-t[s]/2,i[o]-l+c):r[o]=Math.max(n[o]+n[s]+c+t[s]/2,i[o]+l+c)}}),r}}function i2(e,t,i){var n={x:t.x-i.width/2,y:t.y-i.height/2,width:i.width,height:i.height},r=n2(e);return ve(r,function(o){if(o===i)return!1;var a=xt(o,n,e2);return a==="intersect"})}function pw(e,t){t||(t={});function i(f){return f.source===e?1:-1}var n=t.defaultDistance||_v,r=t.direction||"e",o=t.filter,a=t.getWeight||i,s=t.maxDistance||t2,c=t.reference||"start";o||(o=a2);function l(f,_){return r==="n"?c==="start"?ce(f).top-ce(_).bottom:c==="center"?ce(f).top-ue(_).y:ce(f).top-ce(_).top:r==="w"?c==="start"?ce(f).left-ce(_).right:c==="center"?ce(f).left-ue(_).x:ce(f).left-ce(_).left:r==="s"?c==="start"?ce(_).top-ce(f).bottom:c==="center"?ue(_).y-ce(f).bottom:ce(_).bottom-ce(f).bottom:c==="start"?ce(_).left-ce(f).right:c==="center"?ue(_).x-ce(f).right:ce(_).right-ce(f).right}var d=e.incoming.filter(o).map(function(f){var _=a(f),b=_<0?l(f.source,e):l(e,f.source);return{id:f.source.id,distance:b,weight:_}}),u=e.outgoing.filter(o).map(function(f){var _=a(f),b=_>0?l(e,f.target):l(f.target,e);return{id:f.target.id,distance:b,weight:_}}),p=d.concat(u).reduce(function(f,_){return f[_.id+"__weight_"+_.weight]=_,f},{}),m=Ot(p,function(f,_){var b=_.distance,D=_.weight;return b<0||b>s||(f[String(b)]||(f[String(b)]=0),f[String(b)]+=1*D,(!f.distance||f[f.distance]<f[String(b)])&&(f.distance=b)),f},{});return m.distance||n}function n2(e){var t=vv(e);return e.host&&(t=t.concat(vv(e.host))),e.attachers&&(t=t.concat(e.attachers.reduce(function(i,n){return i.concat(vv(n))},[]))),t}function vv(e){return o2(e).concat(r2(e))}function r2(e){return e.incoming.map(function(t){return t.source})}function o2(e){return e.outgoing.map(function(t){return t.target})}function a2(){return!0}var s2=100;function xm(e,t,i){e.on("autoPlace",s2,function(n){var r=n.shape,o=n.source;return c2(o,r)}),e.on("autoPlace.end",function(n){i.scrollToElement(n.shape)}),this.append=function(n,r,o){e.fire("autoPlace.start",{source:n,shape:r});var a=e.fire("autoPlace",{source:n,shape:r}),s=t.appendShape(n,r,a,n.parent,o);return e.fire("autoPlace.end",{source:n,shape:s}),s}}xm.$inject=["eventBus","modeling","canvas"];function c2(e,t,i){i||(i={});var n=i.defaultDistance||_v,r=ue(e),o=ce(e);return{x:o.right+n+t.width/2,y:r.y}}function wm(e,t){e.on("autoPlace.end",500,function(i){t.select(i.shape)})}wm.$inject=["eventBus","selection"];var mw={__init__:["autoPlaceSelectionBehavior"],autoPlace:["type",xm],autoPlaceSelectionBehavior:["type",wm]};function co(e,t){for(Ht(t)&&(t=[t]);e=e.parent;)if(ge(e,t))return e;return null}function Em(e,t){var i=co(e,"bpmn:Process");if(i)return!0;var n=["bpmn:Participant","bpmn:Lane"];if(i=co(e,n),i)return nt(i);if(ge(e,n))return nt(e);var r;for(r=U(e);r&&!v(r,"bpmn:Process");r=r.$parent);if(!t)return!0;var o=t.find(function(a){var s=U(a);return s&&s.get("processRef")===r});return o?nt(o):!0}function Cm(e,t,i){var n=Em(e,i);if(v(t,"bpmn:TextAnnotation"))return d2(e,t,n);if(ge(t,["bpmn:DataObjectReference","bpmn:DataStoreReference"]))return u2(e,t,n);if(v(t,"bpmn:FlowNode"))return l2(e,t,n)}function l2(e,t,i){var n=ce(e),r=ue(e),o=i?{directionHint:"e",minDistance:80,baseOrientation:"left",boundaryOrientation:"top",start:"top",end:"bottom"}:{directionHint:"s",minDistance:90,baseOrientation:"top",boundaryOrientation:"left",start:"left",end:"right"},a=pw(e,{filter:function(m){return v(m,"bpmn:SequenceFlow")},direction:o.directionHint}),s=30,c=o.minDistance,l=o.baseOrientation;v(e,"bpmn:BoundaryEvent")&&(l=xt(e,e.host,-25),l.indexOf(o.boundaryOrientation)!==-1&&(s*=-1));var d=i?{x:n.right+a+t.width/2,y:r.y+fw(l,c,o)}:{x:r.x+fw(l,c,o),y:n.bottom+a+t.height/2},u={margin:s,minDistance:c},p=i?{y:u}:{x:u};return bm(e,t,d,ym(p))}function fw(e,t,i){return e.includes(i.start)?-1*t:e.includes(i.end)?t:0}function d2(e,t,i){var n=ce(e),r=i?{x:n.right+t.width/2,y:n.top-50-t.height/2}:{x:n.right+50+t.width/2,y:n.bottom+t.height/2};Fe(e)&&(r=ue(e),i?(r.x+=100,r.y-=50):(r.x+=100,r.y+=50));var o={margin:i?-30:30,minDistance:20},a=i?{y:o}:{x:o};return bm(e,t,r,ym(a))}function u2(e,t,i){var n=ce(e),r=i?{x:n.right-10+t.width/2,y:n.bottom+40+t.width/2}:{x:n.left-40-t.width/2,y:n.bottom-10+t.height/2},o={margin:30,minDistance:30},a=i?{x:o}:{y:o};return bm(e,t,r,ym(a))}function Sm(e,t){e.on("autoPlace",function(i){var n=i.shape,r=i.source;return Cm(r,n,t)})}Sm.$inject=["eventBus","elementRegistry"];var tc={__depends__:[mw],__init__:["bpmnAutoPlace"],bpmnAutoPlace:["type",Sm]};function rr(e,t,i,n){V.call(this,e),this._elementRegistry=t,this._modeling=i,this._rules=n;var r=this;this.postExecuted(["shape.create"],function(o){var a=o.context,s=a.hints||{},c=a.shape,l=a.parent||a.newParent;s.autoResize!==!1&&r._expand([c],l)}),this.postExecuted(["elements.move"],function(o){var a=o.context,s=Ps(Io(a.closure.topLevel)),c=a.hints,l=c?c.autoResize:!0;if(l!==!1){var d=Zn(s,function(u){return u.parent.id});M(d,function(u,p){oe(l)&&(u=u.filter(function(m){return ve(l,mi({id:m.id}))})),r._expand(u,p)})}}),this.postExecuted(["shape.toggleCollapse"],function(o){var a=o.context,s=a.hints,c=a.shape;s&&s.autoResize===!1||c.collapsed||r._expand(c.children||[],c)}),this.postExecuted(["shape.resize"],function(o){var a=o.context,s=a.hints,c=a.shape,l=c.parent;s&&s.autoResize===!1||l&&r._expand([c],l)})}rr.$inject=["eventBus","elementRegistry","modeling","rules"];z(rr,V);rr.prototype._getOptimalBounds=function(e,t){var i=this.getOffset(t),n=this.getPadding(t),r=ce(Je(e)),o=ce(t),a={};return r.top-o.top<n.top&&(a.top=r.top-i.top),r.left-o.left<n.left&&(a.left=r.left-i.left),o.right-r.right<n.right&&(a.right=r.right+i.right),o.bottom-r.bottom<n.bottom&&(a.bottom=r.bottom+i.bottom),Ca(k({},o,a))};rr.prototype._expand=function(e,t){typeof t=="string"&&(t=this._elementRegistry.get(t));var i=this._rules.allowed("element.autoResize",{elements:e,target:t});if(i){var n=this._getOptimalBounds(e,t);if(p2(n,t)){var r=m2(ei(t,["x","y","width","height"]),n);this.resize(t,n,{autoResize:r});var o=t.parent;o&&this._expand([t],o)}}};rr.prototype.getOffset=function(e){return{top:60,bottom:60,left:100,right:100}};rr.prototype.getPadding=function(e){return{top:2,bottom:2,left:15,right:15}};rr.prototype.resize=function(e,t,i){this._modeling.resizeShape(e,t,null,i)};function p2(e,t){return e.x!==t.x||e.y!==t.y||e.width!==t.width||e.height!==t.height}function m2(e,t){var i="";return e=ce(e),t=ce(t),e.top>t.top&&(i=i.concat("n")),e.right<t.right&&(i=i.concat("w")),e.bottom<t.bottom&&(i=i.concat("s")),e.left>t.left&&(i=i.concat("e")),i}function ic(e){e.invoke(rr,this)}ic.$inject=["injector"];z(ic,rr);ic.prototype.resize=function(e,t,i){v(e,"bpmn:Participant")?this._modeling.resizeLane(e,t,null,i):this._modeling.resizeShape(e,t,null,i)};function Fa(e){Ei.call(this,e);var t=this;this.addRule("element.autoResize",function(i){return t.canResize(i.elements,i.target)})}Fa.$inject=["eventBus"];z(Fa,Ei);Fa.prototype.canResize=function(e,t){return!1};function nc(e,t){Fa.call(this,e),this._modeling=t}z(nc,Fa);nc.$inject=["eventBus","modeling"];nc.prototype.canResize=function(e,t){if(v(t.di,"bpmndi:BPMNPlane")||!v(t,"bpmn:Participant")&&!v(t,"bpmn:Lane")&&!v(t,"bpmn:SubProcess"))return!1;var i=!0;return M(e,function(n){if(v(n,"bpmn:Lane")||xe(n)){i=!1;return}}),i};var hw={__init__:["bpmnAutoResize","bpmnAutoResizeProvider"],bpmnAutoResize:["type",ic],bpmnAutoResizeProvider:["type",nc]};var gw=1500;function Mm(e,t,i){var n=this,r=i.get("dragging",!1);function o(a){if(!a.hover){var s=a.originalEvent,c=n._findTargetGfx(s),l=c&&e.get(c);c&&l&&(a.stopPropagation(),r.hover({element:l,gfx:c}),r.move(s))}}r&&t.on("drag.start",function(a){t.once("drag.move",gw,function(s){o(s)})}),function(){var a,s;t.on("element.hover",function(c){a=c.gfx,s=c.element}),t.on("element.hover",gw,function(c){s&&t.fire("element.out",{element:s,gfx:a})}),t.on("element.out",function(){a=null,s=null})}(),this._findTargetGfx=function(a){var s,c;if(a instanceof MouseEvent)return s=Fn(a),c=document.elementFromPoint(s.x,s.y),f2(c)}}Mm.$inject=["elementRegistry","eventBus","injector"];function f2(e){return Qn(e,"svg, .djs-element",!0)}var vw={__init__:["hoverFix"],hoverFix:["type",Mm]};var rc=Math.round,_w="djs-drag-active";function Na(e){e.preventDefault()}function h2(e){return typeof TouchEvent<"u"&&e instanceof TouchEvent}function g2(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function Dm(e,t,i,n){var r={threshold:5,trapClick:!0},o;function a(C){var w=t.viewbox(),P=t._container.getBoundingClientRect();return{x:w.x+(C.x-P.left)/w.scale,y:w.y+(C.y-P.top)/w.scale}}function s(C,w){w=w||o;var P=e.createEvent(k({},w.payload,w.data,{isTouch:w.isTouch}));return e.fire("drag."+C,P)===!1?!1:e.fire(w.prefix+"."+C,P)}function c(C){var w=C.filter(function(P){return n.get(P.id)});w.length&&i.select(w)}function l(C,w){var P=o.payload,T=o.displacement,H=o.globalStart,N=Fn(C),W=_i(N,H),$=o.localStart,Q=a(N),Y=_i(Q,$);if(!o.active&&(w||g2(W)>o.threshold)){if(k(P,{x:rc($.x+T.x),y:rc($.y+T.y),dx:0,dy:0},{originalEvent:C}),s("start")===!1)return b();o.active=!0,o.keepSelection||(P.previousSelection=i.get(),i.select(null)),o.cursor&&ka(o.cursor),t.addMarker(t.getRootElement(),_w)}Wp(C),o.active&&(k(P,{x:rc(Q.x+T.x),y:rc(Q.y+T.y),dx:rc(Y.x),dy:rc(Y.y)},{originalEvent:C}),s("move"))}function d(C){var w,P=!0;o.active&&(C&&(o.payload.originalEvent=C,Wp(C)),P=s("end")),P===!1&&s("rejected"),w=D(P!==!0),s("ended",w)}function u(C){It("Escape",C)&&(Na(C),b())}function p(C){var w;o.active&&(w=tm(e),setTimeout(w,400),Na(C)),d(C)}function m(C){l(C)}function f(C){var w=o.payload;w.hoverGfx=C.gfx,w.hover=C.element,s("hover")}function _(C){s("out");var w=o.payload;w.hoverGfx=null,w.hover=null}function b(C){var w;if(o){var P=o.active;P&&s("cancel"),w=D(C),P&&s("canceled",w)}}function D(C){var w,P;s("cleanup"),em(),o.trapClick?P=p:P=d,Se.unbind(document,"mousemove",l),Se.unbind(document,"dragstart",Na),Se.unbind(document,"selectstart",Na),Se.unbind(document,"mousedown",P,!0),Se.unbind(document,"mouseup",P,!0),Se.unbind(document,"keyup",u),Se.unbind(document,"touchstart",m,!0),Se.unbind(document,"touchcancel",b,!0),Se.unbind(document,"touchmove",l,!0),Se.unbind(document,"touchend",d,!0),e.off("element.hover",f),e.off("element.out",_),t.removeMarker(t.getRootElement(),_w);var T=o.payload.previousSelection;return C!==!1&&T&&!i.get().length&&c(T),w=o,o=null,w}function R(C,w,P,T){o&&b(!1),typeof w=="string"&&(T=P,P=w,w=null),T=k({},r,T||{});var H=T.data||{},N,W,$,Q,Y;T.trapClick?Q=p:Q=d,C?(N=no(C)||C,W=Fn(C),Wp(C),N.type==="dragstart"&&Na(N)):(N=null,W={x:0,y:0}),$=a(W),w||(w=$),Y=h2(N),o=k({prefix:P,data:H,payload:{},globalStart:W,displacement:_i(w,$),localStart:$,isTouch:Y},T),T.manual||(Y?(Se.bind(document,"touchstart",m,!0),Se.bind(document,"touchcancel",b,!0),Se.bind(document,"touchmove",l,!0),Se.bind(document,"touchend",d,!0)):(Se.bind(document,"mousemove",l),Se.bind(document,"dragstart",Na),Se.bind(document,"selectstart",Na),Se.bind(document,"mousedown",Q,!0),Se.bind(document,"mouseup",Q,!0)),Se.bind(document,"keyup",u),e.on("element.hover",f),e.on("element.out",_)),s("init"),T.autoActivate&&l(C,!0)}e.on("diagram.destroy",b),this.init=R,this.move=l,this.hover=f,this.out=_,this.end=d,this.cancel=b,this.context=function(){return o},this.setOptions=function(C){k(r,C)}}Dm.$inject=["eventBus","canvas","selection","elementRegistry"];var bi={__depends__:[vw,Ut],dragging:["type",Dm]};function ta(e,t,i){this._canvas=i,this._opts=k({scrollThresholdIn:[20,20,20,20],scrollThresholdOut:[0,0,0,0],scrollRepeatTimeout:15,scrollStep:10},e);var n=this;t.on("drag.move",function(r){var o=n._toBorderPoint(r);n.startScroll(o)}),t.on(["drag.cleanup"],function(){n.stopScroll()})}ta.$inject=["config.autoScroll","eventBus","canvas"];ta.prototype.startScroll=function(e){var t=this._canvas,i=this._opts,n=this,r=t.getContainer().getBoundingClientRect(),o=[e.x,e.y,r.width-e.x,r.height-e.y];this.stopScroll();for(var a=0,s=0,c=0;c<4;c++)v2(o[c],i.scrollThresholdOut[c],i.scrollThresholdIn[c])&&(c===0?a=i.scrollStep:c==1?s=i.scrollStep:c==2?a=-i.scrollStep:c==3&&(s=-i.scrollStep));(a!==0||s!==0)&&(t.scroll({dx:a,dy:s}),this._scrolling=setTimeout(function(){n.startScroll(e)},i.scrollRepeatTimeout))};function v2(e,t,i){return t<e&&e<i}ta.prototype.stopScroll=function(){clearTimeout(this._scrolling)};ta.prototype.setOptions=function(e){this._opts=k({},this._opts,e)};ta.prototype._toBorderPoint=function(e){var t=this._canvas._container.getBoundingClientRect(),i=Fn(e.originalEvent);return{x:i.x-t.left,y:i.y-t.top}};var bw={__depends__:[bi],__init__:["autoScroll"],autoScroll:["type",ta]};function Nl(e){this._commandStack=e.get("commandStack",!1)}Nl.$inject=["injector"];Nl.prototype.allowed=function(e,t){var i=!0,n=this._commandStack;return n&&(i=n.canExecute(e,t)),i===void 0?!0:i};var ii={__init__:["rules"],rules:["type",Nl]};var Am=Math.round,_2=Math.max;function b2(e,t){var i=e.x,n=e.y;return[["M",i,n],["m",0,-t],["a",t,t,0,1,1,0,2*t],["a",t,t,0,1,1,0,-2*t],["z"]]}function y2(e){var t=[];return e.forEach(function(i,n){t.push([n===0?"M":"L",i.x,i.y])}),t}var yw=10;function x2(e,t){var i,n;for(i=0;n=e[i];i++)if(Vo(n,t)<=yw)return{point:e[i],bendpoint:!0,index:i};return null}function w2(e,t){var i=yl(b2(t,yw),y2(e)),n=i[0],r=i[i.length-1],o;return n?n!==r?n.segment2!==r.segment2?(o=_2(n.segment2,r.segment2)-1,{point:e[o],bendpoint:!0,index:o}):{point:{x:Am(n.x+r.x)/2,y:Am(n.y+r.y)/2},index:n.segment2}:{point:{x:Am(n.x),y:Am(n.y)},index:n.segment2}:null}function Ll(e,t){return x2(e,t)||w2(e,t)}function xw(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function bv(e){return Math.atan((e[1].y-e[0].y)/(e[1].x-e[0].x))}function ww(e,t){return t?{x:Math.cos(t)*e.x-Math.sin(t)*e.y,y:Math.sin(t)*e.x+Math.cos(t)*e.y}:e}function E2(e,t,i){var n=[{n:e[0]-i[0],lambda:t[0]},{n:e[1]-i[1],lambda:t[1]}],r=n[0].n*t[0]+n[1].n*t[1],o=n[0].lambda*t[0]+n[1].lambda*t[1];return-r/o}function Bl(e,t){var i=t[0],n=t[1],r={x:n.x-i.x,y:n.y-i.y},o=E2([i.x,i.y],[r.x,r.y],[e.x,e.y]);return{x:i.x+o*r.x,y:i.y+o*r.y}}function Pm(e,t){var i=Bl(e,t),n={x:i.x-e.x,y:i.y-e.y};return xw(n)}function jl(e,t){return xw({x:e.x-t.x,y:e.y-t.y})}var yv="djs-bendpoint",xv="djs-segment-dragger";function C2(e,t){var i=Fn(t),n=e._container.getBoundingClientRect(),r;r={x:n.left,y:n.top};var o=e.viewbox();return{x:o.x+(i.x-r.x)/o.scale,y:o.y+(i.y-r.y)/o.scale}}function Vl(e,t,i){var n=C2(e,i),r=Ll(t,n);return r}function zl(e,t){var i=ie("g");Re(i).add(yv),me(e,i);var n=ie("circle");J(n,{cx:0,cy:0,r:4}),Re(n).add("djs-visual"),me(i,n);var r=ie("circle");return J(r,{cx:0,cy:0,r:10}),Re(r).add("djs-hit"),me(i,r),t&&Re(i).add(t),i}function S2(e,t,i,n){var r=ie("g");me(e,r);var o=18,a=6,s=11,c=M2(t,i,n),l=a+s,d=ie("rect");J(d,{x:-o/2,y:-a/2,width:o,height:a}),Re(d).add("djs-visual"),me(r,d);var u=ie("rect");return J(u,{x:-c/2,y:-l/2,width:c,height:l}),Re(u).add("djs-hit"),me(r,u),Cp(r,n==="v"?90:0,0,0),r}function Rm(e,t,i){var n=ie("g"),r=_l(t,i),o=Xi(t,i);return me(e,n),S2(n,t,i,o),Re(n).add(xv),Re(n).add(o==="h"?"horizontal":"vertical"),mt(n,r.x,r.y),n}function km(e){return Math.abs(Math.round(e*2/3))}function Ew(e,t){var i=D2(e,t);return Bl(e,i)}function M2(e,t,i){var n=t.x-e.x,r=t.y-e.y;return km(i==="h"?n:r)}function D2(e,t){for(var i=t.waypoints,n=1/0,r,o=0;o<i.length-1;o++){var a=i[o],s=i[o+1],c=Pm(e,[a,s]);c<n&&(n=c,r=o)}return[i[r],i[r+1]]}function Om(e,t,i,n,r){function o(C,w,P){var T=C.index,H=C.point,N,W,$,Q,Y,ae;return T<=0||C.bendpoint?!1:(N=w[T-1],W=w[T],$=_l(N,W),Q=Xi(N,W),Y=Math.abs(H.x-$.x),ae=Math.abs(H.y-$.y),Q&&Y<=P&&ae<=P)}function a(C,w){var P=C.waypoints,T,H,N,W;return w.index<=0||w.bendpoint||(T={start:P[w.index-1],end:P[w.index]},H=Xi(T.start,T.end),!H)?null:(H==="h"?N=T.end.x-T.start.x:N=T.end.y-T.start.y,W=km(N)/2,W)}function s(C,w){var P=w.waypoints,T=Vl(t,P,C),H;if(T)return H=a(w,T),o(T,P,H)?r.start(C,w,T.index):n.start(C,w,T.index,!T.bendpoint),!0}function c(C,w,P){Se.bind(C,w,function(T){i.triggerMouseEvent(w,T,P),T.stopPropagation()})}function l(C,w){var P=t.getLayer("overlays"),T=He('.djs-bendpoints[data-element-id="'+to(C.id)+'"]',P);return!T&&w&&(T=ie("g"),J(T,{"data-element-id":C.id}),Re(T).add("djs-bendpoints"),me(P,T),c(T,"mousedown",C),c(T,"click",C),c(T,"dblclick",C)),T}function d(C,w){return He('.djs-segment-dragger[data-segment-idx="'+C+'"]',w)}function u(C,w){w.waypoints.forEach(function(P,T){var H=zl(C);me(C,H),mt(H,P.x,P.y)}),zl(C,"floating")}function p(C,w){for(var P=w.waypoints,T,H,N,W=1;W<P.length;W++)T=P[W-1],H=P[W],Xi(T,H)&&(N=Rm(C,T,H),J(N,{"data-segment-idx":W}),c(N,"mousemove",w))}function m(C){M(gl("."+yv,C),function(w){Qe(w)})}function f(C){M(gl("."+xv,C),function(w){Qe(w)})}function _(C){var w=l(C);return w||(w=l(C,!0),u(w,C),p(w,C)),w}function b(C){var w=l(C);w&&(f(w),m(w),p(w,C),u(w,C))}function D(C,w){var P=He(".floating",C),T=w.point;P&&mt(P,T.x,T.y)}function R(C,w,P){var T=d(w.index,C),H=P[w.index-1],N=P[w.index],W=w.point,$=_l(H,N),Q=Xi(H,N),Y,ae;T&&(Y=A2(T),ae={x:W.x-$.x,y:W.y-$.y},Q==="v"&&(ae={x:ae.y,y:ae.x}),mt(Y,ae.x,ae.y))}e.on("connection.changed",function(C){b(C.element)}),e.on("connection.remove",function(C){var w=l(C.element);w&&Qe(w)}),e.on("element.marker.update",function(C){var w=C.element,P;w.waypoints&&(P=_(w),C.add?Re(P).add(C.marker):Re(P).remove(C.marker))}),e.on("element.mousemove",function(C){var w=C.element,P=w.waypoints,T,H;if(P){if(T=l(w,!0),H=Vl(t,P,C.originalEvent),!H)return;D(T,H),H.bendpoint||R(T,H,P)}}),e.on("element.mousedown",function(C){if(fn(C)){var w=C.originalEvent,P=C.element;if(P.waypoints)return s(w,P)}}),e.on("selection.changed",function(C){var w=C.newSelection,P=w[0];P&&P.waypoints&&_(P)}),e.on("element.hover",function(C){var w=C.element;w.waypoints&&(_(w),i.registerEvent(C.gfx,"mousemove","element.mousemove"))}),e.on("element.out",function(C){i.unregisterEvent(C.gfx,"mousemove","element.mousemove")}),e.on("element.updateId",function(C){var w=C.element,P=C.newId;if(w.waypoints){var T=l(w);T&&J(T,{"data-element-id":P})}}),this.addHandles=_,this.updateHandles=b,this.getBendpointsContainer=l,this.getSegmentDragger=d}Om.$inject=["eventBus","canvas","interactionEvents","bendpointMove","connectionSegmentMove"];function A2(e){return He(".djs-visual",e)}var Cw=Math.round,La="reconnectStart",Ba="reconnectEnd",Hl="updateWaypoints";function Wl(e,t,i,n,r,o){this._injector=e,this.start=function(a,s,c,l){var d=i.getGraphics(s),u=s.source,p=s.target,m=s.waypoints,f;!l&&c===0?f=La:!l&&c===m.length-1?f=Ba:f=Hl;var _=f===Hl?"connection.updateWaypoints":"connection.reconnect",b=r.allowed(_,{connection:s,source:u,target:p});b===!1&&(b=r.allowed(_,{connection:s,source:p,target:u})),b!==!1&&n.init(a,"bendpoint.move",{data:{connection:s,connectionGfx:d,context:{allowed:b,bendpointIndex:c,connection:s,source:u,target:p,insert:l,type:f}}})},t.on("bendpoint.move.hover",function(a){var s=a.context,c=s.connection,l=c.source,d=c.target,u=a.hover,p=s.type;s.hover=u;var m;if(u){var f=p===Hl?"connection.updateWaypoints":"connection.reconnect";if(m=s.allowed=r.allowed(f,{connection:c,source:p===La?u:l,target:p===Ba?u:d}),m){s.source=p===La?u:l,s.target=p===Ba?u:d;return}m===!1&&(m=s.allowed=r.allowed(f,{connection:c,source:p===Ba?u:d,target:p===La?u:l})),m&&(s.source=p===Ba?u:d,s.target=p===La?u:l)}}),t.on(["bendpoint.move.out","bendpoint.move.cleanup"],function(a){var s=a.context,c=s.type;s.hover=null,s.source=null,s.target=null,c!==Hl&&(s.allowed=!1)}),t.on("bendpoint.move.end",function(a){var s=a.context,c=s.allowed,l=s.bendpointIndex,d=s.connection,u=s.insert,p=d.waypoints.slice(),m=s.source,f=s.target,_=s.type,b=s.hints||{},D={x:Cw(a.x),y:Cw(a.y)};if(!c)return!1;_===Hl?(u?p.splice(l,0,D):p[l]=D,b.bendpointMove={insert:u,bendpointIndex:l},p=this.cropWaypoints(d,p),o.updateWaypoints(d,qy(p),b)):(_===La?(b.docking="source",$l(s)&&(b.docking="target",b.newWaypoints=p.reverse())):_===Ba&&(b.docking="target",$l(s)&&(b.docking="source",b.newWaypoints=p.reverse())),o.reconnect(d,m,f,D,b))},this)}Wl.$inject=["injector","eventBus","canvas","dragging","rules","modeling"];Wl.prototype.cropWaypoints=function(e,t){var i=this._injector.get("connectionDocking",!1);if(!i)return t;var n=e.waypoints;return e.waypoints=t,e.waypoints=i.getCroppedWaypoints(e),t=e.waypoints,e.waypoints=n,t};function $l(e){var t=e.hover,i=e.source,n=e.target,r=e.type;if(r===La)return t&&n&&t===n&&i!==n;if(r===Ba)return t&&i&&t===i&&i!==n}var P2="reconnectStart",k2="reconnectEnd",Sw="updateWaypoints",Ul="connect-ok",Tm="connect-not-ok",Mw="connect-hover",Dw="djs-updating",Aw="djs-dragging",Pw=1100;function Im(e,t,i,n){this._injector=t;var r=t.get("connectionPreview",!1);i.on("bendpoint.move.start",function(o){var a=o.context,s=a.bendpointIndex,c=a.connection,l=a.insert,d=c.waypoints,u=d.slice();a.waypoints=d,l&&u.splice(s,0,{x:o.x,y:o.y}),c.waypoints=u;var p=a.draggerGfx=zl(n.getLayer("overlays"));Re(p).add("djs-dragging"),n.addMarker(c,Aw),n.addMarker(c,Dw)}),i.on("bendpoint.move.hover",function(o){var a=o.context,s=a.allowed,c=a.hover,l=a.type;if(c){if(n.addMarker(c,Mw),l===Sw)return;s?(n.removeMarker(c,Tm),n.addMarker(c,Ul)):s===!1&&(n.removeMarker(c,Ul),n.addMarker(c,Tm))}}),i.on(["bendpoint.move.out","bendpoint.move.cleanup"],Pw,function(o){var a=o.context,s=a.hover,c=a.target;s&&(n.removeMarker(s,Mw),n.removeMarker(s,c?Ul:Tm))}),i.on("bendpoint.move.move",function(o){var a=o.context,s=a.allowed,c=a.bendpointIndex,l=a.draggerGfx,d=a.hover,u=a.type,p=a.connection,m=p.source,f=p.target,_=p.waypoints.slice(),b={x:o.x,y:o.y},D=a.hints||{},R={};r&&(D.connectionStart&&(R.connectionStart=D.connectionStart),D.connectionEnd&&(R.connectionEnd=D.connectionEnd),u===P2?$l(a)?(R.connectionEnd=R.connectionEnd||b,R.source=f,R.target=d||m,_=_.reverse()):(R.connectionStart=R.connectionStart||b,R.source=d||m,R.target=f):u===k2?$l(a)?(R.connectionStart=R.connectionStart||b,R.source=d||f,R.target=m,_=_.reverse()):(R.connectionEnd=R.connectionEnd||b,R.source=m,R.target=d||f):(R.noCropping=!0,R.noLayout=!0,_[c]=b),u===Sw&&(_=e.cropWaypoints(p,_)),R.waypoints=_,r.drawPreview(a,s,R)),mt(l,o.x,o.y)},this),i.on(["bendpoint.move.end","bendpoint.move.cancel"],Pw,function(o){var a=o.context,s=a.connection,c=a.draggerGfx,l=a.hover,d=a.target,u=a.waypoints;s.waypoints=u,Qe(c),n.removeMarker(s,Dw),n.removeMarker(s,Aw),l&&(n.removeMarker(l,Ul),n.removeMarker(l,d?Ul:Tm)),r&&r.cleanUp(a)})}Im.$inject=["bendpointMove","injector","eventBus","canvas"];var kw="connect-hover",Rw="djs-updating";function Ow(e,t,i){return wv(e,t,e[t]+i)}function wv(e,t,i){return{x:t==="x"?i:e.x,y:t==="y"?i:e.y}}function R2(e,t,i,n){var r=Math.max(t[n],i[n]),o=Math.min(t[n],i[n]),a=20,s=Math.min(Math.max(o+a,e[n]),r-a);return wv(t,n,s)}function Iw(e){return e==="x"?"y":"x"}function Tw(e,t,i){var n,r;return e.original?e.original:(n=ue(t),r=Iw(i),wv(e,r,n[r]))}function Fm(e,t,i,n,r,o){var a=e.get("connectionDocking",!1);this.start=function(u,p,m){var f,_=i.getGraphics(p),b=m-1,D=m,R=p.waypoints,C=R[b],w=R[D],P=Vl(i,R,u),T,H,N;T=Xi(C,w),T&&(H=T==="v"?"x":"y",b===0&&(C=Tw(C,p.source,H)),D===R.length-1&&(w=Tw(w,p.target,H)),P?N=P.point:N={x:(C.x+w.x)/2,y:(C.y+w.y)/2},f={connection:p,segmentStartIndex:b,segmentEndIndex:D,segmentStart:C,segmentEnd:w,axis:H,dragPosition:N},n.init(u,N,"connectionSegment.move",{cursor:H==="x"?"resize-ew":"resize-ns",data:{connection:p,connectionGfx:_,context:f}}))};function s(u,p){if(!a)return p;var m=u.waypoints,f;return u.waypoints=p,f=a.getCroppedWaypoints(u),u.waypoints=m,f}function c(u){r.update("connection",u.connection,u.connectionGfx)}function l(u,p,m){var f=u.newWaypoints,_=u.segmentStartIndex+p,b=f[_],D=u.segmentEndIndex+p,R=f[D],C=Iw(u.axis),w=R2(m,b,R,C);mt(u.draggerGfx,w.x,w.y)}function d(u,p){var m=0,f=u.filter(function(_,b){return Ts(u[b-1],u[b+1],_)?(m=b<=p?m-1:m,!1):!0});return{waypoints:f,segmentOffset:m}}t.on("connectionSegment.move.start",function(u){var p=u.context,m=u.connection,f=i.getLayer("overlays");p.originalWaypoints=m.waypoints.slice(),p.draggerGfx=Rm(f,p.segmentStart,p.segmentEnd),Re(p.draggerGfx).add("djs-dragging"),i.addMarker(m,Rw)}),t.on("connectionSegment.move.move",function(u){var p=u.context,m=p.connection,f=p.segmentStartIndex,_=p.segmentEndIndex,b=p.segmentStart,D=p.segmentEnd,R=p.axis,C=p.originalWaypoints.slice(),w=Ow(b,R,u["d"+R]),P=Ow(D,R,u["d"+R]),T=C.length,H=0;C[f]=w,C[_]=P;var N,W;f<2&&(N=xt(m.source,w),f===1?N==="intersect"&&(C.shift(),C[0]=w,H--):N!=="intersect"&&(C.unshift(b),H++)),_>T-3&&(W=xt(m.target,P),_===T-2?W==="intersect"&&(C.pop(),C[C.length-1]=P):W!=="intersect"&&C.push(D)),p.newWaypoints=m.waypoints=s(m,C),l(p,H,u),p.newSegmentStartIndex=f+H,c(u)}),t.on("connectionSegment.move.hover",function(u){u.context.hover=u.hover,i.addMarker(u.hover,kw)}),t.on(["connectionSegment.move.out","connectionSegment.move.cleanup"],function(u){var p=u.context.hover;p&&i.removeMarker(p,kw)}),t.on("connectionSegment.move.cleanup",function(u){var p=u.context,m=p.connection;p.draggerGfx&&Qe(p.draggerGfx),i.removeMarker(m,Rw)}),t.on(["connectionSegment.move.cancel","connectionSegment.move.end"],function(u){var p=u.context,m=p.connection;m.waypoints=p.originalWaypoints,c(u)}),t.on("connectionSegment.move.end",function(u){var p=u.context,m=p.connection,f=p.newWaypoints,_=p.newSegmentStartIndex;f=f.map(function(P){return{original:P.original,x:Math.round(P.x),y:Math.round(P.y)}});var b=d(f,_),D=b.waypoints,R=s(m,D),C=b.segmentOffset,w={segmentMove:{segmentStartIndex:p.segmentStartIndex,newSegmentStartIndex:_+C}};o.updateWaypoints(m,R,w)})}Fm.$inject=["injector","eventBus","canvas","dragging","graphicsFactory","modeling"];var O2=Math.abs,Fw=Math.round;function Nw(e,t,i){i=i===void 0?10:i;var n,r;for(n=0;n<t.length;n++)if(r=t[n],O2(r-e)<=i)return r}function Nm(e){return{x:e.x,y:e.y}}function Lm(e){return{x:e.x+e.width,y:e.y+e.height}}function Qi(e,t){return!e||isNaN(e.x)||isNaN(e.y)?t:{x:Fw(e.x+e.width/2),y:Fw(e.y+e.height/2)}}function or(e,t){var i=e.snapped;return i?typeof t=="string"?i[t]:i.x&&i.y:!1}function bt(e,t,i){if(typeof t!="string")throw new Error("axis must be in [x, y]");if(typeof i!="number"&&i!==!1)throw new Error("value must be Number or false");var n,r=e[t],o=e.snapped=e.snapped||{};return i===!1?o[t]=!1:(o[t]=!0,n=i-r,e[t]+=n,e["d"+t]+=n),r}function Bm(e){return e.children||[]}var T2=Math.abs,Lw=Math.round,Ev=10;function jm(e){function t(o,a){if(oe(o)){for(var s=o.length;s--;)if(T2(o[s]-a)<=Ev)return o[s]}else{o=+o;var c=a%o;if(c<Ev)return a-c;if(c>o-Ev)return a-c+o}return a}function i(o,a){if(o.waypoints)return Ew(a,o);if(o.width)return{x:Lw(o.width/2+o.x),y:Lw(o.height/2+o.y)}}function n(o){var a=o.context,s=a.snapPoints,c=a.connection,l=c.waypoints,d=a.segmentStart,u=a.segmentStartIndex,p=a.segmentEnd,m=a.segmentEndIndex,f=a.axis;if(s)return s;var _=[l[u-1],d,p,l[m+1]];return u<2&&_.unshift(i(c.source,o)),m>l.length-3&&_.unshift(i(c.target,o)),a.snapPoints=s={horizontal:[],vertical:[]},M(_,function(b){b&&(b=b.original||b,f==="y"&&s.horizontal.push(b.y),f==="x"&&s.vertical.push(b.x))}),s}e.on("connectionSegment.move.move",1500,function(o){var a=n(o),s=o.x,c=o.y,l,d;if(a){l=t(a.vertical,s),d=t(a.horizontal,c);var u=s-l,p=c-d;k(o,{dx:o.dx-u,dy:o.dy-p,x:l,y:d}),(u||a.vertical.indexOf(s)!==-1)&&bt(o,"x",l),(p||a.horizontal.indexOf(c)!==-1)&&bt(o,"y",d)}});function r(o){var a=o.snapPoints,s=o.connection.waypoints,c=o.bendpointIndex;if(a)return a;var l=[s[c-1],s[c+1]];return o.snapPoints=a={horizontal:[],vertical:[]},M(l,function(d){d&&(d=d.original||d,a.horizontal.push(d.y),a.vertical.push(d.x))}),a}e.on(["connect.hover","connect.move","connect.end"],1500,function(o){var a=o.context,s=a.hover,c=s&&i(s,o);!Fe(s)||!c||!c.x||!c.y||(bt(o,"x",c.x),bt(o,"y",c.y))}),e.on(["bendpoint.move.move","bendpoint.move.end"],1500,function(o){var a=o.context,s=r(a),c=a.hover,l=c&&i(c,o),d=o.x,u=o.y,p,m;if(s){p=t(l?s.vertical.concat([l.x]):s.vertical,d),m=t(l?s.horizontal.concat([l.y]):s.horizontal,u);var f=d-p,_=u-m;k(o,{dx:o.dx-f,dy:o.dy-_,x:o.x-f,y:o.y-_}),(f||s.vertical.indexOf(d)!==-1)&&bt(o,"x",p),(_||s.horizontal.indexOf(u)!==-1)&&bt(o,"y",m)}})}jm.$inject=["eventBus"];var Bw={__depends__:[bi,ii],__init__:["bendpoints","bendpointSnapping","bendpointMovePreview"],bendpoints:["type",Om],bendpointMove:["type",Wl],bendpointMovePreview:["type",Im],connectionSegmentMove:["type",Fm],bendpointSnapping:["type",jm]};function zm(e,t,i,n){function r(a,s){return n.allowed("connection.create",{source:a,target:s})}function o(a,s){return r(s,a)}e.on("connect.hover",function(a){var s=a.context,c=s.start,l=a.hover,d;if(s.hover=l,d=s.canExecute=r(c,l),!To(d)){if(d!==!1){s.source=c,s.target=l;return}d=s.canExecute=o(c,l),!To(d)&&d!==!1&&(s.source=l,s.target=c)}}),e.on(["connect.out","connect.cleanup"],function(a){var s=a.context;s.hover=null,s.source=null,s.target=null,s.canExecute=!1}),e.on("connect.end",function(a){var s=a.context,c=s.canExecute,l=s.connectionStart,d={x:a.x,y:a.y},u=s.source,p=s.target;if(!c)return!1;var m=null,f={connectionStart:Vm(s)?d:l,connectionEnd:Vm(s)?l:d};it(c)&&(m=c),s.connection=i.connect(u,p,m,f)}),this.start=function(a,s,c,l){it(c)||(l=c,c=ue(s)),t.init(a,"connect",{autoActivate:l,data:{shape:s,context:{start:s,connectionStart:c}}})}}zm.$inject=["eventBus","dragging","modeling","rules"];function Vm(e){var t=e.hover,i=e.source,n=e.target;return t&&i&&t===i&&i!==n}var I2=1100,F2=900,jw="connect-ok",Vw="connect-not-ok";function Hm(e,t,i){var n=e.get("connectionPreview",!1);n&&t.on("connect.move",function(r){var o=r.context,a=o.canExecute,s=o.hover,c=o.source,l=o.start,d=o.startPosition,u=o.target,p=o.connectionStart||d,m=o.connectionEnd||{x:r.x,y:r.y},f=p,_=m;Vm(o)&&(f=m,_=p),n.drawPreview(o,a,{source:c||l,target:u||s,connectionStart:f,connectionEnd:_})}),t.on("connect.hover",F2,function(r){var o=r.context,a=r.hover,s=o.canExecute;s!==null&&i.addMarker(a,s?jw:Vw)}),t.on(["connect.out","connect.cleanup"],I2,function(r){var o=r.hover;o&&(i.removeMarker(o,jw),i.removeMarker(o,Vw))}),n&&t.on("connect.cleanup",function(r){n.cleanUp(r.context)})}Hm.$inject=["injector","eventBus","canvas"];var oc={__depends__:[Ut,ii,bi],__init__:["connectPreview"],connect:["type",zm],connectPreview:["type",Hm]};var N2="djs-dragger";function ar(e,t,i,n){this._canvas=t,this._graphicsFactory=i,this._elementFactory=n,this._connectionDocking=e.get("connectionDocking",!1),this._layouter=e.get("layouter",!1)}ar.$inject=["injector","canvas","graphicsFactory","elementFactory"];ar.prototype.drawPreview=function(e,t,i){i=i||{};var n=e.connectionPreviewGfx,r=e.getConnection,o=i.source,a=i.target,s=i.waypoints,c=i.connectionStart,l=i.connectionEnd,d=i.noLayout,u=i.noCropping,p=i.noNoop,m,f=this;if(n||(n=e.connectionPreviewGfx=this.createConnectionPreviewGfx()),Kr(n),r||(r=e.getConnection=L2(function(_,b,D){return f.getConnection(_,b,D)})),t&&(m=r(t,o,a)),!m){!p&&this.drawNoopPreview(n,i);return}m.waypoints=s||[],this._layouter&&!d&&(m.waypoints=this._layouter.layoutConnection(m,{source:o,target:a,connectionStart:c,connectionEnd:l,waypoints:i.waypoints||m.waypoints})),(!m.waypoints||!m.waypoints.length)&&(m.waypoints=[o?ue(o):c,a?ue(a):l]),this._connectionDocking&&(o||a)&&!u&&(m.waypoints=this._connectionDocking.getCroppedWaypoints(m,o,a)),this._graphicsFactory.drawConnection(n,m,{stroke:"var(--element-dragger-color)"})};ar.prototype.drawNoopPreview=function(e,t){var i=t.source,n=t.target,r=t.connectionStart||ue(i),o=t.connectionEnd||ue(n),a=this.cropWaypoints(r,o,i,n),s=this.createNoopConnection(a[0],a[1]);me(e,s)};ar.prototype.cropWaypoints=function(e,t,i,n){var r=this._graphicsFactory,o=i&&r.getShapePath(i),a=n&&r.getShapePath(n),s=r.getConnectionPath({waypoints:[e,t]});return e=i&&xl(o,s,!0)||e,t=n&&xl(a,s,!1)||t,[e,t]};ar.prototype.cleanUp=function(e){e&&e.connectionPreviewGfx&&Qe(e.connectionPreviewGfx)};ar.prototype.getConnection=function(e){var t=B2(e);return this._elementFactory.createConnection(t)};ar.prototype.createConnectionPreviewGfx=function(){var e=ie("g");return J(e,{pointerEvents:"none"}),Re(e).add(N2),me(this._canvas.getActiveLayer(),e),e};ar.prototype.createNoopConnection=function(e,t){return Bo([e,t],{stroke:"#333",strokeDasharray:[1],strokeWidth:2,"pointer-events":"none"})};function L2(e){var t={};return function(i){var n=JSON.stringify(i),r=t[n];return r||(r=t[n]=e.apply(null,arguments)),r}}function B2(e){return it(e)?e:{}}var zw={__init__:["connectionPreview"],connectionPreview:["type",ar]};var j2=new Cr("ps"),V2=["marker-start","marker-mid","marker-end"],z2=["circle","ellipse","line","path","polygon","polyline","path","rect"];function Dr(e,t,i,n){this._elementRegistry=e,this._canvas=i,this._styles=n}Dr.$inject=["elementRegistry","eventBus","canvas","styles"];Dr.prototype.cleanUp=function(){console.warn("PreviewSupport#cleanUp is deprecated and will be removed in future versions. You do not need to manually clean up previews anymore. cf. https://github.com/bpmn-io/diagram-js/pull/906")};Dr.prototype.getGfx=function(e){return this._elementRegistry.getGraphics(e)};Dr.prototype.addDragger=function(e,t,i,n="djs-dragger"){i=i||this.getGfx(e);var r=yg(i),o=i.getBoundingClientRect();return this._cloneMarkers(er(r),n),J(r,this._styles.cls(n,[],{x:o.top,y:o.left})),me(t,r),J(r,"data-preview-support-element-id",e.id),r};Dr.prototype.addFrame=function(e,t){var i=ie("rect",{class:"djs-resize-overlay",width:e.width,height:e.height,x:e.x,y:e.y});return me(t,i),J(i,"data-preview-support-element-id",e.id),i};Dr.prototype._cloneMarkers=function(e,t="djs-dragger",i=e){var n=this;e.childNodes&&e.childNodes.forEach(r=>{n._cloneMarkers(r,t,i)}),U2(e)&&V2.forEach(function(r){if(J(e,r)){var o=H2(e,r,n._canvas.getContainer());o&&n._cloneMarker(i,e,o,r,t)}})};Dr.prototype._cloneMarker=function(e,t,i,n,r="djs-dragger"){var o=[i.id,r,j2.next()].join("-"),a=He("marker#"+i.id,e);e=e||this._canvas._svg;var s=a||yg(i);s.id=o,Re(s).add(r);var c=He(":scope > defs",e);c||(c=ie("defs"),me(e,c)),me(c,s);var l=W2(s.id);J(t,n,l)};function H2(e,t,i){var n=$2(J(e,t));return He("marker#"+n,i||document)}function $2(e){return e.match(/url\(['"]?#([^'"]*)['"]?\)/)[1]}function W2(e){return"url(#"+e+")"}function U2(e){return z2.indexOf(e.nodeName)!==-1}var Ln={__init__:["previewSupport"],previewSupport:["type",Dr]};var $m="complex-preview",Hw=(()=>{class e{constructor(i,n,r){this._canvas=i,this._graphicsFactory=n,this._previewSupport=r,this._markers=[]}create(i){this.cleanUp();let{created:n=[],moved:r=[],removed:o=[],resized:a=[]}=i,s=this._canvas.getLayer($m);n.filter(c=>!G2(c)).forEach(c=>{let l;Fe(c)?(l=this._graphicsFactory._createContainer("connection",ie("g")),this._graphicsFactory.drawConnection(er(l),c)):(l=this._graphicsFactory._createContainer("shape",ie("g")),this._graphicsFactory.drawShape(er(l),c),mt(l,c.x,c.y)),this._previewSupport.addDragger(c,s,l)}),r.forEach(({element:c,delta:l})=>{this._previewSupport.addDragger(c,s,void 0,"djs-dragging"),this._canvas.addMarker(c,"djs-element-hidden"),this._markers.push([c,"djs-element-hidden"]);let d=this._previewSupport.addDragger(c,s);Fe(c)?mt(d,l.x,l.y):mt(d,c.x+l.x,c.y+l.y)}),o.forEach(c=>{this._previewSupport.addDragger(c,s,void 0,"djs-dragging"),this._canvas.addMarker(c,"djs-element-hidden"),this._markers.push([c,"djs-element-hidden"])}),a.forEach(({shape:c,bounds:l})=>{this._canvas.addMarker(c,"djs-hidden"),this._markers.push([c,"djs-hidden"]),this._previewSupport.addDragger(c,s,void 0,"djs-dragging");let d=this._graphicsFactory._createContainer("shape",ie("g"));this._graphicsFactory.drawShape(er(d),c,{width:l.width,height:l.height}),mt(d,l.x,l.y),this._previewSupport.addDragger(c,s,d)})}cleanUp(){Kr(this._canvas.getLayer($m)),this._markers.forEach(([i,n])=>this._canvas.removeMarker(i,n)),this._markers=[]}show(){this._canvas.showLayer($m)}hide(){this._canvas.hideLayer($m)}}return e.$inject=["canvas","graphicsFactory","previewSupport"],e})();function G2(e){return e.hidden}var $w={__depends__:[Ln],__init__:["complexPreview"],complexPreview:["type",Hw]};var Cv=["top","bottom","left","right"],Wm=10;function Gl(e,t){V.call(this,e),this.postExecuted(["connection.create","connection.layout","connection.updateWaypoints"],function(r){var o=r.context,a=o.connection,s=a.source,c=a.target,l=o.hints||{};l.createElementsBehavior!==!1&&(i(s),i(c))}),this.postExecuted(["label.create"],function(r){var o=r.context,a=o.shape,s=o.hints||{};s.createElementsBehavior!==!1&&i(a.labelTarget)}),this.postExecuted(["elements.create"],function(r){var o=r.context,a=o.elements,s=o.hints||{};s.createElementsBehavior!==!1&&a.forEach(function(c){i(c)})});function i(r){if(Go(r)&&!Fe(r)){var o=K2(r);o&&n(r,o)}}function n(r,o){var a=ue(r),s=r.label,c=ue(s);if(s.parent){var l=ce(r),d;switch(o){case"top":d={x:a.x,y:l.top-Wm-s.height/2};break;case"left":d={x:l.left-Wm-s.width/2,y:a.y};break;case"bottom":d={x:a.x,y:l.bottom+Wm+s.height/2};break;case"right":d={x:l.right+Wm+s.width/2,y:a.y};break}var u=_i(d,c);t.moveShape(s,u)}}}z(Gl,V);Gl.$inject=["eventBus","modeling"];function q2(e){var t=e.host,i=ue(e),n=xt(i,t),r;n.indexOf("-")>=0?r=n.split("-"):r=[n];var o=Cv.filter(function(a){return r.indexOf(a)===-1});return o}function Y2(e){var t=ue(e),i=[].concat(e.incoming.map(function(n){return n.waypoints[n.waypoints.length-2]}),e.outgoing.map(function(n){return n.waypoints[1]})).map(function(n){return Ww(t,n)});return i}function K2(e){var t=ue(e.label),i=ue(e),n=Ww(i,t);if(X2(n)){var r=Y2(e);if(e.host){var o=q2(e);r=r.concat(o)}var a=Cv.filter(function(s){return r.indexOf(s)===-1});if(a.indexOf(n)===-1)return a[0]}}function Ww(e,t){return xt(t,e,5)}function X2(e){return Cv.indexOf(e)!==-1}function ql(e){V.call(this,e),this.preExecute("shape.append",function(t){var i=t.source,n=t.shape;t.position||(v(n,"bpmn:TextAnnotation")?t.position={x:i.x+i.width/2+75,y:i.y-50-n.height/2}:t.position={x:i.x+i.width+80+n.width/2,y:i.y+i.height/2})},!0)}z(ql,V);ql.$inject=["eventBus"];function Yl(e,t){e.invoke(V,this),this.postExecute("shape.move",function(i){var n=i.newParent,r=i.shape,o=fe(r.incoming.concat(r.outgoing),function(a){return v(a,"bpmn:Association")});M(o,function(a){t.moveConnection(a,{x:0,y:0},n)})},!0)}z(Yl,V);Yl.$inject=["injector","modeling"];var Uw=500;function ac(e,t){t.invoke(V,this),this._bpmnReplace=e;var i=this;this.postExecuted("elements.create",Uw,function(n){var r=n.elements;r=r.filter(function(o){var a=o.host;return Gw(o,a)}),r.length===1&&r.map(function(o){return r.indexOf(o)}).forEach(function(o){var a=r[o];n.elements[o]=i._replaceShape(r[o],a)})},!0),this.preExecute("elements.move",Uw,function(n){var r=n.shapes,o=n.newHost;if(r.length===1){var a=r[0];Gw(a,o)&&(n.shapes=[i._replaceShape(a,o)])}},!0)}ac.$inject=["bpmnReplace","injector"];z(ac,V);ac.prototype._replaceShape=function(e,t){var i=Z2(e),n={type:"bpmn:BoundaryEvent",host:t};return i&&(n.eventDefinitionType=i.$type),this._bpmnReplace.replaceElement(e,n,{layoutConnection:!1})};function Z2(e){var t=U(e),i=t.eventDefinitions;return i&&i[0]}function Gw(e,t){return!xe(e)&&ge(e,["bpmn:IntermediateThrowEvent","bpmn:IntermediateCatchEvent"])&&!!t}function Kl(e,t){V.call(this,e);function i(n){return fe(n.attachers,function(r){return v(r,"bpmn:BoundaryEvent")})}this.postExecute("connection.create",function(n){var r=n.context.source,o=n.context.target,a=i(o);v(r,"bpmn:EventBasedGateway")&&v(o,"bpmn:ReceiveTask")&&a.length>0&&t.removeElements(a)}),this.postExecute("connection.reconnect",function(n){var r=n.context.oldSource,o=n.context.newSource;v(r,"bpmn:Gateway")&&v(o,"bpmn:EventBasedGateway")&&M(o.outgoing,function(a){var s=a.target,c=i(s);v(s,"bpmn:ReceiveTask")&&c.length>0&&t.removeElements(c)})})}Kl.$inject=["eventBus","modeling"];z(Kl,V);function Zl(e,t,i){V.call(this,e),this.preExecute("shape.replace",s,!0),this.postExecuted("shape.replace",c,!0),this.preExecute("connection.create",r,!0),this.postExecuted("connection.delete",n,!0),this.postExecuted("connection.reconnect",o,!0),this.postExecuted("element.updateProperties",a,!0);function n(b){let D=b.source,R=b.target;sc(D)&&Xl(R)&&d(R)}function r(b){let D=b.connection,R=b.source,C=b.target;sc(R)&&Um(C)&&(l(C),p(R,[D]))}function o(b){let D=b.newTarget,R=b.oldSource,C=b.oldTarget;if(C!==D){let w=R;Xl(C)&&d(C),sc(w)&&Um(D)&&l(D)}}function a(b){let{element:D}=b;Xl(D)?(u(D),m(D)):Um(D)&&f(D)}function s(b){let{newData:D,oldShape:R}=b;if(sc(b.oldShape)&&D.eventDefinitionType!=="bpmn:CompensateEventDefinition"||D.type!=="bpmn:BoundaryEvent"){let C=R.outgoing.find(({target:w})=>Xl(w));C&&C.target&&(b._connectionTarget=C.target)}else if(!sc(b.oldShape)&&D.eventDefinitionType==="bpmn:CompensateEventDefinition"&&D.type==="bpmn:BoundaryEvent"){let C=R.outgoing.find(({target:w})=>Um(w));C&&C.target&&(b._connectionTarget=C.target),_(R)}}function c(b){let{_connectionTarget:D,newShape:R}=b;D&&t.connect(R,D)}function l(b){t.updateProperties(b,{isForCompensation:!0})}function d(b){t.updateProperties(b,{isForCompensation:void 0})}function u(b){for(let D of b.incoming)i.canConnect(D.source,b)||t.removeConnection(D);for(let D of b.outgoing)i.canConnect(b,D.target)||t.removeConnection(D)}function p(b,D){b.outgoing.filter(w=>v(w,"bpmn:Association")).filter(w=>Xl(w.target)&&!D.includes(w)).forEach(w=>t.removeConnection(w))}function m(b){let D=b.attachers.slice();D.length&&t.removeElements(D)}function f(b){let D=b.incoming.filter(R=>sc(R.source));t.removeElements(D)}function _(b){let D=b.outgoing.filter(R=>v(R,"bpmn:SequenceFlow"));t.removeElements(D)}}z(Zl,V);Zl.$inject=["eventBus","modeling","bpmnRules"];function Xl(e){let t=U(e);return t&&t.get("isForCompensation")}function sc(e){return e&&v(e,"bpmn:BoundaryEvent")&&Qr(e,"bpmn:CompensateEventDefinition")}function Um(e){return e&&v(e,"bpmn:Activity")&&!kt(e)}function Ql(e){e.invoke(V,this),this.preExecute("shape.create",1500,function(t){var i=t.context,n=i.parent,r=i.shape;v(n,"bpmn:Lane")&&!v(r,"bpmn:Lane")&&(i.parent=co(n,"bpmn:Participant"))})}Ql.$inject=["injector"];z(Ql,V);function Jl(e,t){V.call(this,e),this.preExecute("shape.create",function(i){var n=i.context,r=n.shape;if(v(r,"bpmn:DataObjectReference")&&r.type!=="label"){var o=t.create("bpmn:DataObject");r.businessObject.dataObjectRef=o}})}Jl.$inject=["eventBus","bpmnFactory"];z(Jl,V);var Sv=20,Mv=20,qw=30,Gm=2e3;function ed(e,t,i){V.call(this,t),t.on(["create.start","shape.move.start"],Gm,function(r){var o=r.context,a=o.shape,s=e.getRootElement();if(!(!v(a,"bpmn:Participant")||!v(s,"bpmn:Process")||!s.children.length)){var c=s.children.filter(function(u){return!v(u,"bpmn:Group")&&!xe(u)&&!Fe(u)});if(c.length){var l=Je(c),d=Q2(a,l);k(a,d),o.createConstraints=J2(a,l)}}}),t.on("create.start",Gm,function(r){var o=r.context,a=o.shape,s=e.getRootElement(),c=e.getGraphics(s);function l(d){d.element=s,d.gfx=c}v(a,"bpmn:Participant")&&v(s,"bpmn:Process")&&(t.on("element.hover",Gm,l),t.once("create.cleanup",function(){t.off("element.hover",l)}))});function n(){var r=e.getRootElement();return v(r,"bpmn:Collaboration")?r:i.makeCollaboration()}this.preExecute("elements.create",Gm,function(r){var o=r.elements,a=r.parent,s=eF(o),c;s&&v(a,"bpmn:Process")&&(r.parent=n(),c=r.hints=r.hints||{},c.participant=s,c.process=a,c.processRef=U(s).get("processRef"))},!0),this.preExecute("shape.create",function(r){var o=r.parent,a=r.shape;v(a,"bpmn:Participant")&&v(o,"bpmn:Process")&&(r.parent=n(),r.process=o,r.processRef=U(a).get("processRef"))},!0),this.execute("shape.create",function(r){var o=r.hints||{},a=r.process||o.process,s=r.shape,c=o.participant;a&&(!c||s===c)&&U(s).set("processRef",U(a))},!0),this.revert("shape.create",function(r){var o=r.hints||{},a=r.process||o.process,s=r.processRef||o.processRef,c=r.shape,l=o.participant;a&&(!l||c===l)&&U(c).set("processRef",s)},!0),this.postExecute("shape.create",function(r){var o=r.hints||{},a=r.process||r.hints.process,s=r.shape,c=o.participant;if(a){var l=a.children.slice();c?s===c&&i.moveElements(l,{x:0,y:0},c):i.moveElements(l,{x:0,y:0},s)}},!0)}ed.$inject=["canvas","eventBus","modeling"];z(ed,V);function Q2(e,t){t={width:t.width+Sv*2+qw,height:t.height+Mv*2};var i=Math.max(e.width,t.width),n=Math.max(e.height,t.height);return{x:-i/2,y:-n/2,width:i,height:n}}function J2(e,t){return t=ce(t),{bottom:t.top+e.height/2-Mv,left:t.right-e.width/2+Sv,top:t.bottom-e.height/2+Mv,right:t.left+e.width/2-Sv-qw}}function eF(e){return ve(e,function(t){return v(t,"bpmn:Participant")})}var Yw="__targetRef_placeholder";function td(e,t){V.call(this,e),this.executed(["connection.create","connection.delete","connection.move","connection.reconnect"],Kw(o)),this.reverted(["connection.create","connection.delete","connection.move","connection.reconnect"],Kw(o));function i(a,s,c){var l=a.get("dataInputAssociations");return ve(l,function(d){return d!==c&&d.targetRef===s})}function n(a,s){var c=a.get("properties"),l=ve(c,function(d){return d.name===Yw});return!l&&s&&(l=t.create("bpmn:Property",{name:Yw}),et(c,l)),l}function r(a,s){var c=n(a);c&&(i(a,c,s)||at(a.get("properties"),c))}function o(a){var s=a.context,c=s.connection,l=c.businessObject,d=c.target,u=d&&d.businessObject,p=s.newTarget,m=p&&p.businessObject,f=s.oldTarget||s.target,_=f&&f.businessObject,b=c.businessObject,D;_&&_!==u&&r(_,l),m&&m!==u&&r(m,l),u?(D=n(u,!0),b.targetRef=D):b.targetRef=null}}td.$inject=["eventBus","bpmnFactory"];z(td,V);function Kw(e){return function(t){var i=t.context,n=i.connection;if(v(n,"bpmn:DataInputAssociation"))return e(t)}}function cc(e){this._bpmnUpdater=e}cc.$inject=["bpmnUpdater"];cc.prototype.execute=function(e){var t=e.dataStoreBo,i=e.dataStoreDi,n=e.newSemanticParent,r=e.newDiParent;return e.oldSemanticParent=t.$parent,e.oldDiParent=i.$parent,this._bpmnUpdater.updateSemanticParent(t,n),this._bpmnUpdater.updateDiParent(i,r),[]};cc.prototype.revert=function(e){var t=e.dataStoreBo,i=e.dataStoreDi,n=e.oldSemanticParent,r=e.oldDiParent;return this._bpmnUpdater.updateSemanticParent(t,n),this._bpmnUpdater.updateDiParent(i,r),[]};function id(e,t,i,n){V.call(this,n),t.registerHandler("dataStore.updateContainment",cc);function r(){return i.filter(function(s){return v(s,"bpmn:Participant")&&U(s).processRef})[0]}function o(s){return s.children.filter(function(c){return v(c,"bpmn:DataStoreReference")&&!c.labelTarget})}function a(s,c){var l=s.businessObject||s;if(c=c||r(),c){var d=c.businessObject||c;t.execute("dataStore.updateContainment",{dataStoreBo:l,dataStoreDi:Me(s),newSemanticParent:d.processRef||d,newDiParent:Me(c)})}}this.preExecute("shape.create",function(s){var c=s.context,l=c.shape;v(l,"bpmn:DataStoreReference")&&l.type!=="label"&&(c.hints||(c.hints={}),c.hints.autoResize=!1)}),this.preExecute("elements.move",function(s){var c=s.context,l=c.shapes,d=l.filter(function(u){return v(u,"bpmn:DataStoreReference")});d.length&&(c.hints||(c.hints={}),c.hints.autoResize=l.filter(function(u){return!v(u,"bpmn:DataStoreReference")}))}),this.postExecute("shape.create",function(s){var c=s.context,l=c.shape,d=l.parent;v(l,"bpmn:DataStoreReference")&&l.type!=="label"&&v(d,"bpmn:Collaboration")&&a(l)}),this.postExecute("shape.move",function(s){var c=s.context,l=c.shape,d=c.oldParent,u=l.parent;if(!v(d,"bpmn:Collaboration")&&v(l,"bpmn:DataStoreReference")&&l.type!=="label"&&v(u,"bpmn:Collaboration")){var p=v(d,"bpmn:Participant")?d:iF(d,"bpmn:Participant");a(l,p)}}),this.postExecute("shape.delete",function(s){var c=s.context,l=c.shape,d=e.getRootElement();ge(l,["bpmn:Participant","bpmn:SubProcess"])&&v(d,"bpmn:Collaboration")&&o(d).filter(function(u){return tF(u,l)}).forEach(function(u){a(u)})}),this.postExecute("canvas.updateRoot",function(s){var c=s.context,l=c.oldRoot,d=c.newRoot,u=o(l);u.forEach(function(p){v(d,"bpmn:Process")&&a(p,d)})})}id.$inject=["canvas","commandStack","elementRegistry","eventBus"];z(id,V);function tF(e,t){for(var i=e.businessObject||e,n=t.businessObject||t;i.$parent;){if(i.$parent===n.processRef||n)return!0;i=i.$parent}return!1}function iF(e,t){for(;e.parent;){if(v(e.parent,t))return e.parent;e=e.parent}}var Ym=Math.max,Km=Math.min,nF=20;function Xm(e,t){return{top:e.top-t.top,right:e.right-t.right,bottom:e.bottom-t.bottom,left:e.left-t.left}}function Xw(e,t,i){var n=i.x,r=i.y,o={x:e.x,y:e.y,width:e.width,height:e.height};return t.indexOf("n")!==-1?(o.y=e.y+r,o.height=e.height-r):t.indexOf("s")!==-1&&(o.height=e.height+r),t.indexOf("e")!==-1?o.width=e.width+n:t.indexOf("w")!==-1&&(o.x=e.x+n,o.width=e.width-n),o}function Zw(e,t){return{x:e.x+(t.left||0),y:e.y+(t.top||0),width:e.width-(t.left||0)+(t.right||0),height:e.height-(t.top||0)+(t.bottom||0)}}function qm(e,t,i){var n=t[e],r=i.min&&i.min[e],o=i.max&&i.max[e];return he(r)&&(n=(/top|left/.test(e)?Km:Ym)(n,r)),he(o)&&(n=(/top|left/.test(e)?Ym:Km)(n,o)),n}function Qw(e,t){if(!t)return e;var i=ce(e);return Ca({top:qm("top",i,t),right:qm("right",i,t),bottom:qm("bottom",i,t),left:qm("left",i,t)})}function Jw(e,t,i,n){var r=ce(t),o={top:/n/.test(e)?r.bottom-i.height:r.top,left:/w/.test(e)?r.right-i.width:r.left,bottom:/s/.test(e)?r.top+i.height:r.bottom,right:/e/.test(e)?r.left+i.width:r.right},a=n?ce(n):o,s={top:Km(o.top,a.top),left:Km(o.left,a.left),bottom:Ym(o.bottom,a.bottom),right:Ym(o.right,a.right)};return Ca(s)}function nd(e,t){return typeof e<"u"?e:nF}function rF(e,t){var i,n,r,o;return typeof t=="object"?(i=nd(t.left),n=nd(t.right),r=nd(t.top),o=nd(t.bottom)):i=n=r=o=nd(t),{x:e.x-i,y:e.y-r,width:e.width+i+n,height:e.height+r+o}}function oF(e){return!(e.waypoints||e.type==="label")}function Zm(e,t){var i;if(e.length===void 0?i=fe(e.children,oF):i=e,i.length)return rF(Je(i),t)}var ia=Math.abs;function aF(e,t){return Xm(ce(t),ce(e))}var sF=["bpmn:Participant","bpmn:Process","bpmn:SubProcess"],Ji=30;function lc(e,t){return t=t||[],e.children.filter(function(i){v(i,"bpmn:Lane")&&(lc(i,t),t.push(i))}),t}function hn(e){return e.children.filter(function(t){return v(t,"bpmn:Lane")})}function Ci(e){return co(e,sF)||e}function eE(e,t){var i=Ci(e),n=v(i,"bpmn:Process")?[]:[i],r=lc(i,n),o=ce(e),a=ce(t),s=aF(e,t),c=[],l=nt(e);return r.forEach(function(d){if(d!==e){var u=l?0:s.top,p=l?s.right:0,m=l?0:s.bottom,f=l?s.left:0,_=ce(d);s.top&&(ia(_.bottom-o.top)<10&&(m=a.top-_.bottom),ia(_.top-o.top)<5&&(u=a.top-_.top)),s.left&&(ia(_.right-o.left)<10&&(p=a.left-_.right),ia(_.left-o.left)<5&&(f=a.left-_.left)),s.bottom&&(ia(_.top-o.bottom)<10&&(u=a.bottom-_.top),ia(_.bottom-o.bottom)<5&&(m=a.bottom-_.bottom)),s.right&&(ia(_.left-o.right)<10&&(f=a.right-_.left),ia(_.right-o.right)<5&&(p=a.right-_.right)),(u||p||m||f)&&c.push({shape:d,newBounds:Zw(d,{top:u,right:p,bottom:m,left:f})})}}),c}var cF=500;function rd(e,t){V.call(this,e);function i(n,r){var o=nt(n),a=hn(r),s=[],c=[],l=[],d=[];if(Jn(a,function(b){return o?b.y>n.y?c.push(b):s.push(b):b.x>n.x?d.push(b):l.push(b),b.children}),!!a.length){var u;o?c.length&&s.length?u=n.height/2:u=n.height:d.length&&l.length?u=n.width/2:u=n.width;var p,m,f,_;s.length&&(p=t.calculateAdjustments(s,"y",u,n.y-10),t.makeSpace(p.movingShapes,p.resizingShapes,{x:0,y:u},"s")),c.length&&(m=t.calculateAdjustments(c,"y",-u,n.y+n.height+10),t.makeSpace(m.movingShapes,m.resizingShapes,{x:0,y:-u},"n")),l.length&&(f=t.calculateAdjustments(l,"x",u,n.x-10),t.makeSpace(f.movingShapes,f.resizingShapes,{x:u,y:0},"e")),d.length&&(_=t.calculateAdjustments(d,"x",-u,n.x+n.width+10),t.makeSpace(_.movingShapes,_.resizingShapes,{x:-u,y:0},"w"))}}this.postExecuted("shape.delete",cF,function(n){var r=n.context,o=r.hints,a=r.shape,s=r.oldParent;v(a,"bpmn:Lane")&&(o&&o.nested||i(a,s))})}rd.$inject=["eventBus","spaceTool"];z(rd,V);var tE=500;function dc(e,t){t.invoke(V,this),this._bpmnReplace=e;var i=this;this.postExecuted("elements.create",tE,function(n){var r=n.elements;r.filter(function(o){var a=o.host;return iE(o,a)}).map(function(o){return r.indexOf(o)}).forEach(function(o){n.elements[o]=i._replaceShape(r[o])})},!0),this.preExecute("elements.move",tE,function(n){var r=n.shapes,o=n.newHost;r.forEach(function(a,s){var c=a.host;iE(a,dF(r,c)?c:o)&&(r[s]=i._replaceShape(a))})},!0)}dc.$inject=["bpmnReplace","injector"];z(dc,V);dc.prototype._replaceShape=function(e){var t=lF(e),i;return t?i={type:"bpmn:IntermediateCatchEvent",eventDefinitionType:t.$type}:i={type:"bpmn:IntermediateThrowEvent"},this._bpmnReplace.replaceElement(e,i,{layoutConnection:!1})};function lF(e){var t=U(e),i=t.eventDefinitions;return i&&i[0]}function iE(e,t){return!xe(e)&&v(e,"bpmn:BoundaryEvent")&&!t}function dF(e,t){return e.indexOf(t)!==-1}function od(e,t,i){V.call(this,e);function n(r,o,a){var s=o.waypoints,c,l,d,u,p,m,f,_=r.outgoing.slice(),b=r.incoming.slice(),D;he(a.width)?D=ue(a):D=a;var R=Ll(s,D);if(R){if(c=s.slice(0,R.index),l=s.slice(R.index+(R.bendpoint?1:0)),!c.length||!l.length)return;d=R.bendpoint?s[R.index]:D,(c.length===1||!nE(r,c[c.length-1]))&&c.push(rE(d)),(l.length===1||!nE(r,l[0]))&&l.unshift(rE(d))}u=o.source,p=o.target,t.canConnect(u,r,o)&&(i.reconnectEnd(o,r,c||D),m=o),t.canConnect(r,p,o)&&(m?f=i.connect(r,p,{type:o.type,waypoints:l}):(i.reconnectStart(o,r,l||D),f=o));var C=[].concat(m&&fe(b,function(w){return w.source===m.source})||[],f&&fe(_,function(w){return w.target===f.target})||[]);C.length&&i.removeElements(C)}this.preExecute("elements.move",function(r){var o=r.newParent,a=r.shapes,s=r.delta,c=a[0];if(!(!c||!o)){o&&o.waypoints&&(r.newParent=o=o.parent);var l=ue(c),d={x:l.x+s.x,y:l.y+s.y},u=ve(o.children,function(p){var m=t.canInsert(a,p);return m&&Ll(p.waypoints,d)});u&&(r.targetFlow=u,r.position=d)}},!0),this.postExecuted("elements.move",function(r){var o=r.shapes,a=r.targetFlow,s=r.position;a&&n(o[0],a,s)},!0),this.preExecute("shape.create",function(r){var o=r.parent,a=r.shape;t.canInsert(a,o)&&(r.targetFlow=o,r.parent=o.parent)},!0),this.postExecuted("shape.create",function(r){var o=r.shape,a=r.targetFlow,s=r.position;a&&n(o,a,s)},!0)}z(od,V);od.$inject=["eventBus","bpmnRules","modeling"];function nE(e,t){var i=t.x,n=t.y;return i>=e.x&&i<=e.x+e.width&&n>=e.y&&n<=e.y+e.height}function rE(e){return k({},e)}function ad(e,t){V.call(this,e),this.preExecuted("connection.create",function(i){var n=i.context,r=n.connection,o=n.source,a=n.target,s=n.hints;if(!(s&&s.createElementsBehavior===!1)&&uc(r)){var c=[];v(o,"bpmn:EventBasedGateway")?c=a.incoming.filter(l=>l!==r&&uc(l)):c=a.incoming.filter(l=>l!==r&&uc(l)&&v(l.source,"bpmn:EventBasedGateway")),c.forEach(function(l){t.removeConnection(l)})}}),this.preExecuted("shape.replace",function(i){var n=i.context,r=n.newShape;if(v(r,"bpmn:EventBasedGateway")){var o=r.outgoing.filter(uc).reduce(function(a,s){return a.includes(s.target)?a:a.concat(s.target)},[]);o.forEach(function(a){a.incoming.filter(uc).forEach(function(s){let c=a.incoming.filter(uc).filter(function(l){return l.source===r});(s.source!==r||c.length>1)&&t.removeConnection(s)})})}})}ad.$inject=["eventBus","modeling"];z(ad,V);function uc(e){return v(e,"bpmn:SequenceFlow")}var Qm=1500,oE=2e3;function Jm(e,t,i){t.on(["create.hover","create.move","create.out","create.end","shape.move.hover","shape.move.move","shape.move.out","shape.move.end"],Qm,function(n){var r=n.context,o=r.shape||n.shape,a=n.hover;v(a,"bpmn:Lane")&&!ge(o,["bpmn:Lane","bpmn:Participant"])&&(n.hover=Ci(a),n.hoverGfx=e.getGraphics(n.hover));var s=i.getRootElement();a!==s&&(o.labelTarget||ge(o,["bpmn:Group","bpmn:TextAnnotation"]))&&(n.hover=s,n.hoverGfx=e.getGraphics(n.hover))}),t.on(["connect.hover","connect.out","connect.end","connect.cleanup","global-connect.hover","global-connect.out","global-connect.end","global-connect.cleanup"],Qm,function(n){var r=n.hover;v(r,"bpmn:Lane")&&(n.hover=Ci(r)||r,n.hoverGfx=e.getGraphics(n.hover))}),t.on(["bendpoint.move.hover"],Qm,function(n){var r=n.context,o=n.hover,a=r.type;v(o,"bpmn:Lane")&&/reconnect/.test(a)&&(n.hover=Ci(o)||o,n.hoverGfx=e.getGraphics(n.hover))}),t.on(["connect.start"],Qm,function(n){var r=n.context,o=r.start;v(o,"bpmn:Lane")&&(r.start=Ci(o)||o)}),t.on("shape.move.start",oE,function(n){var r=n.shape;v(r,"bpmn:Lane")&&(n.shape=Ci(r)||r)}),t.on("spaceTool.move",oE,function(n){var r=n.hover;r&&v(r,"bpmn:Lane")&&(n.hover=Ci(r))})}Jm.$inject=["elementRegistry","eventBus","canvas"];function aE(e){return e.create("bpmn:Category")}function sE(e){return e.create("bpmn:CategoryValue")}function cE(e,t,i){return et(t.get("categoryValue"),e),e.$parent=t,et(i.get("rootElements"),t),t.$parent=i,e}function lE(e){var t=e.$parent;return t&&(at(t.get("categoryValue"),e),e.$parent=null),e}function dE(e){var t=e.$parent;return t&&(at(t.get("rootElements"),e),e.$parent=null),e}var uE=770;function sd(e,t,i,n,r,o){r.invoke(V,this);function a(){return i.filter(function(f){return v(f,"bpmn:Group")})}function s(f,_){return f.some(function(b){var D=U(b),R=D.categoryValueRef&&D.categoryValueRef.$parent;return R===_})}function c(f,_){return f.some(function(b){var D=U(b);return D.categoryValueRef===_})}function l(f,_,b){var D=a().filter(function(R){return R.businessObject!==b});_&&!s(D,_)&&dE(_),f&&!c(D,f)&&lE(f)}function d(f,_){return cE(f,_,t.getDefinitions())}function u(f,_){var b=U(f),D=b.categoryValueRef;D||(D=b.categoryValueRef=_.categoryValue=_.categoryValue||sE(e));var R=D.$parent;R||(R=D.$parent=_.category=_.category||aE(e)),d(D,R,t.getDefinitions())}function p(f,_){var b=_.category,D=_.categoryValue,R=U(f);D?(R.categoryValueRef=null,l(D,b,R)):l(null,R.categoryValueRef.$parent,R)}this.execute("label.create",function(f){var _=f.context,b=_.labelTarget;v(b,"bpmn:Group")&&u(b,_)}),this.revert("label.create",function(f){var _=f.context,b=_.labelTarget;v(b,"bpmn:Group")&&p(b,_)}),this.execute("shape.delete",function(f){var _=f.context,b=_.shape,D=U(b);if(!(!v(b,"bpmn:Group")||b.labelTarget)){var R=_.categoryValue=D.categoryValueRef,C;R&&(C=_.category=R.$parent,l(R,C,D),D.categoryValueRef=null)}}),this.reverted("shape.delete",function(f){var _=f.context,b=_.shape;if(!(!v(b,"bpmn:Group")||b.labelTarget)){var D=_.category,R=_.categoryValue,C=U(b);R&&(C.categoryValueRef=R,d(R,D))}}),this.execute("shape.create",function(f){var _=f.context,b=_.shape;!v(b,"bpmn:Group")||b.labelTarget||U(b).categoryValueRef&&u(b,_)}),this.reverted("shape.create",function(f){var _=f.context,b=_.shape;!v(b,"bpmn:Group")||b.labelTarget||U(b).categoryValueRef&&p(b,_)});function m(f,_){var b=e.create(f.$type);return o.copyElement(f,b,null,_)}n.on("copyPaste.copyElement",uE,function(f){var _=f.descriptor,b=f.element;if(!(!v(b,"bpmn:Group")||b.labelTarget)){var D=U(b);if(D.categoryValueRef){var R=D.categoryValueRef;_.categoryValue=m(R,!0),R.$parent&&(_.category=m(R.$parent,!0))}}}),n.on("copyPaste.pasteElement",uE,function(f){var _=f.descriptor,b=_.businessObject,D=_.categoryValue,R=_.category;D&&(D=b.categoryValueRef=m(D)),R&&(D.$parent=m(R)),delete _.category,delete _.categoryValue})}sd.$inject=["bpmnFactory","bpmnjs","elementRegistry","eventBus","injector","moddleCopy"];z(sd,V);function pc(e,t,i,n){var r,o,a,s,c;return r=(n.y-i.y)*(t.x-e.x)-(n.x-i.x)*(t.y-e.y),r==0?null:(o=e.y-i.y,a=e.x-i.x,c=(n.x-i.x)*o-(n.y-i.y)*a,s=c/r,{x:Math.round(e.x+s*(t.x-e.x)),y:Math.round(e.y+s*(t.y-e.y))})}function ef(e){function t(n,r,o){var a={x:o.x,y:o.y-50},s={x:o.x-50,y:o.y},c=pc(n,r,o,a),l=pc(n,r,o,s),d;c&&l?pE(c,o)>pE(l,o)?d=l:d=c:d=c||l,n.original=d}function i(n){var r=n.waypoints;t(r[0],r[1],ue(n.source)),t(r[r.length-1],r[r.length-2],ue(n.target))}e.on("bpmnElement.added",function(n){var r=n.element;r.waypoints&&i(r)})}ef.$inject=["eventBus"];function pE(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function cd(e){V.call(this,e);var t=["bpmn:Participant","bpmn:Lane"];this.executed(["shape.move","shape.create","shape.resize"],function(i){var n=i.context.shape,r=U(n),o=Me(n);if(ge(r,t)){var a=o.get("isHorizontal");a===void 0&&(a=!0),o.set("isHorizontal",a)}})}cd.$inject=["eventBus"];z(cd,V);var vE=Math.sqrt,_E=Math.min,uF=Math.max,mE=Math.abs;function fE(e){return Math.pow(e,2)}function ld(e,t){return vE(fE(e.x-t.x)+fE(e.y-t.y))}function bE(e,t){var i=0,n,r,o,a,s,c,l,d,u,p,m;for(i=0;i<t.length-1;i++){if(n=t[i],r=t[i+1],gE(n,r)?l=[n]:(o=ld(e,n),a=ld(e,r),c=_E(o,a),l=pF(n,r,e,c)),l.length<1)throw new Error("expected between [1, 2] circle -> line intersections");l.length===1&&(d={type:"bendpoint",position:l[0],segmentIndex:i,bendpointIndex:gE(n,l[0])?i:i+1}),l.length===2&&(s=fF(l[0],l[1]),d={type:"segment",position:s,segmentIndex:i,relativeLocation:ld(n,s)/ld(n,r)}),u=ld(d.position,e),(!m||p>u)&&(m=d,p=u)}return m}function pF(e,t,i,n){var r=t.x-e.x,o=t.y-e.y,a=i.x-e.x,s=i.y-e.y,c=r*r+o*o,l=r*a+o*s,d=a*a+s*s-n*n,u=l/c,p=d/c,m=u*u-p;if(m<0&&m>-1e-6&&(m=0),m<0)return[];var f=vE(m),_=-u+f,b=-u-f,D={x:e.x-r*_,y:e.y-o*_};if(m===0)return[D];var R={x:e.x-r*b,y:e.y-o*b};return[D,R].filter(function(C){return mF(C,e,t)})}function mF(e,t,i){return hE(e.x,t.x,i.x)&&hE(e.y,t.y,i.y)}function hE(e,t,i){return e>=_E(t,i)-tf&&e<=uF(t,i)+tf}function fF(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}var tf=.1;function gE(e,t){return mE(e.x-t.x)<=tf&&mE(e.y-t.y)<=tf}function xE(e,t,i,n){var r=i.segmentIndex,o=t.length-e.length;if(n.segmentMove){var a=n.segmentMove.segmentStartIndex,s=n.segmentMove.newSegmentStartIndex;return r===a?s:r>=s?r+o<s?s:r+o:r}if(n.bendpointMove){var c=n.bendpointMove.insert,l=n.bendpointMove.bendpointIndex,d;if(o===0)return r;if(r>=l&&(d=c?r+1:r-1),r<l&&(d=r,c&&i.type!=="bendpoint"&&l-1===r)){var u=wE(t,l);u<i.relativeLocation&&d++}return d}return o===0?r:n.connectionStart&&r===0?0:n.connectionEnd&&r===e.length-2?t.length-2:Math.floor((t.length-2)/2)}function nf(e,t,i,n){var r=0,o=0,a={point:e,delta:{x:0,y:0}},s=bE(e,i),c=s.segmentIndex,l=xE(i,t,s,n);if(l<0||l>t.length-2||l===null)return a;var d=yE(i,c),u=yE(t,l),p=s.position,m=gF(d,p),f=hF(d,u);if(s.type==="bendpoint"){var _=t.length-i.length,b=s.bendpointIndex,D=i[b];if(t.indexOf(D)!==-1)return a;if(_===0){var R=t[b];return r=R.x-s.position.x,o=R.y-s.position.y,{delta:{x:r,y:o},point:{x:e.x+r,y:e.y+o}}}_<0&&b!==0&&b<i.length-1&&(m=wE(i,b))}var C={x:(u[1].x-u[0].x)*m+u[0].x,y:(u[1].y-u[0].y)*m+u[0].y},w=ww({x:e.x-p.x,y:e.y-p.y},f);return r=C.x+w.x-e.x,o=C.y+w.y-e.y,{point:Rn(C),delta:Rn({x:r,y:o})}}function wE(e,t){var i=jl(e[t-1],e[t]),n=jl(e[t],e[t+1]),r=i/(i+n);return r}function hF(e,t){var i=bv(e),n=bv(t);return n-i}function yE(e,t){return[e[t],e[t+1]]}function gF(e,t){var i=jl(e[0],e[1]),n=jl(e[0],t);return i===0?0:n/i}function EE(e,t,i,n){var r=ue(e);return nf(r,t,i,n).delta}function ja(e,t,i){var n=Ks(t),r=Ks(i),o=_i(e,n),a={x:o.x*(i.width/t.width),y:o.y*(i.height/t.height)};return Rn({x:r.x+a.x,y:r.y+a.y})}function Dv(e,t,i){var n=Ks(e),r=Ks(t),o=Ks(i),a=_i(e,n),s=_i(n,r),c=vF(n,t,i);if(c)return c;var l={x:s.x*(i.width/t.width),y:s.y*(i.height/t.height)},d={x:o.x+l.x,y:o.y+l.y};return Rn({x:d.x+a.x-e.x,y:d.y+a.y-e.y})}function vF(e,t,i){var n=ce(t),r=ce(i);if(_F(n,r))return null;var o=xt(t,e),a,s,c;if(o==="top")a={x:0,y:r.bottom-n.bottom};else if(o==="bottom")a={x:0,y:r.top-n.top};else if(o==="right")a={x:r.left-n.left,y:0};else if(o==="left")a={x:r.right-n.right,y:0};else return null;return s={x:e.x+a.x,y:e.y+a.y},c=xt(i,s),c!==o?null:a}function _F(e,t){return bF(e,t)||yF(e,t)}function bF(e,t){return e.right!==t.right&&e.left!==t.left}function yF(e,t){return e.top!==t.top&&e.bottom!==t.bottom}var CE="name",SE="text";function dd(e,t,i,n){V.call(this,e),this.postExecute("element.updateProperties",r),this.postExecute("element.updateModdleProperties",a=>{U(a.context.element)===a.context.moddleElement&&r(a)});function r(a){var s=a.context,c=s.element,l=s.properties;if(CE in l&&t.updateLabel(c,l[CE]),SE in l&&v(c,"bpmn:TextAnnotation")){var d=n.getTextAnnotationBounds({x:c.x,y:c.y,width:c.width,height:c.height},l[SE]||"");t.updateLabel(c,l.text,d)}}this.postExecute(["shape.create","connection.create"],function(a){var s=a.context,c=s.hints||{};if(c.createElementsBehavior!==!1){var l=s.shape||s.connection;xe(l)||!Tn(l)||hi(l)&&t.updateLabel(l,hi(l))}}),this.postExecute("shape.delete",function(a){var s=a.context,c=s.labelTarget,l=s.hints||{};c&&l.unsetLabel!==!1&&t.updateLabel(c,null,null,{removeShape:!1})});function o(a){var s=a.context,c=s.connection,l=c.label,d=k({},s.hints),u=s.newWaypoints||c.waypoints,p=s.oldWaypoints;return typeof d.startChanged>"u"&&(d.startChanged=!!d.connectionStart),typeof d.endChanged>"u"&&(d.endChanged=!!d.connectionEnd),EE(l,u,p,d)}this.postExecute(["connection.layout","connection.updateWaypoints"],function(a){var s=a.context,c=s.hints||{};if(c.labelBehavior!==!1){var l=s.connection,d=l.label,u;!d||!d.parent||(u=o(a),t.moveShape(d,u))}}),this.postExecute(["shape.replace"],function(a){var s=a.context,c=s.newShape,l=s.oldShape,d=U(c);d&&Tn(d)&&l.label&&c.label&&(c.label.x=l.label.x,c.label.y=l.label.y)}),this.postExecute("shape.resize",function(a){var s=a.context,c=s.shape,l=s.newBounds,d=s.oldBounds;if(Go(c)){var u=c.label,p=ue(u),m=EF(d),f=wF(p,m),_=xF(f,d,l);t.moveShape(u,_)}})}z(dd,V);dd.$inject=["eventBus","modeling","bpmnFactory","textRenderer"];function xF(e,t,i){var n=ja(e,t,i);return Rn(_i(n,e))}function wF(e,t){if(t.length){var i=CF(e,t);return Bl(e,i)}}function EF(e){return[[{x:e.x,y:e.y},{x:e.x+(e.width||0),y:e.y}],[{x:e.x+(e.width||0),y:e.y},{x:e.x+(e.width||0),y:e.y+(e.height||0)}],[{x:e.x,y:e.y+(e.height||0)},{x:e.x+(e.width||0),y:e.y+(e.height||0)}],[{x:e.x,y:e.y},{x:e.x,y:e.y+(e.height||0)}]]}function CF(e,t){var i=t.map(function(r){return{line:r,distance:Pm(e,r)}}),n=wi(i,"distance");return n[0].line}function ME(e,t,i,n){return nf(e,t,i,n).point}function ud(e,t){V.call(this,e);function i(n,r){var o=n.context,a=o.connection,s=k({},o.hints),c=o.newWaypoints||a.waypoints,l=o.oldWaypoints;return typeof s.startChanged>"u"&&(s.startChanged=!!s.connectionStart),typeof s.endChanged>"u"&&(s.endChanged=!!s.connectionEnd),ME(r,c,l,s)}this.postExecute(["connection.layout","connection.updateWaypoints"],function(n){var r=n.context,o=r.connection,a=o.outgoing,s=o.incoming;s.forEach(function(c){var l=c.waypoints[c.waypoints.length-1],d=i(n,l),u=[].concat(c.waypoints.slice(0,-1),[d]);t.updateWaypoints(c,u)}),a.forEach(function(c){var l=c.waypoints[0],d=i(n,l),u=[].concat([d],c.waypoints.slice(1));t.updateWaypoints(c,u)})}),this.postExecute(["connection.move"],function(n){var r=n.context,o=r.connection,a=o.outgoing,s=o.incoming,c=r.delta;s.forEach(function(l){var d=l.waypoints[l.waypoints.length-1],u={x:d.x+c.x,y:d.y+c.y},p=[].concat(l.waypoints.slice(0,-1),[u]);t.updateWaypoints(l,p)}),a.forEach(function(l){var d=l.waypoints[0],u={x:d.x+c.x,y:d.y+c.y},p=[].concat([u],l.waypoints.slice(1));t.updateWaypoints(l,p)})})}z(ud,V);ud.$inject=["eventBus","modeling"];function na(e,t,i){var n=rf(e),r=AE(n,t),o=n[0];return r.length?r[r.length-1]:ja(o.original||o,i,t)}function ra(e,t,i){var n=rf(e),r=AE(n,t),o=n[n.length-1];return r.length?r[0]:ja(o.original||o,i,t)}function mc(e,t,i){var n=rf(e),r=DE(t,i),o=n[0];return ja(o.original||o,r,t)}function fc(e,t,i){var n=rf(e),r=DE(t,i),o=n[n.length-1];return ja(o.original||o,r,t)}function DE(e,t){return{x:e.x-t.x,y:e.y-t.y,width:e.width,height:e.height}}function rf(e){var t=e.waypoints;if(!t.length)throw new Error("connection#"+e.id+": no waypoints");return t}function AE(e,t){var i=St(e,MF);return fe(i,function(n){return SF(n,t)})}function SF(e,t){return xt(t,e,1)==="intersect"}function MF(e){return e.original||e}function pd(e,t){V.call(this,e),this.postExecute("shape.replace",function(i){var n=i.oldShape,r=i.newShape;if(DF(n,r)){var o=AF(n);o.incoming.forEach(function(a){var s=ra(a,r,n);t.reconnectEnd(a,r,s)}),o.outgoing.forEach(function(a){var s=na(a,r,n);t.reconnectStart(a,r,s)})}},!0)}pd.$inject=["eventBus","modeling"];z(pd,V);function DF(e,t){return v(e,"bpmn:Participant")&&we(e)&&v(t,"bpmn:Participant")&&!we(t)}function AF(e){var t=vr([e],!1),i=[],n=[];return t.forEach(function(r){r!==e&&(r.incoming.forEach(function(o){v(o,"bpmn:MessageFlow")&&i.push(o)}),r.outgoing.forEach(function(o){v(o,"bpmn:MessageFlow")&&n.push(o)}))},[]),{incoming:i,outgoing:n}}var PF=["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:EscalationEventDefinition","bpmn:ConditionalEventDefinition","bpmn:SignalEventDefinition"];function of(e){let t=U(e);if(!v(t,"bpmn:BoundaryEvent")&&!(v(t,"bpmn:StartEvent")&&kt(t.$parent)))return!1;let i=t.get("eventDefinitions");return!i||!i.length?!1:PF.some(n=>v(i[0],n))}function af(e){return v(e,"bpmn:BoundaryEvent")?"cancelActivity":"isInterrupting"}function md(e,t){e.invoke(V,this),this.postExecuted("shape.replace",function(i){let n=i.context.oldShape,r=i.context.newShape,o=i.context.hints;if(!of(r))return;let a=af(r);if(o.targetElement&&o.targetElement[a]!==void 0)return;let c=U(n).get(a),l=U(r).get(a);c!==l&&t.updateProperties(r,{[a]:c})})}md.$inject=["injector","modeling"];z(md,V);function fd(e,t){V.call(this,e),this.preExecute("shape.resize",function(i){var n=i.shape,r=Me(n),o=r&&r.get("label"),a=o&&o.get("bounds");a&&t.updateModdleProperties(n,o,{bounds:void 0})},!0)}z(fd,V);fd.$inject=["eventBus","modeling"];function hd(e,t,i){V.call(this,e),this.preExecute("shape.delete",function(n){var r=n.context.shape;if(!(r.incoming.length!==1||r.outgoing.length!==1)){var o=r.incoming[0],a=r.outgoing[0];if(!(!v(o,"bpmn:SequenceFlow")||!v(a,"bpmn:SequenceFlow"))&&t.canConnect(o.source,a.target,o)){var s=kF(o.waypoints,a.waypoints);i.reconnectEnd(o,a.target,s)}}})}z(hd,V);hd.$inject=["eventBus","bpmnRules","modeling"];function hc(e){return e.original||e}function kF(e,t){var i=pc(hc(e[e.length-2]),hc(e[e.length-1]),hc(t[1]),hc(t[0]));return i?[].concat(e.slice(0,e.length-1),[i],t.slice(1)):[hc(e[0]),hc(t[t.length-1])]}function gd(e,t){V.call(this,e),this.preExecute("shape.delete",function(i){var n=i.shape,r=n.parent;v(n,"bpmn:Participant")&&(i.collaborationRoot=r)},!0),this.postExecute("shape.delete",function(i){var n=i.collaborationRoot;if(n&&!n.businessObject.participants.length){var r=t.makeProcess(),o=n.children.slice();t.moveElements(o,{x:0,y:0},r)}},!0)}gd.$inject=["eventBus","modeling"];z(gd,V);function vd(e,t,i,n){V.call(this,e);var r=n.get("dragging",!1);function o(c){var l=c.source,d=c.target,u=c.parent;if(u){var p,m;v(c,"bpmn:SequenceFlow")&&(i.canConnectSequenceFlow(l,d)||(m=!0),i.canConnectMessageFlow(l,d)&&(p="bpmn:MessageFlow")),v(c,"bpmn:MessageFlow")&&(i.canConnectMessageFlow(l,d)||(m=!0),i.canConnectSequenceFlow(l,d)&&(p="bpmn:SequenceFlow")),m&&t.removeConnection(c),p&&t.connect(l,d,{type:p,waypoints:c.waypoints.slice()})}}function a(c){var l=c.context,d=l.connection,u=l.newSource||d.source,p=l.newTarget||d.target,m,f;m=i.canConnect(u,p),!(!m||m.type===d.type)&&(f=t.connect(u,p,{type:m.type,associationDirection:m.associationDirection,waypoints:d.waypoints.slice()}),d.parent&&t.removeConnection(d),l.connection=f,r&&s(d,f))}function s(c,l){var d=r.context(),u=d&&d.payload.previousSelection,p;!u||!u.length||(p=u.indexOf(c),p!==-1&&u.splice(p,1,l))}this.postExecuted("elements.move",function(c){var l=c.closure,d=l.allConnections;M(d,o)},!0),this.preExecute("connection.reconnect",a),this.postExecuted("element.updateProperties",function(c){var l=c.context,d=l.properties,u=l.element,p=u.businessObject,m;d.default&&(m=ve(u.outgoing,mi({id:u.businessObject.default.id})),m&&t.updateProperties(m,{conditionExpression:void 0})),d.conditionExpression&&p.sourceRef.default===p&&t.updateProperties(u.source,{default:void 0})})}z(vd,V);vd.$inject=["eventBus","modeling","bpmnRules","injector"];function gc(e,t,i,n,r,o){n.invoke(V,this),this._bpmnReplace=e,this._elementRegistry=i,this._selection=o,this.postExecuted(["elements.create"],500,function(a){var s=a.context,c=s.parent,l=s.elements,d=Ot(l,function(u,p){var m=t.canReplace([p],p.host||p.parent||c);return m?u.concat(m.replacements):u},[]);d.length&&this._replaceElements(l,d)},this),this.postExecuted(["elements.move"],500,function(a){var s=a.context,c=s.newParent,l=s.newHost,d=[];M(s.closure.topLevel,function(p){kt(p)?d=d.concat(p.children):d=d.concat(p)}),d.length===1&&l&&(c=l);var u=t.canReplace(d,c);u&&this._replaceElements(d,u.replacements,l)},this),this.postExecute(["shape.replace"],1500,function(a){var s=a.context,c=s.oldShape,l=s.newShape,d=c.attachers,u;d&&d.length&&(u=t.canReplace(d,l),this._replaceElements(d,u.replacements))},this),this.postExecuted(["shape.replace"],1500,function(a){var s=a.context,c=s.oldShape,l=s.newShape;r.unclaimId(c.businessObject.id,c.businessObject),r.updateProperties(l,{id:c.id})})}z(gc,V);gc.prototype._replaceElements=function(e,t){var i=this._elementRegistry,n=this._bpmnReplace,r=this._selection;M(t,function(o){var a={type:o.newElementType},s=i.get(o.oldElementId),c=e.indexOf(s);e[c]=n.replaceElement(s,a,{select:!1})}),t&&r.select(e)};gc.$inject=["bpmnReplace","bpmnRules","elementRegistry","injector","modeling","selection"];var RF=1500,PE={width:140,height:120},sf={width:300,height:60},cf={width:60,height:300},_d={width:300,height:150},bd={width:150,height:300},Av={width:140,height:120},Pv={width:50,height:30};function lf(e){e.on("resize.start",RF,function(t){var i=t.context,n=i.shape,r=i.direction,o=i.balanced;(v(n,"bpmn:Lane")||v(n,"bpmn:Participant"))&&(i.resizeConstraints=NF(n,r,o)),v(n,"bpmn:SubProcess")&&we(n)&&(i.minDimensions=Av),v(n,"bpmn:TextAnnotation")&&(i.minDimensions=Pv)})}lf.$inject=["eventBus"];var oa=Math.abs,OF=Math.min,TF=Math.max;function kE(e,t,i,n){var r=e[t];e[t]=r===void 0?i:n(i,r)}function vc(e,t,i){return kE(e,t,i,OF)}function _c(e,t,i){return kE(e,t,i,TF)}var IF={top:20,left:50,right:20,bottom:20},FF={top:50,left:20,right:20,bottom:20};function NF(e,t,i){var n=Ci(e),r=!0,o=!0,a=lc(n,[n]),s=ce(e),c={},l={},d=nt(e),u=d?sf:cf;/n/.test(t)?l.top=s.bottom-u.height:/e/.test(t)?l.right=s.left+u.width:/s/.test(t)?l.bottom=s.top+u.height:/w/.test(t)&&(l.left=s.right-u.width),a.forEach(function(f){var _=ce(f);d?(_.top<s.top-10&&(r=!1),_.bottom>s.bottom+10&&(o=!1)):(_.left<s.left-10&&(r=!1),_.right>s.right+10&&(o=!1)),/n/.test(t)&&(i&&oa(s.top-_.bottom)<10&&_c(c,"top",_.top+u.height),oa(s.top-_.top)<5&&vc(l,"top",_.bottom-u.height)),/e/.test(t)&&(i&&oa(s.right-_.left)<10&&vc(c,"right",_.right-u.width),oa(s.right-_.right)<5&&_c(l,"right",_.left+u.width)),/s/.test(t)&&(i&&oa(s.bottom-_.top)<10&&vc(c,"bottom",_.bottom-u.height),oa(s.bottom-_.bottom)<5&&_c(l,"bottom",_.top+u.height)),/w/.test(t)&&(i&&oa(s.left-_.right)<10&&_c(c,"left",_.left+u.width),oa(s.left-_.left)<5&&vc(l,"left",_.right-u.width))});var p=n.children.filter(function(f){return!f.hidden&&!f.waypoints&&(v(f,"bpmn:FlowElement")||v(f,"bpmn:Artifact"))}),m=d?IF:FF;return p.forEach(function(f){var _=ce(f);/n/.test(t)&&(!d||r)&&vc(l,"top",_.top-m.top),/e/.test(t)&&(d||o)&&_c(l,"right",_.right+m.right),/s/.test(t)&&(!d||o)&&_c(l,"bottom",_.bottom+m.bottom),/w/.test(t)&&(d||r)&&vc(l,"left",_.left-m.left)}),{min:l,max:c}}var RE=1001;function df(e,t){e.on("resize.start",RE+500,function(i){var n=i.context,r=n.shape;(v(r,"bpmn:Lane")||v(r,"bpmn:Participant"))&&(n.balanced=!ro(i))}),e.on("resize.end",RE,function(i){var n=i.context,r=n.shape,o=n.canExecute,a=n.newBounds;if(v(r,"bpmn:Lane")||v(r,"bpmn:Participant"))return o&&(a=xp(a),t.resizeLane(r,a,n.balanced)),!1})}df.$inject=["eventBus","modeling"];var LF=500;function yd(e,t,i,n,r){i.invoke(V,this);function o(d){return ge(d,["bpmn:ReceiveTask","bpmn:SendTask"])||BF(d,["bpmn:ErrorEventDefinition","bpmn:EscalationEventDefinition","bpmn:MessageEventDefinition","bpmn:SignalEventDefinition"])}function a(d){var u=e.getDefinitions(),p=u.get("rootElements");return!!ve(p,mi({id:d.id}))}function s(d){if(v(d,"bpmn:ErrorEventDefinition"))return"errorRef";if(v(d,"bpmn:EscalationEventDefinition"))return"escalationRef";if(v(d,"bpmn:MessageEventDefinition"))return"messageRef";if(v(d,"bpmn:SignalEventDefinition"))return"signalRef"}function c(d){if(ge(d,["bpmn:ReceiveTask","bpmn:SendTask"]))return d.get("messageRef");var u=d.get("eventDefinitions"),p=u[0];return p.get(s(p))}function l(d,u){if(ge(d,["bpmn:ReceiveTask","bpmn:SendTask"]))return d.set("messageRef",u);var p=d.get("eventDefinitions"),m=p[0];return m.set(s(m),u)}this.executed(["shape.create","element.updateProperties","element.updateModdleProperties"],function(d){var u=d.shape||d.element;if(o(u)){var p=U(u),m=c(p),f;m&&!a(m)&&(f=e.getDefinitions().get("rootElements"),et(f,m),d.addedRootElement=m)}},!0),this.reverted(["shape.create","element.updateProperties","element.updateModdleProperties"],function(d){var u=d.addedRootElement;if(u){var p=e.getDefinitions().get("rootElements");at(p,u)}},!0),t.on("copyPaste.copyElement",function(d){var u=d.descriptor,p=d.element;if(!(p.labelTarget||!o(p))){var m=U(p),f=c(m);f&&(u.referencedRootElement=f)}}),t.on("copyPaste.pasteElement",LF,function(d){var u=d.descriptor,p=u.businessObject,m=u.referencedRootElement;m&&(a(m)||(m=n.copyElement(m,r.create(m.$type))),l(p,m),delete u.referencedRootElement)})}yd.$inject=["bpmnjs","eventBus","injector","moddleCopy","bpmnFactory"];z(yd,V);function BF(e,t){return oe(t)||(t=[t]),Fi(t,function(i){return Qr(e,i)})}var OE=Math.max;function uf(e){e.on("spaceTool.getMinDimensions",function(t){var i=t.shapes,n=t.axis,r=t.start,o={};return M(i,function(a){var s=a.id;v(a,"bpmn:Participant")&&(o[s]=VF(a,n,r)),v(a,"bpmn:Lane")&&(o[s]=nt(a)?sf:cf),v(a,"bpmn:SubProcess")&&we(a)&&(o[s]=Av),v(a,"bpmn:TextAnnotation")&&(o[s]=Pv),v(a,"bpmn:Group")&&(o[s]=PE)}),o})}uf.$inject=["eventBus"];function jF(e){return e==="x"}function VF(e,t,i){var n=nt(e);if(!$F(e))return n?_d:bd;var r=jF(t),o={};return r?n?o=_d:o={width:HF(e,i,r),height:bd.height}:n?o={width:_d.width,height:zF(e,i,r)}:o=bd,o}function zF(e,t,i){var n;return n=WF(e,t,i),OE(_d.height,n)}function HF(e,t,i){var n;return n=UF(e,t,i),OE(bd.width,n)}function $F(e){return!!hn(e).length}function WF(e,t,i){var n=hn(e),r;return r=kv(n,t,i),e.height-r.height+sf.height}function UF(e,t,i){var n=hn(e),r;return r=kv(n,t,i),e.width-r.width+cf.width}function kv(e,t,i){var n,r,o;for(n=0;n<e.length;n++)if(r=e[n],!i&&t>=r.y&&t<=r.y+r.height||i&&t>=r.x&&t<=r.x+r.width)return o=hn(r),o.length?kv(o,t,i):r}var TE=400,GF=600,IE={x:180,y:160};function Ar(e,t,i,n,r,o,a){V.call(this,t),this._canvas=e,this._eventBus=t,this._modeling=i,this._elementFactory=n,this._bpmnFactory=r,this._bpmnjs=o,this._elementRegistry=a;var s=this;function c(u){return v(u,"bpmn:SubProcess")&&!we(u)}function l(u){var p=u.shape,m=u.newRootElement,f=U(p);m=s._addDiagram(m||f),u.newRootElement=e.addRootElement(m)}function d(u){var p=u.shape,m=U(p);s._removeDiagram(m);var f=u.newRootElement=a.get(In(m));e.removeRootElement(f)}this.executed("shape.create",function(u){var p=u.shape;c(p)&&l(u)},!0),this.postExecuted("shape.create",function(u){var p=u.shape,m=u.newRootElement;!m||!p.children||(s._showRecursively(p.children),s._moveChildrenToShape(p,m))},!0),this.reverted("shape.create",function(u){var p=u.shape;c(p)&&d(u)},!0),this.preExecuted("shape.delete",function(u){var p=u.shape;if(c(p)){var m=a.get(In(p));m&&i.removeElements(m.children.slice())}},!0),this.executed("shape.delete",function(u){var p=u.shape;c(p)&&d(u)},!0),this.reverted("shape.delete",function(u){var p=u.shape;c(p)&&l(u)},!0),this.preExecuted("shape.replace",function(u){var p=u.oldShape,m=u.newShape;!c(p)||!c(m)||(u.oldRoot=e.removeRootElement(In(p)))},!0),this.postExecuted("shape.replace",function(u){var p=u.newShape,m=u.oldRoot,f=e.findRoot(In(p));if(!(!m||!f)){var _=m.children;i.moveElements(_,{x:0,y:0},f)}},!0),this.executed("element.updateProperties",function(u){var p=u.element;if(v(p,"bpmn:SubProcess")){var m=u.properties,f=u.oldProperties,_=f.id,b=m.id;if(_!==b){if(qs(p)){a.updateId(p,Ko(b)),a.updateId(_,b);return}var D=a.get(Ko(_));D&&a.updateId(Ko(_),Ko(b))}}},!0),this.reverted("element.updateProperties",function(u){var p=u.element;if(v(p,"bpmn:SubProcess")){var m=u.properties,f=u.oldProperties,_=f.id,b=m.id;if(_!==b){if(qs(p)){a.updateId(p,Ko(_)),a.updateId(b,_);return}var D=a.get(Ko(b));D&&a.updateId(D,Ko(_))}}},!0),t.on("element.changed",function(u){var p=u.element;if(qs(p)){var m=p,f=a.get(Qg(m));!f||f===m||t.fire("element.changed",{element:f})}}),this.executed("shape.toggleCollapse",TE,function(u){var p=u.shape;v(p,"bpmn:SubProcess")&&(we(p)?d(u):(l(u),s._showRecursively(p.children)))},!0),this.reverted("shape.toggleCollapse",TE,function(u){var p=u.shape;v(p,"bpmn:SubProcess")&&(we(p)?d(u):(l(u),s._showRecursively(p.children)))},!0),this.postExecuted("shape.toggleCollapse",GF,function(u){var p=u.shape;if(v(p,"bpmn:SubProcess")){var m=u.newRootElement;m&&(we(p)?s._moveChildrenToShape(m,p):s._moveChildrenToShape(p,m))}},!0),t.on("copyPaste.createTree",function(u){var p=u.element,m=u.children;if(c(p)){var f=In(p),_=a.get(f);_&&m.push.apply(m,_.children)}}),t.on("copyPaste.copyElement",function(u){var p=u.descriptor,m=u.element,f=u.elements,_=m.parent,b=v(Me(_),"bpmndi:BPMNPlane");if(b){var D=Qg(_),R=ve(f,function(C){return C.id===D});R&&(p.parent=R.id)}}),t.on("copyPaste.pasteElement",function(u){var p=u.descriptor;p.parent&&(c(p.parent)||p.parent.hidden)&&(p.hidden=!0)})}z(Ar,V);Ar.prototype._moveChildrenToShape=function(e,t){var i=this._modeling,n=e.children,r;if(n){n=n.concat(n.reduce(function(l,d){return d.label&&d.label.parent!==e?l.concat(d.label):l},[]));var o=n.filter(function(l){return!l.hidden});if(!o.length){i.moveElements(n,{x:0,y:0},t,{autoResize:!1});return}var a=Je(o);if(!t.x)r={x:IE.x-a.x,y:IE.y-a.y};else{var s=ue(t),c=ue(a);r={x:s.x-c.x,y:s.y-c.y}}i.moveElements(n,r,t,{autoResize:!1})}};Ar.prototype._showRecursively=function(e,t){var i=this,n=[];return e.forEach(function(r){r.hidden=!!t,n=n.concat(r),r.children&&(n=n.concat(i._showRecursively(r.children,r.collapsed||t)))}),n};Ar.prototype._addDiagram=function(e){var t=this._bpmnjs,i=t.getDefinitions().diagrams;return e.businessObject||(e=this._createNewDiagram(e)),i.push(e.di.$parent),e};Ar.prototype._createNewDiagram=function(e){var t=this._bpmnFactory,i=this._elementFactory,n=t.create("bpmndi:BPMNPlane",{bpmnElement:e}),r=t.create("bpmndi:BPMNDiagram",{plane:n});n.$parent=r;var o=i.createRoot({id:In(e),type:e.$type,di:n,businessObject:e,collapsed:!0});return o};Ar.prototype._removeDiagram=function(e){var t=this._bpmnjs,i=t.getDefinitions().diagrams,n=ve(i,function(r){return r.plane.bpmnElement.id===e.id});return i.splice(i.indexOf(n),1),n};Ar.$inject=["canvas","eventBus","modeling","elementFactory","bpmnFactory","bpmnjs","elementRegistry"];function xd(e,t){e.invoke(V,this),this.postExecuted("shape.replace",function(i){var n=i.context.oldShape,r=i.context.newShape;if(!(!v(r,"bpmn:SubProcess")||v(r,"bpmn:AdHocSubProcess")||!(v(n,"bpmn:Task")||v(n,"bpmn:CallActivity"))||!we(r))){var o=qF(r);t.createShape({type:"bpmn:StartEvent"},o,r)}})}xd.$inject=["injector","modeling"];z(xd,V);function qF(e){return{x:e.x+e.width/6,y:e.y+e.height/2}}function wd(e){V.call(this,e),this.preExecute("connection.create",function(t){let{target:i}=t;v(i,"bpmn:TextAnnotation")&&(t.parent=i.parent)},!0),this.preExecute(["shape.create","shape.resize","elements.move"],function(t){let i=t.shapes||[t.shape];i.length===1&&v(i[0],"bpmn:TextAnnotation")&&(t.hints=t.hints||{},t.hints.autoResize=!1)},!0)}z(wd,V);wd.$inject=["eventBus"];function Ed(e,t){V.call(this,e),this.postExecuted("shape.toggleCollapse",1500,function(i){var n=i.shape;if(we(n))return;var r=vr(n);r.forEach(function(a){var s=a.incoming.slice(),c=a.outgoing.slice();M(s,function(l){o(l,!0)}),M(c,function(l){o(l,!1)})});function o(a,s){r.indexOf(a.source)!==-1&&r.indexOf(a.target)!==-1||(s?t.reconnectEnd(a,n,ue(n)):t.reconnectStart(a,n,ue(n)))}},!0)}z(Ed,V);Ed.$inject=["eventBus","modeling"];var Rv=500;function Cd(e,t,i){V.call(this,e);function n(a){a.length&&a.forEach(function(s){s.type==="label"&&!s.businessObject.name&&(s.hidden=!0)})}function r(a,s){var c=a.children,l=s,d,u;return d=YF(c).concat([a]),u=Zm(d),u?(l.width=Math.max(u.width,l.width),l.height=Math.max(u.height,l.height),l.x=u.x+(u.width-l.width)/2,l.y=u.y+(u.height-l.height)/2):(l.x=a.x+(a.width-l.width)/2,l.y=a.y+(a.height-l.height)/2),l}function o(a,s){return{x:a.x+(a.width-s.width)/2,y:a.y+(a.height-s.height)/2,width:s.width,height:s.height}}this.executed(["shape.toggleCollapse"],Rv,function(a){var s=a.context,c=s.shape;v(c,"bpmn:SubProcess")&&(c.collapsed?Me(c).isExpanded=!1:(n(c.children),Me(c).isExpanded=!0))}),this.reverted(["shape.toggleCollapse"],Rv,function(a){var s=a.context,c=s.shape;c.collapsed?Me(c).isExpanded=!1:Me(c).isExpanded=!0}),this.postExecuted(["shape.toggleCollapse"],Rv,function(a){var s=a.context.shape,c=t.getDefaultSize(s),l;s.collapsed?l=o(s,c):l=r(s,c),i.resizeShape(s,l,null,{autoResize:s.collapsed?!1:"nwse"})})}z(Cd,V);Cd.$inject=["eventBus","elementFactory","modeling"];function YF(e){return e.filter(function(t){return!t.hidden})}function Sd(e,t,i,n){t.invoke(V,this),this.preExecute("shape.delete",function(r){var o=r.context,a=o.shape,s=a.businessObject;xe(a)||(v(a,"bpmn:Participant")&&we(a)&&i.ids.unclaim(s.processRef.id),n.unclaimId(s.id,s))}),this.preExecute("connection.delete",function(r){var o=r.context,a=o.connection,s=a.businessObject;n.unclaimId(s.id,s)}),this.preExecute("canvas.updateRoot",function(){var r=e.getRootElement(),o=r.businessObject;v(r,"bpmn:Collaboration")&&i.ids.unclaim(o.id)})}z(Sd,V);Sd.$inject=["canvas","injector","moddle","modeling"];function Md(e,t){V.call(this,e),this.preExecute("connection.delete",function(i){var n=i.context,r=n.connection,o=r.source;KF(r,o)&&t.updateProperties(o,{default:null})})}z(Md,V);Md.$inject=["eventBus","modeling"];function KF(e,t){if(!v(e,"bpmn:SequenceFlow"))return!1;var i=U(t),n=U(e);return i.get("default")===n}var XF=500,ZF=5e3;function Dd(e,t){V.call(this,e);var i;function n(){return i=i||new QF,i.enter(),i}function r(){if(!i)throw new Error("out of bounds release");return i}function o(){if(!i)throw new Error("out of bounds release");var s=i.leave();return s&&(t.updateLaneRefs(i.flowNodes,i.lanes),i=null),s}var a=["spaceTool","lane.add","lane.resize","lane.split","elements.create","elements.delete","elements.move","shape.create","shape.delete","shape.move","shape.resize"];this.preExecute(a,ZF,function(s){n()}),this.postExecuted(a,XF,function(s){o()}),this.preExecute(["shape.create","shape.move","shape.delete","shape.resize"],function(s){var c=s.context,l=c.shape,d=r();l.labelTarget||(v(l,"bpmn:Lane")&&d.addLane(l),v(l,"bpmn:FlowNode")&&d.addFlowNode(l))})}Dd.$inject=["eventBus","modeling"];z(Dd,V);function QF(){this.flowNodes=[],this.lanes=[],this.counter=0,this.addLane=function(e){this.lanes.push(e)},this.addFlowNode=function(e){this.flowNodes.push(e)},this.enter=function(){this.counter++},this.leave=function(){return this.counter--,!this.counter}}function Ad(e,t){V.call(this,e),this.postExecuted("elements.create",function(i){let n=i.context,r=n.elements;for(let o of r)JF(o)&&!tN(o)&&t.updateProperties(o,{isForCompensation:void 0})})}z(Ad,V);Ad.$inject=["eventBus","modeling"];function JF(e){let t=U(e);return t&&t.isForCompensation}function eN(e){return e&&v(e,"bpmn:BoundaryEvent")&&Qr(e,"bpmn:CompensateEventDefinition")}function tN(e){return e.incoming.filter(i=>eN(i.source)).length>0}var FE={__init__:["adaptiveLabelPositioningBehavior","appendBehavior","associationBehavior","attachEventBehavior","boundaryEventBehavior","compensateBoundaryEventBehaviour","createBehavior","createDataObjectBehavior","createParticipantBehavior","dataInputAssociationBehavior","dataStoreBehavior","deleteLaneBehavior","detachEventBehavior","dropOnFlowBehavior","eventBasedGatewayBehavior","fixHoverBehavior","groupBehavior","importDockingFix","isHorizontalFix","labelBehavior","layoutConnectionBehavior","messageFlowBehavior","nonInterruptingBehavior","removeElementBehavior","removeEmbeddedLabelBoundsBehavior","removeParticipantBehavior","replaceConnectionBehavior","replaceElementBehaviour","resizeBehavior","resizeLaneBehavior","rootElementReferenceBehavior","spaceToolBehavior","subProcessPlaneBehavior","subProcessStartEventBehavior","textAnnotationBehavior","toggleCollapseConnectionBehaviour","toggleElementCollapseBehaviour","unclaimIdBehavior","updateFlowNodeRefsBehavior","unsetDefaultFlowBehavior","setCompensationActivityAfterPasteBehavior"],adaptiveLabelPositioningBehavior:["type",Gl],appendBehavior:["type",ql],associationBehavior:["type",Yl],attachEventBehavior:["type",ac],boundaryEventBehavior:["type",Kl],compensateBoundaryEventBehaviour:["type",Zl],createBehavior:["type",Ql],createDataObjectBehavior:["type",Jl],createParticipantBehavior:["type",ed],dataInputAssociationBehavior:["type",td],dataStoreBehavior:["type",id],deleteLaneBehavior:["type",rd],detachEventBehavior:["type",dc],dropOnFlowBehavior:["type",od],eventBasedGatewayBehavior:["type",ad],fixHoverBehavior:["type",Jm],groupBehavior:["type",sd],importDockingFix:["type",ef],isHorizontalFix:["type",cd],labelBehavior:["type",dd],layoutConnectionBehavior:["type",ud],messageFlowBehavior:["type",pd],nonInterruptingBehavior:["type",md],removeElementBehavior:["type",hd],removeEmbeddedLabelBoundsBehavior:["type",fd],removeParticipantBehavior:["type",gd],replaceConnectionBehavior:["type",vd],replaceElementBehaviour:["type",gc],resizeBehavior:["type",lf],resizeLaneBehavior:["type",df],rootElementReferenceBehavior:["type",yd],spaceToolBehavior:["type",uf],subProcessPlaneBehavior:["type",Ar],subProcessStartEventBehavior:["type",xd],textAnnotationBehavior:["type",wd],toggleCollapseConnectionBehaviour:["type",Ed],toggleElementCollapseBehaviour:["type",Cd],unclaimIdBehavior:["type",Sd],unsetDefaultFlowBehavior:["type",Md],updateFlowNodeRefsBehavior:["type",Dd],setCompensationActivityAfterPasteBehavior:["type",Ad]};function pf(e,t){var i=xt(e,t,-15);return i!=="intersect"?i:null}function ni(e){Ei.call(this,e)}z(ni,Ei);ni.$inject=["eventBus"];ni.prototype.init=function(){this.addRule("connection.start",function(e){var t=e.source;return iN(t)}),this.addRule("connection.create",function(e){var t=e.source,i=e.target,n=e.hints||{},r=n.targetParent,o=n.targetAttach;if(o)return!1;r&&(i.parent=r);try{return mf(t,i)}finally{r&&(i.parent=null)}}),this.addRule("connection.reconnect",function(e){var t=e.connection,i=e.source,n=e.target;return mf(i,n,t)}),this.addRule("connection.updateWaypoints",function(e){return{type:e.connection.type}}),this.addRule("shape.resize",function(e){var t=e.shape,i=e.newBounds;return qE(t,i)}),this.addRule("elements.create",function(e){var t=e.elements,i=e.position,n=e.target;return Fe(n)&&!ff(t,n,i)?!1:Pn(t,function(r){return Fe(r)?mf(r.source,r.target,r):r.host?Pd(r,r.host,null,i):Fv(r,n,null,i)})}),this.addRule("elements.move",function(e){var t=e.target,i=e.shapes,n=e.position;return Pd(i,t,null,n)||UE(i,t,n)||GE(i,t,n)||ff(i,t,n)}),this.addRule("shape.create",function(e){return Fv(e.shape,e.target,e.source,e.position)}),this.addRule("shape.attach",function(e){return Pd(e.shape,e.target,null,e.position)}),this.addRule("element.copy",function(e){var t=e.element,i=e.elements;return QE(i,t)})};ni.prototype.canConnectMessageFlow=XE;ni.prototype.canConnectSequenceFlow=ZE;ni.prototype.canConnectDataAssociation=Lv;ni.prototype.canConnectAssociation=YE;ni.prototype.canConnectCompensationAssociation=KE;ni.prototype.canMove=GE;ni.prototype.canAttach=Pd;ni.prototype.canReplace=UE;ni.prototype.canDrop=bc;ni.prototype.canInsert=ff;ni.prototype.canCreate=Fv;ni.prototype.canConnect=mf;ni.prototype.canResize=qE;ni.prototype.canCopy=QE;function iN(e){return Ov(e)?null:ge(e,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference","bpmn:Group","bpmn:TextAnnotation"])}function Ov(e){return!e||xe(e)}function nN(e,t){return e===t}function NE(e){do{if(v(e,"bpmn:Process"))return U(e);if(v(e,"bpmn:Participant"))return U(e).processRef||U(e)}while(e=e.parent)}function Tv(e){return v(e,"bpmn:TextAnnotation")}function Nv(e){return v(e,"bpmn:Group")&&!e.labelTarget}function jE(e){return v(e,"bpmn:BoundaryEvent")&&Pr(e,"bpmn:CompensateEventDefinition")}function hf(e){return U(e).isForCompensation}function rN(e,t){var i=NE(e),n=NE(t);return i===n}function oN(e){return v(e,"bpmn:InteractionNode")&&!v(e,"bpmn:BoundaryEvent")&&(!v(e,"bpmn:Event")||v(e,"bpmn:ThrowEvent")&&zE(e,"bpmn:MessageEventDefinition"))}function aN(e){return v(e,"bpmn:InteractionNode")&&!hf(e)&&(!v(e,"bpmn:Event")||v(e,"bpmn:CatchEvent")&&zE(e,"bpmn:MessageEventDefinition"))&&!(v(e,"bpmn:BoundaryEvent")&&!Pr(e,"bpmn:MessageEventDefinition"))}function LE(e){for(var t=e;t=t.parent;){if(v(t,"bpmn:FlowElementsContainer"))return U(t);if(v(t,"bpmn:Participant"))return U(t).processRef}return null}function VE(e,t){var i=LE(e),n=LE(t);return i===n}function Pr(e,t){var i=U(e);return!!ve(i.eventDefinitions||[],function(n){return v(n,t)})}function zE(e,t){var i=U(e);return(i.eventDefinitions||[]).every(function(n){return v(n,t)})}function sN(e){return v(e,"bpmn:FlowNode")&&!v(e,"bpmn:EndEvent")&&!kt(e)&&!(v(e,"bpmn:IntermediateThrowEvent")&&Pr(e,"bpmn:LinkEventDefinition"))&&!jE(e)&&!hf(e)}function cN(e){return v(e,"bpmn:FlowNode")&&!v(e,"bpmn:StartEvent")&&!v(e,"bpmn:BoundaryEvent")&&!kt(e)&&!(v(e,"bpmn:IntermediateCatchEvent")&&Pr(e,"bpmn:LinkEventDefinition"))&&!hf(e)}function lN(e){return v(e,"bpmn:ReceiveTask")||v(e,"bpmn:IntermediateCatchEvent")&&(Pr(e,"bpmn:MessageEventDefinition")||Pr(e,"bpmn:TimerEventDefinition")||Pr(e,"bpmn:ConditionalEventDefinition")||Pr(e,"bpmn:SignalEventDefinition"))}function dN(e){for(var t=[];e;)e=e.parent,e&&t.push(e);return t}function Iv(e,t){var i=dN(t);return i.indexOf(e)!==-1}function mf(e,t,i){if(Ov(e)||Ov(t))return null;if(!v(i,"bpmn:DataAssociation")){if(XE(e,t))return{type:"bpmn:MessageFlow"};if(ZE(e,t))return{type:"bpmn:SequenceFlow"}}var n=Lv(e,t);return n||(KE(e,t)?{type:"bpmn:Association",associationDirection:"One"}:YE(e,t)?{type:"bpmn:Association",associationDirection:"None"}:!1)}function bc(e,t){return xe(e)||Nv(e)?!0:v(t,"bpmn:Participant")&&!we(t)?!1:v(e,"bpmn:Participant")?v(t,"bpmn:Process")||v(t,"bpmn:Collaboration"):ge(e,["bpmn:DataInput","bpmn:DataOutput"])&&e.parent?t===e.parent:v(e,"bpmn:Lane")?v(t,"bpmn:Participant")||v(t,"bpmn:Lane"):v(e,"bpmn:BoundaryEvent")&&!uN(e)?!1:v(e,"bpmn:FlowElement")&&!v(e,"bpmn:DataStoreReference")?v(t,"bpmn:FlowElementsContainer")?we(t):ge(t,["bpmn:Participant","bpmn:Lane"]):v(e,"bpmn:DataStoreReference")&&v(t,"bpmn:Collaboration")?Fi(U(t).get("participants"),function(i){return!!i.get("processRef")}):ge(e,["bpmn:Artifact","bpmn:DataAssociation","bpmn:DataStoreReference"])?ge(t,["bpmn:Collaboration","bpmn:Lane","bpmn:Participant","bpmn:Process","bpmn:SubProcess"]):v(e,"bpmn:MessageFlow")?v(t,"bpmn:Collaboration")||e.source.parent==t||e.target.parent==t:!1}function uN(e){return U(e).cancelActivity&&(HE(e)||$E(e))}function pN(e){return!xe(e)&&v(e,"bpmn:BoundaryEvent")}function mN(e){return v(e,"bpmn:Lane")}function fN(e){return pN(e)||v(e,"bpmn:IntermediateThrowEvent")&&HE(e)?!0:v(e,"bpmn:IntermediateCatchEvent")&&$E(e)}function HE(e){var t=U(e);return t&&!(t.eventDefinitions&&t.eventDefinitions.length)}function $E(e){return WE(e,["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:SignalEventDefinition","bpmn:ConditionalEventDefinition"])}function WE(e,t){return t.some(function(i){return Pr(e,i)})}function hN(e){return v(e,"bpmn:ReceiveTask")&&ve(e.incoming,function(t){return v(t.source,"bpmn:EventBasedGateway")})}function Pd(e,t,i,n){if(Array.isArray(e)||(e=[e]),e.length!==1)return!1;var r=e[0];return xe(r)||!fN(r)||kt(t)||!v(t,"bpmn:Activity")||hf(t)||n&&!pf(n,t)||hN(t)?!1:"attach"}function UE(e,t,i){if(!t)return!1;var n={replacements:[]};return M(e,function(r){kt(t)||v(r,"bpmn:StartEvent")&&r.type!=="label"&&bc(r,t)&&(I0(r)||n.replacements.push({oldElementId:r.id,newElementType:"bpmn:StartEvent"}),(F0(r)||N0(r)||L0(r))&&n.replacements.push({oldElementId:r.id,newElementType:"bpmn:StartEvent"}),WE(r,["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:SignalEventDefinition","bpmn:ConditionalEventDefinition"])&&v(t,"bpmn:SubProcess")&&n.replacements.push({oldElementId:r.id,newElementType:"bpmn:StartEvent"})),v(t,"bpmn:Transaction")||Pr(r,"bpmn:CancelEventDefinition")&&r.type!=="label"&&(v(r,"bpmn:EndEvent")&&bc(r,t)&&n.replacements.push({oldElementId:r.id,newElementType:"bpmn:EndEvent"}),v(r,"bpmn:BoundaryEvent")&&Pd(r,t,null,i)&&n.replacements.push({oldElementId:r.id,newElementType:"bpmn:BoundaryEvent"}))}),n.replacements.length?n:!1}function GE(e,t){return Fi(e,mN)?!1:t?e.every(function(i){return bc(i,t)}):!0}function Fv(e,t,i,n){return t?xe(e)||Nv(e)?!0:nN(i,t)||i&&Iv(i,t)?!1:bc(e,t,n)||ff(e,t,n):!1}function qE(e,t){return v(e,"bpmn:SubProcess")?we(e)&&(!t||t.width>=100&&t.height>=80):!!(v(e,"bpmn:Lane")||v(e,"bpmn:Participant")||Tv(e)||Nv(e))}function gN(e,t){var i=Tv(e),n=Tv(t);return(i||n)&&i!==n}function YE(e,t){return Iv(t,e)||Iv(e,t)?!1:gN(e,t)?!0:!!Lv(e,t)}function KE(e,t){return VE(e,t)&&jE(e)&&v(t,"bpmn:Activity")&&!_N(t,e)&&!kt(t)}function XE(e,t){return BE(e)&&!BE(t)?!1:oN(e)&&aN(t)&&!rN(e,t)}function ZE(e,t){return sN(e)&&cN(t)&&VE(e,t)&&!(v(e,"bpmn:EventBasedGateway")&&!lN(t))}function Lv(e,t){return ge(e,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&ge(t,["bpmn:Activity","bpmn:ThrowEvent"])?{type:"bpmn:DataInputAssociation"}:ge(t,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&ge(e,["bpmn:Activity","bpmn:CatchEvent"])?{type:"bpmn:DataOutputAssociation"}:!1}function ff(e,t,i){if(!t)return!1;if(Array.isArray(e)){if(e.length!==1)return!1;e=e[0]}return t.source===e||t.target===e?!1:ge(t,["bpmn:SequenceFlow","bpmn:MessageFlow"])&&!xe(t)&&v(e,"bpmn:FlowNode")&&!v(e,"bpmn:BoundaryEvent")&&bc(e,t.parent,i)}function vN(e,t){return e&&t&&e.indexOf(t)!==-1}function QE(e,t){return xe(t)?!0:!(v(t,"bpmn:Lane")&&!vN(e,t.parent))}function BE(e){return co(e,"bpmn:Process")||co(e,"bpmn:Collaboration")}function _N(e,t){return e.attachers.includes(t)}var JE={__depends__:[ii],__init__:["bpmnRules"],bpmnRules:["type",ni]};var bN=2e3;function gf(e,t){e.on("saveXML.start",bN,i);function i(){var n=t.getRootElements();M(n,function(r){var o=Me(r),a,s;a=vr([r],!1),a=fe(a,function(c){return c!==r&&!c.labelTarget}),s=St(a,Me),o.set("planeElement",s)})}}gf.$inject=["eventBus","canvas"];var eC={__init__:["bpmnDiOrdering"],bpmnDiOrdering:["type",gf]};function yc(e){V.call(this,e);var t=this;this.preExecute(["shape.create","connection.create"],function(i){var n=i.context,r=n.shape||n.connection,o=n.parent,a=t.getOrdering(r,o);a&&(a.parent!==void 0&&(n.parent=a.parent),n.parentIndex=a.index)}),this.preExecute(["shape.move","connection.move"],function(i){var n=i.context,r=n.shape||n.connection,o=n.newParent||r.parent,a=t.getOrdering(r,o);a&&(a.parent!==void 0&&(n.newParent=a.parent),n.newParentIndex=a.index)})}yc.prototype.getOrdering=function(e,t){return null};z(yc,V);function kd(e,t){yc.call(this,e);var i=[{type:"bpmn:SubProcess",order:{level:6}},{type:"bpmn:SequenceFlow",order:{level:9,containers:["bpmn:Participant","bpmn:FlowElementsContainer"]}},{type:"bpmn:DataAssociation",order:{level:9,containers:["bpmn:Collaboration","bpmn:FlowElementsContainer"]}},{type:"bpmn:TextAnnotation",order:{level:9}},{type:"bpmn:MessageFlow",order:{level:9,containers:["bpmn:Collaboration"]}},{type:"bpmn:Association",order:{level:6,containers:["bpmn:Participant","bpmn:FlowElementsContainer","bpmn:Collaboration"]}},{type:"bpmn:BoundaryEvent",order:{level:8}},{type:"bpmn:Group",order:{level:10,containers:["bpmn:Collaboration","bpmn:FlowElementsContainer"]}},{type:"bpmn:FlowElement",order:{level:5}},{type:"bpmn:Participant",order:{level:-2}},{type:"bpmn:Lane",order:{level:-1}}];function n(a){if(a.labelTarget)return{level:10};var s=ve(i,function(c){return ge(a,[c.type])});return s&&s.order||{level:1}}function r(a){var s=a.order;if(s||(a.order=s=n(a)),!s)throw new Error(`no order for <${a.id}>`);return s}function o(a,s,c){for(var l=s;l&&!ge(l,c);)l=l.parent;if(!l)throw new Error(`no parent for <${a.id}> in <${s&&s.id}>`);return l}this.getOrdering=function(a,s){if(a.labelTarget||v(a,"bpmn:TextAnnotation"))return{parent:t.findRoot(s)||t.getRootElement(),index:-1};var c=r(a);c.containers&&(s=o(a,s,c.containers));var l=s.children.indexOf(a),d=op(s.children,function(u){return!a.labelTarget&&u.labelTarget?!1:c.level<r(u).level});return d!==-1&&l!==-1&&l<d&&(d-=1),{index:d,parent:s}}}kd.$inject=["eventBus","canvas"];z(kd,yc);var tC={__init__:["bpmnOrderingProvider"],bpmnOrderingProvider:["type",kd]};function Va(){}Va.prototype.get=function(){return this._data};Va.prototype.set=function(e){this._data=e};Va.prototype.clear=function(){var e=this._data;return delete this._data,e};Va.prototype.isEmpty=function(){return!this._data};var iC={clipboard:["type",Va]};var yN="drop-ok",nC="drop-not-ok",rC="attach-ok",oC="new-parent",aC="create",xN=2e3;function vf(e,t,i,n,r){function o(c,l,d,u,p){if(!l)return!1;c=fe(c,function(R){var C=R.labelTarget;return!R.parent&&!(xe(R)&&c.indexOf(C)!==-1)});var m=ve(c,function(R){return!Fe(R)}),f=!1,_=!1,b=!1;cC(c)&&(f=r.allowed("shape.attach",{position:d,shape:m,target:l})),f||(cC(c)?b=r.allowed("shape.create",{position:d,shape:m,source:u,target:l}):b=r.allowed("elements.create",{elements:c,position:d,target:l}));var D=p.connectionTarget;return b||f?(m&&u&&(_=r.allowed("connection.create",{source:D===u?m:u,target:D===u?u:m,hints:{targetParent:l,targetAttach:f}})),{attach:f,connect:_}):b===null||f===null?null:!1}function a(c,l){[rC,yN,nC,oC].forEach(function(d){d===l?e.addMarker(c,d):e.removeMarker(c,d)})}i.on(["create.move","create.hover"],function(c){var l=c.context,d=l.elements,u=c.hover,p=l.source,m=l.hints||{};if(!u){l.canExecute=!1,l.target=null;return}sC(c);var f={x:c.x,y:c.y},_=l.canExecute=u&&o(d,u,f,p,m);u&&_!==null&&(l.target=u,_&&_.attach?a(u,rC):a(u,_?oC:nC))}),i.on(["create.end","create.out","create.cleanup"],function(c){var l=c.hover;l&&a(l,null)}),i.on("create.end",function(c){var l=c.context,d=l.source,u=l.shape,p=l.elements,m=l.target,f=l.canExecute,_=f&&f.attach,b=f&&f.connect,D=l.hints||{};if(f===!1||!m)return!1;sC(c);var R={x:c.x,y:c.y};b?u=n.appendShape(d,u,R,m,{attach:_,connection:b===!0?{}:b,connectionTarget:D.connectionTarget}):(p=n.createElements(p,R,m,k({},D,{attach:_})),u=ve(p,function(C){return!Fe(C)})),k(l,{elements:p,shape:u}),k(c,{elements:p,shape:u})});function s(){var c=t.context();c&&c.prefix===aC&&t.cancel()}i.on("create.init",function(){i.on("elements.changed",s),i.once(["create.cancel","create.end"],xN,function(){i.off("elements.changed",s)})}),this.start=function(c,l,d){oe(l)||(l=[l]);var u=ve(l,function(f){return!Fe(f)});if(u){d=k({elements:l,hints:{},shape:u},d||{}),M(l,function(f){he(f.x)||(f.x=0),he(f.y)||(f.y=0)});var p=fe(l,function(f){return!f.hidden}),m=Je(p);M(l,function(f){Fe(f)&&(f.waypoints=St(f.waypoints,function(_){return{x:_.x-m.x-m.width/2,y:_.y-m.y-m.height/2}})),k(f,{x:f.x-m.x-m.width/2,y:f.y-m.y-m.height/2})}),t.init(c,aC,{cursor:"grabbing",autoActivate:!0,data:{shape:u,elements:l,context:d}})}}}vf.$inject=["canvas","dragging","eventBus","modeling","rules"];function sC(e){var t=e.context,i=t.createConstraints;i&&(i.left&&(e.x=Math.max(e.x,i.left)),i.right&&(e.x=Math.min(e.x,i.right)),i.top&&(e.y=Math.max(e.y,i.top)),i.bottom&&(e.y=Math.min(e.y,i.bottom)))}function cC(e){return e&&e.length===1&&!Fe(e[0])}var wN=750;function _f(e,t,i,n,r){function o(a){var s=ie("g");J(s,r.cls("djs-drag-group",["no-events"]));var c=ie("g");return a.forEach(function(l){var d;l.hidden||(l.waypoints?(d=i._createContainer("connection",c),i.drawConnection(er(d),l)):(d=i._createContainer("shape",c),i.drawShape(er(d),l),mt(d,l.x,l.y)),n.addDragger(l,s,d))}),s}t.on("create.move",wN,function(a){var s=a.hover,c=a.context,l=c.elements,d=c.dragGroup;d||(d=c.dragGroup=o(l));var u;s?(d.parentNode||(u=e.getActiveLayer(),me(u,d)),mt(d,a.x,a.y)):Qe(d)}),t.on("create.cleanup",function(a){var s=a.context,c=s.dragGroup;c&&Qe(c)})}_f.$inject=["canvas","eventBus","graphicsFactory","previewSupport","styles"];var aa={__depends__:[bi,Ln,ii,Ut],__init__:["create","createPreview"],create:["type",vf],createPreview:["type",_f]};function Rd(e){var t=this;this._lastMoveEvent=null;function i(n){t._lastMoveEvent=n}e.on("canvas.init",function(n){var r=t._svg=n.svg;r.addEventListener("mousemove",i)}),e.on("canvas.destroy",function(){t._lastMouseEvent=null,t._svg.removeEventListener("mousemove",i)})}Rd.$inject=["eventBus"];Rd.prototype.getLastMoveEvent=function(){return this._lastMoveEvent||EN(0,0)};function EN(e,t){var i=document.createEvent("MouseEvent"),n=e,r=t,o=e,a=t;return i.initMouseEvent&&i.initMouseEvent("mousemove",!0,!0,window,0,n,r,o,a,!1,!1,!1,!1,0,null),i}var kr={__init__:["mouse"],mouse:["type",Rd]};function gn(e,t,i,n,r,o,a,s){this._canvas=e,this._create=t,this._clipboard=i,this._elementFactory=n,this._eventBus=r,this._modeling=o,this._mouse=a,this._rules=s,r.on("copyPaste.copyElement",function(c){var l=c.descriptor,d=c.element,u=c.elements;l.priority=1,l.id=d.id;var p=ve(u,function(m){return m===d.parent});p&&(l.parent=d.parent.id),CN(d)&&(l.priority=2,l.host=d.host.id),Fe(d)&&(l.priority=3,l.source=d.source.id,l.target=d.target.id,l.waypoints=SN(d)),xe(d)&&(l.priority=4,l.labelTarget=d.labelTarget.id),M(["x","y","width","height"],function(m){he(d[m])&&(l[m]=d[m])}),l.hidden=d.hidden,l.collapsed=d.collapsed}),r.on("copyPaste.pasteElements",function(c){var l=c.hints;k(l,{createElementsBehavior:!1})})}gn.$inject=["canvas","create","clipboard","elementFactory","eventBus","modeling","mouse","rules"];gn.prototype.copy=function(e){var t,i;return oe(e)||(e=e?[e]:[]),t=this._eventBus.fire("copyPaste.canCopyElements",{elements:e}),t===!1?i={}:i=this.createTree(oe(t)?t:e),this._clipboard.set(i),this._eventBus.fire("copyPaste.elementsCopied",{elements:e,tree:i}),i};gn.prototype.paste=function(e){var t=this._clipboard.get();if(!this._clipboard.isEmpty()){var i=e&&e.hints||{};this._eventBus.fire("copyPaste.pasteElements",{hints:i});var n=this._createElements(t);if(e&&e.element&&e.point)return this._paste(n,e.element,e.point,i);this._create.start(this._mouse.getLastMoveEvent(),n,{hints:i||{}})}};gn.prototype._paste=function(e,t,i,n){M(e,function(o){he(o.x)||(o.x=0),he(o.y)||(o.y=0)});var r=Je(e);return M(e,function(o){Fe(o)&&(o.waypoints=St(o.waypoints,function(a){return{x:a.x-r.x-r.width/2,y:a.y-r.y-r.height/2}})),k(o,{x:o.x-r.x-r.width/2,y:o.y-r.y-r.height/2})}),this._modeling.createElements(e,i,t,k({},n))};gn.prototype._createElements=function(e){var t=this,i=this._eventBus,n={},r=[];return M(e,function(o,a){a=parseInt(a,10),o=wi(o,"priority"),M(o,function(s){var c=k({},Di(s,["priority"]));n[s.parent]?c.parent=n[s.parent]:delete c.parent,i.fire("copyPaste.pasteElement",{cache:n,descriptor:c});var l;if(Fe(c)){c.source=n[s.source],c.target=n[s.target],l=n[s.id]=t.createConnection(c),r.push(l);return}if(xe(c)){c.labelTarget=n[c.labelTarget],l=n[s.id]=t.createLabel(c),r.push(l);return}c.host&&(c.host=n[c.host]),l=n[s.id]=t.createShape(c),r.push(l)})}),r};gn.prototype.createConnection=function(e){var t=this._elementFactory.createConnection(Di(e,["id"]));return t};gn.prototype.createLabel=function(e){var t=this._elementFactory.createLabel(Di(e,["id"]));return t};gn.prototype.createShape=function(e){var t=this._elementFactory.createShape(Di(e,["id"]));return t};gn.prototype.hasRelations=function(e,t){var i,n,r;return!(Fe(e)&&(n=ve(t,mi({id:e.source.id})),r=ve(t,mi({id:e.target.id})),!n||!r)||xe(e)&&(i=ve(t,mi({id:e.labelTarget.id})),!i))};gn.prototype.createTree=function(e){var t=this._rules,i=this,n={},r=[],o=jo(e);function a(l,d){return t.allowed("element.copy",{element:l,elements:d})}function s(l,d){var u=ve(r,function(p){return l===p.element});if(!u){r.push({element:l,depth:d});return}u.depth<d&&(r=c(u,r),r.push({element:u.element,depth:d}))}function c(l,d){var u=d.indexOf(l);return u!==-1&&d.splice(u,1),d}return Jn(o,function(l,d,u){if(xe(l))return;M(l.labels,function(f){s(f,u)});function p(f){f&&f.length&&M(f,function(_){M(_.labels,function(b){s(b,u)}),s(_,u)})}M([l.attachers,l.incoming,l.outgoing],p),s(l,u);var m=[];return l.children&&(m=l.children.slice()),i._eventBus.fire("copyPaste.createTree",{element:l,children:m}),m}),e=St(r,function(l){return l.element}),r=St(r,function(l){return l.descriptor={},i._eventBus.fire("copyPaste.copyElement",{descriptor:l.descriptor,element:l.element,elements:e}),l}),r=wi(r,function(l){return l.descriptor.priority}),e=St(r,function(l){return l.element}),M(r,function(l){var d=l.depth;if(!i.hasRelations(l.element,e)){dC(l.element,e);return}if(!a(l.element,e)){dC(l.element,e);return}n[d]||(n[d]=[]),n[d].push(l.descriptor)}),n};function CN(e){return!!e.host}function SN(e){return St(e.waypoints,function(t){return t=lC(t),t.original&&(t.original=lC(t.original)),t})}function lC(e){return k({},e)}function dC(e,t){var i=t.indexOf(e);return i===-1?t:t.splice(i,1)}var uC={__depends__:[iC,aa,kr,ii],__init__:["copyPaste"],copyPaste:["type",gn]};function Bv(e,t,i){oe(i)||(i=[i]),M(i,function(n){gr(e[n])||(t[n]=e[n])})}var jv=750;function bf(e,t,i){function n(c,l){var d=e.create(c.$type);return i.copyElement(c,d,null,l)}t.on("copyPaste.copyElement",jv,function(c){var l=c.descriptor,d=c.element,u=U(d);if(xe(d))return l;var p=l.businessObject=n(u,!0),m=l.di=n(Me(d),!0);m.bpmnElement=p,Bv(p,l,"name"),Bv(m,l,"isExpanded"),u.default&&(l.default=u.default.id)});var r="-bpmn-js-refs";function o(c){return c[r]=c[r]||{}}function a(c,l){c[r]=l}function s(c,l,d){var u=U(c);return c.default&&(d[c.default]={element:u,property:"default"}),c.host&&(U(c).attachedToRef=U(l[c.host])),Di(d,Ot(d,function(p,m,f){var _=m.element,b=m.property;return f===c.id&&(_.set(b,u),p.push(c.id)),p},[]))}t.on("copyPaste.pasteElement",function(c){var l=c.cache,d=c.descriptor,u=d.businessObject,p=d.di;if(xe(d)){d.businessObject=U(l[d.labelTarget]),d.di=Me(l[d.labelTarget]);return}u=d.businessObject=n(u),p=d.di=n(p),p.bpmnElement=u,Bv(d,u,["isExpanded","name"]),d.type=u.$type}),t.on("copyPaste.copyElement",jv,function(c){var l=c.descriptor,d=c.element;if(v(d,"bpmn:Participant")){var u=U(d);u.processRef&&(l.processRef=n(u.processRef,!0))}}),t.on("copyPaste.pasteElement",function(c){var l=c.descriptor,d=l.processRef;d&&(l.processRef=n(d))}),t.on("copyPaste.pasteElement",jv,function(c){var l=c.cache,d=c.descriptor;a(l,s(d,l,o(l)))})}bf.$inject=["bpmnFactory","eventBus","moddleCopy"];var MN=["artifacts","dataInputAssociations","dataOutputAssociations","default","flowElements","lanes","incoming","outgoing","categoryValue"],DN=["errorRef","escalationRef","messageRef","signalRef"];function za(e,t,i){this._bpmnFactory=t,this._eventBus=e,this._moddle=i,e.on("moddleCopy.canCopyProperties",n=>{let{propertyNames:r}=n;if(!(!r||!r.length))return wi(r,o=>o==="extensionElements")}),e.on("moddleCopy.canCopyProperty",n=>{let{parent:r,property:o,propertyName:a}=n,s=it(r)&&r.$descriptor;if(a&&DN.includes(a))return o;if(a&&MN.includes(a)||a&&s&&!ve(s.properties,mi({name:a})))return!1}),e.on("moddleCopy.canSetCopiedProperty",n=>{let{property:r}=n;if(v(r,"bpmn:ExtensionElements")&&(!r.values||!r.values.length))return!1})}za.$inject=["eventBus","bpmnFactory","moddle"];za.prototype.copyElement=function(e,t,i,n=!1){i&&!oe(i)&&(i=[i]),i=i||yf(e.$descriptor);let r=this._eventBus.fire("moddleCopy.canCopyProperties",{propertyNames:i,sourceElement:e,targetElement:t,clone:n});return r===!1||(oe(r)&&(i=r),M(i,o=>{let a;$t(e,o)&&(a=e.get(o));let s=this.copyProperty(a,t,o,n);!Pt(s)||this._eventBus.fire("moddleCopy.canSetCopiedProperty",{parent:t,property:s,propertyName:o})===!1||t.set(o,s)})),t};za.prototype.copyProperty=function(e,t,i,n=!1){let r=this._eventBus.fire("moddleCopy.canCopyProperty",{parent:t,property:e,propertyName:i,clone:n});if(r===!1)return;if(r)return it(r)&&r.$type&&!r.$parent&&(r.$parent=t),r;let o=this._moddle.getPropertyDescriptor(t,i);if(!o.isReference)return o.isId?e&&this._copyId(e,t,n):oe(e)?Ot(e,(a,s)=>{let c=this.copyProperty(s,t,i,n);return c?a.concat(c):a},[]):it(e)&&e.$type?this._moddle.getElementDescriptor(e).isGeneric?void 0:(r=this._bpmnFactory.create(e.$type),r.$parent=t,r=this.copyElement(e,r,null,n),r):e};za.prototype._copyId=function(e,t,i=!1){if(i)return e;if(!this._moddle.ids.assigned(e))return this._moddle.ids.claim(e,t),e};function yf(e,t){return Ot(e.properties,(i,n)=>t&&n.default?i:i.concat(n.name),[])}var xf={__depends__:[uC],__init__:["bpmnCopyPaste","moddleCopy"],bpmnCopyPaste:["type",bf],moddleCopy:["type",za]};var pC=Math.round;function Od(e,t){this._modeling=e,this._eventBus=t}Od.$inject=["modeling","eventBus"];Od.prototype.replaceElement=function(e,t,i){if(e.waypoints)return null;var n=this._modeling,r=this._eventBus;r.fire("replace.start",{element:e,attrs:t,hints:i});var o=t.width||e.width,a=t.height||e.height,s=t.x||e.x,c=t.y||e.y,l=pC(s+o/2),d=pC(c+a/2),u=n.replaceShape(e,k({},t,{x:l,y:d,width:o,height:a}),i);return r.fire("replace.end",{element:e,newElement:u,hints:i}),u};function wf(e,t){t.on("replace.end",500,function(i){let{newElement:n,hints:r={}}=i;r.select!==!1&&e.select(n)})}wf.$inject=["selection","eventBus"];var mC={__init__:["replace","replaceSelectionBehavior"],replaceSelectionBehavior:["type",wf],replace:["type",Od]};function AN(e,t,i){oe(i)||(i=[i]),M(i,function(n){gr(e[n])||(t[n]=e[n])})}var PN=["cancelActivity","instantiate","eventGatewayType","triggeredByEvent","isInterrupting"];function kN(e,t){var i=e&&$t(e,"collapsed")?e.collapsed:!we(e),n;return t&&($t(t,"collapsed")||$t(t,"isExpanded"))?n=$t(t,"collapsed")?t.collapsed:!t.isExpanded:n=i,i!==n}function Cf(e,t,i,n,r,o){function a(s,c,l){l=l||{};var d=c.type,u=s.businessObject;if(Ef(u)&&(d==="bpmn:SubProcess"||d==="bpmn:AdHocSubProcess")&&kN(s,c))return n.toggleCollapse(s),s;var p=e.create(d),m={type:d,businessObject:p};m.di={},d==="bpmn:ExclusiveGateway"&&(m.di.isMarkerVisible=!0),AN(s.di,m.di,["fill","stroke","background-color","border-color","color"]);var f=yf(u.$descriptor),_=yf(p.$descriptor,!0),b=RN(f,_);k(p,ei(c,PN));var D=fe(b,function(w){return w==="eventDefinitions"?fC(s,c.eventDefinitionType):w==="loopCharacteristics"?!kt(p):$t(p,w)||w==="processRef"&&c.isExpanded===!1||w==="triggeredByEvent"?!1:w==="isForCompensation"?!kt(p):!0});if(p=i.copyElement(u,p,D),c.eventDefinitionType&&(fC(p,c.eventDefinitionType)||(m.eventDefinitionType=c.eventDefinitionType,m.eventDefinitionAttrs=c.eventDefinitionAttrs)),v(u,"bpmn:Activity")){if(Ef(u))m.isExpanded=we(s);else if(c&&$t(c,"isExpanded")){m.isExpanded=c.isExpanded;var R=t.getDefaultSize(p,{isExpanded:m.isExpanded});m.width=R.width,m.height=R.height,m.x=s.x-(m.width-s.width)/2,m.y=s.y-(m.height-s.height)/2}we(s)&&!v(u,"bpmn:Task")&&m.isExpanded&&(m.width=s.width,m.height=s.height)}if(Ef(u)&&!Ef(p)&&(l.moveChildren=!1),v(u,"bpmn:Participant")){c.isExpanded===!0?p.processRef=e.create("bpmn:Process"):l.moveChildren=!1;var C=nt(s);Me(s).isHorizontal||(Me(m).isHorizontal=C),m.width=C?s.width:t.getDefaultSize(m).width,m.height=C?t.getDefaultSize(m).height:s.height}return o.allowed("shape.resize",{shape:p})||(m.height=t.getDefaultSize(m).height,m.width=t.getDefaultSize(m).width),p.name=u.name,ge(u,["bpmn:ExclusiveGateway","bpmn:InclusiveGateway","bpmn:Activity"])&&ge(p,["bpmn:ExclusiveGateway","bpmn:InclusiveGateway","bpmn:Activity"])&&(p.default=u.default),c.host&&!v(u,"bpmn:BoundaryEvent")&&v(p,"bpmn:BoundaryEvent")&&(m.host=c.host),(m.type==="bpmn:DataStoreReference"||m.type==="bpmn:DataObjectReference")&&(m.x=s.x+(s.width-m.width)/2),r.replaceElement(s,m,Be(X({},l),{targetElement:c}))}this.replaceElement=a}Cf.$inject=["bpmnFactory","elementFactory","moddleCopy","modeling","replace","rules"];function Ef(e){return v(e,"bpmn:SubProcess")}function fC(e,t){var i=U(e);return t&&i.get("eventDefinitions").some(function(n){return v(n,t)})}function RN(e,t){return e.filter(function(i){return t.includes(i)})}var Sf={__depends__:[xf,mC,Ut],bpmnReplace:["type",Cf]};var ON=250;function lo(e){this._eventBus=e,this._tools=[],this._active=null}lo.$inject=["eventBus"];lo.prototype.registerTool=function(e,t){var i=this._tools;if(!t)throw new Error(`A tool has to be registered with it's "events"`);i.push(e),this.bindEvents(e,t)};lo.prototype.isActive=function(e){return e&&this._active===e};lo.prototype.length=function(e){return this._tools.length};lo.prototype.setActive=function(e){var t=this._eventBus;this._active!==e&&(this._active=e,t.fire("tool-manager.update",{tool:e}))};lo.prototype.bindEvents=function(e,t){var i=this._eventBus,n=[];i.on(t.tool+".init",function(r){var o=r.context;if(!o.reactivate&&this.isActive(e)){this.setActive(null);return}this.setActive(e)},this),M(t,function(r){n.push(r+".ended"),n.push(r+".canceled")}),i.on(n,ON,function(r){this._active&&(TN(r)||this.setActive(null))},this)};function TN(e){var t=e.originalEvent&&e.originalEvent.target;return t&&Qn(t,'.group[data-group="tools"]')}var sa={__depends__:[bi],__init__:["toolManager"],toolManager:["type",lo]};function hC(e,t){if(e==="x"){if(t>0)return"e";if(t<0)return"w"}if(e==="y"){if(t>0)return"s";if(t<0)return"n"}return null}function gC(e,t){var i=[];return M(e.concat(t),function(n){var r=n.incoming,o=n.outgoing;M(r.concat(o),function(a){var s=a.source,c=a.target;(Td(e,s)||Td(e,c)||Td(t,s)||Td(t,c))&&(Td(i,a)||i.push(a))})}),i}function Td(e,t){return e.indexOf(t)!==-1}function vC(e,t,i){var n=e.x,r=e.y,o=e.width,a=e.height,s=i.x,c=i.y;switch(t){case"n":return{x:n,y:r+c,width:o,height:a-c};case"s":return{x:n,y:r,width:o,height:a+c};case"w":return{x:n+s,y:r,width:o-s,height:a};case"e":return{x:n,y:r,width:o+s,height:a};default:throw new Error("unknown direction: "+t)}}var Vv=Math.abs,IN=Math.round,uo={x:"width",y:"height"},yC="crosshair",ca={n:"top",w:"left",s:"bottom",e:"right"},FN=1500,Mf={n:"s",w:"e",s:"n",e:"w"},Df=20;function zi(e,t,i,n,r,o,a){this._canvas=e,this._dragging=t,this._eventBus=i,this._modeling=n,this._rules=r,this._toolManager=o,this._mouse=a;var s=this;o.registerTool("space",{tool:"spaceTool.selection",dragging:"spaceTool"}),i.on("spaceTool.selection.end",function(c){i.once("spaceTool.selection.ended",function(){s.activateMakeSpace(c.originalEvent)})}),i.on("spaceTool.move",FN,function(c){var l=c.context,d=l.initialized;d||(d=l.initialized=s.init(c,l)),d&&bC(c)}),i.on("spaceTool.end",function(c){var l=c.context,d=l.axis,u=l.direction,p=l.movingShapes,m=l.resizingShapes,f=l.start;if(l.initialized){bC(c);var _={x:0,y:0};_[d]=IN(c["d"+d]),s.makeSpace(p,m,_,u,f),i.once("spaceTool.ended",function(b){s.activateSelection(b.originalEvent,!0,!0)})}})}zi.$inject=["canvas","dragging","eventBus","modeling","rules","toolManager","mouse"];zi.prototype.activateSelection=function(e,t,i){this._dragging.init(e,"spaceTool.selection",{autoActivate:t,cursor:yC,data:{context:{reactivate:i}},trapClick:!1})};zi.prototype.activateMakeSpace=function(e){this._dragging.init(e,"spaceTool",{autoActivate:!0,cursor:yC,data:{context:{}}})};zi.prototype.makeSpace=function(e,t,i,n,r){return this._modeling.createSpace(e,t,i,n,r)};zi.prototype.init=function(e,t){var i=Vv(e.dx)>Vv(e.dy)?"x":"y",n=e["d"+i],r=e[i]-n;if(Vv(n)<5)return!1;n<0&&(n*=-1),ro(e)&&(n*=-1);var o=hC(i,n),a=this._canvas.getRootElement();!Pa(e)&&e.hover&&(a=e.hover);var s=[...vr(a,!0),...a.attachers||[]],c=this.calculateAdjustments(s,i,n,r),l=this._eventBus.fire("spaceTool.getMinDimensions",{axis:i,direction:o,shapes:c.resizingShapes,start:r}),d=NN(c,i,o,r,l);return k(t,c,{axis:i,direction:o,spaceToolConstraints:d,start:r}),ka("resize-"+(i==="x"?"ew":"ns")),!0};zi.prototype.calculateAdjustments=function(e,t,i,n){var r=this._rules,o=[],a=[],s=[],c=[];function l(p){o.includes(p)||o.push(p);var m=p.label;m&&!o.includes(m)&&o.push(m)}function d(p){a.includes(p)||a.push(p)}M(e,function(p){if(!(!p.parent||xe(p))){if(Fe(p)){c.push(p);return}var m=p[t],f=m+p[uo[t]];if(LN(p)&&(i>0&&ue(p)[t]>n||i<0&&ue(p)[t]<n)){s.push(p);return}if(i>0&&m>n||i<0&&f<n){l(p);return}if(m<n&&f>n&&r.allowed("shape.resize",{shape:p})){d(p);return}}}),M(o,function(p){var m=p.attachers;m&&M(m,function(f){l(f)})});var u=o.concat(a);return M(s,function(p){var m=p.host;Ha(u,m)&&l(p)}),u=o.concat(a),M(c,function(p){var m=p.source,f=p.target,_=p.label;Ha(u,m)&&Ha(u,f)&&_&&l(_)}),{movingShapes:o,resizingShapes:a}};zi.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateSelection(e,!!e)};zi.prototype.isActive=function(){var e=this._dragging.context();return e?/^spaceTool/.test(e.prefix):!1};function _C(e){return{top:e.top-Df,right:e.right+Df,bottom:e.bottom+Df,left:e.left-Df}}function bC(e){var t=e.context,i=t.spaceToolConstraints;if(i){var n,r;he(i.left)&&(n=Math.max(e.x,i.left),e.dx=e.dx+n-e.x,e.x=n),he(i.right)&&(n=Math.min(e.x,i.right),e.dx=e.dx+n-e.x,e.x=n),he(i.top)&&(r=Math.max(e.y,i.top),e.dy=e.dy+r-e.y,e.y=r),he(i.bottom)&&(r=Math.min(e.y,i.bottom),e.dy=e.dy+r-e.y,e.y=r)}}function NN(e,t,i,n,r){var o=e.movingShapes,a=e.resizingShapes;if(a.length){var s={},c,l;return M(a,function(d){var u=d.attachers,p=d.children,m=ce(d),f=fe(p,function($){return!Fe($)&&!xe($)&&!Ha(o,$)&&!Ha(a,$)}),_=fe(p,function($){return!Fe($)&&!xe($)&&Ha(o,$)}),b,D,R,C=[],w=[],P,T,H,N;f.length&&(D=_C(ce(Je(f))),b=n-m[ca[i]]+D[ca[i]],i==="n"?s.bottom=l=he(l)?Math.min(l,b):b:i==="w"?s.right=l=he(l)?Math.min(l,b):b:i==="s"?s.top=c=he(c)?Math.max(c,b):b:i==="e"&&(s.left=c=he(c)?Math.max(c,b):b)),_.length&&(R=_C(ce(Je(_))),b=n-R[ca[Mf[i]]]+m[ca[Mf[i]]],i==="n"?s.bottom=l=he(l)?Math.min(l,b):b:i==="w"?s.right=l=he(l)?Math.min(l,b):b:i==="s"?s.top=c=he(c)?Math.max(c,b):b:i==="e"&&(s.left=c=he(c)?Math.max(c,b):b)),u&&u.length&&(u.forEach(function($){Ha(o,$)?C.push($):w.push($)}),C.length&&(P=ce(Je(C.map(ue))),T=m[ca[Mf[i]]]-(P[ca[Mf[i]]]-n)),w.length&&(H=ce(Je(w.map(ue))),N=H[ca[i]]-(m[ca[i]]-n)),i==="n"?(b=Math.min(T||1/0,N||1/0),s.bottom=l=he(l)?Math.min(l,b):b):i==="w"?(b=Math.min(T||1/0,N||1/0),s.right=l=he(l)?Math.min(l,b):b):i==="s"?(b=Math.max(T||-1/0,N||-1/0),s.top=c=he(c)?Math.max(c,b):b):i==="e"&&(b=Math.max(T||-1/0,N||-1/0),s.left=c=he(c)?Math.max(c,b):b));var W=r&&r[d.id];W&&(i==="n"?(b=n+d[uo[t]]-W[uo[t]],s.bottom=l=he(l)?Math.min(l,b):b):i==="w"?(b=n+d[uo[t]]-W[uo[t]],s.right=l=he(l)?Math.min(l,b):b):i==="s"?(b=n-d[uo[t]]+W[uo[t]],s.top=c=he(c)?Math.max(c,b):b):i==="e"&&(b=n-d[uo[t]]+W[uo[t]],s.left=c=he(c)?Math.max(c,b):b))}),s}}function Ha(e,t){return e.indexOf(t)!==-1}function LN(e){return!!e.host}var zv="djs-dragging",xC="djs-resizing",BN=250,Af=Math.max;function Pf(e,t,i,n,r){function o(a,s){M(a,function(c){r.addDragger(c,s),i.addMarker(c,zv)})}e.on("spaceTool.selection.start",function(a){var s=i.getLayer("space"),c=a.context,l={x:"M 0,-10000 L 0,10000",y:"M -10000,0 L 10000,0"},d=ie("g");J(d,n.cls("djs-crosshair-group",["no-events"])),me(s,d);var u=ie("path");J(u,"d",l.x),Re(u).add("djs-crosshair"),me(d,u);var p=ie("path");J(p,"d",l.y),Re(p).add("djs-crosshair"),me(d,p),c.crosshairGroup=d}),e.on("spaceTool.selection.move",function(a){var s=a.context.crosshairGroup;mt(s,a.x,a.y)}),e.on("spaceTool.selection.cleanup",function(a){var s=a.context,c=s.crosshairGroup;c&&Qe(c)}),e.on("spaceTool.move",BN,function(a){var s=a.context,c=s.line,l=s.axis,d=s.movingShapes,u=s.resizingShapes;if(s.initialized){if(!s.dragGroup){var p=i.getLayer("space");c=ie("path"),J(c,"d","M0,0 L0,0"),Re(c).add("djs-crosshair"),me(p,c),s.line=c;var m=ie("g");J(m,n.cls("djs-drag-group",["no-events"])),me(i.getActiveLayer(),m),o(d,m);var f=s.movingConnections=t.filter(function(w){var P=!1;M(d,function(W){M(W.outgoing,function($){w===$&&(P=!0)})});var T=!1;M(d,function(W){M(W.incoming,function($){w===$&&(T=!0)})});var H=!1;M(u,function(W){M(W.outgoing,function($){w===$&&(H=!0)})});var N=!1;return M(u,function(W){M(W.incoming,function($){w===$&&(N=!0)})}),Fe(w)&&(P||H)&&(T||N)});o(f,m),s.dragGroup=m}if(!s.frameGroup){var _=ie("g");J(_,n.cls("djs-frame-group",["no-events"])),me(i.getActiveLayer(),_);var b=[];M(u,function(w){var P=r.addFrame(w,_),T=P.getBBox();b.push({element:P,initialBounds:T}),i.addMarker(w,xC)}),s.frameGroup=_,s.frames=b}var D={x:"M"+a.x+", -10000 L"+a.x+", 10000",y:"M -10000, "+a.y+" L 10000, "+a.y};J(c,{d:D[l]});var R={x:"y",y:"x"},C={x:a.dx,y:a.dy};C[R[s.axis]]=0,mt(s.dragGroup,C.x,C.y),M(s.frames,function(w){var P=w.element,T=w.initialBounds,H,N;s.direction==="e"?J(P,{width:Af(T.width+C.x,5)}):(H=Af(T.width-C.x,5),J(P,{width:H,x:T.x+T.width-H})),s.direction==="s"?J(P,{height:Af(T.height+C.y,5)}):(N=Af(T.height-C.y,5),J(P,{height:N,y:T.y+T.height-N}))})}}),e.on("spaceTool.cleanup",function(a){var s=a.context,c=s.movingShapes,l=s.movingConnections,d=s.resizingShapes,u=s.line,p=s.dragGroup,m=s.frameGroup;M(c,function(f){i.removeMarker(f,zv)}),M(l,function(f){i.removeMarker(f,zv)}),p&&(Qe(u),Qe(p)),M(d,function(f){i.removeMarker(f,xC)}),m&&Qe(m)})}Pf.$inject=["eventBus","elementRegistry","canvas","styles","previewSupport"];var wC={__init__:["spaceToolPreview"],__depends__:[bi,ii,sa,Ln,kr],spaceTool:["type",zi],spaceToolPreview:["type",Pf]};function xc(e,t){e.invoke(zi,this),this._canvas=t}xc.$inject=["injector","canvas"];z(xc,zi);xc.prototype.calculateAdjustments=function(e,t,i,n){var r=this._canvas.getRootElement(),o=e[0]===r?null:e[0],a=[];o&&(a=Io(fp(r.children.filter(l=>v(l,"bpmn:Artifact")),Je(o))));let s=[...e,...a];var c=zi.prototype.calculateAdjustments.call(this,s,t,i,n);return c.resizingShapes=c.resizingShapes.filter(function(l){return!(v(l,"bpmn:TextAnnotation")||jN(l)&&(t==="y"&&nt(l)||t==="x"&&!nt(l)))}),c};function jN(e){return v(e,"bpmn:Participant")&&!U(e).processRef}var kf={__depends__:[wC],spaceTool:["type",xc]};function Et(e,t){this._handlerMap={},this._stack=[],this._stackIdx=-1,this._currentExecution={actions:[],dirty:[],trigger:null},this._injector=t,this._eventBus=e,this._uid=1,e.on(["diagram.destroy","diagram.clear"],function(){this.clear(!1)},this)}Et.$inject=["eventBus","injector"];Et.prototype.execute=function(e,t){if(!e)throw new Error("command required");this._currentExecution.trigger="execute";let i={command:e,context:t};this._pushAction(i),this._internalExecute(i),this._popAction()};Et.prototype.canExecute=function(e,t){let i={command:e,context:t},n=this._getHandler(e),r=this._fire(e,"canExecute",i);if(r===void 0){if(!n)return!1;n.canExecute&&(r=n.canExecute(t))}return r};Et.prototype.clear=function(e){this._stack.length=0,this._stackIdx=-1,e!==!1&&this._fire("changed",{trigger:"clear"})};Et.prototype.undo=function(){let e=this._getUndoAction(),t;if(e){for(this._currentExecution.trigger="undo",this._pushAction(e);e&&(this._internalUndo(e),t=this._getUndoAction(),!(!t||t.id!==e.id));)e=t;this._popAction()}};Et.prototype.redo=function(){let e=this._getRedoAction(),t;if(e){for(this._currentExecution.trigger="redo",this._pushAction(e);e&&(this._internalExecute(e,!0),t=this._getRedoAction(),!(!t||t.id!==e.id));)e=t;this._popAction()}};Et.prototype.register=function(e,t){this._setHandler(e,t)};Et.prototype.registerHandler=function(e,t){if(!e||!t)throw new Error("command and handlerCls must be defined");let i=this._injector.instantiate(t);this.register(e,i)};Et.prototype.canUndo=function(){return!!this._getUndoAction()};Et.prototype.canRedo=function(){return!!this._getRedoAction()};Et.prototype._getRedoAction=function(){return this._stack[this._stackIdx+1]};Et.prototype._getUndoAction=function(){return this._stack[this._stackIdx]};Et.prototype._internalUndo=function(e){let t=e.command,i=e.context,n=this._getHandler(t);this._atomicDo(()=>{this._fire(t,"revert",e),n.revert&&this._markDirty(n.revert(i)),this._revertedAction(e),this._fire(t,"reverted",e)})};Et.prototype._fire=function(e,t,i){arguments.length<3&&(i=t,t=null);let n=t?[e+"."+t,t]:[e],r;i=this._eventBus.createEvent(i);for(let o of n)if(r=this._eventBus.fire("commandStack."+o,i),i.cancelBubble)break;return r};Et.prototype._createId=function(){return this._uid++};Et.prototype._atomicDo=function(e){let t=this._currentExecution;t.atomic=!0;try{e()}finally{t.atomic=!1}};Et.prototype._internalExecute=function(e,t){let i=e.command,n=e.context,r=this._getHandler(i);if(!r)throw new Error("no command handler registered for <"+i+">");this._pushAction(e),t||(this._fire(i,"preExecute",e),r.preExecute&&r.preExecute(n),this._fire(i,"preExecuted",e)),this._atomicDo(()=>{this._fire(i,"execute",e),r.execute&&this._markDirty(r.execute(n)),this._executedAction(e,t),this._fire(i,"executed",e)}),t||(this._fire(i,"postExecute",e),r.postExecute&&r.postExecute(n),this._fire(i,"postExecuted",e)),this._popAction()};Et.prototype._pushAction=function(e){let t=this._currentExecution,i=t.actions,n=i[0];if(t.atomic)throw new Error("illegal invocation in <execute> or <revert> phase (action: "+e.command+")");e.id||(e.id=n&&n.id||this._createId()),i.push(e)};Et.prototype._popAction=function(){let e=this._currentExecution,t=e.trigger,i=e.actions,n=e.dirty;i.pop(),i.length||(this._eventBus.fire("elements.changed",{elements:pg("id",n.reverse())}),n.length=0,this._fire("changed",{trigger:t}),e.trigger=null)};Et.prototype._markDirty=function(e){let t=this._currentExecution;e&&(e=oe(e)?e:[e],t.dirty=t.dirty.concat(e))};Et.prototype._executedAction=function(e,t){let i=++this._stackIdx;t||this._stack.splice(i,this._stack.length,e)};Et.prototype._revertedAction=function(e){this._stackIdx--};Et.prototype._getHandler=function(e){return this._handlerMap[e]};Et.prototype._setHandler=function(e,t){if(!e||!t)throw new Error("command and handler required");if(this._handlerMap[e])throw new Error("overriding handler for command <"+e+">");this._handlerMap[e]=t};var EC={commandStack:["type",Et]};function Bn(e,t){if(typeof t!="function")throw new Error("removeFn iterator must be a function");if(e){for(var i;i=e[0];)t(i);return e}}var VN=250,CC=1400;function Id(e,t,i){V.call(this,t);var n=e.get("movePreview",!1);t.on("shape.move.start",CC,function(r){var o=r.context,a=o.shapes,s=o.validatedShapes;o.shapes=SC(a),o.validatedShapes=SC(s)}),n&&t.on("shape.move.start",VN,function(r){var o=r.context,a=o.shapes,s=[];M(a,function(c){M(c.labels,function(l){!l.hidden&&o.shapes.indexOf(l)===-1&&s.push(l),c.labelTarget&&s.push(c)})}),M(s,function(c){n.makeDraggable(o,c,!0)})}),this.preExecuted("elements.move",CC,function(r){var o=r.context,a=o.closure,s=a.enclosedElements,c=[];M(s,function(l){M(l.labels,function(d){s[d.id]||c.push(d)})}),a.addAll(c)}),this.preExecute(["connection.delete","shape.delete"],function(r){var o=r.context,a=o.connection||o.shape;Bn(a.labels,function(s){i.removeShape(s,{nested:!0})})}),this.execute("shape.delete",function(r){var o=r.context,a=o.shape,s=a.labelTarget;s&&(o.labelTargetIndex=Os(s.labels,a),o.labelTarget=s,a.labelTarget=null)}),this.revert("shape.delete",function(r){var o=r.context,a=o.shape,s=o.labelTarget,c=o.labelTargetIndex;s&&(et(s.labels,a,c),a.labelTarget=s)})}z(Id,V);Id.$inject=["injector","eventBus","modeling"];function SC(e){return fe(e,function(t){return e.indexOf(t.labelTarget)===-1})}var MC={__init__:["labelSupport"],labelSupport:["type",Id]};var zN=251,DC=1401,AC="attach-ok";function Fd(e,t,i,n,r){V.call(this,t);var o=e.get("movePreview",!1);t.on("shape.move.start",DC,function(a){var s=a.context,c=s.shapes,l=s.validatedShapes;s.shapes=HN(c),s.validatedShapes=$N(l)}),o&&t.on("shape.move.start",zN,function(a){var s=a.context,c=s.shapes,l=Hv(c);M(l,function(d){o.makeDraggable(s,d,!0),M(d.labels,function(u){o.makeDraggable(s,u,!0)})})}),o&&t.on("shape.move.start",function(a){var s=a.context,c=s.shapes;if(c.length===1){var l=c[0],d=l.host;d&&(i.addMarker(d,AC),t.once(["shape.move.out","shape.move.cleanup"],function(){i.removeMarker(d,AC)}))}}),this.preExecuted("elements.move",DC,function(a){var s=a.context,c=s.closure,l=s.shapes,d=Hv(l);M(d,function(u){c.add(u,c.topLevel[u.host.id])})}),this.postExecuted("elements.move",function(a){var s=a.context,c=s.shapes,l=s.newHost,d;l&&c.length!==1||(l?d=c:d=fe(c,function(u){var p=u.host;return WN(u)&&!UN(c,p)}),M(d,function(u){r.updateAttachment(u,l)}))}),this.postExecuted("elements.move",function(a){var s=a.context.shapes;M(s,function(c){M(c.attachers,function(l){M(l.outgoing.slice(),function(d){var u=n.allowed("connection.reconnect",{connection:d,source:d.source,target:d.target});u||r.removeConnection(d)}),M(l.incoming.slice(),function(d){var u=n.allowed("connection.reconnect",{connection:d,source:d.source,target:d.target});u||r.removeConnection(d)})})})}),this.postExecute("shape.create",function(a){var s=a.context,c=s.shape,l=s.host;l&&r.updateAttachment(c,l)}),this.postExecute("shape.replace",function(a){var s=a.context,c=s.oldShape,l=s.newShape;Bn(c.attachers,function(d){var u=n.allowed("elements.move",{target:l,shapes:[d]});u==="attach"?r.updateAttachment(d,l):r.removeShape(d)}),l.attachers.length&&M(l.attachers,function(d){var u=Dv(d,c,l);r.moveShape(d,u,d.parent)})}),this.postExecute("shape.resize",function(a){var s=a.context,c=s.shape,l=s.oldBounds,d=s.newBounds,u=c.attachers,p=s.hints||{};p.attachSupport!==!1&&M(u,function(m){var f=Dv(m,l,d);r.moveShape(m,f,m.parent),M(m.labels,function(_){r.moveShape(_,f,_.parent)})})}),this.preExecute("shape.delete",function(a){var s=a.context.shape;Bn(s.attachers,function(c){r.removeShape(c)}),s.host&&r.updateAttachment(s,null)})}z(Fd,V);Fd.$inject=["injector","eventBus","canvas","rules","modeling"];function Hv(e){return Ps(St(e,function(t){return t.attachers||[]}))}function HN(e){var t=Hv(e);return vy("id",e,t)}function $N(e){var t=Zn(e,"id");return fe(e,function(i){for(;i;){if(i.host&&t[i.host.id])return!1;i=i.parent}return!0})}function WN(e){return!!e.host}function UN(e,t){return e.indexOf(t)!==-1}var PC={__depends__:[ii],__init__:["attachSupport"],attachSupport:["type",Fd]};function en(e){this._model=e}en.$inject=["moddle"];en.prototype._needsId=function(e){return ge(e,["bpmn:RootElement","bpmn:FlowElement","bpmn:MessageFlow","bpmn:DataAssociation","bpmn:Artifact","bpmn:Participant","bpmn:Lane","bpmn:LaneSet","bpmn:Process","bpmn:Collaboration","bpmndi:BPMNShape","bpmndi:BPMNEdge","bpmndi:BPMNDiagram","bpmndi:BPMNPlane","bpmn:Property","bpmn:CategoryValue"])};en.prototype._ensureId=function(e){if(e.id){this._model.ids.claim(e.id,e);return}var t;v(e,"bpmn:Activity")?t="Activity":v(e,"bpmn:Event")?t="Event":v(e,"bpmn:Gateway")?t="Gateway":ge(e,["bpmn:SequenceFlow","bpmn:MessageFlow"])?t="Flow":t=(e.$type||"").replace(/^[^:]*:/g,""),t+="_",!e.id&&this._needsId(e)&&(e.id=this._model.ids.nextPrefixed(t,e))};en.prototype.create=function(e,t){var i=this._model.create(e,t||{});return this._ensureId(i),i};en.prototype.createDiLabel=function(){return this.create("bpmndi:BPMNLabel",{bounds:this.createDiBounds()})};en.prototype.createDiShape=function(e,t){return this.create("bpmndi:BPMNShape",k({bpmnElement:e,bounds:this.createDiBounds()},t))};en.prototype.createDiBounds=function(e){return this.create("dc:Bounds",e)};en.prototype.createDiWaypoints=function(e){var t=this;return St(e,function(i){return t.createDiWaypoint(i)})};en.prototype.createDiWaypoint=function(e){return this.create("dc:Point",ei(e,["x","y"]))};en.prototype.createDiEdge=function(e,t){return this.create("bpmndi:BPMNEdge",k({bpmnElement:e,waypoint:this.createDiWaypoints([])},t))};en.prototype.createDiPlane=function(e,t){return this.create("bpmndi:BPMNPlane",k({bpmnElement:e},t))};function ki(e,t,i){V.call(this,e),this._bpmnFactory=t;var n=this;function r(m){var f=m.context,_=f.hints||{},b;!f.cropped&&_.createElementsBehavior!==!1&&(b=f.connection,b.waypoints=i.getCroppedWaypoints(b),f.cropped=!0)}this.executed(["connection.layout","connection.create"],r),this.reverted(["connection.layout"],function(m){delete m.context.cropped});function o(m){var f=m.context;n.updateParent(f.shape||f.connection,f.oldParent)}function a(m){var f=m.context,_=f.shape||f.connection,b=f.parent||f.newParent;n.updateParent(_,b)}this.executed(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],tn(o)),this.reverted(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],tn(a));function s(m){var f=m.context,_=f.oldRoot,b=_.children;M(b,function(D){v(D,"bpmn:BaseElement")&&n.updateParent(D)})}this.executed(["canvas.updateRoot"],s),this.reverted(["canvas.updateRoot"],s);function c(m){var f=m.context.shape;v(f,"bpmn:BaseElement")&&n.updateBounds(f)}this.executed(["shape.move","shape.create","shape.resize"],tn(function(m){m.context.shape.type!=="label"&&c(m)})),this.reverted(["shape.move","shape.create","shape.resize"],tn(function(m){m.context.shape.type!=="label"&&c(m)})),e.on("shape.changed",function(m){m.element.type==="label"&&c({context:{shape:m.element}})});function l(m){n.updateConnection(m.context)}this.executed(["connection.create","connection.move","connection.delete","connection.reconnect"],tn(l)),this.reverted(["connection.create","connection.move","connection.delete","connection.reconnect"],tn(l));function d(m){n.updateConnectionWaypoints(m.context.connection)}this.executed(["connection.layout","connection.move","connection.updateWaypoints"],tn(d)),this.reverted(["connection.layout","connection.move","connection.updateWaypoints"],tn(d)),this.executed("connection.reconnect",tn(function(m){var f=m.context,_=f.connection,b=f.oldSource,D=f.newSource,R=U(_),C=U(b),w=U(D);R.conditionExpression&&!ge(w,["bpmn:Activity","bpmn:ExclusiveGateway","bpmn:InclusiveGateway"])&&(f.oldConditionExpression=R.conditionExpression,delete R.conditionExpression),b!==D&&C.default===R&&(f.oldDefault=C.default,delete C.default)})),this.reverted("connection.reconnect",tn(function(m){var f=m.context,_=f.connection,b=f.oldSource,D=f.newSource,R=U(_),C=U(b),w=U(D);f.oldConditionExpression&&(R.conditionExpression=f.oldConditionExpression),f.oldDefault&&(C.default=f.oldDefault,delete w.default)}));function u(m){n.updateAttachment(m.context)}this.executed(["element.updateAttachment"],tn(u)),this.reverted(["element.updateAttachment"],tn(u)),this.executed("element.updateLabel",tn(p)),this.reverted("element.updateLabel",tn(p));function p(m){let{element:f}=m.context,_=hi(f),b=Me(f),D=b&&b.get("label");Tn(f)||qs(f)||(_&&!D?b.set("label",t.create("bpmndi:BPMNLabel")):!_&&D&&b.set("label",void 0))}}z(ki,V);ki.$inject=["eventBus","bpmnFactory","connectionDocking"];ki.prototype.updateAttachment=function(e){var t=e.shape,i=t.businessObject,n=t.host;i.attachedToRef=n&&n.businessObject};ki.prototype.updateParent=function(e,t){if(!xe(e)&&!(v(e,"bpmn:DataStoreReference")&&e.parent&&v(e.parent,"bpmn:Collaboration"))){var i=e.parent,n=e.businessObject,r=Me(e),o=i&&i.businessObject,a=Me(i);v(e,"bpmn:FlowNode")&&this.updateFlowNodeRefs(n,o,t&&t.businessObject),v(e,"bpmn:DataOutputAssociation")&&(e.source?o=e.source.businessObject:o=null),v(e,"bpmn:DataInputAssociation")&&(e.target?o=e.target.businessObject:o=null),this.updateSemanticParent(n,o),v(e,"bpmn:DataObjectReference")&&n.dataObjectRef&&this.updateSemanticParent(n.dataObjectRef,o),this.updateDiParent(r,a)}};ki.prototype.updateBounds=function(e){var t=Me(e),i=qN(e);if(i){var n=_i(i,t.get("bounds"));k(i,{x:e.x+n.x,y:e.y+n.y})}var r=xe(e)?this._getLabel(t):t,o=r.bounds;o||(o=this._bpmnFactory.createDiBounds(),r.set("bounds",o)),k(o,{x:e.x,y:e.y,width:e.width,height:e.height})};ki.prototype.updateFlowNodeRefs=function(e,t,i){if(i!==t){var n,r;v(i,"bpmn:Lane")&&(n=i.get("flowNodeRef"),at(n,e)),v(t,"bpmn:Lane")&&(r=t.get("flowNodeRef"),et(r,e))}};ki.prototype.updateDiConnection=function(e,t,i){var n=Me(e),r=Me(t),o=Me(i);n.sourceElement&&n.sourceElement.bpmnElement!==U(t)&&(n.sourceElement=t&&r),n.targetElement&&n.targetElement.bpmnElement!==U(i)&&(n.targetElement=i&&o)};ki.prototype.updateDiParent=function(e,t){if(t&&!v(t,"bpmndi:BPMNPlane")&&(t=t.$parent),e.$parent!==t){var i=(t||e.$parent).get("planeElement");t?(i.push(e),e.$parent=t):(at(i,e),e.$parent=null)}};function GN(e){for(;e&&!v(e,"bpmn:Definitions");)e=e.$parent;return e}ki.prototype.getLaneSet=function(e){var t,i;return v(e,"bpmn:Lane")?(t=e.childLaneSet,t||(t=this._bpmnFactory.create("bpmn:LaneSet"),e.childLaneSet=t,t.$parent=e),t):(v(e,"bpmn:Participant")&&(e=e.processRef),i=e.get("laneSets"),t=i[0],t||(t=this._bpmnFactory.create("bpmn:LaneSet"),t.$parent=e,i.push(t)),t)};ki.prototype.updateSemanticParent=function(e,t,i){var n;if(e.$parent!==t&&!((v(e,"bpmn:DataInput")||v(e,"bpmn:DataOutput"))&&(v(t,"bpmn:Participant")&&"processRef"in t&&(t=t.processRef),"ioSpecification"in t&&t.ioSpecification===e.$parent))){if(v(e,"bpmn:Lane"))t&&(t=this.getLaneSet(t)),n="lanes";else if(v(e,"bpmn:FlowElement")){if(t){if(v(t,"bpmn:Participant"))t=t.processRef;else if(v(t,"bpmn:Lane"))do t=t.$parent.$parent;while(v(t,"bpmn:Lane"))}n="flowElements"}else if(v(e,"bpmn:Artifact")){for(;t&&!v(t,"bpmn:Process")&&!v(t,"bpmn:SubProcess")&&!v(t,"bpmn:Collaboration");)if(v(t,"bpmn:Participant")){t=t.processRef;break}else t=t.$parent;n="artifacts"}else if(v(e,"bpmn:MessageFlow"))n="messageFlows";else if(v(e,"bpmn:Participant")){n="participants";var r=e.processRef,o;r&&(o=GN(e.$parent||t),e.$parent&&(at(o.get("rootElements"),r),r.$parent=null),t&&(et(o.get("rootElements"),r),r.$parent=o))}else v(e,"bpmn:DataOutputAssociation")?n="dataOutputAssociations":v(e,"bpmn:DataInputAssociation")&&(n="dataInputAssociations");if(!n)throw new Error(`no parent for <${e.id}> in <${t.id}>`);var a;if(e.$parent&&(a=e.$parent.get(n),at(a,e)),t?(a=t.get(n),a.push(e),e.$parent=t):e.$parent=null,i){var s=i.get(n);at(a,e),t&&(s||(s=[],t.set(n,s)),s.push(e))}}};ki.prototype.updateConnectionWaypoints=function(e){var t=Me(e);t.set("waypoint",this._bpmnFactory.createDiWaypoints(e.waypoints))};ki.prototype.updateConnection=function(e){var t=e.connection,i=U(t),n=t.source,r=U(n),o=t.target,a=U(t.target),s;if(v(i,"bpmn:DataAssociation"))v(i,"bpmn:DataInputAssociation")?(i.get("sourceRef")[0]=r,s=e.parent||e.newParent||a,this.updateSemanticParent(i,a,s)):v(i,"bpmn:DataOutputAssociation")&&(s=e.parent||e.newParent||r,this.updateSemanticParent(i,r,s),i.targetRef=a);else{var c=v(i,"bpmn:SequenceFlow");i.sourceRef!==r&&(c&&(at(i.sourceRef&&i.sourceRef.get("outgoing"),i),r&&r.get("outgoing")&&r.get("outgoing").push(i)),i.sourceRef=r),i.targetRef!==a&&(c&&(at(i.targetRef&&i.targetRef.get("incoming"),i),a&&a.get("incoming")&&a.get("incoming").push(i)),i.targetRef=a)}this.updateConnectionWaypoints(t),this.updateDiConnection(t,n,o)};ki.prototype._getLabel=function(e){return e.label||(e.label=this._bpmnFactory.createDiLabel()),e.label};function tn(e){return function(t){var i=t.context,n=i.shape||i.connection||i.element;v(n,"bpmn:BaseElement")&&e(t)}}function qN(e){if(v(e,"bpmn:Activity")){var t=Me(e);if(t){var i=t.get("label");if(i)return i.get("bounds")}}}function Rr(e,t){On.call(this),this._bpmnFactory=e,this._moddle=t}z(Rr,On);Rr.$inject=["bpmnFactory","moddle"];Rr.prototype._baseCreate=On.prototype.create;Rr.prototype.create=function(e,t){if(e==="label"){var i=t.di||this._bpmnFactory.createDiLabel();return this._baseCreate(e,k({type:"label",di:i},zs,t))}return this.createElement(e,t)};Rr.prototype.createElement=function(e,t){t=k({},t||{});var i,n=t.businessObject,r=t.di;if(!n){if(!t.type)throw new Error("no shape type specified");n=this._bpmnFactory.create(t.type),Rp(n)}if(!KN(r)){var o=k({},r||{},{id:n.id+"_di"});e==="root"?r=this._bpmnFactory.createDiPlane(n,o):e==="connection"?r=this._bpmnFactory.createDiEdge(n,o):r=this._bpmnFactory.createDiShape(n,o)}v(n,"bpmn:Group")&&(t=k({isFrame:!0},t)),t=YN(n,t,["processRef","isInterrupting","associationDirection","isForCompensation"]),t.isExpanded&&(t=$v(r,t,"isExpanded")),ge(n,["bpmn:Lane","bpmn:Participant"])&&(t=$v(r,t,"isHorizontal")),v(n,"bpmn:SubProcess")&&(t.collapsed=!we(n,r)),v(n,"bpmn:ExclusiveGateway")&&($t(r,"isMarkerVisible")?r.isMarkerVisible===void 0&&(r.isMarkerVisible=!1):r.isMarkerVisible=!0),Pt(t.triggeredByEvent)&&(n.triggeredByEvent=t.triggeredByEvent,delete t.triggeredByEvent),Pt(t.cancelActivity)&&(n.cancelActivity=t.cancelActivity,delete t.cancelActivity);var a,s;return t.eventDefinitionType&&(a=n.get("eventDefinitions")||[],s=this._bpmnFactory.create(t.eventDefinitionType,t.eventDefinitionAttrs),t.eventDefinitionType==="bpmn:ConditionalEventDefinition"&&(s.condition=this._bpmnFactory.create("bpmn:FormalExpression")),a.push(s),s.$parent=n,n.eventDefinitions=a,delete t.eventDefinitionType),i=this.getDefaultSize(n,r),t=k({id:n.id},i,t,{businessObject:n,di:r}),this._baseCreate(e,t)};Rr.prototype.getDefaultSize=function(e,t){var i=U(e);if(t=t||Me(e),v(i,"bpmn:SubProcess"))return we(i,t)?{width:350,height:200}:{width:100,height:80};if(v(i,"bpmn:Task"))return{width:100,height:80};if(v(i,"bpmn:Gateway"))return{width:50,height:50};if(v(i,"bpmn:Event"))return{width:36,height:36};if(v(i,"bpmn:Participant")){var n=t.isHorizontal===void 0||t.isHorizontal===!0;return we(i,t)?n?{width:600,height:250}:{width:250,height:600}:n?{width:400,height:60}:{width:60,height:400}}return v(i,"bpmn:Lane")?{width:400,height:100}:v(i,"bpmn:DataObjectReference")?{width:36,height:50}:v(i,"bpmn:DataStoreReference")?{width:50,height:50}:v(i,"bpmn:TextAnnotation")?{width:100,height:30}:v(i,"bpmn:Group")?{width:300,height:300}:{width:100,height:80}};Rr.prototype.createParticipantShape=function(e){return it(e)||(e={isExpanded:e}),e=k({type:"bpmn:Participant"},e||{}),e.isExpanded!==!1&&(e.processRef=this._bpmnFactory.create("bpmn:Process")),this.createShape(e)};function YN(e,t,i){return M(i,function(n){t=$v(e,t,n)}),t}function $v(e,t,i){return t[i]===void 0?t:(e[i]=t[i],Di(t,[i]))}function KN(e){return ge(e,["bpmndi:BPMNShape","bpmndi:BPMNEdge","bpmndi:BPMNDiagram","bpmndi:BPMNPlane"])}function wc(e,t){this._modeling=e,this._canvas=t}wc.$inject=["modeling","canvas"];wc.prototype.preExecute=function(e){var t=this._modeling,i=e.elements,n=e.alignment;M(i,function(r){var o={x:0,y:0};Pt(n.left)?o.x=n.left-r.x:Pt(n.right)?o.x=n.right-r.width-r.x:Pt(n.center)?o.x=n.center-Math.round(r.width/2)-r.x:Pt(n.top)?o.y=n.top-r.y:Pt(n.bottom)?o.y=n.bottom-r.height-r.y:Pt(n.middle)&&(o.y=n.middle-Math.round(r.height/2)-r.y),t.moveElements([r],o,r.parent)})};wc.prototype.postExecute=function(e){};function Ec(e){this._modeling=e}Ec.$inject=["modeling"];Ec.prototype.preExecute=function(e){var t=e.source;if(!t)throw new Error("source required");var i=e.target||t.parent,n=e.shape,r=e.hints||{};n=e.shape=this._modeling.createShape(n,e.position,i,{attach:r.attach}),e.shape=n};Ec.prototype.postExecute=function(e){var t=e.hints||{};XN(e.source,e.shape)||(t.connectionTarget===e.source?this._modeling.connect(e.shape,e.source,e.connection):this._modeling.connect(e.source,e.shape,e.connection))};function XN(e,t){return Fi(e.outgoing,function(i){return i.target===t})}function Cc(e,t){this._canvas=e,this._layouter=t}Cc.$inject=["canvas","layouter"];Cc.prototype.execute=function(e){var t=e.connection,i=e.source,n=e.target,r=e.parent,o=e.parentIndex,a=e.hints;if(!i||!n)throw new Error("source and target required");if(!r)throw new Error("parent required");return t.source=i,t.target=n,t.waypoints||(t.waypoints=this._layouter.layoutConnection(t,a)),this._canvas.addConnection(t,r,o),t};Cc.prototype.revert=function(e){var t=e.connection;return this._canvas.removeConnection(t),t.source=null,t.target=null,t};var Rf=Math.round;function Nd(e){this._modeling=e}Nd.$inject=["modeling"];Nd.prototype.preExecute=function(e){var t=e.elements,i=e.parent,n=e.parentIndex,r=e.position,o=e.hints,a=this._modeling;M(t,function(u){he(u.x)||(u.x=0),he(u.y)||(u.y=0)});var s=fe(t,function(u){return!u.hidden}),c=Je(s);M(t,function(u){Fe(u)&&(u.waypoints=St(u.waypoints,function(p){return{x:Rf(p.x-c.x-c.width/2+r.x),y:Rf(p.y-c.y-c.height/2+r.y)}})),k(u,{x:Rf(u.x-c.x-c.width/2+r.x),y:Rf(u.y-c.y-c.height/2+r.y)})});var l=jo(t),d={};M(t,function(u){if(Fe(u)){d[u.id]=he(n)?a.createConnection(d[u.source.id],d[u.target.id],n,u,u.parent||i,o):a.createConnection(d[u.source.id],d[u.target.id],u,u.parent||i,o);return}var p=k({},o);l.indexOf(u)===-1&&(p.autoResize=!1),xe(u)&&(p=Di(p,["attach"])),d[u.id]=he(n)?a.createShape(u,ei(u,["x","y","width","height"]),u.parent||i,n,p):a.createShape(u,ei(u,["x","y","width","height"]),u.parent||i,p)}),e.elements=Io(d)};var kC=Math.round;function sr(e){this._canvas=e}sr.$inject=["canvas"];sr.prototype.execute=function(e){var t=e.shape,i=e.position,n=e.parent,r=e.parentIndex;if(!n)throw new Error("parent required");if(!i)throw new Error("position required");return i.width!==void 0?k(t,i):k(t,{x:i.x-kC(t.width/2),y:i.y-kC(t.height/2)}),this._canvas.addShape(t,n,r),t};sr.prototype.revert=function(e){var t=e.shape;return this._canvas.removeShape(t),t};function $a(e){sr.call(this,e)}z($a,sr);$a.$inject=["canvas"];var ZN=sr.prototype.execute;$a.prototype.execute=function(e){var t=e.shape;return JN(t),t.labelTarget=e.labelTarget,ZN.call(this,e)};var QN=sr.prototype.revert;$a.prototype.revert=function(e){return e.shape.labelTarget=null,QN.call(this,e)};function JN(e){["width","height"].forEach(function(t){typeof e[t]>"u"&&(e[t]=0)})}function Wa(e,t){this._canvas=e,this._modeling=t}Wa.$inject=["canvas","modeling"];Wa.prototype.preExecute=function(e){var t=this._modeling,i=e.connection;Bn(i.incoming,function(n){t.removeConnection(n,{nested:!0})}),Bn(i.outgoing,function(n){t.removeConnection(n,{nested:!0})})};Wa.prototype.execute=function(e){var t=e.connection,i=t.parent;return e.parent=i,e.parentIndex=Os(i.children,t),e.source=t.source,e.target=t.target,this._canvas.removeConnection(t),t.source=null,t.target=null,t};Wa.prototype.revert=function(e){var t=e.connection,i=e.parent,n=e.parentIndex;return t.source=e.source,t.target=e.target,et(i.children,t,n),this._canvas.addConnection(t,i),t};function Ld(e,t){this._modeling=e,this._elementRegistry=t}Ld.$inject=["modeling","elementRegistry"];Ld.prototype.postExecute=function(e){var t=this._modeling,i=this._elementRegistry,n=e.elements;M(n,function(r){i.get(r.id)&&(r.waypoints?t.removeConnection(r):t.removeShape(r))})};function Ua(e,t){this._canvas=e,this._modeling=t}Ua.$inject=["canvas","modeling"];Ua.prototype.preExecute=function(e){var t=this._modeling,i=e.shape;Bn(i.incoming,function(n){t.removeConnection(n,{nested:!0})}),Bn(i.outgoing,function(n){t.removeConnection(n,{nested:!0})}),Bn(i.children,function(n){Fe(n)?t.removeConnection(n,{nested:!0}):t.removeShape(n,{nested:!0})})};Ua.prototype.execute=function(e){var t=this._canvas,i=e.shape,n=i.parent;return e.oldParent=n,e.oldParentIndex=Os(n.children,i),t.removeShape(i),i};Ua.prototype.revert=function(e){var t=this._canvas,i=e.shape,n=e.oldParent,r=e.oldParentIndex;return et(n.children,i,r),t.addShape(i,n),i};function Sc(e){this._modeling=e}Sc.$inject=["modeling"];var RC={x:"y",y:"x"};Sc.prototype.preExecute=function(e){var t=this._modeling,i=e.groups,n=e.axis,r=e.dimension;function o(b,D){b.range.min=Math.min(D[n],b.range.min),b.range.max=Math.max(D[n]+D[r],b.range.max)}function a(b){return b[n]+b[r]/2}function s(b){return b.length-1}function c(b){return b.max-b.min}function l(b,D){var R={y:0};R[n]=b-a(D),R[n]&&(R[RC[n]]=0,t.moveElements([D],R,D.parent))}var d=i[0],u=s(i),p=i[u],m,f,_=0;M(i,function(b,D){var R,C,w;if(b.elements.length<2){D&&D!==i.length-1&&(o(b,b.elements[0]),_+=c(b.range));return}R=wi(b.elements,n),C=R[0],D===u&&(C=R[s(R)]),w=a(C),b.range=null,M(R,function(P){if(l(w,P),b.range===null){b.range={min:P[n],max:P[n]+P[r]};return}o(b,P)}),D&&D!==i.length-1&&(_+=c(b.range))}),f=Math.abs(p.range.min-d.range.max),m=Math.round((f-_)/(i.length-1)),!(m<i.length-1)&&M(i,function(b,D){var R={},C;b===d||b===p||(C=i[D-1],b.range.max=0,M(b.elements,function(w,P){R[RC[n]]=0,R[n]=C.range.max-w[n]+m,b.range.min!==w[n]&&(R[n]+=w[n]-b.range.min),R[n]&&t.moveElements([w],R,w.parent),b.range.max=Math.max(w[n]+w[r],P?b.range.max:0)}))})};Sc.prototype.postExecute=function(e){};function Mc(e,t){this._layouter=e,this._canvas=t}Mc.$inject=["layouter","canvas"];Mc.prototype.execute=function(e){var t=e.connection,i=t.waypoints;return k(e,{oldWaypoints:i}),t.waypoints=this._layouter.layoutConnection(t,e.hints),t};Mc.prototype.revert=function(e){var t=e.connection;return t.waypoints=e.oldWaypoints,t};function Bd(){}Bd.prototype.execute=function(e){var t=e.connection,i=e.delta,n=e.newParent||t.parent,r=e.newParentIndex,o=t.parent;return e.oldParent=o,e.oldParentIndex=at(o.children,t),et(n.children,t,r),t.parent=n,M(t.waypoints,function(a){a.x+=i.x,a.y+=i.y,a.original&&(a.original.x+=i.x,a.original.y+=i.y)}),t};Bd.prototype.revert=function(e){var t=e.connection,i=t.parent,n=e.oldParent,r=e.oldParentIndex,o=e.delta;return at(i.children,t),et(n.children,t,r),t.parent=n,M(t.waypoints,function(a){a.x-=o.x,a.y-=o.y,a.original&&(a.original.x-=o.x,a.original.y-=o.y)}),t};function jd(){this.allShapes={},this.allConnections={},this.enclosedElements={},this.enclosedConnections={},this.topLevel={}}jd.prototype.add=function(e,t){return this.addAll([e],t)};jd.prototype.addAll=function(e,t){var i=Iy(e,!!t,this);return k(this,i),this};function la(e){this._modeling=e}la.prototype.moveRecursive=function(e,t,i){return e?this.moveClosure(this.getClosure(e),t,i):[]};la.prototype.moveClosure=function(e,t,i,n,r){var o=this._modeling,a=e.allShapes,s=e.allConnections,c=e.enclosedConnections,l=e.topLevel,d=!1;r&&r.parent===i&&(d=!0),M(a,function(u){o.moveShape(u,t,l[u.id]&&!d&&i,{recurse:!1,layout:!1})}),M(s,function(u){var p=!!a[u.source.id],m=!!a[u.target.id];c[u.id]&&p&&m?o.moveConnection(u,t,l[u.id]&&!d&&i):o.layoutConnection(u,{connectionStart:p&&mc(u,u.source,t),connectionEnd:m&&fc(u,u.target,t)})})};la.prototype.getClosure=function(e){return new jd().addAll(e,!0)};function Dc(e){this._helper=new la(e)}Dc.$inject=["modeling"];Dc.prototype.preExecute=function(e){e.closure=this._helper.getClosure(e.shapes)};Dc.prototype.postExecute=function(e){var t=e.hints,i;t&&t.primaryShape&&(i=t.primaryShape,t.oldParent=i.parent),this._helper.moveClosure(e.closure,e.delta,e.newParent,e.newHost,i)};function po(e){this._modeling=e,this._helper=new la(e)}po.$inject=["modeling"];po.prototype.execute=function(e){var t=e.shape,i=e.delta,n=e.newParent||t.parent,r=e.newParentIndex,o=t.parent;return e.oldBounds=ei(t,["x","y","width","height"]),e.oldParent=o,e.oldParentIndex=at(o.children,t),et(n.children,t,r),k(t,{parent:n,x:t.x+i.x,y:t.y+i.y}),t};po.prototype.postExecute=function(e){var t=e.shape,i=e.delta,n=e.hints,r=this._modeling;n.layout!==!1&&(M(t.incoming,function(o){r.layoutConnection(o,{connectionEnd:fc(o,t,i)})}),M(t.outgoing,function(o){r.layoutConnection(o,{connectionStart:mc(o,t,i)})})),n.recurse!==!1&&this.moveChildren(e)};po.prototype.revert=function(e){var t=e.shape,i=e.oldParent,n=e.oldParentIndex,r=e.delta;return et(i.children,t,n),k(t,{parent:i,x:t.x-r.x,y:t.y-r.y}),t};po.prototype.moveChildren=function(e){var t=e.delta,i=e.shape;this._helper.moveRecursive(i.children,t,null)};po.prototype.getNewParent=function(e){return e.newParent||e.shape.parent};function Ga(e){this._modeling=e}Ga.$inject=["modeling"];Ga.prototype.execute=function(e){var t=e.newSource,i=e.newTarget,n=e.connection,r=e.dockingOrPoints;if(!t&&!i)throw new Error("newSource or newTarget required");return oe(r)&&(e.oldWaypoints=n.waypoints,n.waypoints=r),t&&(e.oldSource=n.source,n.source=t),i&&(e.oldTarget=n.target,n.target=i),n};Ga.prototype.postExecute=function(e){var t=e.connection,i=e.newSource,n=e.newTarget,r=e.dockingOrPoints,o=e.hints||{},a={};o.connectionStart&&(a.connectionStart=o.connectionStart),o.connectionEnd&&(a.connectionEnd=o.connectionEnd),o.layoutConnection!==!1&&(i&&(!n||o.docking==="source")&&(a.connectionStart=a.connectionStart||OC(oe(r)?r[0]:r)),n&&(!i||o.docking==="target")&&(a.connectionEnd=a.connectionEnd||OC(oe(r)?r[r.length-1]:r)),o.newWaypoints&&(a.waypoints=o.newWaypoints),this._modeling.layoutConnection(t,a))};Ga.prototype.revert=function(e){var t=e.oldSource,i=e.oldTarget,n=e.oldWaypoints,r=e.connection;return t&&(r.source=t),i&&(r.target=i),n&&(r.waypoints=n),r};function OC(e){return e.original||e}function cr(e,t){this._modeling=e,this._rules=t}cr.$inject=["modeling","rules"];cr.prototype.preExecute=function(e){var t=this,i=this._modeling,n=this._rules,r=e.oldShape,o=e.newData,a=e.hints||{},s;function c(f,_,b){return n.allowed("connection.reconnect",{connection:b,source:f,target:_})}var l={x:o.x,y:o.y},d={x:r.x,y:r.y,width:r.width,height:r.height};s=e.newShape=e.newShape||t.createShape(o,l,r.parent,a),r.host&&i.updateAttachment(s,r.host);var u;a.moveChildren!==!1&&(u=r.children.slice(),i.moveElements(u,{x:0,y:0},s,a));var p=r.incoming.slice(),m=r.outgoing.slice();M(p,function(f){var _=f.source,b=c(_,s,f);b&&t.reconnectEnd(f,s,ra(f,s,d),a)}),M(m,function(f){var _=f.target,b=c(s,_,f);b&&t.reconnectStart(f,s,na(f,s,d),a)})};cr.prototype.postExecute=function(e){var t=e.oldShape;this._modeling.removeShape(t)};cr.prototype.execute=function(e){};cr.prototype.revert=function(e){};cr.prototype.createShape=function(e,t,i,n){return this._modeling.createShape(e,t,i,n)};cr.prototype.reconnectStart=function(e,t,i,n){this._modeling.reconnectStart(e,t,i,n)};cr.prototype.reconnectEnd=function(e,t,i,n){this._modeling.reconnectEnd(e,t,i,n)};function qa(e){this._modeling=e}qa.$inject=["modeling"];qa.prototype.execute=function(e){var t=e.shape,i=e.newBounds,n=e.minBounds;if(i.x===void 0||i.y===void 0||i.width===void 0||i.height===void 0)throw new Error("newBounds must have {x, y, width, height} properties");if(n&&(i.width<n.width||i.height<n.height))throw new Error("width and height cannot be less than minimum height and width");if(!n&&i.width<10||i.height<10)throw new Error("width and height cannot be less than 10px");return e.oldBounds={width:t.width,height:t.height,x:t.x,y:t.y},k(t,{width:i.width,height:i.height,x:i.x,y:i.y}),t};qa.prototype.postExecute=function(e){var t=this._modeling,i=e.shape,n=e.oldBounds,r=e.hints||{};r.layout!==!1&&(M(i.incoming,function(o){t.layoutConnection(o,{connectionEnd:ra(o,i,n)})}),M(i.outgoing,function(o){t.layoutConnection(o,{connectionStart:na(o,i,n)})}))};qa.prototype.revert=function(e){var t=e.shape,i=e.oldBounds;return k(t,{width:i.width,height:i.height,x:i.x,y:i.y}),t};function Or(e){this._modeling=e}Or.$inject=["modeling"];Or.prototype.preExecute=function(e){var t=e.delta,i=e.direction,n=e.movingShapes,r=e.resizingShapes,o=e.start,a={};this.moveShapes(n,t),M(r,function(s){a[s.id]=tL(s)}),this.resizeShapes(r,t,i),this.updateConnectionWaypoints(gC(n,r),t,i,o,n,r,a)};Or.prototype.execute=function(){};Or.prototype.revert=function(){};Or.prototype.moveShapes=function(e,t){var i=this;M(e,function(n){i._modeling.moveShape(n,t,null,{autoResize:!1,layout:!1,recurse:!1})})};Or.prototype.resizeShapes=function(e,t,i){var n=this;M(e,function(r){var o=vC(r,i,t);n._modeling.resizeShape(r,o,null,{attachSupport:!1,autoResize:!1,layout:!1})})};Or.prototype.updateConnectionWaypoints=function(e,t,i,n,r,o,a){var s=this,c=r.concat(o);M(e,function(l){var d=l.source,u=l.target,p=eL(l),m=FC(i),f={};da(c,d)&&da(c,u)?(p=St(p,function(_){return IC(_,n,i)&&(_[m]=_[m]+t[m]),_.original&&IC(_.original,n,i)&&(_.original[m]=_.original[m]+t[m]),_}),s._modeling.updateWaypoints(l,p,{labelBehavior:!1})):(da(c,d)||da(c,u))&&(da(r,d)?f.connectionStart=mc(l,d,t):da(r,u)?f.connectionEnd=fc(l,u,t):da(o,d)?f.connectionStart=na(l,d,a[d.id]):da(o,u)&&(f.connectionEnd=ra(l,u,a[u.id])),s._modeling.layoutConnection(l,f))})};function TC(e){return k({},e)}function eL(e){return St(e.waypoints,function(t){return t=TC(t),t.original&&(t.original=TC(t.original)),t})}function FC(e){switch(e){case"n":return"y";case"w":return"x";case"s":return"y";case"e":return"x"}}function IC(e,t,i){var n=FC(i);if(/e|s/.test(i))return e[n]>t;if(/n|w/.test(i))return e[n]<t}function da(e,t){return e.indexOf(t)!==-1}function tL(e){return{x:e.x,y:e.y,height:e.height,width:e.width}}function Ac(e){this._modeling=e}Ac.$inject=["modeling"];Ac.prototype.execute=function(e){var t=e.shape,i=t.children;e.oldChildrenVisibility=NC(i),t.collapsed=!t.collapsed;var n=LC(i,t.collapsed);return[t].concat(n)};Ac.prototype.revert=function(e){var t=e.shape,i=e.oldChildrenVisibility,n=t.children,r=BC(n,i);return t.collapsed=!t.collapsed,[t].concat(r)};function NC(e){var t={};return M(e,function(i){t[i.id]=i.hidden,i.children&&(t=k({},t,NC(i.children)))}),t}function LC(e,t){var i=[];return M(e,function(n){n.hidden=t,i=i.concat(n),n.children&&(i=i.concat(LC(n.children,n.collapsed||t)))}),i}function BC(e,t){var i=[];return M(e,function(n){n.hidden=t[n.id],i=i.concat(n),n.children&&(i=i.concat(BC(n.children,t)))}),i}function Pc(e){this._modeling=e}Pc.$inject=["modeling"];Pc.prototype.execute=function(e){var t=e.shape,i=e.newHost,n=t.host;return e.oldHost=n,e.attacherIdx=jC(n,t),VC(i,t),t.host=i,t};Pc.prototype.revert=function(e){var t=e.shape,i=e.newHost,n=e.oldHost,r=e.attacherIdx;return t.host=n,jC(i,t),VC(n,t,r),t};function jC(e,t){return at(e&&e.attachers,t)}function VC(e,t,i){if(e){var n=e.attachers;n||(e.attachers=n=[]),et(n,t,i)}}function Vd(){}Vd.prototype.execute=function(e){var t=e.connection,i=e.newWaypoints;return e.oldWaypoints=t.waypoints,t.waypoints=i,t};Vd.prototype.revert=function(e){var t=e.connection,i=e.oldWaypoints;return t.waypoints=i,t};function rt(e,t,i){this._eventBus=e,this._elementFactory=t,this._commandStack=i;var n=this;e.on("diagram.init",function(){n.registerHandlers(i)})}rt.$inject=["eventBus","elementFactory","commandStack"];rt.prototype.getHandlers=function(){return{"shape.append":Ec,"shape.create":sr,"shape.delete":Ua,"shape.move":po,"shape.resize":qa,"shape.replace":cr,"shape.toggleCollapse":Ac,spaceTool:Or,"label.create":$a,"connection.create":Cc,"connection.delete":Wa,"connection.move":Bd,"connection.layout":Mc,"connection.updateWaypoints":Vd,"connection.reconnect":Ga,"elements.create":Nd,"elements.move":Dc,"elements.delete":Ld,"elements.distribute":Sc,"elements.align":wc,"element.updateAttachment":Pc}};rt.prototype.registerHandlers=function(e){M(this.getHandlers(),function(t,i){e.registerHandler(i,t)})};rt.prototype.moveShape=function(e,t,i,n,r){typeof n=="object"&&(r=n,n=null);var o={shape:e,delta:t,newParent:i,newParentIndex:n,hints:r||{}};this._commandStack.execute("shape.move",o)};rt.prototype.updateAttachment=function(e,t){var i={shape:e,newHost:t};this._commandStack.execute("element.updateAttachment",i)};rt.prototype.moveElements=function(e,t,i,n){n=n||{};var r=n.attach,o=i,a;r===!0?(a=i,o=i.parent):r===!1&&(a=null);var s={shapes:e,delta:t,newParent:o,newHost:a,hints:n};this._commandStack.execute("elements.move",s)};rt.prototype.moveConnection=function(e,t,i,n,r){typeof n=="object"&&(r=n,n=void 0);var o={connection:e,delta:t,newParent:i,newParentIndex:n,hints:r||{}};this._commandStack.execute("connection.move",o)};rt.prototype.layoutConnection=function(e,t){var i={connection:e,hints:t||{}};this._commandStack.execute("connection.layout",i)};rt.prototype.createConnection=function(e,t,i,n,r,o){typeof i=="object"&&(o=r,r=n,n=i,i=void 0),n=this._create("connection",n);var a={source:e,target:t,parent:r,parentIndex:i,connection:n,hints:o};return this._commandStack.execute("connection.create",a),a.connection};rt.prototype.createShape=function(e,t,i,n,r){typeof n!="number"&&(r=n,n=void 0),r=r||{};var o=r.attach,a,s;e=this._create("shape",e),o?(a=i.parent,s=i):a=i;var c={position:t,shape:e,parent:a,parentIndex:n,host:s,hints:r};return this._commandStack.execute("shape.create",c),c.shape};rt.prototype.createElements=function(e,t,i,n,r){oe(e)||(e=[e]),typeof n!="number"&&(r=n,n=void 0),r=r||{};var o={position:t,elements:e,parent:i,parentIndex:n,hints:r};return this._commandStack.execute("elements.create",o),o.elements};rt.prototype.createLabel=function(e,t,i,n){i=this._create("label",i);var r={labelTarget:e,position:t,parent:n||e.parent,shape:i};return this._commandStack.execute("label.create",r),r.shape};rt.prototype.appendShape=function(e,t,i,n,r){r=r||{},t=this._create("shape",t);var o={source:e,position:i,target:n,shape:t,connection:r.connection,connectionParent:r.connectionParent,hints:r};return this._commandStack.execute("shape.append",o),o.shape};rt.prototype.removeElements=function(e){var t={elements:e};this._commandStack.execute("elements.delete",t)};rt.prototype.distributeElements=function(e,t,i){var n={groups:e,axis:t,dimension:i};this._commandStack.execute("elements.distribute",n)};rt.prototype.removeShape=function(e,t){var i={shape:e,hints:t||{}};this._commandStack.execute("shape.delete",i)};rt.prototype.removeConnection=function(e,t){var i={connection:e,hints:t||{}};this._commandStack.execute("connection.delete",i)};rt.prototype.replaceShape=function(e,t,i){var n={oldShape:e,newData:t,hints:i||{}};return this._commandStack.execute("shape.replace",n),n.newShape};rt.prototype.alignElements=function(e,t){var i={elements:e,alignment:t};this._commandStack.execute("elements.align",i)};rt.prototype.resizeShape=function(e,t,i,n){var r={shape:e,newBounds:t,minBounds:i,hints:n};this._commandStack.execute("shape.resize",r)};rt.prototype.createSpace=function(e,t,i,n,r){var o={delta:i,direction:n,movingShapes:e,resizingShapes:t,start:r};this._commandStack.execute("spaceTool",o)};rt.prototype.updateWaypoints=function(e,t,i){var n={connection:e,newWaypoints:t,hints:i||{}};this._commandStack.execute("connection.updateWaypoints",n)};rt.prototype.reconnect=function(e,t,i,n,r){var o={connection:e,newSource:t,newTarget:i,dockingOrPoints:n,hints:r||{}};this._commandStack.execute("connection.reconnect",o)};rt.prototype.reconnectStart=function(e,t,i,n){n||(n={}),this.reconnect(e,t,e.target,i,k(n,{docking:"source"}))};rt.prototype.reconnectEnd=function(e,t,i,n){n||(n={}),this.reconnect(e,e.source,t,i,k(n,{docking:"target"}))};rt.prototype.connect=function(e,t,i,n){return this.createConnection(e,t,i||{},e.parent,n)};rt.prototype._create=function(e,t){return s0(t)?t:this._elementFactory.create(e,t)};rt.prototype.toggleCollapse=function(e,t){var i={shape:e,hints:t||{}};this._commandStack.execute("shape.toggleCollapse",i)};function Ya(e){this._elementRegistry=e}Ya.$inject=["elementRegistry"];Ya.prototype.execute=function(e){var t=e.element,i=e.moddleElement,n=e.properties;if(!i)throw new Error("<moddleElement> required");var r=e.changed||this._getVisualReferences(i).concat(t),o=e.oldProperties||iL(i,ks(n));return zC(i,n),e.oldProperties=o,e.changed=r,r};Ya.prototype.revert=function(e){var t=e.oldProperties,i=e.moddleElement,n=e.changed;return zC(i,t),n};Ya.prototype._getVisualReferences=function(e){var t=this._elementRegistry;return v(e,"bpmn:DataObject")?nL(e,t):[]};function iL(e,t){return Ot(t,function(i,n){return i[n]=e.get(n),i},{})}function zC(e,t){M(t,function(i,n){e.set(n,i)})}function nL(e,t){return t.filter(function(i){return v(i,"bpmn:DataObjectReference")&&U(i).dataObjectRef===e})}var zd="default",mo="id",HC="di",rL={width:0,height:0};function Ka(e,t,i,n){this._elementRegistry=e,this._moddle=t,this._modeling=i,this._textRenderer=n}Ka.$inject=["elementRegistry","moddle","modeling","textRenderer"];Ka.prototype.execute=function(e){var t=e.element,i=[t];if(!t)throw new Error("element required");var n=this._elementRegistry,r=this._moddle.ids,o=t.businessObject,a=lL(e.properties),s=e.oldProperties||oL(t,a);return $C(a,o)&&(r.unclaim(o[mo]),n.updateId(t,a[mo]),r.claim(a[mo],o)),zd in a&&(a[zd]&&i.push(n.get(a[zd].id)),o[zd]&&i.push(n.get(o[zd].id))),WC(t,a),e.oldProperties=s,e.changed=i,i};Ka.prototype.postExecute=function(e){var t=e.element,i=t.label,n=i&&U(i).name;if(n){var r=this._textRenderer.getExternalLabelBounds(i,n);this._modeling.resizeShape(i,r,rL)}};Ka.prototype.revert=function(e){var t=e.element,i=e.properties,n=e.oldProperties,r=t.businessObject,o=this._elementRegistry,a=this._moddle.ids;return WC(t,n),$C(i,r)&&(a.unclaim(i[mo]),o.updateId(t,n[mo]),a.claim(n[mo],r)),e.changed};function $C(e,t){return mo in e&&e[mo]!==t[mo]}function oL(e,t){var i=ks(t),n=e.businessObject,r=Me(e);return Ot(i,function(o,a){return a!==HC?o[a]=n.get(a):o[a]=aL(r,ks(t.di)),o},{})}function aL(e,t){return Ot(t,function(i,n){return i[n]=e&&e.get(n),i},{})}function WC(e,t){var i=e.businessObject,n=Me(e);M(t,function(r,o){o!==HC?i.set(o,r):n&&sL(n,r)})}function sL(e,t){M(t,function(i,n){e.set(n,i)})}var cL=["default"];function lL(e){var t=k({},e);return cL.forEach(function(i){i in e&&(t[i]=U(t[i]))}),t}function kc(e,t){this._canvas=e,this._modeling=t}kc.$inject=["canvas","modeling"];kc.prototype.execute=function(e){var t=this._canvas,i=e.newRoot,n=i.businessObject,r=t.getRootElement(),o=r.businessObject,a=o.$parent,s=Me(r);return t.setRootElement(i),t.removeRootElement(r),et(a.rootElements,n),n.$parent=a,at(a.rootElements,o),o.$parent=null,r.di=null,s.bpmnElement=n,i.di=s,e.oldRoot=r,[]};kc.prototype.revert=function(e){var t=this._canvas,i=e.newRoot,n=i.businessObject,r=e.oldRoot,o=r.businessObject,a=n.$parent,s=Me(i);return t.setRootElement(r),t.removeRootElement(i),at(a.rootElements,n),n.$parent=null,et(a.rootElements,o),o.$parent=a,i.di=null,s.bpmnElement=o,r.di=s,[]};function Hd(e,t){this._modeling=e,this._spaceTool=t}Hd.$inject=["modeling","spaceTool"];Hd.prototype.preExecute=function(e){var t=this._spaceTool,i=this._modeling,n=e.shape,r=e.location,o=Ci(n),a=o===n,s=a?n:n.parent,c=hn(s),l=nt(n);if(l?r==="left"?r="top":r==="right"&&(r="bottom"):r==="top"?r="left":r==="bottom"&&(r="right"),!c.length){var d=l?{x:n.x+Ji,y:n.y,width:n.width-Ji,height:n.height}:{x:n.x,y:n.y+Ji,width:n.width,height:n.height-Ji};i.createShape({type:"bpmn:Lane",isHorizontal:l},d,s)}var u=[];Jn(o,function(w){return u.push(w),w.label&&u.push(w.label),w===n?[]:fe(w.children,function(P){return P!==n})});var p,m,f,_,b;r==="top"?(p=-120,m=n.y,f=m+10,_="n",b="y"):r==="left"?(p=-120,m=n.x,f=m+10,_="w",b="x"):r==="bottom"?(p=120,m=n.y+n.height,f=m-10,_="s",b="y"):r==="right"&&(p=120,m=n.x+n.width,f=m-10,_="e",b="x");var D=t.calculateAdjustments(u,b,p,f),R=l?{x:0,y:p}:{x:p,y:0};t.makeSpace(D.movingShapes,D.resizingShapes,R,_,f);var C=l?{x:n.x+(a?Ji:0),y:m-(r==="top"?120:0),width:n.width-(a?Ji:0),height:120}:{x:m-(r==="left"?120:0),y:n.y+(a?Ji:0),width:120,height:n.height-(a?Ji:0)};e.newLane=i.createShape({type:"bpmn:Lane",isHorizontal:l},C,s)};function $d(e){this._modeling=e}$d.$inject=["modeling"];$d.prototype.preExecute=function(e){var t=this._modeling,i=e.shape,n=e.count,r=hn(i),o=r.length;if(o>n)throw new Error(`more than <${n}> child lanes`);var a=nt(i),s=a?i.height:i.width,c=Math.round(s/n),l,d,u,p;for(p=0;p<n;p++)p===n-1?l=s-c*p:l=c,d=a?{x:i.x+Ji,y:i.y+p*c,width:i.width-Ji,height:l}:{x:i.x+p*c,y:i.y+Ji,width:l,height:i.height-Ji},p<o?t.resizeShape(r[p],d):(u={type:"bpmn:Lane",isHorizontal:a},t.createShape(u,d,i))};function Xa(e,t){this._modeling=e,this._spaceTool=t}Xa.$inject=["modeling","spaceTool"];Xa.prototype.preExecute=function(e){var t=e.shape,i=e.newBounds,n=e.balanced;n!==!1?this.resizeBalanced(t,i):this.resizeSpace(t,i)};Xa.prototype.resizeBalanced=function(e,t){var i=this._modeling,n=eE(e,t);i.resizeShape(e,t),n.forEach(function(r){i.resizeShape(r.shape,r.newBounds)})};Xa.prototype.resizeSpace=function(e,t){var i=this._spaceTool,n=ce(e),r=ce(t),o=Xm(r,n),a=Ci(e),s=[],c=[];Jn(a,function(f){return s.push(f),(v(f,"bpmn:Lane")||v(f,"bpmn:Participant"))&&c.push(f),f.children});var l,d,u,p,m;(o.bottom||o.top)&&(l=o.bottom||o.top,d=e.y+(o.bottom?e.height:0)+(o.bottom?-10:10),u=o.bottom?"s":"n",p=o.top>0||o.bottom<0?-l:l,m=i.calculateAdjustments(s,"y",p,d),i.makeSpace(m.movingShapes,m.resizingShapes,{x:0,y:l},u)),(o.left||o.right)&&(l=o.right||o.left,d=e.x+(o.right?e.width:0)+(o.right?-10:100),u=o.right?"e":"w",p=o.left>0||o.right<0?-l:l,m=i.calculateAdjustments(c,"x",p,d),i.makeSpace(m.movingShapes,m.resizingShapes,{x:l,y:0},u))};var Wd="flowNodeRef",Wv="lanes";function Za(e){this._elementRegistry=e}Za.$inject=["elementRegistry"];Za.prototype._computeUpdates=function(e,t){var i=[],n=[],r={},o=[];function a(d,u){var p=ce(u),m={x:d.x+d.width/2,y:d.y+d.height/2};return m.x>p.left&&m.x<p.right&&m.y>p.top&&m.y<p.bottom}function s(d){i.indexOf(d)===-1&&(o.push(d),i.push(d))}function c(d){var u=Ci(d);return r[u.id]||(r[u.id]=lc(u)),r[u.id]}function l(d){if(!d.parent)return[];var u=c(d);return u.filter(function(p){return a(d,p)}).map(function(p){return p.businessObject})}return t.forEach(function(d){var u=Ci(d);if(!(!u||i.indexOf(u)!==-1)){var p=u.children.filter(function(m){return v(m,"bpmn:FlowNode")});p.forEach(s),i.push(u)}}),e.forEach(s),o.forEach(function(d){var u=d.businessObject,p=u.get(Wv),m=p.slice(),f=l(d);n.push({flowNode:u,remove:m,add:f})}),t.forEach(function(d){var u=d.businessObject;d.parent||u.get(Wd).forEach(function(p){n.push({flowNode:p,remove:[u],add:[]})})}),n};Za.prototype.execute=function(e){var t=e.updates;return t||(t=e.updates=this._computeUpdates(e.flowNodeShapes,e.laneShapes)),t.forEach(function(i){var n=i.flowNode,r=n.get(Wv);i.remove.forEach(function(o){at(r,o),at(o.get(Wd),n)}),i.add.forEach(function(o){et(r,o),et(o.get(Wd),n)})}),[]};Za.prototype.revert=function(e){var t=e.updates;return t.forEach(function(i){var n=i.flowNode,r=n.get(Wv);i.add.forEach(function(o){at(r,o),at(o.get(Wd),n)}),i.remove.forEach(function(o){et(r,o),et(o.get(Wd),n)})}),[]};function Rc(e){this._moddle=e}Rc.$inject=["moddle"];Rc.prototype.execute=function(e){var t=this._moddle.ids,i=e.id,n=e.element,r=e.claiming;return r?t.claim(i,n):t.unclaim(i),[]};Rc.prototype.revert=function(e){var t=this._moddle.ids,i=e.id,n=e.element,r=e.claiming;return r?t.unclaim(i):t.claim(i,n),[]};var dL={fill:void 0,stroke:void 0};function Ud(e){this._commandStack=e,this._normalizeColor=function(t){if(t){if(Ht(t)){var i=uL(t);if(i)return i}throw new Error(`invalid color value: ${t}`)}}}Ud.$inject=["commandStack"];Ud.prototype.postExecute=function(e){var t=e.elements,i=e.colors||dL,n=this,r={};"fill"in i&&k(r,{"background-color":this._normalizeColor(i.fill)}),"stroke"in i&&k(r,{"border-color":this._normalizeColor(i.stroke)}),M(t,function(o){var a=Fe(o)?ei(r,["border-color"]):r,s=Me(o);if(pL(a),xe(o))n._commandStack.execute("element.updateModdleProperties",{element:o,moddleElement:s.label,properties:{color:r["border-color"]}});else{if(!ge(s,["bpmndi:BPMNEdge","bpmndi:BPMNShape"]))return;n._commandStack.execute("element.updateProperties",{element:o,properties:{di:a}})}})};function uL(e){var t=document.createElement("canvas").getContext("2d");return t.fillStyle="transparent",t.fillStyle=e,/^#[0-9a-fA-F]{6}$/.test(t.fillStyle)?t.fillStyle:null}function pL(e){"border-color"in e&&(e.stroke=e["border-color"]),"background-color"in e&&(e.fill=e["background-color"])}var mL={width:0,height:0};function Of(e,t,i){function n(c,l){var d=c.label||c,u=c.labelTarget||c;return z0(d,l,u!==d),[d,u]}function r(c){var l=c.element,d=l.businessObject,u=c.newLabel;if(!xe(l)&&Tn(l)&&!Go(l)&&!UC(u)){var p=7,m=Dl(l);m={x:m.x,y:m.y+p},e.createLabel(l,m,{id:d.id+"_label",businessObject:d,di:l.di})}}function o(c){return c.oldLabel=hi(c.element),n(c.element,c.newLabel)}function a(c){return n(c.element,c.oldLabel)}function s(c){var l=c.element,d=l.label||l,u=c.newLabel,p=c.newBounds,m=c.hints||{};if(!(!xe(d)&&!v(d,"bpmn:TextAnnotation"))){if(xe(d)&&UC(u)){m.removeShape!==!1&&e.removeShape(d,{unsetLabel:!1});return}var f=hi(l);typeof p>"u"&&(p=t.getExternalLabelBounds(d,f)),p&&e.resizeShape(d,p,mL)}}this.preExecute=r,this.execute=o,this.revert=a,this.postExecute=s}Of.$inject=["modeling","textRenderer","bpmnFactory"];function UC(e){return!e||!e.trim()}function li(e,t,i,n){rt.call(this,e,t,i),this._bpmnRules=n}z(li,rt);li.$inject=["eventBus","elementFactory","commandStack","bpmnRules"];li.prototype.getHandlers=function(){var e=rt.prototype.getHandlers.call(this);return e["element.updateModdleProperties"]=Ya,e["element.updateProperties"]=Ka,e["canvas.updateRoot"]=kc,e["lane.add"]=Hd,e["lane.resize"]=Xa,e["lane.split"]=$d,e["lane.updateRefs"]=Za,e["id.updateClaim"]=Rc,e["element.setColor"]=Ud,e["element.updateLabel"]=Of,e};li.prototype.updateLabel=function(e,t,i,n){this._commandStack.execute("element.updateLabel",{element:e,newLabel:t,newBounds:i,hints:n||{}})};li.prototype.connect=function(e,t,i,n){var r=this._bpmnRules;if(i||(i=r.canConnect(e,t)),!!i)return this.createConnection(e,t,i,e.parent,n)};li.prototype.updateModdleProperties=function(e,t,i){this._commandStack.execute("element.updateModdleProperties",{element:e,moddleElement:t,properties:i})};li.prototype.updateProperties=function(e,t){this._commandStack.execute("element.updateProperties",{element:e,properties:t})};li.prototype.resizeLane=function(e,t,i){this._commandStack.execute("lane.resize",{shape:e,newBounds:t,balanced:i})};li.prototype.addLane=function(e,t){var i={shape:e,location:t};return this._commandStack.execute("lane.add",i),i.newLane};li.prototype.splitLane=function(e,t){this._commandStack.execute("lane.split",{shape:e,count:t})};li.prototype.makeCollaboration=function(){var e=this._create("root",{type:"bpmn:Collaboration"}),t={newRoot:e};return this._commandStack.execute("canvas.updateRoot",t),e};li.prototype.makeProcess=function(){var e=this._create("root",{type:"bpmn:Process"}),t={newRoot:e};return this._commandStack.execute("canvas.updateRoot",t),e};li.prototype.updateLaneRefs=function(e,t){this._commandStack.execute("lane.updateRefs",{flowNodeShapes:e,laneShapes:t})};li.prototype.claimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t,claiming:!0})};li.prototype.unclaimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t})};li.prototype.setColor=function(e,t){e.length||(e=[e]),this._commandStack.execute("element.setColor",{elements:e,colors:t})};function Tf(){}Tf.prototype.layoutConnection=function(e,t){return t=t||{},[t.connectionStart||ue(t.source||e.source),t.connectionEnd||ue(t.target||e.target)]};var If=20,fL=5,Ff=Math.round,GC=20,hL={"h:h":20,"v:v":20,"h:v":-10,"v:h":-10};function gL(e,t){return!{t:/top/,r:/right/,b:/bottom/,l:/left/,h:/./,v:/./}[t].test(e)}function vL(e,t){return{t:/top/,r:/right/,b:/bottom/,l:/left/,h:/left|right/,v:/top|bottom/}[e].test(t)}function XC(e,t,i){var n=xt(t,e,fL),r=i.split(":")[0],o=Ff((t.x-e.x)/2+e.x),a=Ff((t.y-e.y)/2+e.y),s,c,l=vL(r,n),d=/h|r|l/.test(r),u=!1,p=!1;return l?(s=d?{x:o,y:e.y}:{x:e.x,y:a},c=d?"h:h":"v:v"):(u=gL(n,r),c=d?"h:v":"v:h",u?d?(p=a===e.y,s={x:e.x+If*(/l/.test(r)?-1:1),y:p?a+If:a}):(p=o===e.x,s={x:p?o+If:o,y:e.y+If*(/t/.test(r)?-1:1)}):s={x:o,y:a}),{waypoints:Uv(e,s,c).concat(s),directions:c,turnNextDirections:p}}function _L(e,t,i){return XC(e,t,i)}function bL(e,t,i){var n=XC(t,e,qC(i));return{waypoints:n.waypoints.slice().reverse(),directions:qC(n.directions),turnNextDirections:n.turnNextDirections}}function yL(e,t){var i=e.directions.split(":")[1],n=t.directions.split(":")[0];e.turnNextDirections&&(i=i=="h"?"v":"h"),t.turnNextDirections&&(n=n=="h"?"v":"h");var r=i+":"+n,o=Uv(e.waypoints[e.waypoints.length-1],t.waypoints[0],r);return{waypoints:o,directions:r}}function qC(e){return e.split(":").reverse().join(":")}function xL(e,t,i){var n=Ff((t.x-e.x)/2+e.x),r=Ff((t.y-e.y)/2+e.y);if(i==="h:v")return[{x:t.x,y:e.y}];if(i==="v:h")return[{x:e.x,y:t.y}];if(i==="h:h")return[{x:n,y:e.y},{x:n,y:t.y}];if(i==="v:v")return[{x:e.x,y:r},{x:t.x,y:r}];throw new Error("invalid directions: can only handle varians of [hv]:[hv]")}function Uv(e,t,i){if(i=i||"h:h",!PL(i))throw new Error("unknown directions: <"+i+">: must be specified as <start>:<end> with start/end in { h,v,t,r,b,l }");if(QC(i)){var n=_L(e,t,i),r=bL(e,t,i),o=yL(n,r);return[].concat(n.waypoints,o.waypoints,r.waypoints)}return xL(e,t,i)}function wL(e,t,i){var n=Uv(e,t,i);return n.unshift(e),n.push(t),qv(n)}function EL(e,t,i,n,r){var o=r&&r.preferredLayouts||[],a=hy(o,"straight")[0]||"h:h",s=hL[a]||0,c=xt(e,t,s),l=AL(c,a);i=i||ue(e),n=n||ue(t);var d=l.split(":"),u=KC(i,e,d[0],kL(c)),p=KC(n,t,d[1],c);return wL(u,p,l)}function ZC(e,t,i,n,r,o){oe(i)&&(r=i,o=n,i=ue(e),n=ue(t)),o=k({preferredLayouts:[]},o),r=r||[];var a=o.preferredLayouts,s=a.indexOf("straight")!==-1,c;return c=s&&SL(e,t,i,n,o),c||(c=o.connectionEnd&&DL(t,e,n,r),c)||(c=o.connectionStart&&ML(e,t,i,r),c)?c:!o.connectionStart&&!o.connectionEnd&&r&&r.length?r:EL(e,t,i,n,o)}function CL(e,t,i){return e>=t&&e<=i}function YC(e,t,i){var n={x:"width",y:"height"};return CL(t[e],i[e],i[e]+i[n[e]])}function SL(e,t,i,n,r){var o={},a,s;return s=xt(e,t),/^(top|bottom|left|right)$/.test(s)?(/top|bottom/.test(s)&&(a="x"),/left|right/.test(s)&&(a="y"),r.preserveDocking==="target"?YC(a,n,e)?(o[a]=n[a],[{x:o.x!==void 0?o.x:i.x,y:o.y!==void 0?o.y:i.y,original:{x:o.x!==void 0?o.x:i.x,y:o.y!==void 0?o.y:i.y}},{x:n.x,y:n.y}]):null:YC(a,i,t)?(o[a]=i[a],[{x:i.x,y:i.y},{x:o.x!==void 0?o.x:n.x,y:o.y!==void 0?o.y:n.y,original:{x:o.x!==void 0?o.x:n.x,y:o.y!==void 0?o.y:n.y}}]):null):null}function ML(e,t,i,n){return Gv(e,t,i,n)}function DL(e,t,i,n){var r=n.slice().reverse();return r=Gv(e,t,i,r),r?r.reverse():null}function Gv(e,t,i,n){function r(d){return d.length<3?!0:d.length>4?!1:!!ve(d,function(u,p){var m=d[p-1];return m&&Vo(u,m)<3})}function o(d,u,p){var m=Xi(u,d);switch(m){case"v":return{x:p.x,y:d.y};case"h":return{x:d.x,y:p.y}}return{x:d.x,y:d.y}}function a(d,u,p){var m;for(m=d.length-2;m!==0;m--)if(kg(d[m],u,GC)||kg(d[m],p,GC))return d.slice(m);return d}if(r(n))return null;var s=n[0],c=n.slice(),l;return c[0]=i,c[1]=o(c[1],s,i),l=a(c,e,t),l!==c&&(c=Gv(e,t,i,l)),c&&Xi(c)?null:c}function AL(e,t){if(QC(t))return t;switch(e){case"intersect":return"t:t";case"top":case"bottom":return"v:v";case"left":case"right":return"h:h";default:return t}}function PL(e){return e&&/^h|v|t|r|b|l:h|v|t|r|b|l$/.test(e)}function QC(e){return e&&/t|r|b|l/.test(e)}function kL(e){return{top:"bottom",bottom:"top",left:"right",right:"left","top-left":"bottom-right","bottom-right":"top-left","top-right":"bottom-left","bottom-left":"top-right"}[e]}function KC(e,t,i,n){if(i==="h"&&(i=/left/.test(n)?"l":"r"),i==="v"&&(i=/top/.test(n)?"t":"b"),i==="t")return{original:e,x:e.x,y:t.y};if(i==="r")return{original:e,x:t.x+t.width,y:e.y};if(i==="b")return{original:e,x:e.x,y:t.y+t.height};if(i==="l")return{original:e,x:t.x,y:e.y};throw new Error("unexpected dockingDirection: <"+i+">")}function qv(e){return e.reduce(function(t,i,n){var r=t[t.length-1],o=e[n+1];return Ts(r,o,i,0)||t.push(i),t},[])}var RL=-10,OL=40,TL={default:["h:h"],fromGateway:["v:h"],toGateway:["h:v"],loop:{fromTop:["t:r"],fromRight:["r:b"],fromLeft:["l:t"],fromBottom:["b:l"]},boundaryLoop:{alternateHorizontalSide:"b",alternateVerticalSide:"l",default:"v"},messageFlow:["straight","v:v"],subProcess:["straight","h:h"],isHorizontal:!0},IL={default:["v:v"],fromGateway:["h:v"],toGateway:["v:h"],loop:{fromTop:["t:l"],fromRight:["r:t"],fromLeft:["l:b"],fromBottom:["b:r"]},boundaryLoop:{alternateHorizontalSide:"t",alternateVerticalSide:"r",default:"h"},messageFlow:["straight","h:h"],subProcess:["straight","v:v"],isHorizontal:!1},Kv={top:"bottom","top-right":"bottom-left","top-left":"bottom-right",right:"left",bottom:"top","bottom-right":"top-left","bottom-left":"top-right",left:"right"},Gd={top:"t",right:"r",bottom:"b",left:"l"};function Ic(e){this._elementRegistry=e}z(Ic,Tf);Ic.prototype.layoutConnection=function(e,t){t||(t={});var i=t.source||e.source,n=t.target||e.target,r=t.waypoints||e.waypoints,o=t.connectionStart,a=t.connectionEnd,s=this._elementRegistry,c,l;if(o||(o=JC(r&&r[0],i)),a||(a=JC(r&&r[r.length-1],n)),(v(e,"bpmn:Association")||v(e,"bpmn:DataAssociation"))&&r&&!e1(i,n))return[].concat([o],r.slice(1,-1),[a]);var d=Em(i,s)?TL:IL;return v(e,"bpmn:MessageFlow")?c=NL(i,n,d):(v(e,"bpmn:SequenceFlow")||e1(i,n))&&(i===n?c={preferredLayouts:HL(i,e,d)}:v(i,"bpmn:BoundaryEvent")?c={preferredLayouts:$L(i,n,a,d)}:qd(i)||qd(n)?c={preferredLayouts:d.subProcess,preserveDocking:BL(i)}:v(i,"bpmn:Gateway")?c={preferredLayouts:d.fromGateway}:v(n,"bpmn:Gateway")?c={preferredLayouts:d.toGateway}:c={preferredLayouts:d.default}),c&&(c=k(c,t),l=qv(ZC(i,n,o,a,r,c))),l||[o,a]};function FL(e){var t=e.host;return xt(ue(e),t,RL)}function NL(e,t,i){return{preferredLayouts:i.messageFlow,preserveDocking:LL(e,t)}}function LL(e,t){return v(t,"bpmn:Participant")?"source":v(e,"bpmn:Participant")?"target":qd(t)?"source":qd(e)||v(t,"bpmn:Event")?"target":v(e,"bpmn:Event")?"source":null}function BL(e){return qd(e)?"target":"source"}function JC(e,t){return e?e.original||e:ue(t)}function e1(e,t){return v(t,"bpmn:Activity")&&v(e,"bpmn:BoundaryEvent")&&t.businessObject.isForCompensation}function qd(e){return v(e,"bpmn:SubProcess")&&we(e)}function Qa(e,t){return e===t}function jL(e,t){return t.indexOf(e)!==-1}function Oc(e){var t=/right|left/.exec(e);return t&&t[0]}function Tc(e){var t=/top|bottom/.exec(e);return t&&t[0]}function t1(e,t){return Kv[e]===t}function VL(e,t){var i=Oc(e),n=Kv[i];return t.indexOf(n)!==-1}function zL(e,t){var i=Tc(e),n=Kv[i];return t.indexOf(n)!==-1}function n1(e){return e==="right"||e==="left"}function HL(e,t,i){var n=t.waypoints,r=n&&n.length&&xt(n[0],e);return r==="top"?i.loop.fromTop:r==="right"?i.loop.fromRight:r==="left"?i.loop.fromLeft:i.loop.fromBottom}function $L(e,t,i,n){var r=ue(e),o=ue(t),a=FL(e),s,c,l=Qa(e.host,t),d=jL(a,["top","right","bottom","left"]),u=xt(o,r,{x:e.width/2+t.width/2,y:e.height/2+t.height/2});return l?WL(a,d,e,t,i,n):(s=UL(a,u,d,n.isHorizontal),c=GL(a,u,d,n.isHorizontal),[s+":"+c])}function WL(e,t,i,n,r,o){var a=t?e:o.isHorizontal?Tc(e):Oc(e),s=Gd[a],c;return t?n1(e)?c=i1("y",i,n,r)?"h":o.boundaryLoop.alternateHorizontalSide:c=i1("x",i,n,r)?"v":o.boundaryLoop.alternateVerticalSide:c=o.boundaryLoop.default,[s+":"+c]}function i1(e,t,i,n){var r=OL;return!(Yv(e,n,i,r)||Yv(e,n,{x:i.x+i.width,y:i.y+i.height},r)||Yv(e,n,ue(t),r))}function Yv(e,t,i,n){return Math.abs(t[e]-i[e])<n}function UL(e,t,i,n){if(i)return Gd[e];var r=Tc(e),o=Oc(e),a=Tc(t),s=Oc(t);if(n){if(Qa(r,a)||t1(o,s))return Gd[r]}else if(Qa(o,s)||t1(r,a))return Gd[o];return Gd[n?o:r]}function GL(e,t,i,n){return i?n1(e)?VL(e,t)||Qa(e,t)?"h":"v":zL(e,t)||Qa(e,t)?"v":"h":n?Qa(Tc(e),Tc(t))?"h":"v":Qa(Oc(e),Oc(t))?"v":"h"}Ic.$inject=["elementRegistry"];function r1(e){return k({original:e.point.original||e.point},e.actual)}function Tr(e,t){this._elementRegistry=e,this._graphicsFactory=t}Tr.$inject=["elementRegistry","graphicsFactory"];Tr.prototype.getCroppedWaypoints=function(e,t,i){t=t||e.source,i=i||e.target;var n=this.getDockingPoint(e,t,!0),r=this.getDockingPoint(e,i),o=e.waypoints.slice(n.idx+1,r.idx);return o.unshift(r1(n)),o.push(r1(r)),o};Tr.prototype.getDockingPoint=function(e,t,i){var n=e.waypoints,r,o,a;return r=i?0:n.length-1,o=n[r],a=this._getIntersection(t,e,i),{point:o,actual:a||o,idx:r}};Tr.prototype._getIntersection=function(e,t,i){var n=this._getShapePath(e),r=this._getConnectionPath(t);return xl(n,r,i)};Tr.prototype._getConnectionPath=function(e){return this._graphicsFactory.getConnectionPath(e)};Tr.prototype._getShapePath=function(e){return this._graphicsFactory.getShapePath(e)};Tr.prototype._getGfx=function(e){return this._elementRegistry.getGraphics(e)};var Nf={__init__:["modeling","bpmnUpdater"],__depends__:[FE,JE,eC,tC,Sf,EC,MC,PC,Ut,Gs,kf],bpmnFactory:["type",en],bpmnUpdater:["type",ki],elementFactory:["type",Rr],modeling:["type",li],layouter:["type",Ic],connectionDocking:["type",Tr]};var o1=Math.round;function Fc(e,t,i,n,r,o){this._complexPreview=e,this._connectionDocking=t,this._elementFactory=i,this._eventBus=n,this._layouter=r,this._rules=o}Fc.prototype.create=function(e,t,i){let n=this._complexPreview,r=this._connectionDocking,o=this._elementFactory,a=this._eventBus,s=this._layouter,c=this._rules,l=o.createShape(k({type:t},i)),d=a.fire("autoPlace",{source:e,shape:l});if(!d)return;k(l,{x:d.x-o1(l.width/2),y:d.y-o1(l.height/2)});let u=c.allowed("connection.create",{source:e,target:l,hints:{targetParent:e.parent}}),p=null;u&&(p=o.createConnection(u),p.waypoints=s.layoutConnection(p,{source:e,target:l}),p.waypoints=r.getCroppedWaypoints(p,e,l)),n.create({created:[l,p].filter(m=>!To(m))})};Fc.prototype.cleanUp=function(){this._complexPreview.cleanUp()};Fc.$inject=["complexPreview","connectionDocking","elementFactory","eventBus","layouter","rules"];var a1={__depends__:[tc,$w,Nf],__init__:["appendPreview"],appendPreview:["type",Fc]};var s1=Math.min,c1=Math.max;function Xv(e){e.preventDefault()}function Yd(e){e.stopPropagation()}function qL(e){return e.nodeType===Node.TEXT_NODE}function YL(e){return[].slice.call(e)}function vn(e){this.container=e.container,this.parent=qe('<div class="djs-direct-editing-parent"><div class="djs-direct-editing-content" contenteditable="true"></div></div>'),this.content=He("[contenteditable]",this.parent),this.keyHandler=e.keyHandler||function(){},this.resizeHandler=e.resizeHandler||function(){},this.autoResize=jt(this.autoResize,this),this.handlePaste=jt(this.handlePaste,this)}vn.prototype.create=function(e,t,i,n){var r=this,o=this.parent,a=this.content,s=this.container;n=this.options=n||{},t=this.style=t||{};var c=ei(t,["width","height","maxWidth","maxHeight","minWidth","minHeight","left","top","backgroundColor","position","overflow","border","wordWrap","textAlign","outline","transform"]);k(o.style,{width:e.width+"px",height:e.height+"px",maxWidth:e.maxWidth+"px",maxHeight:e.maxHeight+"px",minWidth:e.minWidth+"px",minHeight:e.minHeight+"px",left:e.x+"px",top:e.y+"px",backgroundColor:"#ffffff",position:"absolute",overflow:"visible",border:"1px solid #ccc",boxSizing:"border-box",wordWrap:"normal",textAlign:"center",outline:"none"},c);var l=ei(t,["fontFamily","fontSize","fontWeight","lineHeight","padding","paddingTop","paddingRight","paddingBottom","paddingLeft"]);return k(a.style,{boxSizing:"border-box",width:"100%",outline:"none",wordWrap:"break-word"},l),n.centerVertically&&k(a.style,{position:"absolute",top:"50%",transform:"translate(0, -50%)"},l),a.innerText=i,Se.bind(a,"keydown",this.keyHandler),Se.bind(a,"mousedown",Yd),Se.bind(a,"paste",r.handlePaste),n.autoResize&&Se.bind(a,"input",this.autoResize),n.resizable&&this.resizable(t),s.appendChild(o),this.setSelection(a.lastChild,a.lastChild&&a.lastChild.length),o};vn.prototype.handlePaste=function(e){var t=this.options,i=this.style;e.preventDefault();var n;if(e.clipboardData?n=e.clipboardData.getData("text/plain"):n=window.clipboardData.getData("Text"),this.insertText(n),t.autoResize){var r=this.autoResize(i);r&&this.resizeHandler(r)}};vn.prototype.insertText=function(e){e=KL(e);var t=document.execCommand("insertText",!1,e);t||this._insertTextIE(e)};vn.prototype._insertTextIE=function(e){var t=this.getSelection(),i=t.startContainer,n=t.endContainer,r=t.startOffset,o=t.endOffset,a=t.commonAncestorContainer,s=YL(a.childNodes),c,l;if(qL(a)){var d=i.textContent;i.textContent=d.substring(0,r)+e+d.substring(o),c=i,l=r+e.length}else if(i===this.content&&n===this.content){var u=document.createTextNode(e);this.content.insertBefore(u,s[r]),c=u,l=u.textContent.length}else{var p=s.indexOf(i),m=s.indexOf(n);s.forEach(function(f,_){_===p?f.textContent=i.textContent.substring(0,r)+e+n.textContent.substring(o):_>p&&_<=m&&Ni(f)}),c=i,l=r+e.length}c&&l!==void 0&&setTimeout(function(){self.setSelection(c,l)})};vn.prototype.autoResize=function(){var e=this.parent,t=this.content,i=parseInt(this.style.fontSize)||12;if(t.scrollHeight>e.offsetHeight||t.scrollHeight<e.offsetHeight-i){var n=e.getBoundingClientRect(),r=t.scrollHeight;e.style.height=r+"px",this.resizeHandler({width:n.width,height:n.height,dx:0,dy:r-n.height})}};vn.prototype.resizable=function(){var e=this,t=this.parent,i=this.resizeHandle,n=parseInt(this.style.minWidth)||0,r=parseInt(this.style.minHeight)||0,o=parseInt(this.style.maxWidth)||1/0,a=parseInt(this.style.maxHeight)||1/0;if(!i){i=this.resizeHandle=qe('<div class="djs-direct-editing-resize-handle"></div>');var s,c,l,d,u=function(f){Xv(f),Yd(f),s=f.clientX,c=f.clientY;var _=t.getBoundingClientRect();l=_.width,d=_.height,Se.bind(document,"mousemove",p),Se.bind(document,"mouseup",m)},p=function(f){Xv(f),Yd(f);var _=s1(c1(l+f.clientX-s,n),o),b=s1(c1(d+f.clientY-c,r),a);t.style.width=_+"px",t.style.height=b+"px",e.resizeHandler({width:l,height:d,dx:f.clientX-s,dy:f.clientY-c})},m=function(f){Xv(f),Yd(f),Se.unbind(document,"mousemove",p,!1),Se.unbind(document,"mouseup",m,!1)};Se.bind(i,"mousedown",u)}k(i.style,{position:"absolute",bottom:"0px",right:"0px",cursor:"nwse-resize",width:"0",height:"0",borderTop:(parseInt(this.style.fontSize)/4||3)+"px solid transparent",borderRight:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderBottom:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderLeft:(parseInt(this.style.fontSize)/4||3)+"px solid transparent"}),t.appendChild(i)};vn.prototype.destroy=function(){var e=this.parent,t=this.content,i=this.resizeHandle;t.innerText="",e.removeAttribute("style"),t.removeAttribute("style"),Se.unbind(t,"keydown",this.keyHandler),Se.unbind(t,"mousedown",Yd),Se.unbind(t,"input",this.autoResize),Se.unbind(t,"paste",this.handlePaste),i&&(i.removeAttribute("style"),Ni(i)),Ni(e)};vn.prototype.getValue=function(){return this.content.innerText.trim()};vn.prototype.getSelection=function(){var e=window.getSelection(),t=e.getRangeAt(0);return t};vn.prototype.setSelection=function(e,t){var i=document.createRange();e===null?i.selectNodeContents(this.content):(i.setStart(e,t),i.setEnd(e,t));var n=window.getSelection();n.removeAllRanges(),n.addRange(i)};function KL(e){return e.replace(/\r\n|\r|\n/g,`
`)}function nn(e,t){this._eventBus=e,this._canvas=t,this._providers=[],this._textbox=new vn({container:t.getContainer(),keyHandler:jt(this._handleKey,this),resizeHandler:jt(this._handleResize,this)})}nn.$inject=["eventBus","canvas"];nn.prototype.registerProvider=function(e){this._providers.push(e)};nn.prototype.isActive=function(e){return!!(this._active&&(!e||this._active.element===e))};nn.prototype.cancel=function(){this._active&&(this._fire("cancel"),this.close())};nn.prototype._fire=function(e,t){this._eventBus.fire("directEditing."+e,t||{active:this._active})};nn.prototype.close=function(){this._textbox.destroy(),this._fire("deactivate"),this._active=null,this.resizable=void 0,this._canvas.restoreFocus&&this._canvas.restoreFocus()};nn.prototype.complete=function(){var e=this._active;if(e){var t,i=e.context.bounds,n=this.$textbox.getBoundingClientRect(),r=this.getValue(),o=e.context.text;(r!==o||n.height!==i.height||n.width!==i.width)&&(t=this._textbox.container.getBoundingClientRect(),e.provider.update(e.element,r,e.context.text,{x:n.left-t.left,y:n.top-t.top,width:n.width,height:n.height})),this._fire("complete"),this.close()}};nn.prototype.getValue=function(){return this._textbox.getValue()};nn.prototype._handleKey=function(e){e.stopPropagation();var t=e.keyCode||e.charCode;if(t===27)return e.preventDefault(),this.cancel();if(t===13&&!e.shiftKey)return e.preventDefault(),this.complete()};nn.prototype._handleResize=function(e){this._fire("resize",e)};nn.prototype.activate=function(e){this.isActive()&&this.cancel();var t,i=ve(this._providers,function(n){return(t=n.activate(e))?n:null});return t&&(this.$textbox=this._textbox.create(t.bounds,t.style,t.text,t.options),this._active={element:e,context:t,provider:i},t.options&&t.options.resizable&&(this.resizable=!0),this._fire("activate")),!!t};var Lf={__depends__:[Xo],__init__:["directEditing"],directEditing:["type",nn]};function l1(e){return function(t){var i=t.target,n=U(e),r=n.eventDefinitions&&n.eventDefinitions[0],o=n.$type===i.type,a=(r&&r.$type)===i.eventDefinitionType,s=!!i.triggeredByEvent==!!n.triggeredByEvent,c=i.isExpanded===void 0||i.isExpanded===we(e);return!o||!a||!s||!c}}var d1=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message start event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer start event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Conditional start event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Signal start event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],u1=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}}],p1=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message intermediate catch event",actionName:"replace-with-message-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message intermediate throw event",actionName:"replace-with-message-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-message",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer intermediate catch event",actionName:"replace-with-timer-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Escalation intermediate throw event",actionName:"replace-with-escalation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-escalation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Conditional intermediate catch event",actionName:"replace-with-conditional-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Link intermediate catch event",actionName:"replace-with-link-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-link",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Link intermediate throw event",actionName:"replace-with-link-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-link",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Compensation intermediate throw event",actionName:"replace-with-compensation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-compensation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal intermediate catch event",actionName:"replace-with-signal-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal intermediate throw event",actionName:"replace-with-signal-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-signal",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],m1=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message end event",actionName:"replace-with-message-end",className:"bpmn-icon-end-event-message",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Escalation end event",actionName:"replace-with-escalation-end",className:"bpmn-icon-end-event-escalation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Error end event",actionName:"replace-with-error-end",className:"bpmn-icon-end-event-error",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Cancel end event",actionName:"replace-with-cancel-end",className:"bpmn-icon-end-event-cancel",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CancelEventDefinition"}},{label:"Compensation end event",actionName:"replace-with-compensation-end",className:"bpmn-icon-end-event-compensation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal end event",actionName:"replace-with-signal-end",className:"bpmn-icon-end-event-signal",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Terminate end event",actionName:"replace-with-terminate-end",className:"bpmn-icon-end-event-terminate",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:TerminateEventDefinition"}}],f1=[{label:"Exclusive gateway",actionName:"replace-with-exclusive-gateway",className:"bpmn-icon-gateway-xor",target:{type:"bpmn:ExclusiveGateway"}},{label:"Parallel gateway",actionName:"replace-with-parallel-gateway",className:"bpmn-icon-gateway-parallel",target:{type:"bpmn:ParallelGateway"}},{label:"Inclusive gateway",actionName:"replace-with-inclusive-gateway",className:"bpmn-icon-gateway-or",target:{type:"bpmn:InclusiveGateway"}},{label:"Complex gateway",actionName:"replace-with-complex-gateway",className:"bpmn-icon-gateway-complex",target:{type:"bpmn:ComplexGateway"}},{label:"Event-based gateway",actionName:"replace-with-event-based-gateway",className:"bpmn-icon-gateway-eventbased",target:{type:"bpmn:EventBasedGateway",instantiate:!1,eventGatewayType:"Exclusive"}}],h1=[{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Event sub-process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}},{label:"Ad-hoc sub-process",actionName:"replace-with-ad-hoc-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:AdHocSubProcess",isExpanded:!0}},{label:"Sub-process (collapsed)",actionName:"replace-with-collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}}],g1=[{label:"Sub-process",actionName:"replace-with-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}},{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Event sub-process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}},{label:"Ad-hoc sub-process (collapsed)",actionName:"replace-with-collapsed-ad-hoc-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:AdHocSubProcess",isExpanded:!1}}],Zv=[{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Sub-process",actionName:"replace-with-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}},{label:"Ad-hoc sub-process",actionName:"replace-with-ad-hoc-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:AdHocSubProcess",isExpanded:!0}},{label:"Event sub-process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}}],v1=Zv,Qv=[{label:"Task",actionName:"replace-with-task",className:"bpmn-icon-task",target:{type:"bpmn:Task"}},{label:"User task",actionName:"replace-with-user-task",className:"bpmn-icon-user",target:{type:"bpmn:UserTask"}},{label:"Service task",actionName:"replace-with-service-task",className:"bpmn-icon-service",target:{type:"bpmn:ServiceTask"}},{label:"Send task",actionName:"replace-with-send-task",className:"bpmn-icon-send",target:{type:"bpmn:SendTask"}},{label:"Receive task",actionName:"replace-with-receive-task",className:"bpmn-icon-receive",target:{type:"bpmn:ReceiveTask"}},{label:"Manual task",actionName:"replace-with-manual-task",className:"bpmn-icon-manual",target:{type:"bpmn:ManualTask"}},{label:"Business rule task",actionName:"replace-with-rule-task",className:"bpmn-icon-business-rule",target:{type:"bpmn:BusinessRuleTask"}},{label:"Script task",actionName:"replace-with-script-task",className:"bpmn-icon-script",target:{type:"bpmn:ScriptTask"}},{label:"Call activity",actionName:"replace-with-call-activity",className:"bpmn-icon-call-activity",target:{type:"bpmn:CallActivity"}},{label:"Sub-process (collapsed)",actionName:"replace-with-collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}},{label:"Sub-process (expanded)",actionName:"replace-with-expanded-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}},{label:"Ad-hoc sub-process (collapsed)",actionName:"replace-with-collapsed-ad-hoc-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:AdHocSubProcess",isExpanded:!1}},{label:"Ad-hoc sub-process (expanded)",actionName:"replace-with-ad-hoc-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:AdHocSubProcess",isExpanded:!0}}],_1=[{label:"Data store reference",actionName:"replace-with-data-store-reference",className:"bpmn-icon-data-store",target:{type:"bpmn:DataStoreReference"}}],b1=[{label:"Data object reference",actionName:"replace-with-data-object-reference",className:"bpmn-icon-data-object",target:{type:"bpmn:DataObjectReference"}}],y1=[{label:"Message boundary event",actionName:"replace-with-message-boundary",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition",cancelActivity:!0}},{label:"Timer boundary event",actionName:"replace-with-timer-boundary",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition",cancelActivity:!0}},{label:"Escalation boundary event",actionName:"replace-with-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",cancelActivity:!0}},{label:"Conditional boundary event",actionName:"replace-with-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",cancelActivity:!0}},{label:"Error boundary event",actionName:"replace-with-error-boundary",className:"bpmn-icon-intermediate-event-catch-error",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ErrorEventDefinition",cancelActivity:!0}},{label:"Cancel boundary event",actionName:"replace-with-cancel-boundary",className:"bpmn-icon-intermediate-event-catch-cancel",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CancelEventDefinition",cancelActivity:!0}},{label:"Signal boundary event",actionName:"replace-with-signal-boundary",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition",cancelActivity:!0}},{label:"Compensation boundary event",actionName:"replace-with-compensation-boundary",className:"bpmn-icon-intermediate-event-catch-compensation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CompensateEventDefinition",cancelActivity:!0}},{label:"Message boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-message-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition",cancelActivity:!1}},{label:"Timer boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition",cancelActivity:!1}},{label:"Escalation boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",cancelActivity:!1}},{label:"Conditional boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",cancelActivity:!1}},{label:"Signal boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition",cancelActivity:!1}}],x1=[{label:"Message start event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition",isInterrupting:!0}},{label:"Timer start event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition",isInterrupting:!0}},{label:"Conditional start event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",isInterrupting:!0}},{label:"Signal start event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition",isInterrupting:!0}},{label:"Error start event",actionName:"replace-with-error-start",className:"bpmn-icon-start-event-error",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ErrorEventDefinition",isInterrupting:!0}},{label:"Escalation start event",actionName:"replace-with-escalation-start",className:"bpmn-icon-start-event-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",isInterrupting:!0}},{label:"Compensation start event",actionName:"replace-with-compensation-start",className:"bpmn-icon-start-event-compensation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:CompensateEventDefinition",isInterrupting:!0}},{label:"Message start event (non-interrupting)",actionName:"replace-with-non-interrupting-message-start",className:"bpmn-icon-start-event-non-interrupting-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition",isInterrupting:!1}},{label:"Timer start event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-start",className:"bpmn-icon-start-event-non-interrupting-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition",isInterrupting:!1}},{label:"Conditional start event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-start",className:"bpmn-icon-start-event-non-interrupting-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",isInterrupting:!1}},{label:"Signal start event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-start",className:"bpmn-icon-start-event-non-interrupting-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition",isInterrupting:!1}},{label:"Escalation start event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-start",className:"bpmn-icon-start-event-non-interrupting-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",isInterrupting:!1}}],w1=[{label:"Sequence flow",actionName:"replace-with-sequence-flow",className:"bpmn-icon-connection"},{label:"Default flow",actionName:"replace-with-default-flow",className:"bpmn-icon-default-flow"},{label:"Conditional flow",actionName:"replace-with-conditional-flow",className:"bpmn-icon-conditional-flow"}],E1=[{label:"Expanded pool/participant",actionName:"replace-with-expanded-pool",className:"bpmn-icon-participant",target:{type:"bpmn:Participant",isExpanded:!0}},{label:function(e){var t="Empty pool/participant";return e.children&&e.children.length&&(t+=" (removes content)"),t},actionName:"replace-with-collapsed-pool",className:"bpmn-icon-lane",target:{type:"bpmn:Participant",isExpanded:!1}}],C1={"bpmn:MessageEventDefinition":[{label:"Message start event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message intermediate catch event",actionName:"replace-with-message-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message intermediate throw event",actionName:"replace-with-message-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-message",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message end event",actionName:"replace-with-message-end",className:"bpmn-icon-end-event-message",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}}],"bpmn:TimerEventDefinition":[{label:"Timer start event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Timer intermediate catch event",actionName:"replace-with-timer-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}}],"bpmn:ConditionalEventDefinition":[{label:"Conditional start event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Conditional intermediate catch event",actionName:"replace-with-conditional-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}}],"bpmn:SignalEventDefinition":[{label:"Signal start event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal intermediate catch event",actionName:"replace-with-signal-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal intermediate throw event",actionName:"replace-with-signal-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-signal",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal end event",actionName:"replace-with-signal-end",className:"bpmn-icon-end-event-signal",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],"bpmn:ErrorEventDefinition":[{label:"Error start event",actionName:"replace-with-error-start",className:"bpmn-icon-start-event-error",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Error end event",actionName:"replace-with-error-end",className:"bpmn-icon-end-event-error",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}}],"bpmn:EscalationEventDefinition":[{label:"Escalation start event",actionName:"replace-with-escalation-start",className:"bpmn-icon-start-event-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Escalation intermediate throw event",actionName:"replace-with-escalation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-escalation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Escalation end event",actionName:"replace-with-escalation-end",className:"bpmn-icon-end-event-escalation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}}],"bpmn:CompensateEventDefinition":[{label:"Compensation start event",actionName:"replace-with-compensation-start",className:"bpmn-icon-start-event-compensation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Compensation intermediate throw event",actionName:"replace-with-compensation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-compensation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Compensation end event",actionName:"replace-with-compensation-end",className:"bpmn-icon-end-event-compensation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}}]};var Jv={"start-event-non-interrupting":`
  <svg viewBox="0 0 2048 2048" xmlns="http://www.w3.org/2000/svg">
    <g transform="translate(0 995.64)">
      <path d="m1899 28.357c21.545 567.43-598.38 1023.5-1133.6 835.92-548.09-147.21-801.57-873.95-463.59-1330 302.62-480.3 1071.7-507.54 1407.6-49.847 122.14 153.12 190.07 348.07 189.59 543.91z" fill="none" stroke="currentColor" stroke-dasharray="418.310422, 361.2328165" stroke-linecap="round" stroke-width="100"/>
    </g>
  </svg>`,"intermediate-event-non-interrupting":`
  <svg viewBox="0 0 2048 2048" xmlns="http://www.w3.org/2000/svg">
     <g transform="translate(0 995.64)" fill="none" stroke="currentColor" stroke-linecap="round">
        <circle cx="1024" cy="28.357" r="875" stroke-dasharray="418.310422, 361.2328165" stroke-width="100"/>
        <circle cx="1024" cy="28.357" r="685" stroke-dasharray="348.31044857,261.23283643" stroke-dashoffset="500" stroke-width="100"/>
     </g>
  </svg>`};function rn(e,t,i,n,r,o,a,s){this._bpmnFactory=e,this._popupMenu=t,this._modeling=i,this._moddle=n,this._bpmnReplace=r,this._rules=o,this._translate=a,this._moddleCopy=s,this._register()}rn.$inject=["bpmnFactory","popupMenu","modeling","moddle","bpmnReplace","rules","translate","moddleCopy"];rn.prototype._register=function(){this._popupMenu.registerProvider("bpmn-replace",this)};rn.prototype.getPopupMenuEntries=function(e){var t=e.businessObject,i=this._rules,n=[],r,o=[];if(oe(e)||!i.allowed("shape.replace",{element:e}))return{};var a=l1(e);return v(t,"bpmn:DataObjectReference")?this._createEntries(e,_1):v(t,"bpmn:DataStoreReference")&&!v(e.parent,"bpmn:Collaboration")?this._createEntries(e,b1):(v(t,"bpmn:Event")&&!v(t,"bpmn:BoundaryEvent")&&(r=t.get("eventDefinitions")[0]?.$type,n=C1[r]||[],!kt(t.$parent)&&v(t.$parent,"bpmn:SubProcess")&&(n=fe(n,function(s){return s.target.type!=="bpmn:StartEvent"}))),v(t,"bpmn:StartEvent")&&!v(t.$parent,"bpmn:SubProcess")?(o=fe(d1.concat(n),a),this._createEntries(e,o)):v(t,"bpmn:Participant")?(o=fe(E1,function(s){return we(e)!==s.target.isExpanded}),this._createEntries(e,o)):v(t,"bpmn:StartEvent")&&kt(t.$parent)?(o=fe(x1.concat(n),function(s){var c=s.target,l=c.isInterrupting!==!1,d=t.isInterrupting===l;return a(s)||!a(s)&&!d}),this._createEntries(e,o)):v(t,"bpmn:StartEvent")&&!kt(t.$parent)&&v(t.$parent,"bpmn:SubProcess")?(o=fe(u1.concat(n),a),this._createEntries(e,o)):v(t,"bpmn:EndEvent")?(o=fe(m1.concat(n),function(s){var c=s.target;return c.eventDefinitionType=="bpmn:CancelEventDefinition"&&!v(t.$parent,"bpmn:Transaction")?!1:a(s)}),this._createEntries(e,o)):v(t,"bpmn:BoundaryEvent")?(o=fe(y1,function(s){var c=s.target;if(c.eventDefinitionType=="bpmn:CancelEventDefinition"&&!v(t.attachedToRef,"bpmn:Transaction"))return!1;var l=c.cancelActivity!==!1,d=t.cancelActivity==l;return a(s)||!a(s)&&!d}),this._createEntries(e,o)):v(t,"bpmn:IntermediateCatchEvent")||v(t,"bpmn:IntermediateThrowEvent")?(o=fe(p1.concat(n),a),this._createEntries(e,o)):v(t,"bpmn:Gateway")?(o=fe(f1,a),this._createEntries(e,o)):v(t,"bpmn:Transaction")?(o=fe(Zv,a),this._createEntries(e,o)):kt(t)&&we(e)?(o=fe(v1,a),this._createEntries(e,o)):v(t,"bpmn:AdHocSubProcess")&&we(e)?(o=fe(g1,a),this._createEntries(e,o)):v(t,"bpmn:SubProcess")&&we(e)?(o=fe(h1,a),this._createEntries(e,o)):v(t,"bpmn:SubProcess")&&!we(e)?(o=fe(Qv,function(s){var c=s.target.type===e.type,l=s.target.isExpanded===!0;return c===l}),this._createEntries(e,o)):v(t,"bpmn:SequenceFlow")?this._createSequenceFlowEntries(e,w1):v(t,"bpmn:FlowNode")?(o=fe(Qv,a),this._createEntries(e,o)):{})};rn.prototype.getPopupMenuHeaderEntries=function(e){var t={};return v(e,"bpmn:Activity")&&!kt(e)&&(t=X(X({},t),this._getLoopCharacteristicsHeaderEntries(e))),v(e,"bpmn:DataObjectReference")&&(t=X(X({},t),this._getCollectionHeaderEntries(e))),v(e,"bpmn:Participant")&&(t=X(X({},t),this._getParticipantMultiplicityHeaderEntries(e))),of(e)&&(t=X(X({},t),this._getNonInterruptingHeaderEntries(e))),t};rn.prototype._createEntries=function(e,t){var i={},n=this;return M(t,function(r){i[r.actionName]=n._createEntry(r,e)}),i};rn.prototype._createSequenceFlowEntries=function(e,t){var i=U(e),n={},r=this._modeling,o=this._moddle,a=this;return M(t,function(s){switch(s.actionName){case"replace-with-default-flow":i.sourceRef.default!==i&&(v(i.sourceRef,"bpmn:ExclusiveGateway")||v(i.sourceRef,"bpmn:InclusiveGateway")||v(i.sourceRef,"bpmn:ComplexGateway")||v(i.sourceRef,"bpmn:Activity"))&&(n=Be(X({},n),{[s.actionName]:a._createEntry(s,e,function(){r.updateProperties(e.source,{default:i})})}));break;case"replace-with-conditional-flow":!i.conditionExpression&&v(i.sourceRef,"bpmn:Activity")&&(n=Be(X({},n),{[s.actionName]:a._createEntry(s,e,function(){var c=o.create("bpmn:FormalExpression",{body:""});r.updateProperties(e,{conditionExpression:c})})}));break;default:v(i.sourceRef,"bpmn:Activity")&&i.conditionExpression&&(n=Be(X({},n),{[s.actionName]:a._createEntry(s,e,function(){r.updateProperties(e,{conditionExpression:void 0})})})),(v(i.sourceRef,"bpmn:ExclusiveGateway")||v(i.sourceRef,"bpmn:InclusiveGateway")||v(i.sourceRef,"bpmn:ComplexGateway")||v(i.sourceRef,"bpmn:Activity"))&&i.sourceRef.default===i&&(n=Be(X({},n),{[s.actionName]:a._createEntry(s,e,function(){r.updateProperties(e.source,{default:void 0})})}))}}),n};rn.prototype._createEntry=function(e,t,i){var n=this._translate,r=this._bpmnReplace.replaceElement,o=function(){return r(t,e.target)},a=e.label;return a&&typeof a=="function"&&(a=a(t)),i=i||o,{label:n(a),className:e.className,action:i}};rn.prototype._getLoopCharacteristicsHeaderEntries=function(e){var t=this,i=this._translate;function n(l,d){if(d.active){t._modeling.updateProperties(e,{loopCharacteristics:void 0});return}var u=e.businessObject.get("loopCharacteristics");u&&v(u,d.options.loopCharacteristics)?t._modeling.updateModdleProperties(e,u,{isSequential:d.options.isSequential}):(u=t._moddle.create(d.options.loopCharacteristics,{isSequential:d.options.isSequential}),t._modeling.updateProperties(e,{loopCharacteristics:u}))}var r=U(e),o=r.loopCharacteristics,a,s,c;return o&&(a=o.isSequential,s=o.isSequential===void 0,c=o.isSequential!==void 0&&!o.isSequential),{"toggle-parallel-mi":{className:"bpmn-icon-parallel-mi-marker",title:i("Parallel multi-instance"),active:c,action:n,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!1}},"toggle-sequential-mi":{className:"bpmn-icon-sequential-mi-marker",title:i("Sequential multi-instance"),active:a,action:n,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!0}},"toggle-loop":{className:"bpmn-icon-loop-marker",title:i("Loop"),active:s,action:n,options:{loopCharacteristics:"bpmn:StandardLoopCharacteristics"}}}};rn.prototype._getCollectionHeaderEntries=function(e){var t=this,i=this._translate,n=e.businessObject.dataObjectRef;if(!n)return{};function r(a,s){t._modeling.updateModdleProperties(e,n,{isCollection:!s.active})}var o=n.isCollection;return{"toggle-is-collection":{className:"bpmn-icon-parallel-mi-marker",title:i("Collection"),active:o,action:r}}};rn.prototype._getParticipantMultiplicityHeaderEntries=function(e){var t=this,i=this._bpmnFactory,n=this._translate;function r(a,s){var c=s.active,l;c||(l=i.create("bpmn:ParticipantMultiplicity")),t._modeling.updateProperties(e,{participantMultiplicity:l})}var o=e.businessObject.participantMultiplicity;return{"toggle-participant-multiplicity":{className:"bpmn-icon-parallel-mi-marker",title:n("Participant multiplicity"),active:!!o,action:r}}};rn.prototype._getNonInterruptingHeaderEntries=function(e){let t=this._translate,i=U(e),n=this,r=af(e),o=v(e,"bpmn:BoundaryEvent")?Jv["intermediate-event-non-interrupting"]:Jv["start-event-non-interrupting"],a=!i[r];return{"toggle-non-interrupting":{imageHtml:o,title:t("Toggle non-interrupting"),active:a,action:function(){n._modeling.updateProperties(e,{[r]:!!a})}}}};var S1={__depends__:[Js,Sf,tc],__init__:["replaceMenuProvider"],replaceMenuProvider:["type",rn]};function Ja(e,t,i,n,r,o,a,s,c,l,d,u,p){e=e||{},n.registerProvider(this),this._contextPad=n,this._modeling=r,this._elementFactory=o,this._connect=a,this._create=s,this._popupMenu=c,this._canvas=l,this._rules=d,this._translate=u,this._eventBus=i,this._appendPreview=p,e.autoPlace!==!1&&(this._autoPlace=t.get("autoPlace",!1)),i.on("create.end",250,function(m){var f=m.context,_=f.shape;if(!(!ro(m)||!n.isOpen(_))){var b=n.getEntries(_);b.replace&&b.replace.action.click(m,_)}}),i.on("contextPad.close",function(){p.cleanUp()})}Ja.$inject=["config.contextPad","injector","eventBus","contextPad","modeling","elementFactory","connect","create","popupMenu","canvas","rules","translate","appendPreview"];Ja.prototype.getMultiElementContextPadEntries=function(e){var t=this._modeling,i={};return this._isDeleteAllowed(e)&&k(i,{delete:{group:"edit",className:"bpmn-icon-trash",title:this._translate("Delete"),action:{click:function(n,r){t.removeElements(r.slice())}}}}),i};Ja.prototype._isDeleteAllowed=function(e){var t=this._rules.allowed("elements.delete",{elements:e});return oe(t)?Pn(e,i=>t.includes(i)):t};Ja.prototype.getContextPadEntries=function(e){var t=this._contextPad,i=this._modeling,n=this._elementFactory,r=this._connect,o=this._create,a=this._popupMenu,s=this._autoPlace,c=this._translate,l=this._appendPreview,d={};if(e.type==="label")return this._isDeleteAllowed([e])&&k(d,f()),d;var u=e.businessObject;function p(C,w){r.start(C,w)}function m(C,w){i.removeElements([w])}function f(){return{delete:{group:"edit",className:"bpmn-icon-trash",title:c("Delete"),action:{click:m}}}}function _(C){var w=5,P=t.getPad(C).html,T=P.getBoundingClientRect(),H={x:T.left,y:T.bottom+w};return H}function b(C,w,P,T){function H($,Q){var Y=n.createShape(k({type:C},T));o.start($,Y,{source:Q})}var N=s?function($,Q){var Y=n.createShape(k({type:C},T));s.append(Q,Y)}:H,W=s?function($,Q){return l.create(Q,C,T),()=>{l.cleanUp()}}:null;return{group:"model",className:w,title:P,action:{dragstart:H,click:N,hover:W}}}function D(C){return function(w,P){i.splitLane(P,C),t.open(P,!0)}}if(ge(u,["bpmn:Lane","bpmn:Participant"])&&we(e)){var R=hn(e);k(d,{"lane-insert-above":{group:"lane-insert-above",className:"bpmn-icon-lane-insert-above",title:c("Add lane above"),action:{click:function(C,w){i.addLane(w,"top")}}}}),R.length<2&&((nt(e)?e.height>=120:e.width>=120)&&k(d,{"lane-divide-two":{group:"lane-divide",className:"bpmn-icon-lane-divide-two",title:c("Divide into two lanes"),action:{click:D(2)}}}),(nt(e)?e.height>=180:e.width>=180)&&k(d,{"lane-divide-three":{group:"lane-divide",className:"bpmn-icon-lane-divide-three",title:c("Divide into three lanes"),action:{click:D(3)}}})),k(d,{"lane-insert-below":{group:"lane-insert-below",className:"bpmn-icon-lane-insert-below",title:c("Add lane below"),action:{click:function(C,w){i.addLane(w,"bottom")}}}})}return v(u,"bpmn:FlowNode")&&(v(u,"bpmn:EventBasedGateway")?k(d,{"append.receive-task":b("bpmn:ReceiveTask","bpmn-icon-receive-task",c("Append receive task")),"append.message-intermediate-event":b("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-message",c("Append message intermediate catch event"),{eventDefinitionType:"bpmn:MessageEventDefinition"}),"append.timer-intermediate-event":b("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-timer",c("Append timer intermediate catch event"),{eventDefinitionType:"bpmn:TimerEventDefinition"}),"append.condition-intermediate-event":b("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-condition",c("Append conditional intermediate catch event"),{eventDefinitionType:"bpmn:ConditionalEventDefinition"}),"append.signal-intermediate-event":b("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-signal",c("Append signal intermediate catch event"),{eventDefinitionType:"bpmn:SignalEventDefinition"})}):M1(u,"bpmn:BoundaryEvent","bpmn:CompensateEventDefinition")?k(d,{"append.compensation-activity":b("bpmn:Task","bpmn-icon-task",c("Append compensation activity"),{isForCompensation:!0})}):!v(u,"bpmn:EndEvent")&&!u.isForCompensation&&!M1(u,"bpmn:IntermediateThrowEvent","bpmn:LinkEventDefinition")&&!kt(u)&&k(d,{"append.end-event":b("bpmn:EndEvent","bpmn-icon-end-event-none",c("Append end event")),"append.gateway":b("bpmn:ExclusiveGateway","bpmn-icon-gateway-none",c("Append gateway")),"append.append-task":b("bpmn:Task","bpmn-icon-task",c("Append task")),"append.intermediate-event":b("bpmn:IntermediateThrowEvent","bpmn-icon-intermediate-event-none",c("Append intermediate/boundary event"))})),a.isEmpty(e,"bpmn-replace")||k(d,{replace:{group:"edit",className:"bpmn-icon-screw-wrench",title:c("Change element"),action:{click:function(C,w){var P=k(_(w),{cursor:{x:C.x,y:C.y}});a.open(w,"bpmn-replace",P,{title:c("Change element"),width:300,search:!0})}}}}),v(u,"bpmn:SequenceFlow")&&k(d,{"append.text-annotation":b("bpmn:TextAnnotation","bpmn-icon-text-annotation",c("Add text annotation"))}),v(u,"bpmn:MessageFlow")&&k(d,{"append.text-annotation":b("bpmn:TextAnnotation","bpmn-icon-text-annotation",c("Add text annotation"))}),ge(u,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference"])&&k(d,{"append.text-annotation":b("bpmn:TextAnnotation","bpmn-icon-text-annotation",c("Add text annotation")),connect:{group:"connect",className:"bpmn-icon-connection-multi",title:c("Connect to other element"),action:{click:p,dragstart:p}}}),v(u,"bpmn:TextAnnotation")&&k(d,{connect:{group:"connect",className:"bpmn-icon-connection-multi",title:c("Connect using association"),action:{click:p,dragstart:p}}}),ge(u,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&k(d,{connect:{group:"connect",className:"bpmn-icon-connection-multi",title:c("Connect using data input association"),action:{click:p,dragstart:p}}}),v(u,"bpmn:Group")&&k(d,{"append.text-annotation":b("bpmn:TextAnnotation","bpmn-icon-text-annotation",c("Add text annotation"))}),this._isDeleteAllowed([e])&&k(d,f()),d};function M1(e,t,i){var n=e.$instanceOf(t),r=!1,o=e.eventDefinitions||[];return M(o,function(a){a.$type===i&&(r=!0)}),n&&r}var D1={__depends__:[a1,Lf,am,Ut,oc,aa,S1],__init__:["contextPadProvider"],contextPadProvider:["type",Ja]};var ZL={horizontal:["x","width"],vertical:["y","height"]},A1=5;function lr(e,t){this._modeling=e,this._filters=[],this.registerFilter(function(i){var n=t.allowed("elements.distribute",{elements:i});return oe(n)?n:n?i:[]})}lr.$inject=["modeling","rules"];lr.prototype.registerFilter=function(e){if(typeof e!="function")throw new Error("the filter has to be a function");this._filters.push(e)};lr.prototype.trigger=function(e,t){var i=this._modeling,n,r;if(!(e.length<3)&&(this._setOrientation(t),r=this._filterElements(e),n=this._createGroups(r),!(n.length<=2)))return i.distributeElements(n,this._axis,this._dimension),n};lr.prototype._filterElements=function(e){var t=this._filters,i=this._axis,n=this._dimension,r=[].concat(e);return t.length?(M(t,function(o){r=o(r,i,n)}),r):e};lr.prototype._createGroups=function(e){var t=[],i=this,n=this._axis,r=this._dimension;if(!n)throw new Error('must have a defined "axis" and "dimension"');var o=wi(e,n);return M(o,function(a,s){var c=i._findRange(a,n,r),l,d=t[t.length-1];d&&i._hasIntersection(d.range,c)?t[t.length-1].elements.push(a):(l={range:c,elements:[a]},t.push(l))}),t};lr.prototype._setOrientation=function(e){var t=ZL[e];this._axis=t[0],this._dimension=t[1]};lr.prototype._hasIntersection=function(e,t){return Math.max(e.min,e.max)>=Math.min(t.min,t.max)&&Math.min(e.min,e.max)<=Math.max(t.min,t.max)};lr.prototype._findRange=function(e){var t=e[this._axis],i=e[this._dimension];return{min:t+A1,max:t+i-A1}};var P1={__init__:["distributeElements"],distributeElements:["type",lr]};function Nc(e){Ei.call(this,e)}Nc.$inject=["eventBus"];z(Nc,Ei);Nc.prototype.init=function(){this.addRule("elements.distribute",function(e){var t=e.elements;return t=fe(t,function(i){var n=ge(i,["bpmn:Association","bpmn:BoundaryEvent","bpmn:DataInputAssociation","bpmn:DataOutputAssociation","bpmn:Lane","bpmn:MessageFlow","bpmn:SequenceFlow","bpmn:TextAnnotation"]);return!(i.labelTarget||n)}),t=jo(t),t.length<3?!1:t})};var QL={horizontal:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
                <polyline points="450 400 450 150 1350 150 1350 400" style="fill:none;stroke:currentColor;stroke-width:100;stroke-linejoin:round;"/>
                <rect x="150" y="450" width="600" height="1200" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
                <rect x="1050" y="450" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
              </svg>`,vertical:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
              <polyline points="400 1350 150 1350 150 450 400 450" style="fill:none;stroke:currentColor;stroke-width:100;stroke-linejoin:round;"/>
              <rect x="450" y="150" width="1200" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
              <rect x="450" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
            </svg>`},e_=QL;var JL=900;function es(e,t,i,n){this._distributeElements=t,this._translate=i,this._popupMenu=e,this._rules=n,e.registerProvider("align-elements",JL,this)}es.$inject=["popupMenu","distributeElements","translate","rules"];es.prototype.getPopupMenuEntries=function(e){var t={};return this._isAllowed(e)&&k(t,this._getEntries(e)),t};es.prototype._isAllowed=function(e){return this._rules.allowed("elements.distribute",{elements:e})};es.prototype._getEntries=function(e){var t=this._distributeElements,i=this._translate,n=this._popupMenu,r={"distribute-elements-horizontal":{group:"distribute",title:i("Distribute elements horizontally"),className:"bjs-align-elements-menu-entry",imageHtml:e_.horizontal,action:function(o,a){t.trigger(e,"horizontal"),n.close()}},"distribute-elements-vertical":{group:"distribute",title:i("Distribute elements vertically"),imageHtml:e_.vertical,action:function(o,a){t.trigger(e,"vertical"),n.close()}}};return r};var k1={__depends__:[Js,P1],__init__:["bpmnDistributeElements","distributeElementsMenuProvider"],bpmnDistributeElements:["type",Nc],distributeElementsMenuProvider:["type",es]};var R1="is not a registered action",e5="is already registered";function Hi(e,t){this._actions={};var i=this;e.on("diagram.init",function(){i._registerDefaultActions(t),e.fire("editorActions.init",{editorActions:i})})}Hi.$inject=["eventBus","injector"];Hi.prototype._registerDefaultActions=function(e){var t=e.get("commandStack",!1),i=e.get("modeling",!1),n=e.get("selection",!1),r=e.get("zoomScroll",!1),o=e.get("copyPaste",!1),a=e.get("canvas",!1),s=e.get("rules",!1),c=e.get("keyboardMove",!1),l=e.get("keyboardMoveSelection",!1);t&&(this.register("undo",function(){t.undo()}),this.register("redo",function(){t.redo()})),o&&n&&this.register("copy",function(){var d=n.get();if(d.length)return o.copy(d)}),o&&this.register("paste",function(){o.paste()}),r&&this.register("stepZoom",function(d){r.stepZoom(d.value)}),a&&this.register("zoom",function(d){a.zoom(d.value)}),i&&n&&s&&this.register("removeSelection",function(){var d=n.get();if(d.length){var u=s.allowed("elements.delete",{elements:d}),p;u!==!1&&(oe(u)?p=u:p=d,p.length&&i.removeElements(p.slice()))}}),c&&this.register("moveCanvas",function(d){c.moveCanvas(d)}),l&&this.register("moveSelection",function(d){l.moveSelection(d.direction,d.accelerated)})};Hi.prototype.trigger=function(e,t){if(!this._actions[e])throw t_(e,R1);return this._actions[e](t)};Hi.prototype.register=function(e,t){var i=this;if(typeof e=="string")return this._registerAction(e,t);M(e,function(n,r){i._registerAction(r,n)})};Hi.prototype._registerAction=function(e,t){if(this.isRegistered(e))throw t_(e,e5);this._actions[e]=t};Hi.prototype.unregister=function(e){if(!this.isRegistered(e))throw t_(e,R1);this._actions[e]=void 0};Hi.prototype.getActions=function(){return Object.keys(this._actions)};Hi.prototype.isRegistered=function(e){return!!this._actions[e]};function t_(e,t){return new Error(e+" "+t)}var O1={__init__:["editorActions"],editorActions:["type",Hi]};function Lc(e){e.invoke(Hi,this)}z(Lc,Hi);Lc.$inject=["injector"];Lc.prototype._registerDefaultActions=function(e){Hi.prototype._registerDefaultActions.call(this,e);var t=e.get("canvas",!1),i=e.get("elementRegistry",!1),n=e.get("selection",!1),r=e.get("spaceTool",!1),o=e.get("lassoTool",!1),a=e.get("handTool",!1),s=e.get("globalConnect",!1),c=e.get("distributeElements",!1),l=e.get("alignElements",!1),d=e.get("directEditing",!1),u=e.get("searchPad",!1),p=e.get("modeling",!1),m=e.get("contextPad",!1);t&&i&&n&&this._registerAction("selectElements",function(){var f=t.getRootElement(),_=i.filter(function(b){return b!==f});return n.select(_),_}),r&&this._registerAction("spaceTool",function(){r.toggle()}),o&&this._registerAction("lassoTool",function(){o.toggle()}),a&&this._registerAction("handTool",function(){a.toggle()}),s&&this._registerAction("globalConnectTool",function(){s.toggle()}),n&&c&&this._registerAction("distributeElements",function(f){var _=n.get(),b=f.type;_.length&&c.trigger(_,b)}),n&&l&&this._registerAction("alignElements",function(f){var _=n.get(),b=[],D=f.type;_.length&&(b=fe(_,function(R){return!v(R,"bpmn:Lane")}),l.trigger(b,D))}),n&&p&&this._registerAction("setColor",function(f){var _=n.get();_.length&&p.setColor(_,f)}),n&&d&&this._registerAction("directEditing",function(){var f=n.get();f.length&&d.activate(f[0])}),u&&this._registerAction("find",function(){u.toggle()}),t&&p&&this._registerAction("moveToOrigin",function(){var f=t.getRootElement(),_,b;v(f,"bpmn:Collaboration")?b=i.filter(function(D){return v(D.parent,"bpmn:Collaboration")}):b=i.filter(function(D){return D!==f&&!v(D.parent,"bpmn:SubProcess")}),_=Je(b),p.moveElements(b,{x:-_.x,y:-_.y},f)}),n&&m&&this._registerAction("replaceElement",function(f){m.triggerEntry("replace","click",f)})};var T1={__depends__:[O1],editorActions:["type",Lc]};function Bf(e){e.on(["create.init","shape.move.init"],function(t){var i=t.context,n=t.shape;ge(n,["bpmn:Participant","bpmn:SubProcess","bpmn:TextAnnotation"])&&(i.gridSnappingContext||(i.gridSnappingContext={}),i.gridSnappingContext.snapLocation="top-left")})}Bf.$inject=["eventBus"];var Kd=10;function jf(e,t,i){return i||(i="round"),Math[i](e/t)*t}var t5=1200,i5=800;function Ir(e,t,i){var n=!i||i.active!==!1;this._eventBus=t;var r=this;t.on("diagram.init",i5,function(){r.setActive(n)}),t.on(["create.move","create.end","bendpoint.move.move","bendpoint.move.end","connect.move","connect.end","connectionSegment.move.move","connectionSegment.move.end","resize.move","resize.end","shape.move.move","shape.move.end"],t5,function(o){var a=o.originalEvent;if(!(!r.active||a&&gi(a))){var s=o.context,c=s.gridSnappingContext;c||(c=s.gridSnappingContext={}),["x","y"].forEach(function(l){var d={},u=r5(o,l,e);u&&(d.offset=u);var p=n5(o,l);p&&k(d,p),or(o,l)||r.snapEvent(o,l,d)})}})}Ir.prototype.snapEvent=function(e,t,i){var n=this.snapValue(e[t],i);bt(e,t,n)};Ir.prototype.getGridSpacing=function(){return Kd};Ir.prototype.snapValue=function(e,t){var i=0;t&&t.offset&&(i=t.offset),e+=i,e=jf(e,Kd);var n,r;return t&&t.min&&(n=t.min,he(n)&&(n=jf(n+i,Kd,"ceil"),e=Math.max(e,n))),t&&t.max&&(r=t.max,he(r)&&(r=jf(r+i,Kd,"floor"),e=Math.min(e,r))),e-=i,e};Ir.prototype.isActive=function(){return this.active};Ir.prototype.setActive=function(e){this.active=e,this._eventBus.fire("gridSnapping.toggle",{active:e})};Ir.prototype.toggleActive=function(){this.setActive(!this.active)};Ir.$inject=["elementRegistry","eventBus","config.gridSnapping"];function n5(e,t){var i=e.context,n=i.createConstraints,r=i.resizeConstraints||{},o=i.gridSnappingContext,a=o.snapConstraints;if(a&&a[t])return a[t];a||(a=o.snapConstraints={}),a[t]||(a[t]={});var s=i.direction;n&&(Vf(t)?(a.x.min=n.left,a.x.max=n.right):(a.y.min=n.top,a.y.max=n.bottom));var c=r.min,l=r.max;return c&&(Vf(t)?F1(s)?a.x.max=c.left:a.x.min=c.right:I1(s)?a.y.max=c.top:a.y.min=c.bottom),l&&(Vf(t)?F1(s)?a.x.min=l.left:a.x.max=l.right:I1(s)?a.y.min=l.top:a.y.max=l.bottom),a[t]}function r5(e,t,i){var n=e.context,r=e.shape,o=n.gridSnappingContext,a=o.snapLocation,s=o.snapOffset;return s&&he(s[t])||(s||(s=o.snapOffset={}),he(s[t])||(s[t]=0),!r)||(i.get(r.id)||(Vf(t)?s[t]+=r[t]+r.width/2:s[t]+=r[t]+r.height/2),!a)||(t==="x"?/left/.test(a)?s[t]-=r.width/2:/right/.test(a)&&(s[t]+=r.width/2):/top/.test(a)?s[t]-=r.height/2:/bottom/.test(a)&&(s[t]+=r.height/2)),s[t]}function Vf(e){return e==="x"}function I1(e){return e.indexOf("n")!==-1}function F1(e){return e.indexOf("w")!==-1}function fo(e,t){V.call(this,e),this._gridSnapping=t;var i=this;this.preExecute("shape.resize",function(n){var r=n.context,o=r.hints||{},a=o.autoResize;if(a){var s=r.shape,c=r.newBounds;Ht(a)?r.newBounds=i.snapComplex(c,a):r.newBounds=i.snapSimple(s,c)}})}fo.$inject=["eventBus","gridSnapping","modeling"];z(fo,V);fo.prototype.snapSimple=function(e,t){var i=this._gridSnapping;return t.width=i.snapValue(t.width,{min:t.width}),t.height=i.snapValue(t.height,{min:t.height}),t.x=e.x+e.width/2-t.width/2,t.y=e.y+e.height/2-t.height/2,t};fo.prototype.snapComplex=function(e,t){return/w|e/.test(t)&&(e=this.snapHorizontally(e,t)),/n|s/.test(t)&&(e=this.snapVertically(e,t)),e};fo.prototype.snapHorizontally=function(e,t){var i=this._gridSnapping,n=/w/.test(t),r=/e/.test(t),o={};return o.width=i.snapValue(e.width,{min:e.width}),r&&(n?(o.x=i.snapValue(e.x,{max:e.x}),o.width+=i.snapValue(e.x-o.x,{min:e.x-o.x})):e.x=e.x+e.width-o.width),k(e,o),e};fo.prototype.snapVertically=function(e,t){var i=this._gridSnapping,n=/n/.test(t),r=/s/.test(t),o={};return o.height=i.snapValue(e.height,{min:e.height}),n&&(r?(o.y=i.snapValue(e.y,{max:e.y}),o.height+=i.snapValue(e.y-o.y,{min:e.y-o.y})):e.y=e.y+e.height-o.height),k(e,o),e};var o5=2e3;function zf(e,t){e.on(["spaceTool.move","spaceTool.end"],o5,function(i){var n=i.context;if(n.initialized){var r=n.axis,o;r==="x"?(o=t.snapValue(i.dx),i.x=i.x+o-i.dx,i.dx=o):(o=t.snapValue(i.dy),i.y=i.y+o-i.dy,i.dy=o)}})}zf.$inject=["eventBus","gridSnapping"];var N1={__init__:["gridSnappingResizeBehavior","gridSnappingSpaceToolBehavior"],gridSnappingResizeBehavior:["type",fo],gridSnappingSpaceToolBehavior:["type",zf]};var L1={__depends__:[N1],__init__:["gridSnapping"],gridSnapping:["type",Ir]};var a5=2e3;function Hf(e,t,i){e.on("autoPlace",a5,function(n){var r=n.source,o=ue(r),a=n.shape,s=Cm(r,a,i);return["x","y"].forEach(function(c){var l={};s[c]!==o[c]&&(s[c]>o[c]?l.min=s[c]:l.max=s[c],v(a,"bpmn:TextAnnotation")&&(s5(c)?l.offset=-a.width/2:l.offset=-a.height/2),s[c]=t.snapValue(s[c],l))}),s})}Hf.$inject=["eventBus","gridSnapping","elementRegistry"];function s5(e){return e==="x"}var c5=1750;function $f(e,t,i){t.on(["create.start","shape.move.start"],c5,function(n){var r=n.context,o=r.shape,a=e.getRootElement();if(!(!v(o,"bpmn:Participant")||!v(a,"bpmn:Process")||!a.children.length)){var s=r.createConstraints;s&&(o.width=i.snapValue(o.width,{min:o.width}),o.height=i.snapValue(o.height,{min:o.height}))}})}$f.$inject=["canvas","eventBus","gridSnapping"];var l5=3e3;function Bc(e,t,i){V.call(this,e),this._gridSnapping=t;var n=this;this.postExecuted(["connection.create","connection.layout"],l5,function(r){var o=r.context,a=o.connection,s=o.hints||{},c=a.waypoints;s.connectionStart||s.connectionEnd||s.createElementsBehavior===!1||d5(c)&&i.updateWaypoints(a,n.snapMiddleSegments(c))})}Bc.$inject=["eventBus","gridSnapping","modeling"];z(Bc,V);Bc.prototype.snapMiddleSegments=function(e){var t=this._gridSnapping,i;e=e.slice();for(var n=1;n<e.length-2;n++)i=m5(t,e[n],e[n+1]),e[n]=i[0],e[n+1]=i[1];return e};function d5(e){return e.length>3}function u5(e){return e==="h"}function p5(e){return e==="v"}function m5(e,t,i){var n=Xi(t,i),r={};return u5(n)&&(r.y=e.snapValue(t.y)),p5(n)&&(r.x=e.snapValue(t.x)),("x"in r||"y"in r)&&(t=k({},t,r),i=k({},i,r)),[t,i]}var B1={__init__:["gridSnappingAutoPlaceBehavior","gridSnappingParticipantBehavior","gridSnappingLayoutConnectionBehavior"],gridSnappingAutoPlaceBehavior:["type",Hf],gridSnappingParticipantBehavior:["type",$f],gridSnappingLayoutConnectionBehavior:["type",Bc]};var j1={__depends__:[L1,B1],__init__:["bpmnGridSnapping"],bpmnGridSnapping:["type",Bf]};var f5=30,V1=30;function ts(e,t){this._interactionEvents=t;var i=this;e.on(["interactionEvents.createHit","interactionEvents.updateHit"],function(n){var r=n.element,o=n.gfx;if(v(r,"bpmn:Lane"))return i._createParticipantHit(r,o);if(v(r,"bpmn:Participant"))return we(r)?i._createParticipantHit(r,o):i._createDefaultHit(r,o);if(v(r,"bpmn:SubProcess"))return we(r)?i._createSubProcessHit(r,o):i._createDefaultHit(r,o)})}ts.$inject=["eventBus","interactionEvents"];ts.prototype._createDefaultHit=function(e,t){return this._interactionEvents.removeHits(t),this._interactionEvents.createDefaultHit(e,t),!0};ts.prototype._createParticipantHit=function(e,t){this._interactionEvents.removeHits(t),this._interactionEvents.createBoxHit(t,"no-move",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"click-stroke",{width:e.width,height:e.height});var i=nt(e)?{width:f5,height:e.height}:{width:e.width,height:V1};return this._interactionEvents.createBoxHit(t,"all",i),!0};ts.prototype._createSubProcessHit=function(e,t){return this._interactionEvents.removeHits(t),this._interactionEvents.createBoxHit(t,"no-move",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"click-stroke",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"all",{width:e.width,height:V1}),!0};var z1={__init__:["bpmnInteractionEvents"],bpmnInteractionEvents:["type",ts]};function jc(e){e.invoke(oo,this)}z(jc,oo);jc.$inject=["injector"];jc.prototype.registerBindings=function(e,t){oo.prototype.registerBindings.call(this,e,t);function i(n,r){t.isRegistered(n)&&e.addListener(r)}i("selectElements",function(n){var r=n.keyEvent;if(e.isKey(["a","A"],r)&&e.isCmd(r))return t.trigger("selectElements"),!0}),i("find",function(n){var r=n.keyEvent;if(e.isKey(["f","F"],r)&&e.isCmd(r))return t.trigger("find"),!0}),i("spaceTool",function(n){var r=n.keyEvent;if(!e.hasModifier(r)&&e.isKey(["s","S"],r))return t.trigger("spaceTool"),!0}),i("lassoTool",function(n){var r=n.keyEvent;if(!e.hasModifier(r)&&e.isKey(["l","L"],r))return t.trigger("lassoTool"),!0}),i("handTool",function(n){var r=n.keyEvent;if(!e.hasModifier(r)&&e.isKey(["h","H"],r))return t.trigger("handTool"),!0}),i("globalConnectTool",function(n){var r=n.keyEvent;if(!e.hasModifier(r)&&e.isKey(["c","C"],r))return t.trigger("globalConnectTool"),!0}),i("directEditing",function(n){var r=n.keyEvent;if(!e.hasModifier(r)&&e.isKey(["e","E"],r))return t.trigger("directEditing"),!0}),i("replaceElement",function(n){var r=n.keyEvent;if(!e.hasModifier(r)&&e.isKey(["r","R"],r))return t.trigger("replaceElement",r),!0})};var H1={__depends__:[Ys],__init__:["keyboardBindings"],keyboardBindings:["type",jc]};var h5={moveSpeed:1,moveSpeedAccelerated:10},g5=1500,$1="left",W1="up",U1="right",G1="down",v5={ArrowLeft:$1,Left:$1,ArrowUp:W1,Up:W1,ArrowRight:U1,Right:U1,ArrowDown:G1,Down:G1},_5={left:function(e){return{x:-e,y:0}},up:function(e){return{x:0,y:-e}},right:function(e){return{x:e,y:0}},down:function(e){return{x:0,y:e}}};function Wf(e,t,i,n,r){var o=this;this._config=k({},h5,e||{}),t.addListener(g5,function(a){var s=a.keyEvent,c=v5[s.key];if(c&&!t.isCmd(s)){var l=t.isShift(s);return o.moveSelection(c,l),!0}}),this.moveSelection=function(a,s){var c=r.get();if(c.length){var l=this._config[s?"moveSpeedAccelerated":"moveSpeed"],d=_5[a](l),u=n.allowed("elements.move",{shapes:c});u&&i.moveElements(c,d)}}}Wf.$inject=["config.keyboardMoveSelection","keyboard","modeling","rules","selection"];var q1={__depends__:[Ys,Ut],__init__:["keyboardMoveSelection"],keyboardMoveSelection:["type",Wf]};var Y1=10;function is(e,t,i,n){this._dragging=n,this._rules=t;var r=this;function o(c,l){var d=c.shape,u=c.direction,p=c.resizeConstraints,m;c.delta=l,m=Xw(d,u,l),c.newBounds=Qw(m,p),c.canExecute=r.canResize(c)}function a(c){var l=c.resizeConstraints,d=c.minBounds;l===void 0&&(d===void 0&&(d=r.computeMinResizeBox(c)),c.resizeConstraints={min:ce(d)})}function s(c){var l=c.shape,d=c.canExecute,u=c.newBounds;if(d){if(u=xp(u),!b5(l,u))return;i.resizeShape(l,u)}}e.on("resize.start",function(c){a(c.context)}),e.on("resize.move",function(c){var l={x:c.dx,y:c.dy};o(c.context,l)}),e.on("resize.end",function(c){s(c.context)})}is.prototype.canResize=function(e){var t=this._rules,i=ei(e,["newBounds","shape","delta","direction"]);return t.allowed("shape.resize",i)};is.prototype.activate=function(e,t,i){var n=this._dragging,r,o;if(typeof i=="string"&&(i={direction:i}),r=k({shape:t},i),o=r.direction,!o)throw new Error("must provide a direction (n|w|s|e|nw|se|ne|sw)");n.init(e,i_(t,o),"resize",{autoActivate:!0,cursor:y5(o),data:{shape:t,context:r}})};is.prototype.computeMinResizeBox=function(e){var t=e.shape,i=e.direction,n,r;return n=e.minDimensions||{width:Y1,height:Y1},r=Zm(t,e.childrenBoxPadding),Jw(i,t,n,r)};is.$inject=["eventBus","rules","modeling","dragging"];function b5(e,t){return e.x!==t.x||e.y!==t.y||e.width!==t.width||e.height!==t.height}function i_(e,t){var i=ue(e),n=ce(e),r={x:i.x,y:i.y};return t.indexOf("n")!==-1?r.y=n.top:t.indexOf("s")!==-1&&(r.y=n.bottom),t.indexOf("e")!==-1?r.x=n.right:t.indexOf("w")!==-1&&(r.x=n.left),r}function y5(e){var t="resize-";return e==="n"||e==="s"?t+"ns":e==="e"||e==="w"?t+"ew":e==="nw"||e==="se"?t+"nwse":t+"nesw"}var K1="djs-resizing",X1="resize-not-ok",x5=500;function Uf(e,t,i){function n(o){var a=o.shape,s=o.newBounds,c=o.frame;c||(c=o.frame=i.addFrame(a,t.getActiveLayer()),t.addMarker(a,K1)),s.width>5&&J(c,{x:s.x,width:s.width}),s.height>5&&J(c,{y:s.y,height:s.height}),o.canExecute?Re(c).remove(X1):Re(c).add(X1)}function r(o){var a=o.shape,s=o.frame;s&&Qe(o.frame),t.removeMarker(a,K1)}e.on("resize.move",x5,function(o){n(o.context)}),e.on("resize.cleanup",function(o){r(o.context)})}Uf.$inject=["eventBus","canvas","previewSupport"];var Gf=-6,qf=8,Yf=20,Xd="djs-resizer",w5=["n","w","s","e","nw","ne","se","sw"];function Fr(e,t,i,n){this._resize=n,this._canvas=t;var r=this;e.on("selection.changed",function(o){var a=o.newSelection;r.removeResizers(),a.length===1&&M(a,jt(r.addResizer,r))}),e.on("shape.changed",function(o){var a=o.element;i.isSelected(a)&&(r.removeResizers(),r.addResizer(a))})}Fr.prototype.makeDraggable=function(e,t,i){var n=this._resize;function r(o){fn(o)&&n.activate(o,e,i)}Se.bind(t,"mousedown",r),Se.bind(t,"touchstart",r)};Fr.prototype._createResizer=function(e,t,i,n){var r=this._getResizersParent(),o=E5(n),a=ie("g");Re(a).add(Xd),Re(a).add(Xd+"-"+e.id),Re(a).add(Xd+"-"+n),me(r,a);var s=ie("rect");J(s,{x:-qf/2+o.x,y:-qf/2+o.y,width:qf,height:qf}),Re(s).add(Xd+"-visual"),me(a,s);var c=ie("rect");return J(c,{x:-Yf/2+o.x,y:-Yf/2+o.y,width:Yf,height:Yf}),Re(c).add(Xd+"-hit"),me(a,c),Ls(a,t,i),a};Fr.prototype.createResizer=function(e,t){var i=i_(e,t),n=this._createResizer(e,i.x,i.y,t);this.makeDraggable(e,n,t)};Fr.prototype.addResizer=function(e){var t=this;Fe(e)||!this._resize.canResize({shape:e})||M(w5,function(i){t.createResizer(e,i)})};Fr.prototype.removeResizers=function(){var e=this._getResizersParent();Kr(e)};Fr.prototype._getResizersParent=function(){return this._canvas.getLayer("resizers")};Fr.$inject=["eventBus","canvas","selection","resize"];function E5(e){var t={x:0,y:0};return e.indexOf("e")!==-1?t.x=-Gf:e.indexOf("w")!==-1&&(t.x=Gf),e.indexOf("s")!==-1?t.y=-Gf:e.indexOf("n")!==-1&&(t.y=Gf),t}var Kf={__depends__:[ii,bi,Ln],__init__:["resize","resizePreview","resizeHandles"],resize:["type",is],resizePreview:["type",Uf],resizeHandles:["type",Fr]};var C5=2e3;function ns(e,t,i,n,r,o,a){this._bpmnFactory=t,this._canvas=i,this._modeling=r,this._textRenderer=a,n.registerProvider(this),e.on("element.dblclick",function(c){s(c.element,!0)}),e.on(["autoPlace.start","canvas.viewbox.changing","drag.init","element.mousedown","popupMenu.open","root.set","selection.changed"],function(){n.isActive()&&n.complete()}),e.on(["shape.remove","connection.remove"],C5,function(c){n.isActive(c.element)&&n.cancel()}),e.on(["commandStack.changed"],function(c){n.isActive()&&n.cancel()}),e.on("directEditing.activate",function(c){o.removeResizers()}),e.on("create.end",500,function(c){var l=c.context,d=l.shape,u=c.context.canExecute,p=c.isTouch;p||u&&(l.hints&&l.hints.createElementsBehavior===!1||s(d))}),e.on("autoPlace.end",500,function(c){s(c.shape)});function s(c,l){(l||ge(c,["bpmn:Task","bpmn:TextAnnotation","bpmn:Participant"])||n_(c))&&n.activate(c)}}ns.$inject=["eventBus","bpmnFactory","canvas","directEditing","modeling","resizeHandles","textRenderer"];ns.prototype.activate=function(e){var t=hi(e);if(t!==void 0){var i={text:t},n=this.getEditingBBox(e);k(i,n);var r={},o=i.style||{};return k(o,{backgroundColor:null,border:null}),(ge(e,["bpmn:Task","bpmn:Participant","bpmn:Lane","bpmn:CallActivity"])||n_(e))&&k(r,{centerVertically:!0}),Tn(e)&&(k(r,{autoResize:!0}),k(o,{backgroundColor:"#ffffff",border:"1px solid #ccc"})),v(e,"bpmn:TextAnnotation")&&(k(r,{resizable:!0,autoResize:!0}),k(o,{backgroundColor:"#ffffff",border:"1px solid #ccc"})),k(i,{options:r,style:o}),i}};ns.prototype.getEditingBBox=function(e){var t=this._canvas,i=e.label||e,n=t.getAbsoluteBBox(i),r={x:n.x+n.width/2,y:n.y+n.height/2},o={x:n.x,y:n.y},a=t.zoom(),s=this._textRenderer.getDefaultStyle(),c=this._textRenderer.getExternalStyle(),l=c.fontSize*a,d=c.lineHeight,u=s.fontSize*a,p=s.lineHeight,m={fontFamily:this._textRenderer.getDefaultStyle().fontFamily,fontWeight:this._textRenderer.getDefaultStyle().fontWeight};if(v(e,"bpmn:Lane")||D5(e)){var f=nt(e),_=f?{width:n.height,height:30*a,x:n.x-n.height/2+15*a,y:r.y-30*a/2}:{width:n.width,height:30*a};k(o,_),k(m,{fontSize:u+"px",lineHeight:p,paddingTop:7*a+"px",paddingBottom:7*a+"px",paddingLeft:5*a+"px",paddingRight:5*a+"px",transform:f?"rotate(-90deg)":null})}if(M5(e)){var b=nt(e),D=b?{width:n.width,height:n.height}:{width:n.height,height:n.width,x:r.x-n.height/2,y:r.y-n.width/2};k(o,D),k(m,{fontSize:u+"px",lineHeight:p,paddingTop:7*a+"px",paddingBottom:7*a+"px",paddingLeft:5*a+"px",paddingRight:5*a+"px",transform:b?null:"rotate(-90deg)"})}(ge(e,["bpmn:Task","bpmn:CallActivity"])||n_(e))&&(k(o,{width:n.width,height:n.height}),k(m,{fontSize:u+"px",lineHeight:p,paddingTop:7*a+"px",paddingBottom:7*a+"px",paddingLeft:5*a+"px",paddingRight:5*a+"px"})),S5(e)&&(k(o,{width:n.width,x:n.x}),k(m,{fontSize:u+"px",lineHeight:p,paddingTop:7*a+"px",paddingBottom:7*a+"px",paddingLeft:5*a+"px",paddingRight:5*a+"px"}));var R=90*a,C=7*a,w=4*a;if(i.labelTarget&&(k(o,{width:R,height:n.height+C+w,x:r.x-R/2,y:n.y-C}),k(m,{fontSize:l+"px",lineHeight:d,paddingTop:C+"px",paddingBottom:w+"px"})),Tn(i)&&!Go(i)&&!xe(i)){var P=Dl(e),T=t.getAbsoluteBBox({x:P.x,y:P.y,width:0,height:0}),H=l+C+w;k(o,{width:R,height:H,x:T.x-R/2,y:T.y-H/2}),k(m,{fontSize:l+"px",lineHeight:d,paddingTop:C+"px",paddingBottom:w+"px"})}return v(e,"bpmn:TextAnnotation")&&(k(o,{width:n.width,height:n.height,minWidth:30*a,minHeight:10*a}),k(m,{textAlign:"left",paddingTop:5*a+"px",paddingBottom:7*a+"px",paddingLeft:7*a+"px",paddingRight:5*a+"px",fontSize:u+"px",lineHeight:p})),{bounds:o,style:m}};ns.prototype.update=function(e,t,i,n){var r,o;v(e,"bpmn:TextAnnotation")&&(o=this._canvas.getAbsoluteBBox(e),r={x:e.x,y:e.y,width:e.width/o.width*n.width,height:e.height/o.height*n.height}),A5(t)&&(t=null),this._modeling.updateLabel(e,t,r)};function n_(e){return v(e,"bpmn:SubProcess")&&!we(e)}function S5(e){return v(e,"bpmn:SubProcess")&&we(e)}function M5(e){return v(e,"bpmn:Participant")&&!we(e)}function D5(e){return v(e,"bpmn:Participant")&&we(e)}function A5(e){return!e||!e.trim()}var Z1="djs-element-hidden",Q1="djs-label-hidden";function Xf(e,t,i){var n=this,r=t.getDefaultLayer(),o,a,s;e.on("directEditing.activate",function(c){var l=c.active;if(o=l.element.label||l.element,v(o,"bpmn:TextAnnotation")){a=t.getAbsoluteBBox(o),s=ie("g");var d=i.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:o.width,containerHeight:o.height,position:{mx:0,my:0}}),u=n.path=ie("path");J(u,{d,strokeWidth:2,stroke:P5(o)}),me(s,u),me(r,s),mt(s,o.x,o.y)}v(o,"bpmn:TextAnnotation")||o.labelTarget?t.addMarker(o,Z1):(v(o,"bpmn:Task")||v(o,"bpmn:CallActivity")||v(o,"bpmn:SubProcess")||v(o,"bpmn:Participant")||v(o,"bpmn:Lane"))&&t.addMarker(o,Q1)}),e.on("directEditing.resize",function(c){if(v(o,"bpmn:TextAnnotation")){var l=c.height,d=c.dy,u=Math.max(o.height/a.height*(l+d),0),p=i.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:o.width,containerHeight:u,position:{mx:0,my:0}});J(n.path,{d:p})}}),e.on(["directEditing.complete","directEditing.cancel"],function(c){var l=c.active;l&&(t.removeMarker(l.element.label||l.element,Z1),t.removeMarker(o,Q1)),o=void 0,a=void 0,s&&(Qe(s),s=void 0)})}Xf.$inject=["eventBus","canvas","pathMap"];function P5(e,t){var i=Me(e);return i.get("stroke")||t||"black"}var J1={__depends__:[Gs,Kf,Lf],__init__:["labelEditingProvider","labelEditingPreview"],labelEditingProvider:["type",ns],labelEditingPreview:["type",Xf]};var k5=new Cr("tt");function R5(e){var t=qe('<div class="djs-tooltip-container" />');return Vt(t,{position:"absolute",width:"0",height:"0"}),e.insertBefore(t,e.firstChild),t}function O5(e,t,i){Vt(e,{left:t+"px",top:i+"px"})}function o_(e,t){e.style.display=t===!1?"none":""}var eS="djs-tooltip",r_="."+eS;function Si(e,t){this._eventBus=e,this._canvas=t,this._ids=k5,this._tooltipDefaults={show:{minZoom:.7,maxZoom:5}},this._tooltips={},this._tooltipRoot=R5(t.getContainer());var i=this;ti.bind(this._tooltipRoot,r_,"mousedown",function(n){n.stopPropagation()}),ti.bind(this._tooltipRoot,r_,"mouseover",function(n){i.trigger("mouseover",n)}),ti.bind(this._tooltipRoot,r_,"mouseout",function(n){i.trigger("mouseout",n)}),this._init()}Si.$inject=["eventBus","canvas"];Si.prototype.add=function(e){if(!e.position)throw new Error("must specifiy tooltip position");if(!e.html)throw new Error("must specifiy tooltip html");var t=this._ids.next();return e=k({},this._tooltipDefaults,e,{id:t}),this._addTooltip(e),e.timeout&&this.setTimeout(e),t};Si.prototype.trigger=function(e,t){var i=t.delegateTarget||t.target,n=this.get(Tt(i,"data-tooltip-id"));n&&(e==="mouseover"&&n.timeout&&this.clearTimeout(n),e==="mouseout"&&n.timeout&&(n.timeout=1e3,this.setTimeout(n)))};Si.prototype.get=function(e){return typeof e!="string"&&(e=e.id),this._tooltips[e]};Si.prototype.clearTimeout=function(e){if(e=this.get(e),!!e){var t=e.removeTimer;t&&(clearTimeout(t),e.removeTimer=null)}};Si.prototype.setTimeout=function(e){if(e=this.get(e),!!e){this.clearTimeout(e);var t=this;e.removeTimer=setTimeout(function(){t.remove(e)},e.timeout)}};Si.prototype.remove=function(e){var t=this.get(e);t&&(Ni(t.html),Ni(t.htmlContainer),delete t.htmlContainer,delete this._tooltips[t.id])};Si.prototype.show=function(){o_(this._tooltipRoot)};Si.prototype.hide=function(){o_(this._tooltipRoot,!1)};Si.prototype._updateRoot=function(e){var t=e.scale||1,i=e.scale||1,n="matrix("+t+",0,0,"+i+","+-1*e.x*t+","+-1*e.y*i+")";this._tooltipRoot.style.transform=n,this._tooltipRoot.style["-ms-transform"]=n};Si.prototype._addTooltip=function(e){var t=e.id,i=e.html,n,r=this._tooltipRoot;i.get&&i.constructor.prototype.jquery&&(i=i.get(0)),Ht(i)&&(i=qe(i)),n=qe('<div data-tooltip-id="'+t+'" class="'+eS+'">'),Vt(n,{position:"absolute"}),n.appendChild(i),e.type&&ot(n).add("djs-tooltip-"+e.type),e.className&&ot(n).add(e.className),e.htmlContainer=n,r.appendChild(n),this._tooltips[t]=e,this._updateTooltip(e)};Si.prototype._updateTooltip=function(e){var t=e.position,i=e.htmlContainer;O5(i,t.x,t.y)};Si.prototype._updateTooltipVisibilty=function(e){M(this._tooltips,function(t){var i=t.show,n=t.htmlContainer,r=!0;i&&((i.minZoom>e.scale||i.maxZoom<e.scale)&&(r=!1),o_(n,r))})};Si.prototype._init=function(){var e=this;function t(i){e._updateRoot(i),e._updateTooltipVisibilty(i),e.show()}this._eventBus.on("canvas.viewbox.changing",function(i){e.hide()}),this._eventBus.on("canvas.viewbox.changed",function(i){t(i.viewbox)})};var tS={__init__:["tooltips"],tooltips:["type",Si]};var T5="flow elements must be children of pools/participants",I5="Data object must be placed within a pool/participant.";function Zf(e,t,i){function n(r,o,a){t.add({position:{x:r.x+5,y:r.y+5},type:"error",timeout:a||2e3,html:"<div>"+o+"</div>"})}e.on(["shape.move.rejected","create.rejected"],function(r){var o=r.context,a=o.shape,s=o.target;v(s,"bpmn:Collaboration")&&(v(a,"bpmn:FlowNode")?n(r,i(T5)):v(a,"bpmn:DataObjectReference")&&n(r,i(I5)))})}Zf.$inject=["eventBus","tooltips","translate"];var iS={__depends__:[tS],__init__:["modelingFeedback"],modelingFeedback:["type",Zf]};var F5=500,N5=1e3;function ho(e,t){this._eventBus=e,this.offset=5;var i=t.cls("djs-outline",["no-fill"]),n=this;function r(o){var a=ie("rect");return J(a,k({x:0,y:0,rx:4,width:100,height:100},i)),a}e.on(["shape.added","shape.changed"],F5,function(o){var a=o.element,s=o.gfx,c=He(".djs-outline",s);c||(c=n.getOutline(a)||r(s),me(s,c)),n.updateShapeOutline(c,a)}),e.on(["connection.added","connection.changed"],function(o){var a=o.element,s=o.gfx,c=He(".djs-outline",s);c||(c=r(s),me(s,c)),n.updateConnectionOutline(c,a)})}ho.prototype.updateShapeOutline=function(e,t){var i=!1,n=this._getProviders();n.length&&M(n,function(r){i=i||r.updateOutline(t,e)}),i||J(e,{x:-this.offset,y:-this.offset,width:t.width+this.offset*2,height:t.height+this.offset*2})};ho.prototype.updateConnectionOutline=function(e,t){var i=Je(t);J(e,{x:i.x-this.offset,y:i.y-this.offset,width:i.width+this.offset*2,height:i.height+this.offset*2})};ho.prototype.registerProvider=function(e,t){t||(t=e,e=N5),this._eventBus.on("outline.getProviders",e,function(i){i.providers.push(t)})};ho.prototype._getProviders=function(){var e=this._eventBus.createEvent({type:"outline.getProviders",providers:[]});return this._eventBus.fire(e),e.providers};ho.prototype.getOutline=function(e){var t,i=this._getProviders();return M(i,function(n){vt(n.getOutline)&&(t=t||n.getOutline(e))}),t};ho.$inject=["eventBus","styles","elementRegistry"];var Qf=6;function Zd(e,t,i){this._canvas=t;var n=this;e.on("element.changed",function(r){i.isSelected(r.element)&&n._updateMultiSelectionOutline(i.get())}),e.on("selection.changed",function(r){var o=r.newSelection;n._updateMultiSelectionOutline(o)})}Zd.prototype._updateMultiSelectionOutline=function(e){var t=this._canvas.getLayer("selectionOutline");Kr(t);var i=e.length>1,n=this._canvas.getContainer();if(Re(n)[i?"add":"remove"]("djs-multi-select"),!!i){var r=L5(Je(e)),o=ie("rect");J(o,k({rx:3},r)),Re(o).add("djs-selection-outline"),me(t,o)}};Zd.$inject=["eventBus","canvas","selection"];function L5(e){return{x:e.x-Qf,y:e.y-Qf,width:e.width+Qf*2,height:e.height+Qf*2}}var Jf={__depends__:[Ut],__init__:["outline","multiSelectionOutline"],outline:["type",ho],multiSelectionOutline:["type",Zd]};var B5=500,j5=1250,V5=1500,eh=Math.round;function z5(e){return{x:e.x+eh(e.width/2),y:e.y+eh(e.height/2)}}function th(e,t,i,n,r){function o(s,c,l,d){return r.allowed("elements.move",{shapes:s,delta:c,position:l,target:d})}e.on("shape.move.start",V5,function(s){var c=s.context,l=s.shape,d=n.get().slice();d.indexOf(l)===-1&&(d=[l]),d=H5(d),k(c,{shapes:d,validatedShapes:d,shape:l})}),e.on("shape.move.start",j5,function(s){var c=s.context,l=c.validatedShapes,d;if(d=c.canExecute=o(l),!d)return!1}),e.on("shape.move.move",B5,function(s){var c=s.context,l=c.validatedShapes,d=s.hover,u={x:s.dx,y:s.dy},p={x:s.x,y:s.y},m;if(m=o(l,u,p,d),c.delta=u,c.canExecute=m,m===null){c.target=null;return}c.target=d}),e.on("shape.move.end",function(s){var c=s.context,l=c.delta,d=c.canExecute,u=d==="attach",p=c.shapes;if(d===!1)return!1;l.x=eh(l.x),l.y=eh(l.y),!(l.x===0&&l.y===0)&&i.moveElements(p,l,c.target,{primaryShape:c.shape,attach:u})}),e.on("element.mousedown",function(s){if(fn(s)){var c=no(s);if(!c)throw new Error("must supply DOM mousedown event");return a(c,s.element)}});function a(s,c,l,d){if(it(l)&&(d=l,l=!1),!(c.waypoints||!c.parent)&&!Re(s.target).has("djs-hit-no-move")){var u=z5(c);return t.init(s,u,"shape.move",{cursor:"grabbing",autoActivate:l,data:{shape:c,context:d||{}}}),!0}}this.start=a}th.$inject=["eventBus","dragging","modeling","selection","rules"];function H5(e){var t=Zn(e,"id");return fe(e,function(i){for(;i=i.parent;)if(t[i.id])return!1;return!0})}var nS=499,a_="djs-dragging",rS="drop-ok",oS="drop-not-ok",aS="new-parent",sS="attach-ok";function ih(e,t,i,n){function r(c){var l=o(c),d=$5(l);return d}function o(c){var l=vr(c,!0),d=l.flatMap(m=>(m.incoming||[]).concat(m.outgoing||[])),u=l.concat(d),p=[...new Set(u)];return p}function a(c,l){[sS,rS,oS,aS].forEach(function(d){d===l?t.addMarker(c,d):t.removeMarker(c,d)})}function s(c,l,d){n.addDragger(l,c.dragGroup),d&&t.addMarker(l,a_),c.allDraggedElements?c.allDraggedElements.push(l):c.allDraggedElements=[l]}e.on("shape.move.start",nS,function(c){var l=c.context,d=l.shapes,u=l.allDraggedElements,p=r(d);if(!l.dragGroup){var m=ie("g");J(m,i.cls("djs-drag-group",["no-events"]));var f=t.getActiveLayer();me(f,m),l.dragGroup=m}p.forEach(function(_){n.addDragger(_,l.dragGroup)}),u?u=Ps([u,o(d)]):u=o(d),M(u,function(_){t.addMarker(_,a_)}),l.allDraggedElements=u,l.differentParents=W5(d)}),e.on("shape.move.move",nS,function(c){var l=c.context,d=l.dragGroup,u=l.target,p=l.shape.parent,m=l.canExecute;u&&(m==="attach"?a(u,sS):l.canExecute&&p&&u.id!==p.id?a(u,aS):a(u,l.canExecute?rS:oS)),mt(d,c.dx,c.dy)}),e.on(["shape.move.out","shape.move.cleanup"],function(c){var l=c.context,d=l.target;d&&a(d,null)}),e.on("shape.move.cleanup",function(c){var l=c.context,d=l.allDraggedElements,u=l.dragGroup;M(d,function(p){t.removeMarker(p,a_)}),u&&Qe(u)}),this.makeDraggable=s}ih.$inject=["eventBus","canvas","styles","previewSupport"];function $5(e){var t=fe(e,function(i){return Fe(i)?ve(e,mi({id:i.source.id}))&&ve(e,mi({id:i.target.id})):!0});return t}function W5(e){return gy(Zn(e,function(t){return t.parent&&t.parent.id}))!==1}var cS={__depends__:[Xo,Ut,Jf,ii,bi,Ln],__init__:["move","movePreview"],move:["type",th],movePreview:["type",ih]};var dS=".djs-palette-toggle",uS=".entry",U5=dS+", "+uS,s_="djs-palette-",G5="shown",c_="open",lS="two-column",q5=1e3;function Nt(e,t){this._eventBus=e,this._canvas=t;var i=this;e.on("tool-manager.update",function(n){var r=n.tool;i.updateToolHighlight(r)}),e.on("i18n.changed",function(){i._update()}),e.on("diagram.init",function(){i._diagramInitialized=!0,i._rebuild()})}Nt.$inject=["eventBus","canvas"];Nt.prototype.registerProvider=function(e,t){t||(t=e,e=q5),this._eventBus.on("palette.getProviders",e,function(i){i.providers.push(t)}),this._rebuild()};Nt.prototype.getEntries=function(){var e=this._getProviders();return e.reduce(K5,{})};Nt.prototype._rebuild=function(){if(this._diagramInitialized){var e=this._getProviders();e.length&&(this._container||this._init(),this._update())}};Nt.prototype._init=function(){var e=this,t=this._eventBus,i=this._getParentContainer(),n=this._container=qe(Nt.HTML_MARKUP);i.appendChild(n),ot(i).add(s_+G5),ti.bind(n,U5,"click",function(r){var o=r.delegateTarget;if(up(o,dS))return e.toggle();e.trigger("click",r)}),Se.bind(n,"mousedown",function(r){r.stopPropagation()}),ti.bind(n,uS,"dragstart",function(r){e.trigger("dragstart",r)}),t.on("canvas.resized",this._layoutChanged,this),t.fire("palette.create",{container:n})};Nt.prototype._getProviders=function(e){var t=this._eventBus.createEvent({type:"palette.getProviders",providers:[]});return this._eventBus.fire(t),t.providers};Nt.prototype._toggleState=function(e){e=e||{};var t=this._getParentContainer(),i=this._container,n=this._eventBus,r,o=ot(i),a=ot(t);"twoColumn"in e?r=e.twoColumn:r=this._needsCollapse(t.clientHeight,this._entries||{}),o.toggle(lS,r),a.toggle(s_+lS,r),"open"in e&&(o.toggle(c_,e.open),a.toggle(s_+c_,e.open)),n.fire("palette.changed",{twoColumn:r,open:this.isOpen()})};Nt.prototype._update=function(){var e=He(".djs-palette-entries",this._container),t=this._entries=this.getEntries();No(e),M(t,function(i,n){var r=i.group||"default",o=He("[data-group="+to(r)+"]",e);o||(o=qe('<div class="group"></div>'),Tt(o,"data-group",r),e.appendChild(o));var a=i.html||(i.separator?'<hr class="separator" />':'<div class="entry" draggable="true"></div>'),s=qe(a);if(o.appendChild(s),!i.separator&&(Tt(s,"data-action",n),i.title&&Tt(s,"title",i.title),i.className&&Y5(s,i.className),i.imageUrl)){var c=qe("<img>");Tt(c,"src",i.imageUrl),s.appendChild(c)}}),this.open()};Nt.prototype.trigger=function(e,t,i){var n,r,o=t.delegateTarget||t.target;return o?(n=Tt(o,"data-action"),r=t.originalEvent||t,this.triggerEntry(n,e,r,i)):t.preventDefault()};Nt.prototype.triggerEntry=function(e,t,i,n){var r=this._entries,o,a;if(o=r[e],!!o&&(a=o.action,this._eventBus.fire("palette.trigger",{entry:o,event:i})!==!1)){if(vt(a)){if(t==="click")return a(i,n)}else if(a[t])return a[t](i,n);i.preventDefault()}};Nt.prototype._layoutChanged=function(){this._toggleState({})};Nt.prototype._needsCollapse=function(e,t){var i=50,n=Object.keys(t).length*46;return e<n+i};Nt.prototype.close=function(){this._toggleState({open:!1,twoColumn:!1})};Nt.prototype.open=function(){this._toggleState({open:!0})};Nt.prototype.toggle=function(){this.isOpen()?this.close():this.open()};Nt.prototype.isActiveTool=function(e){return e&&this._activeTool===e};Nt.prototype.updateToolHighlight=function(e){var t,i;this._toolsContainer||(t=He(".djs-palette-entries",this._container),this._toolsContainer=He("[data-group=tools]",t)),i=this._toolsContainer,M(i.children,function(n){var r=n.getAttribute("data-action");if(r){var o=ot(n);r=r.replace("-tool",""),o.contains("entry")&&r===e?o.add("highlighted-entry"):o.remove("highlighted-entry")}})};Nt.prototype.isOpen=function(){return ot(this._container).has(c_)};Nt.prototype._getParentContainer=function(){return this._canvas.getContainer()};Nt.HTML_MARKUP='<div class="djs-palette"><div class="djs-palette-entries"></div><div class="djs-palette-toggle"></div></div>';function Y5(e,t){var i=ot(e),n=oe(t)?t:t.split(/\s+/g);n.forEach(function(r){i.add(r)})}function K5(e,t){var i=t.getPaletteEntries();return vt(i)?i(e):(M(i,function(n,r){e[r]=n}),e)}var pS={__init__:["palette"],palette:["type",Nt]};var mS="crosshair";function go(e,t,i,n,r,o,a){this._selection=r,this._dragging=i,this._mouse=a;var s=this,c={create:function(l){var d=t.getActiveLayer(),u;u=l.frame=ie("rect"),J(u,{class:"djs-lasso-overlay",width:1,height:1,x:0,y:0}),me(d,u)},update:function(l){var d=l.frame,u=l.bbox;J(d,{x:u.x,y:u.y,width:u.width,height:u.height})},remove:function(l){l.frame&&Qe(l.frame)}};o.registerTool("lasso",{tool:"lasso.selection",dragging:"lasso"}),e.on("lasso.selection.end",function(l){var d=l.originalEvent.target;!l.hover&&!(d instanceof SVGElement)||e.once("lasso.selection.ended",function(){s.activateLasso(l.originalEvent,!0)})}),e.on("lasso.end",0,function(l){var d=l.context,u=l_(l),p=n.filter(function(f){return f}),m=Pa(l);s.select(p,u,m?d.selection:[])}),e.on("lasso.start",function(l){var d=l.context;d.bbox=l_(l),c.create(d),d.selection=r.get()}),e.on("lasso.move",function(l){var d=l.context;d.bbox=l_(l),c.update(d)}),e.on("lasso.cleanup",function(l){var d=l.context;c.remove(d)}),e.on("element.mousedown",1500,function(l){if(Pa(l))return s.activateLasso(l.originalEvent),!0})}go.$inject=["eventBus","canvas","dragging","elementRegistry","selection","toolManager","mouse"];go.prototype.activateLasso=function(e,t){this._dragging.init(e,"lasso",{autoActivate:t,cursor:mS,data:{context:{}}})};go.prototype.activateSelection=function(e,t){this._dragging.init(e,"lasso.selection",{trapClick:!1,autoActivate:t,cursor:mS,data:{context:{}},keepSelection:!0})};go.prototype.select=function(e,t,i=[]){var n=fp(e,t);this._selection.select([...i,...Io(n)])};go.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateSelection(e,!!e)};go.prototype.isActive=function(){var e=this._dragging.context();return e&&/^lasso/.test(e.prefix)};function l_(e){var t={x:e.x-e.dx,y:e.y-e.dy},i={x:e.x,y:e.y},n;return t.x<=i.x&&t.y<i.y||t.x<i.x&&t.y<=i.y?n={x:t.x,y:t.y,width:i.x-t.x,height:i.y-t.y}:t.x>=i.x&&t.y<i.y||t.x>i.x&&t.y<=i.y?n={x:i.x,y:t.y,width:t.x-i.x,height:i.y-t.y}:t.x<=i.x&&t.y>i.y||t.x<i.x&&t.y>=i.y?n={x:t.x,y:i.y,width:i.x-t.x,height:t.y-i.y}:t.x>=i.x&&t.y>i.y||t.x>i.x&&t.y>=i.y?n={x:i.x,y:i.y,width:t.x-i.x,height:t.y-i.y}:n={x:i.x,y:i.y,width:0,height:0},n}var fS={__depends__:[sa,kr],__init__:["lassoTool"],lassoTool:["type",go]};var d_=1500,gS="grab";function ua(e,t,i,n,r,o){this._dragging=i,this._mouse=o;var a=this,s=n.get("keyboard",!1);r.registerTool("hand",{tool:"hand",dragging:"hand.move"}),e.on("element.mousedown",d_,function(c){if(ro(c))return a.activateMove(c.originalEvent,!0),!1}),s&&s.addListener(d_,function(c){if(!(!hS(c.keyEvent)||a.isActive())){var l=a._mouse.getLastMoveEvent();a.activateMove(l,!!l)}},"keyboard.keydown"),s&&s.addListener(d_,function(c){!hS(c.keyEvent)||!a.isActive()||a.toggle()},"keyboard.keyup"),e.on("hand.end",function(c){var l=c.originalEvent.target;if(!c.hover&&!(l instanceof SVGElement))return!1;e.once("hand.ended",function(){a.activateMove(c.originalEvent,{reactivate:!0})})}),e.on("hand.move.move",function(c){var l=t.viewbox().scale;t.scroll({dx:c.dx*l,dy:c.dy*l})}),e.on("hand.move.end",function(c){var l=c.context,d=l.reactivate;return!ro(c)&&d&&e.once("hand.move.ended",function(u){a.activateHand(u.originalEvent,!0,!0)}),!1})}ua.$inject=["eventBus","canvas","dragging","injector","toolManager","mouse"];ua.prototype.activateMove=function(e,t,i){typeof t=="object"&&(i=t,t=!1),this._dragging.init(e,"hand.move",{autoActivate:t,cursor:gS,data:{context:i||{}}})};ua.prototype.activateHand=function(e,t,i){this._dragging.init(e,"hand",{trapClick:!1,autoActivate:t,cursor:gS,data:{context:{reactivate:i}}})};ua.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateHand(e,!!e)};ua.prototype.isActive=function(){var e=this._dragging.context();return e?/^(hand|hand\.move)$/.test(e.prefix):!1};function hS(e){return It("Space",e)}var vS={__depends__:[sa,kr],__init__:["handTool"],handTool:["type",ua]};var _S="connect-ok",bS="connect-not-ok";function pa(e,t,i,n,r,o,a){var s=this;this._dragging=t,this._rules=o,this._mouse=a,r.registerTool("global-connect",{tool:"global-connect",dragging:"global-connect.drag"}),e.on("global-connect.hover",function(c){var l=c.context,d=c.hover,u=l.canStartConnect=s.canStartConnect(d);u!==null&&(l.startTarget=d,n.addMarker(d,u?_S:bS))}),e.on(["global-connect.out","global-connect.cleanup"],function(c){var l=c.context.startTarget,d=c.context.canStartConnect;l&&n.removeMarker(l,d?_S:bS)}),e.on(["global-connect.ended"],function(c){var l=c.context,d=l.startTarget,u={x:c.x,y:c.y},p=s.canStartConnect(d);if(p)return e.once("element.out",function(){e.once(["connect.ended","connect.canceled"],function(){e.fire("global-connect.drag.ended")}),i.start(null,d,u)}),!1})}pa.$inject=["eventBus","dragging","connect","canvas","toolManager","rules","mouse"];pa.prototype.start=function(e,t){this._dragging.init(e,"global-connect",{autoActivate:t,trapClick:!1,data:{context:{}}})};pa.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();return this.start(e,!!e)};pa.prototype.isActive=function(){var e=this._dragging.context();return e&&/^global-connect/.test(e.prefix)};pa.prototype.canStartConnect=function(e){return this._rules.allowed("connection.start",{source:e})};var yS={__depends__:[oc,ii,bi,sa,kr],globalConnect:["type",pa]};function Qd(e,t,i,n,r,o,a,s){this._palette=e,this._create=t,this._elementFactory=i,this._spaceTool=n,this._lassoTool=r,this._handTool=o,this._globalConnect=a,this._translate=s,e.registerProvider(this)}Qd.$inject=["palette","create","elementFactory","spaceTool","lassoTool","handTool","globalConnect","translate"];Qd.prototype.getPaletteEntries=function(){var e={},t=this._create,i=this._elementFactory,n=this._spaceTool,r=this._lassoTool,o=this._handTool,a=this._globalConnect,s=this._translate;function c(u,p,m,f,_){function b(D){var R=i.createShape(k({type:u},_));t.start(D,R)}return{group:p,className:m,title:f,action:{dragstart:b,click:b}}}function l(u){var p=i.createShape({type:"bpmn:SubProcess",x:0,y:0,isExpanded:!0}),m=i.createShape({type:"bpmn:StartEvent",x:40,y:82,parent:p});t.start(u,[p,m],{hints:{autoSelect:[p]}})}function d(u){t.start(u,i.createParticipantShape())}return k(e,{"hand-tool":{group:"tools",className:"bpmn-icon-hand-tool",title:s("Activate hand tool"),action:{click:function(u){o.activateHand(u)}}},"lasso-tool":{group:"tools",className:"bpmn-icon-lasso-tool",title:s("Activate lasso tool"),action:{click:function(u){r.activateSelection(u)}}},"space-tool":{group:"tools",className:"bpmn-icon-space-tool",title:s("Activate create/remove space tool"),action:{click:function(u){n.activateSelection(u)}}},"global-connect-tool":{group:"tools",className:"bpmn-icon-connection-multi",title:s("Activate global connect tool"),action:{click:function(u){a.start(u)}}},"tool-separator":{group:"tools",separator:!0},"create.start-event":c("bpmn:StartEvent","event","bpmn-icon-start-event-none",s("Create start event")),"create.intermediate-event":c("bpmn:IntermediateThrowEvent","event","bpmn-icon-intermediate-event-none",s("Create intermediate/boundary event")),"create.end-event":c("bpmn:EndEvent","event","bpmn-icon-end-event-none",s("Create end event")),"create.exclusive-gateway":c("bpmn:ExclusiveGateway","gateway","bpmn-icon-gateway-none",s("Create gateway")),"create.task":c("bpmn:Task","activity","bpmn-icon-task",s("Create task")),"create.data-object":c("bpmn:DataObjectReference","data-object","bpmn-icon-data-object",s("Create data object reference")),"create.data-store":c("bpmn:DataStoreReference","data-store","bpmn-icon-data-store",s("Create data store reference")),"create.subprocess-expanded":{group:"activity",className:"bpmn-icon-subprocess-expanded",title:s("Create expanded sub-process"),action:{dragstart:l,click:l}},"create.participant-expanded":{group:"collaboration",className:"bpmn-icon-participant",title:s("Create pool/participant"),action:{dragstart:d,click:d}},"create.group":c("bpmn:Group","artifact","bpmn-icon-group",s("Create group"))}),e};var xS={__depends__:[pS,aa,kf,fS,vS,yS,qo],__init__:["paletteProvider"],paletteProvider:["type",Qd]};var X5=250;function Jd(e,t,i,n,r){V.call(this,e);function o(s){var c=s.canExecute.replacements;M(c,function(l){var d=l.oldElementId,u={type:l.newElementType};if(!s.visualReplacements[d]){var p=t.get(d);k(u,{x:p.x,y:p.y});var m=i.createShape(u);n.addShape(m,p.parent);var f=He('[data-element-id="'+to(p.id)+'"]',s.dragGroup);f&&J(f,{display:"none"});var _=r.addDragger(m,s.dragGroup);s.visualReplacements[d]=_,n.removeShape(m)}})}function a(s){var c=s.visualReplacements;M(c,function(l,d){var u=He('[data-element-id="'+to(d)+'"]',s.dragGroup);u&&J(u,{display:"inline"}),l.remove(),c[d]&&delete c[d]})}e.on("shape.move.move",X5,function(s){var c=s.context,l=c.canExecute;c.visualReplacements||(c.visualReplacements={}),l&&l.replacements?o(c):a(c)})}Jd.$inject=["eventBus","elementRegistry","elementFactory","canvas","previewSupport"];z(Jd,V);var wS={__depends__:[Ln],__init__:["bpmnReplacePreview"],bpmnReplacePreview:["type",Jd]};var Z5=1250,u_=40,Q5=20,J5=10,ES=20,SS=["x","y"],eB=Math.abs;function nh(e){e.on(["connect.hover","connect.move","connect.end"],Z5,function(t){var i=t.context,n=i.canExecute,r=i.start,o=i.hover,a=i.source,s=i.target;t.originalEvent&&gi(t.originalEvent)||(i.initialConnectionStart||(i.initialConnectionStart=i.connectionStart),n&&o&&tB(t,o,oB(o)),o&&rB(n,["bpmn:Association","bpmn:DataInputAssociation","bpmn:DataOutputAssociation","bpmn:SequenceFlow"])?(i.connectionStart=Qi(r),ge(o,["bpmn:Event","bpmn:Gateway"])&&CS(t,Qi(o)),ge(o,["bpmn:Task","bpmn:SubProcess"])&&iB(t,o),v(a,"bpmn:BoundaryEvent")&&s===a.host&&nB(t)):MS(n,"bpmn:MessageFlow")?(v(r,"bpmn:Event")&&(i.connectionStart=Qi(r)),v(o,"bpmn:Event")&&CS(t,Qi(o))):i.connectionStart=i.initialConnectionStart)})}nh.$inject=["eventBus"];function tB(e,t,i){SS.forEach(function(n){var r=DS(n,t);e[n]<t[n]+i?bt(e,n,t[n]+i):e[n]>t[n]+r-i&&bt(e,n,t[n]+r-i)})}function iB(e,t){var i=Qi(t);SS.forEach(function(n){aB(e,t,n)&&bt(e,n,i[n])})}function nB(e){var t=e.context,i=t.source,n=t.target;if(!sB(t)){var r=Qi(i),o=xt(r,n,-10),a=[];/top|bottom/.test(o)&&a.push("x"),/left|right/.test(o)&&a.push("y"),a.forEach(function(s){var c=e[s],l;eB(c-r[s])<u_&&(c>r[s]?l=r[s]+u_:l=r[s]-u_,bt(e,s,l))})}}function CS(e,t){bt(e,"x",t.x),bt(e,"y",t.y)}function MS(e,t){return e&&e.type===t}function rB(e,t){return Fi(t,function(i){return MS(e,i)})}function DS(e,t){return e==="x"?t.width:t.height}function oB(e){return v(e,"bpmn:Task")?J5:Q5}function aB(e,t,i){return e[i]>t[i]+ES&&e[i]<t[i]+DS(i,t)-ES}function sB(e){var t=e.hover,i=e.source;return t&&i&&t===i}function dr(){this._targets={},this._snapOrigins={},this._snapLocations=[],this._defaultSnaps={}}dr.prototype.getSnapOrigin=function(e){return this._snapOrigins[e]};dr.prototype.setSnapOrigin=function(e,t){this._snapOrigins[e]=t,this._snapLocations.indexOf(e)===-1&&this._snapLocations.push(e)};dr.prototype.addDefaultSnap=function(e,t){var i=this._defaultSnaps[e];i||(i=this._defaultSnaps[e]=[]),i.push(t)};dr.prototype.getSnapLocations=function(){return this._snapLocations};dr.prototype.setSnapLocations=function(e){this._snapLocations=e};dr.prototype.pointsForTarget=function(e){var t=e.id||e,i=this._targets[t];return i||(i=this._targets[t]=new rh,i.initDefaults(this._defaultSnaps)),i};function rh(){this._snapValues={}}rh.prototype.add=function(e,t){var i=this._snapValues[e];i||(i=this._snapValues[e]={x:[],y:[]}),i.x.indexOf(t.x)===-1&&i.x.push(t.x),i.y.indexOf(t.y)===-1&&i.y.push(t.y)};rh.prototype.snap=function(e,t,i,n){var r=this._snapValues[t];return r&&Nw(e[i],r[i],n)};rh.prototype.initDefaults=function(e){var t=this;M(e||{},function(i,n){M(i,function(r){t.add(n,r)})})};var cB=1250;function _n(e,t,i){var n=this;this._elementRegistry=e,t.on(["create.start","shape.move.start"],function(r){n.initSnap(r)}),t.on(["create.move","create.end","shape.move.move","shape.move.end"],cB,function(r){var o=r.context,a=o.shape,s=o.snapContext,c=o.target;if(!(r.originalEvent&&gi(r.originalEvent))&&!(or(r)||!c)){var l=s.pointsForTarget(c);l.initialized||(l=n.addSnapTargetPoints(l,a,c),l.initialized=!0),i.snap(r,l)}}),t.on(["create.cleanup","shape.move.cleanup"],function(){i.hide()})}_n.$inject=["elementRegistry","eventBus","snapping"];_n.prototype.initSnap=function(e){var t=this._elementRegistry,i=e.context,n=i.shape,r=i.snapContext;r||(r=i.snapContext=new dr);var o;t.get(n.id)?o=Qi(n,e):o={x:e.x+Qi(n).x,y:e.y+Qi(n).y};var a={x:o.x-n.width/2,y:o.y-n.height/2},s={x:o.x+n.width/2,y:o.y+n.height/2};return r.setSnapOrigin("mid",{x:o.x-e.x,y:o.y-e.y}),xe(n)||(r.setSnapOrigin("top-left",{x:a.x-e.x,y:a.y-e.y}),r.setSnapOrigin("bottom-right",{x:s.x-e.x,y:s.y-e.y})),r};_n.prototype.addSnapTargetPoints=function(e,t,i){var n=this.getSnapTargets(t,i);return M(n,function(r){if(xe(r)){xe(t)&&e.add("mid",Qi(r));return}if(Fe(r)){if(r.waypoints.length<3)return;var o=r.waypoints.slice(1,-1);M(o,function(a){e.add("mid",a)});return}e.add("mid",Qi(r))}),!he(t.x)||!he(t.y)||this._elementRegistry.get(t.id)&&e.add("mid",Qi(t)),e};_n.prototype.getSnapTargets=function(e,t){return Bm(t).filter(function(i){return!lB(i)})};function lB(e){return!!e.hidden}var AS=1500;function ma(e,t){t.invoke(_n,this),e.on(["create.move","create.end"],AS,mB),e.on(["create.move","create.end","shape.move.move","shape.move.end"],AS,function(i){var n=i.context,r=n.canExecute,o=n.target,a=r&&(r==="attach"||r.attach);a&&!or(i)&&dB(i,o)})}z(ma,_n);ma.$inject=["eventBus","injector"];ma.prototype.initSnap=function(e){var t=_n.prototype.initSnap.call(this,e),i=e.shape,n=!!this._elementRegistry.get(i.id);return M(i.outgoing,function(r){var o=r.waypoints[0];o=o.original||o,t.setSnapOrigin(r.id+"-docking",kS(o,n,e))}),M(i.incoming,function(r){var o=r.waypoints[r.waypoints.length-1];o=o.original||o,t.setSnapOrigin(r.id+"-docking",kS(o,n,e))}),v(i,"bpmn:Participant")&&t.setSnapLocations(["top-left","bottom-right","mid"]),t};ma.prototype.addSnapTargetPoints=function(e,t,i){_n.prototype.addSnapTargetPoints.call(this,e,t,i);var n=this.getSnapTargets(t,i);M(n,function(o){(pB(o)||uB([t,o],"bpmn:TextAnnotation"))&&(e.add("top-left",Nm(o)),e.add("bottom-right",Lm(o)))});var r=this._elementRegistry;return M(t.incoming,function(o){if(r.get(t.id)){PS(n,o.source)||e.add("mid",ue(o.source));var a=o.waypoints[0];e.add(o.id+"-docking",a.original||a)}}),M(t.outgoing,function(o){if(r.get(t.id)){PS(n,o.target)||e.add("mid",ue(o.target));var a=o.waypoints[o.waypoints.length-1];e.add(o.id+"-docking",a.original||a)}}),v(i,"bpmn:SequenceFlow")&&(e=this.addSnapTargetPoints(e,t,i.parent)),e};ma.prototype.getSnapTargets=function(e,t){return _n.prototype.getSnapTargets.call(this,e,t).filter(function(i){return!v(i,"bpmn:Lane")})};function dB(e,t){var i=ce(t),n=pf(e,t),r=e.context,o=r.shape,a;o.parent?a={x:0,y:0}:a=ue(o),/top/.test(n)?bt(e,"y",i.top-a.y):/bottom/.test(n)&&bt(e,"y",i.bottom-a.y),/left/.test(n)?bt(e,"x",i.left-a.x):/right/.test(n)&&bt(e,"x",i.right-a.x)}function uB(e,t){return e.every(function(i){return v(i,t)})}function pB(e){return v(e,"bpmn:SubProcess")&&we(e)?!0:v(e,"bpmn:Participant")}function mB(e){var t=e.context,i=t.createConstraints;if(i){var n=i.top,r=i.right,o=i.bottom,a=i.left;(a&&a>=e.x||r&&r<=e.x)&&bt(e,"x",e.x),(n&&n>=e.y||o&&o<=e.y)&&bt(e,"y",e.y)}}function PS(e,t){return e.indexOf(t)!==-1}function kS(e,t,i){return t?{x:e.x-i.x,y:e.y-i.y}:{x:e.x,y:e.y}}var fB=1250;function rs(e,t){var i=this;e.on(["resize.start"],function(n){i.initSnap(n)}),e.on(["resize.move","resize.end"],fB,function(n){var r=n.context,o=r.shape,a=o.parent,s=r.direction,c=r.snapContext;if(!(n.originalEvent&&gi(n.originalEvent))&&!or(n)){var l=c.pointsForTarget(a);l.initialized||(l=i.addSnapTargetPoints(l,o,a,s),l.initialized=!0),vB(s)&&bt(n,"x",n.x),_B(s)&&bt(n,"y",n.y),t.snap(n,l)}}),e.on(["resize.cleanup"],function(){t.hide()})}rs.prototype.initSnap=function(e){var t=e.context,i=t.shape,n=t.direction,r=t.snapContext;r||(r=t.snapContext=new dr);var o=RS(i,n);return r.setSnapOrigin("corner",{x:o.x-e.x,y:o.y-e.y}),r};rs.prototype.addSnapTargetPoints=function(e,t,i,n){var r=this.getSnapTargets(t,i);return M(r,function(o){e.add("corner",Lm(o)),e.add("corner",Nm(o))}),e.add("corner",RS(t,n)),e};rs.$inject=["eventBus","snapping"];rs.prototype.getSnapTargets=function(e,t){return Bm(t).filter(function(i){return!hB(i,e)&&!Fe(i)&&!gB(i)&&!xe(i)})};function RS(e,t){var i=ue(e),n=ce(e),r={x:i.x,y:i.y};return t.indexOf("n")!==-1?r.y=n.top:t.indexOf("s")!==-1&&(r.y=n.bottom),t.indexOf("e")!==-1?r.x=n.right:t.indexOf("w")!==-1&&(r.x=n.left),r}function hB(e,t){return e.host===t}function gB(e){return!!e.hidden}function vB(e){return e==="n"||e==="s"}function _B(e){return e==="e"||e==="w"}var bB=7,yB=1e3;function Nr(e){this._canvas=e,this._asyncHide=sp(jt(this.hide,this),yB)}Nr.$inject=["canvas"];Nr.prototype.snap=function(e,t){var i=e.context,n=i.snapContext,r=n.getSnapLocations(),o={x:or(e,"x"),y:or(e,"y")};M(r,function(a){var s=n.getSnapOrigin(a),c={x:e.x+s.x,y:e.y+s.y};if(M(["x","y"],function(l){var d;o[l]||(d=t.snap(c,a,l,bB),d!==void 0&&(o[l]={value:d,originValue:d-s[l]}))}),o.x&&o.y)return!1}),this.showSnapLine("vertical",o.x&&o.x.value),this.showSnapLine("horizontal",o.y&&o.y.value),M(["x","y"],function(a){var s=o[a];it(s)&&bt(e,a,s.originValue)})};Nr.prototype._createLine=function(e){var t=this._canvas.getLayer("snap"),i=ie("path");return J(i,{d:"M0,0 L0,0"}),Re(i).add("djs-snap-line"),me(t,i),{update:function(n){he(n)?e==="horizontal"?J(i,{d:"M-100000,"+n+" L+100000,"+n,display:""}):J(i,{d:"M "+n+",-100000 L "+n+", +100000",display:""}):J(i,{display:"none"})}}};Nr.prototype._createSnapLines=function(){this._snapLines={horizontal:this._createLine("horizontal"),vertical:this._createLine("vertical")}};Nr.prototype.showSnapLine=function(e,t){var i=this.getSnapLine(e);i&&i.update(t),this._asyncHide()};Nr.prototype.getSnapLine=function(e){return this._snapLines||this._createSnapLines(),this._snapLines[e]};Nr.prototype.hide=function(){M(this._snapLines,function(e){e.update()})};var OS={__init__:["createMoveSnapping","resizeSnapping","snapping"],createMoveSnapping:["type",_n],resizeSnapping:["type",rs],snapping:["type",Nr]};var TS={__depends__:[OS],__init__:["connectSnapping","createMoveSnapping"],connectSnapping:["type",nh],createMoveSnapping:["type",ma]};var FS=300;function Te(e,t,i,n){this._open=!1,this._results={},this._eventMaps=[],this._cachedRootElement=null,this._cachedSelection=null,this._cachedViewbox=null,this._canvas=e,this._eventBus=t,this._selection=i,this._translate=n,this._container=this._getBoxHtml(),this._searchInput=He(Te.INPUT_SELECTOR,this._container),this._resultsContainer=He(Te.RESULTS_CONTAINER_SELECTOR,this._container),this._canvas.getContainer().appendChild(this._container),t.on(["canvas.destroy","diagram.destroy","drag.init","elements.changed"],this.close,this)}Te.$inject=["canvas","eventBus","selection","translate"];Te.prototype._bindEvents=function(){var e=this;function t(i,n,r,o){e._eventMaps.push({el:i,type:r,listener:ti.bind(i,n,r,o)})}t(document,"html","click",function(i){e.close(!1)}),t(this._container,Te.INPUT_SELECTOR,"click",function(i){i.stopPropagation(),i.delegateTarget.focus()}),t(this._container,Te.RESULT_SELECTOR,"mouseover",function(i){i.stopPropagation(),e._scrollToNode(i.delegateTarget),e._preselect(i.delegateTarget)}),t(this._container,Te.RESULT_SELECTOR,"click",function(i){i.stopPropagation(),e._select(i.delegateTarget)}),t(this._container,Te.INPUT_SELECTOR,"keydown",function(i){It("ArrowUp",i)&&i.preventDefault(),It("ArrowDown",i)&&i.preventDefault()}),t(this._container,Te.INPUT_SELECTOR,"keyup",function(i){if(It("Escape",i))return e.close();if(It("Enter",i)){var n=e._getCurrentResult();return n?e._select(n):e.close(!1)}if(It("ArrowUp",i))return e._scrollToDirection(!0);if(It("ArrowDown",i))return e._scrollToDirection();It(["ArrowLeft","ArrowRight"],i)||e._search(i.delegateTarget.value)})};Te.prototype._unbindEvents=function(){this._eventMaps.forEach(function(e){ti.unbind(e.el,e.type,e.listener)})};Te.prototype._search=function(e){var t=this;if(this._clearResults(),!!e.trim()){var i=this._searchProvider.find(e);if(i=i.filter(function(r){return!t._canvas.getRootElements().includes(r.element)}),!i.length){this._selection.select(null);return}i.forEach(function(r){var o=r.element.id,a=t._createResultNode(r,o);t._results[o]={element:r.element,node:a}});var n=He(Te.RESULT_SELECTOR,this._resultsContainer);this._scrollToNode(n),this._preselect(n)}};Te.prototype._scrollToDirection=function(e){var t=this._getCurrentResult();if(t){var i=e?t.previousElementSibling:t.nextElementSibling;i&&(this._scrollToNode(i),this._preselect(i))}};Te.prototype._scrollToNode=function(e){if(!(!e||e===this._getCurrentResult())){var t=e.offsetTop,i=this._resultsContainer.scrollTop,n=t-this._resultsContainer.clientHeight+e.clientHeight;t<i?this._resultsContainer.scrollTop=t:i<n&&(this._resultsContainer.scrollTop=n)}};Te.prototype._clearResults=function(){No(this._resultsContainer),this._results={},this._eventBus.fire("searchPad.cleared")};Te.prototype._getCurrentResult=function(){return He(Te.RESULT_SELECTED_SELECTOR,this._resultsContainer)};Te.prototype._createResultNode=function(e,t){var i=qe(Te.RESULT_HTML);return e.primaryTokens.length>0&&IS(i,e.primaryTokens,Te.RESULT_PRIMARY_HTML),IS(i,e.secondaryTokens,Te.RESULT_SECONDARY_HTML),Tt(i,Te.RESULT_ID_ATTRIBUTE,t),this._resultsContainer.appendChild(i),i};Te.prototype.registerProvider=function(e){this._searchProvider=e};Te.prototype.open=function(){if(!this._searchProvider)throw new Error("no search provider registered");this.isOpen()||(this._cachedRootElement=this._canvas.getRootElement(),this._cachedSelection=this._selection.get(),this._cachedViewbox=this._canvas.viewbox(),this._selection.select(null),this._bindEvents(),this._open=!0,ot(this._canvas.getContainer()).add("djs-search-open"),ot(this._container).add("open"),this._searchInput.focus(),this._eventBus.fire("searchPad.opened"))};Te.prototype.close=function(e=!0){this.isOpen()&&(e&&(this._cachedRootElement&&this._canvas.setRootElement(this._cachedRootElement),this._cachedSelection&&this._selection.select(this._cachedSelection),this._cachedViewbox&&this._canvas.viewbox(this._cachedViewbox),this._eventBus.fire("searchPad.restored")),this._cachedRootElement=null,this._cachedSelection=null,this._cachedViewbox=null,this._unbindEvents(),this._open=!1,ot(this._canvas.getContainer()).remove("djs-search-open"),ot(this._container).remove("open"),this._clearResults(),this._searchInput.value="",this._searchInput.blur(),this._eventBus.fire("searchPad.closed"),this._canvas.restoreFocus())};Te.prototype.toggle=function(){this.isOpen()?this.close():this.open()};Te.prototype.isOpen=function(){return this._open};Te.prototype._preselect=function(e){var t=this._getCurrentResult();if(e!==t){t&&ot(t).remove(Te.RESULT_SELECTED_CLASS);var i=Tt(e,Te.RESULT_ID_ATTRIBUTE),n=this._results[i].element;ot(e).add(Te.RESULT_SELECTED_CLASS),this._canvas.scrollToElement(n,{top:FS}),this._selection.select(n),this._eventBus.fire("searchPad.preselected",n)}};Te.prototype._select=function(e){var t=Tt(e,Te.RESULT_ID_ATTRIBUTE),i=this._results[t].element;this._cachedSelection=null,this._cachedViewbox=null,this.close(!1),this._canvas.scrollToElement(i,{top:FS}),this._selection.select(i),this._eventBus.fire("searchPad.selected",i)};Te.prototype._getBoxHtml=function(){let e=qe(Te.BOX_HTML),t=He(Te.INPUT_SELECTOR,e);return t&&t.setAttribute("aria-label",this._translate("Search in diagram")),e};function IS(e,t,i){var n=xB(t),r=qe(i);r.innerHTML=n,e.appendChild(r)}function xB(e){var t="";return e.forEach(function(i){var n=Vp(i.value||i.matched||i.normal),r=i.match||i.matched;r?t+='<b class="'+Te.RESULT_HIGHLIGHT_CLASS+'">'+n+"</b>":t+=n}),t!==""?t:null}Te.CONTAINER_SELECTOR=".djs-search-container";Te.INPUT_SELECTOR=".djs-search-input input";Te.RESULTS_CONTAINER_SELECTOR=".djs-search-results";Te.RESULT_SELECTOR=".djs-search-result";Te.RESULT_SELECTED_CLASS="djs-search-result-selected";Te.RESULT_SELECTED_SELECTOR="."+Te.RESULT_SELECTED_CLASS;Te.RESULT_ID_ATTRIBUTE="data-result-id";Te.RESULT_HIGHLIGHT_CLASS="djs-search-highlight";Te.BOX_HTML=`<div class="djs-search-container djs-scrollable">
  <div class="djs-search-input">
    <svg class="djs-search-icon" width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path fill-rule="evenodd" clip-rule="evenodd" d="M9.0325 8.5H9.625L13.3675 12.25L12.25 13.3675L8.5 9.625V9.0325L8.2975 8.8225C7.4425 9.5575 6.3325 10 5.125 10C2.4325 10 0.25 7.8175 0.25 5.125C0.25 2.4325 2.4325 0.25 5.125 0.25C7.8175 0.25 10 2.4325 10 5.125C10 6.3325 9.5575 7.4425 8.8225 8.2975L9.0325 8.5ZM1.75 5.125C1.75 6.9925 3.2575 8.5 5.125 8.5C6.9925 8.5 8.5 6.9925 8.5 5.125C8.5 3.2575 6.9925 1.75 5.125 1.75C3.2575 1.75 1.75 3.2575 1.75 5.125Z" fill="#22242A"/>
    </svg>
    <input type="text" spellcheck="false" />
  </div>
  <div class="djs-search-results" />
</div>`;Te.RESULT_HTML='<div class="djs-search-result"></div>';Te.RESULT_PRIMARY_HTML='<div class="djs-search-result-primary"></div>';Te.RESULT_SECONDARY_HTML='<p class="djs-search-result-secondary"></p>';var NS={__depends__:[qo,Yo,Ut],searchPad:["type",Te]};function eu(e,t,i,n){this._elementRegistry=e,this._canvas=i,this._search=n,t.registerProvider(this)}eu.$inject=["elementRegistry","searchPad","canvas","search"];eu.prototype.find=function(e){var t=this._canvas.getRootElements(),i=this._elementRegistry.filter(function(n){return!xe(n)&&!t.includes(n)});return this._search(i.map(n=>({element:n,label:hi(n),id:n.id})),e,{keys:["label","id"]}).map(wB)};function wB(e){let{item:{element:t},tokens:i}=e;return{element:t,primaryTokens:i.label,secondaryTokens:i.id}}var LS={__depends__:[NS,vm],__init__:["bpmnSearch"],bpmnSearch:["type",eu]};var BS="M44.7648 11.3263L36.9892 2.64074C36.0451 1.58628 34.5651 0.988708 33.1904 0.988708H5.98667C3.22688 0.988708 0.989624 3.34892 0.989624 6.26039V55.0235C0.989624 57.9349 3.22688 60.2952 5.98667 60.2952H40.966C43.7257 60.2952 45.963 57.9349 45.963 55.0235V14.9459C45.963 13.5998 45.6407 12.3048 44.7648 11.3263Z",jS="M1.03845 48.1347C1.03845 49.3511 1.07295 50.758 1.38342 52.064C1.69949 53.3938 2.32428 54.7154 3.56383 55.6428C6.02533 57.4841 10.1161 58.7685 14.8212 59.6067C19.5772 60.4538 25.1388 60.8738 30.6831 60.8738C36.2276 60.8738 41.7891 60.4538 46.545 59.6067C51.2504 58.7687 55.3412 57.4842 57.8028 55.6429C59.0424 54.7156 59.6673 53.3938 59.9834 52.064C60.2938 50.7579 60.3285 49.351 60.3285 48.1344V13.8415C60.3285 12.6249 60.2938 11.218 59.9834 9.91171C59.6673 8.58194 59.0423 7.2602 57.8027 6.33294C55.341 4.49168 51.2503 3.20723 46.545 2.36914C41.7891 1.522 36.2276 1.10204 30.6831 1.10205C25.1388 1.10206 19.5772 1.52206 14.8213 2.36923C10.1162 3.20734 6.02543 4.49183 3.5639 6.33314C2.32433 7.26038 1.69951 8.58206 1.38343 9.91181C1.07295 11.2179 1.03845 12.6247 1.03845 13.8411V48.1347Z",VS={width:36,height:50},zS={width:50,height:50};function p_(e,t,i){return ie("path",X({d:e,strokeWidth:2,transform:`translate(${t.x}, ${t.y})`},i))}var fa=5;function Vc(e,t){this._styles=t,e.registerProvider(this)}Vc.$inject=["outline","styles"];Vc.prototype.getOutline=function(e){let t=this._styles.cls("djs-outline",["no-fill"]);var i;if(!xe(e))return v(e,"bpmn:Gateway")?(i=ie("rect"),k(i.style,{"transform-box":"fill-box",transform:"rotate(45deg)","transform-origin":"center"}),J(i,k({x:2,y:2,rx:4,width:e.width-4,height:e.height-4},t))):ge(e,["bpmn:Task","bpmn:SubProcess","bpmn:Group","bpmn:CallActivity"])?(i=ie("rect"),J(i,k({x:-fa,y:-fa,rx:14,width:e.width+fa*2,height:e.height+fa*2},t))):v(e,"bpmn:EndEvent")?(i=ie("circle"),J(i,k({cx:e.width/2,cy:e.height/2,r:e.width/2+fa+1},t))):v(e,"bpmn:Event")?(i=ie("circle"),J(i,k({cx:e.width/2,cy:e.height/2,r:e.width/2+fa},t))):v(e,"bpmn:DataObjectReference")&&HS(e,"bpmn:DataObjectReference")?i=p_(BS,{x:-6,y:-6},t):v(e,"bpmn:DataStoreReference")&&HS(e,"bpmn:DataStoreReference")&&(i=p_(jS,{x:-6,y:-6},t)),i};Vc.prototype.updateOutline=function(e,t){if(!xe(e))return ge(e,["bpmn:SubProcess","bpmn:Group"])?(J(t,{width:e.width+fa*2,height:e.height+fa*2}),!0):!!ge(e,["bpmn:Event","bpmn:Gateway","bpmn:DataStoreReference","bpmn:DataObjectReference"])};function HS(e,t){var i;return t==="bpmn:DataObjectReference"?i=VS:t==="bpmn:DataStoreReference"&&(i=zS),e.width===i.width&&e.height===i.height}var $S={__depends__:[Jf],__init__:["outlineProvider"],outlineProvider:["type",Vc]};var EB='<?xml version="1.0" encoding="UTF-8"?><bpmn:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" targetNamespace="http://bpmn.io/schema/bpmn" id="Definitions_1"><bpmn:process id="Process_1" isExecutable="false"><bpmn:startEvent id="StartEvent_1"/></bpmn:process><bpmndi:BPMNDiagram id="BPMNDiagram_1"><bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_1"><bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1"><dc:Bounds height="36.0" width="36.0" x="173.0" y="102.0"/></bpmndi:BPMNShape></bpmndi:BPMNPlane></bpmndi:BPMNDiagram></bpmn:definitions>';function jn(e){Aa.call(this,e)}z(jn,Aa);jn.Viewer=nr;jn.NavigatedViewer=ao;jn.prototype.createDiagram=function(){return this.importXML(EB)};jn.prototype._interactionModules=[Jp,nm,rm];jn.prototype._modelingModules=[uw,tc,bw,hw,Bw,oc,zw,D1,xf,aa,k1,T1,j1,z1,H1,q1,J1,Nf,iS,cS,xS,wS,Kf,TS,LS,$S];jn.prototype._modules=[].concat(nr.prototype._modules,jn.prototype._interactionModules,jn.prototype._modelingModules);var CB=["bpmnCanvas"];function SB(e,t){if(e&1){let i=Le();h(0,"button",11),K("click",function(){ne(i);let r=j();return re(r.guardarFlujo())}),L(1,"i",12),S(2," Guardar "),g()}if(e&2){let i=j();I("disabled",i.guardando),E(),I("ngClass",i.guardando?"fa-spinner fa-spin":"fa-save")}}function MB(e,t){if(e&1){let i=Le();h(0,"button",6),K("click",function(){ne(i);let r=j();return re(r.validarFlujo())}),L(1,"i",13),S(2," Validar "),g()}}function DB(e,t){if(e&1&&(h(0,"div",35),L(1,"i",36),h(2,"p"),S(3),g()()),e&2){let i=j(2);E(3),le(i.error)}}function AB(e,t){e&1&&(h(0,"div",37),S(1," El nombre es obligatorio "),g())}function PB(e,t){if(e&1&&(h(0,"option",26),S(1),g()),e&2){let i=t.$implicit;I("ngValue",i.id),E(),Pe(" ",i.nombre," ")}}function kB(e,t){e&1&&(h(0,"div",37),S(1," El tipo de documento es obligatorio "),g())}function RB(e,t){if(e&1&&(h(0,"option",50),S(1),g()),e&2){let i=t.$implicit;I("value",i),E(),Pe(" ",i," ")}}function OB(e,t){if(e&1&&(h(0,"option",26),S(1),g()),e&2){let i=t.$implicit;I("ngValue",i.id),E(),Pe(" ",i.username," ")}}function TB(e,t){if(e&1){let i=Le();h(0,"div",18)(1,"label",51),S(2,"Asignado a usuario"),g(),h(3,"select",52),Yn("ngModelChange",function(r){ne(i);let o=j(4);return qn(o.elementoSeleccionado.asignado_a_usuario,r)||(o.elementoSeleccionado.asignado_a_usuario=r),re(r)}),K("change",function(){ne(i);let r=j(4);return re(r.actualizarElementoSeleccionado({asignado_a_usuario:r.elementoSeleccionado.asignado_a_usuario}))}),h(4,"option",26),S(5,"Sin asignar"),g(),G(6,OB,2,2,"option",27),g()()}if(e&2){let i=j(4);E(3),Gn("ngModel",i.elementoSeleccionado.asignado_a_usuario),I("disabled",i.modoVisualizacion),E(),I("ngValue",null),E(2),I("ngForOf",i.usuarios)}}function IB(e,t){if(e&1&&(h(0,"option",26),S(1),g()),e&2){let i=t.$implicit;I("ngValue",i.id),E(),Pe(" ",i.nombre," ")}}function FB(e,t){if(e&1){let i=Le();h(0,"div",18)(1,"label",53),S(2,"Asignado a rol"),g(),h(3,"select",54),Yn("ngModelChange",function(r){ne(i);let o=j(4);return qn(o.elementoSeleccionado.asignado_a_rol,r)||(o.elementoSeleccionado.asignado_a_rol=r),re(r)}),K("change",function(){ne(i);let r=j(4);return re(r.actualizarElementoSeleccionado({asignado_a_rol:r.elementoSeleccionado.asignado_a_rol}))}),h(4,"option",26),S(5,"Sin asignar"),g(),G(6,IB,2,2,"option",27),g()()}if(e&2){let i=j(4);E(3),Gn("ngModel",i.elementoSeleccionado.asignado_a_rol),I("disabled",i.modoVisualizacion),E(),I("ngValue",null),E(2),I("ngForOf",i.roles)}}function NB(e,t){if(e&1){let i=Le();h(0,"div",18)(1,"label",55),S(2,"Condici\xF3n"),g(),h(3,"input",56),Yn("ngModelChange",function(r){ne(i);let o=j(4);return qn(o.elementoSeleccionado.condicion,r)||(o.elementoSeleccionado.condicion=r),re(r)}),K("change",function(){ne(i);let r=j(4);return re(r.actualizarElementoSeleccionado({condicion:r.elementoSeleccionado.condicion}))}),g(),h(4,"small",57),S(5,'Defina la condici\xF3n para la decisi\xF3n (ej: "Documento aprobado")'),g()()}if(e&2){let i=j(4);E(3),Gn("ngModel",i.elementoSeleccionado.condicion),I("disabled",i.modoVisualizacion)}}function LB(e,t){if(e&1){let i=Le();h(0,"div",43)(1,"div",18)(2,"label",44),S(3,"Nombre"),g(),h(4,"input",45),Yn("ngModelChange",function(r){ne(i);let o=j(3);return qn(o.elementoSeleccionado.nombre,r)||(o.elementoSeleccionado.nombre=r),re(r)}),K("change",function(){ne(i);let r=j(3);return re(r.actualizarElementoSeleccionado({nombre:r.elementoSeleccionado.nombre}))}),g()(),h(5,"div",18)(6,"label",46),S(7,"Tipo"),g(),h(8,"select",47),Yn("ngModelChange",function(r){ne(i);let o=j(3);return qn(o.elementoSeleccionado.tipo,r)||(o.elementoSeleccionado.tipo=r),re(r)}),K("change",function(){ne(i);let r=j(3);return re(r.actualizarElementoSeleccionado({tipo:r.elementoSeleccionado.tipo}))}),G(9,RB,2,2,"option",48),g()(),G(10,TB,7,4,"div",49)(11,FB,7,4,"div",49)(12,NB,6,2,"div",49),g()}if(e&2){let i=j(3);E(4),Gn("ngModel",i.elementoSeleccionado.nombre),I("disabled",i.modoVisualizacion),E(4),Gn("ngModel",i.elementoSeleccionado.tipo),I("disabled",i.modoVisualizacion),E(),I("ngForOf",i.tiposElemento),E(),I("ngIf",i.elementoSeleccionado.tipo==="TAREA"),E(),I("ngIf",i.elementoSeleccionado.tipo==="TAREA"),E(),I("ngIf",i.elementoSeleccionado.tipo==="DECISION")}}function BB(e,t){if(e&1){let i=Le();h(0,"div",58)(1,"div",18)(2,"label",59),S(3,"Condici\xF3n"),g(),h(4,"input",60),Yn("ngModelChange",function(r){ne(i);let o=j(3);return qn(o.transicionSeleccionada.condicion,r)||(o.transicionSeleccionada.condicion=r),re(r)}),K("change",function(){ne(i);let r=j(3);return re(r.actualizarTransicionSeleccionada({condicion:r.transicionSeleccionada.condicion}))}),g(),h(5,"small",57),S(6,'Defina la condici\xF3n para la transici\xF3n (ej: "S\xED", "No")'),g()()()}if(e&2){let i=j(3);E(4),Gn("ngModel",i.transicionSeleccionada.condicion),I("disabled",i.modoVisualizacion)}}function jB(e,t){if(e&1&&(h(0,"div",38)(1,"div",39)(2,"h3"),S(3,"Propiedades"),g()(),h(4,"div",40),G(5,LB,13,8,"div",41)(6,BB,7,2,"div",42),g()()),e&2){let i=j(2);E(5),I("ngIf",i.elementoSeleccionado),E(),I("ngIf",i.transicionSeleccionada)}}function VB(e,t){if(e&1&&(h(0,"div",14),G(1,DB,4,1,"div",15),h(2,"div",16)(3,"form",17)(4,"div",18)(5,"label",19),S(6,"Nombre del flujo"),g(),L(7,"input",20),G(8,AB,2,0,"div",21),g(),h(9,"div",18)(10,"label",22),S(11,"Descripci\xF3n"),g(),L(12,"textarea",23),g(),h(13,"div",18)(14,"label",24),S(15,"Tipo de documento"),g(),h(16,"select",25)(17,"option",26),S(18,"Seleccione un tipo de documento"),g(),G(19,PB,2,2,"option",27),g(),G(20,kB,2,0,"div",21),g(),h(21,"div",28),L(22,"input",29),h(23,"label",30),S(24,"Activo"),g()()()(),h(25,"div",31)(26,"div",32),L(27,"div",33,1),g()(),G(29,jB,7,2,"div",34),g()),e&2){let i,n,r,o,a=j();E(),I("ngIf",a.error),E(2),I("formGroup",a.flujoForm),E(4),pe("is-invalid",((i=a.flujoForm.get("nombre"))==null?null:i.invalid)&&((i=a.flujoForm.get("nombre"))==null?null:i.touched)),E(),I("ngIf",((n=a.flujoForm.get("nombre"))==null?null:n.invalid)&&((n=a.flujoForm.get("nombre"))==null?null:n.touched)),E(8),pe("is-invalid",((r=a.flujoForm.get("tipo_documento"))==null?null:r.invalid)&&((r=a.flujoForm.get("tipo_documento"))==null?null:r.touched)),E(),I("ngValue",null),E(2),I("ngForOf",a.tiposDocumento),E(),I("ngIf",((o=a.flujoForm.get("tipo_documento"))==null?null:o.invalid)&&((o=a.flujoForm.get("tipo_documento"))==null?null:o.touched)),E(9),I("ngIf",a.elementoSeleccionado||a.transicionSeleccionada)}}function zB(e,t){e&1&&(h(0,"div",61),L(1,"i",62),h(2,"p"),S(3,"Cargando flujo de trabajo..."),g()())}var zc=class e{constructor(t,i,n,r,o,a,s){this.route=t;this.router=i;this.fb=n;this.workflowService=r;this.http=o;this.documentsService=a;this.usersService=s}bpmnCanvas;flujoId=null;flujoForm;modeler;cargando=!1;guardando=!1;error=null;modoVisualizacion=!1;flujoActual=null;elementoSeleccionado=null;transicionSeleccionada=null;tiposDocumento=[];usuarios=[];roles=[];tiposElemento=Object.values(ug);subscriptions=new pr;ngOnInit(){this.inicializarFormulario(),this.cargarDatosIniciales();let t=this.router.url;this.modoVisualizacion=t.includes("/ver/"),this.route.paramMap.subscribe(i=>{let n=i.get("id");n&&(this.flujoId=+n,this.cargarFlujo(this.flujoId))})}ngAfterViewInit(){}ngOnDestroy(){this.modeler&&this.modeler.destroy(),this.subscriptions.unsubscribe()}inicializarFormulario(){this.flujoForm=this.fb.group({nombre:["",[dt.required,dt.maxLength(255)]],descripcion:[""],tipo_documento:[null,dt.required],activo:[!0]}),this.modoVisualizacion&&this.flujoForm.disable()}cargarDatosIniciales(){this.documentsService.getDocumentTypes().subscribe(t=>{this.tiposDocumento=t}),this.usersService.getUserRoles().subscribe(t=>{this.roles=t}),this.usersService.getUsuarios().subscribe(t=>{this.usuarios=t,console.log(this.usuarios)})}inicializarBpmnModeler(){this.modeler=new jn({container:this.bpmnCanvas.nativeElement}),console.log(this.flujoId),this.flujoId||this.cargarDiagramaVacio(),this.configurarEventosModeler()}cargarDiagramaVacio(){this.modeler.importXML(`<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" id="Definitions_1" targetNamespace="http://bpmn.io/schema/bpmn">
  <bpmn:process id="Process_1" isExecutable="false">
    <bpmn:startEvent id="StartEvent_1" />
  </bpmn:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_1">
      <bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1">
        <dc:Bounds x="152" y="102" width="36" height="36" />
      </bpmndi:BPMNShape>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>`,i=>{i&&console.error("Error al cargar el diagrama BPMN vac\xEDo",i)})}configurarEventosModeler(){let t=this.modeler.get("eventBus"),i=this.modeler.get("selection");t.on("selection.changed",n=>{let r=i.get();if(console.log("selectedElements",r),r.length===1){let o=r[0];this.manejarSeleccionElemento(o)}else this.elementoSeleccionado=null,this.transicionSeleccionada=null}),t.on("shape.added",n=>{let r=n.element;this.manejarNuevoElemento(r)}),t.on("connection.added",n=>{let r=n.element;this.manejarNuevaConexion(r)}),t.on("shape.removed",n=>{let r=n.element;this.manejarElementoEliminado(r)}),t.on("connection.removed",n=>{let r=n.element;this.manejarConexionEliminada(r)})}manejarSeleccionElemento(t){if(t.type==="bpmn:Task"||t.type==="bpmn:StartEvent"||t.type==="bpmn:EndEvent"||t.type==="bpmn:ExclusiveGateway"){let i=this.flujoActual?.elementos.find(n=>n.bpmnId===t.id);i?(this.elementoSeleccionado=i,this.transicionSeleccionada=null):this.elementoSeleccionado={flujo:this.flujoId||0,nombre:t.businessObject.name||"",tipo:this.mapearTipoBpmn(t.type),orden:0,bpmnId:t.id,x:t.x,y:t.y,width:t.width,height:t.height}}else if(t.type==="bpmn:SequenceFlow"){let i=this.flujoActual?.transiciones.find(n=>n.bpmnId===t.id);if(i)this.transicionSeleccionada=i,this.elementoSeleccionado=null;else{let n=this.flujoActual?.elementos.find(o=>o.bpmnId===t.source.id)?.id,r=this.flujoActual?.elementos.find(o=>o.bpmnId===t.target.id)?.id;n&&r&&(this.transicionSeleccionada={origen:n,destino:r,condicion:t.businessObject.name||"",bpmnId:t.id,waypoints:t.waypoints})}}}manejarNuevoElemento(t){if(t.type==="bpmn:Task"||t.type==="bpmn:StartEvent"||t.type==="bpmn:EndEvent"||t.type==="bpmn:ExclusiveGateway"){let i={flujo:this.flujoId||0,nombre:t.businessObject.name||"",tipo:this.mapearTipoBpmn(t.type),orden:this.flujoActual?.elementos.length||0,bpmnId:t.id,x:t.x,y:t.y,width:t.width,height:t.height};this.flujoActual||(this.flujoActual={flujo:{id:this.flujoId||0},elementos:[],transiciones:[]}),this.flujoActual.elementos.push(i),this.elementoSeleccionado=i}}manejarNuevaConexion(t){if(t.type==="bpmn:SequenceFlow"){let i=this.flujoActual?.elementos.find(r=>r.bpmnId===t.source.id)?.id,n=this.flujoActual?.elementos.find(r=>r.bpmnId===t.target.id)?.id;if(i&&n){let r={origen:i,destino:n,condicion:t.businessObject.name||"",bpmnId:t.id,waypoints:t.waypoints};this.flujoActual||(this.flujoActual={flujo:{id:this.flujoId||0},elementos:[],transiciones:[]}),this.flujoActual.transiciones.push(r),this.transicionSeleccionada=r}}}manejarElementoEliminado(t){this.flujoActual&&(this.flujoActual.elementos=this.flujoActual.elementos.filter(i=>i.bpmnId!==t.id),this.flujoActual.transiciones=this.flujoActual.transiciones.filter(i=>{let n=this.flujoActual?.elementos.find(o=>o.id===i.origen),r=this.flujoActual?.elementos.find(o=>o.id===i.destino);return n&&r}),this.elementoSeleccionado?.bpmnId===t.id&&(this.elementoSeleccionado=null))}manejarConexionEliminada(t){this.flujoActual&&(this.flujoActual.transiciones=this.flujoActual.transiciones.filter(i=>i.bpmnId!==t.id),this.transicionSeleccionada?.bpmnId===t.id&&(this.transicionSeleccionada=null))}mapearTipoBpmn(t){switch(t){case"bpmn:StartEvent":return"INICIO";case"bpmn:EndEvent":return"FIN";case"bpmn:Task":return"TAREA";case"bpmn:ExclusiveGateway":return"DECISION";default:return"TAREA"}}cargarFlujo(t){this.cargando=!0,this.error=null;let i=this.workflowService.getFlujoById(t),n=this.workflowService.getFlujoCompleto(t);Eu([i,n]).pipe(ms(r=>(console.error("Error al cargar el flujo de trabajo",r),this.error="Error al cargar el flujo de trabajo. Por favor, intente nuevamente.",this.cargando=!1,$n([null,null])))).subscribe(([r,o])=>{r&&o&&(this.flujoForm.patchValue({nombre:r.nombre,descripcion:r.descripcion,tipo_documento:r.tipo_documento,activo:r.activo}),this.flujoActual={flujo:r,elementos:o.elementos,transiciones:o.transiciones},setTimeout(()=>{this.inicializarBpmnModeler(),this.openDiagram(this.generarBpmnXml())})),this.cargando=!1})}cargarDiagramaBpmn(){if(!this.bpmnCanvas){console.warn("El canvas BPMN a\xFAn no est\xE1 disponible");return}if(!this.flujoActual||!this.modeler)return;let t=this.generarBpmnXml();console.log(t),this.modeler.importXML(t,i=>{i&&console.error("Error al cargar el diagrama BPMN",i)})}generarBpmnXml(){let t=()=>"id_"+Math.random().toString(36).substr(2,9);if(!this.flujoActual)throw new Error("No hay flujo actual definido.");if(!this.flujoActual.elementos||this.flujoActual.elementos.length===0){let n={id:1,tipo:"INICIO",nombre:"Inicio",bpmnId:t(),x:150,y:150,width:36,height:36,flujo:this.flujoActual.flujo,orden:1};this.flujoActual.elementos.push(n)}this.flujoActual.elementos.forEach(n=>{n.bpmnId||(n.bpmnId=t())}),this.flujoActual.transiciones.forEach(n=>{n.bpmnId||(n.bpmnId=t())});let i=`<?xml version="1.0" encoding="UTF-8"?>
    <bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL"
                      xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI"
                      xmlns:dc="http://www.omg.org/spec/DD/20100524/DC"
                      xmlns:di="http://www.omg.org/spec/DD/20100524/DI"
                      id="Definitions_1"
                      targetNamespace="http://bpmn.io/schema/bpmn">
      <bpmn:process id="Process_1" isExecutable="false">`;return this.flujoActual.elementos.forEach(n=>{let r=this.mapearTipoElementoBpmn(n.tipo);i+=`
        <${r} id="${n.bpmnId}" name="${n.nombre||""}"/>`}),this.flujoActual.transiciones.forEach(n=>{let r=this.flujoActual?.elementos.find(a=>a.id===n.origen),o=this.flujoActual?.elementos.find(a=>a.id===n.destino);r?.bpmnId&&o?.bpmnId&&(i+=`
        <bpmn:sequenceFlow id="${n.bpmnId}" name="${n.condicion||""}"
                           sourceRef="${r.bpmnId}" targetRef="${o.bpmnId}" />`)}),i+=`
      </bpmn:process>
      <bpmndi:BPMNDiagram id="BPMNDiagram_1">
        <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_1">`,this.flujoActual.elementos.forEach(n=>{let r=n.x??100,o=n.y??100,a=n.width??100,s=n.height??80;i+=`
          <bpmndi:BPMNShape id="Shape_${n.bpmnId}" bpmnElement="${n.bpmnId}">
            <dc:Bounds x="${r}" y="${o}" width="${a}" height="${s}" />
          </bpmndi:BPMNShape>`}),this.flujoActual.transiciones.forEach(n=>{if(i+=`
          <bpmndi:BPMNEdge id="Edge_${n.bpmnId}" bpmnElement="${n.bpmnId}">`,n.waypoints?.length)n.waypoints.forEach(r=>{i+=`
            <di:waypoint x="${r.x}" y="${r.y}" />`});else{let r=this.flujoActual?.elementos.find(a=>a.id===n.origen),o=this.flujoActual?.elementos.find(a=>a.id===n.destino);if(r&&o){let a=(r.x??0)+(r.width??100)/2,s=(r.y??0)+(r.height??80)/2,c=(o.x??0)+(o.width??100)/2,l=(o.y??0)+(o.height??80)/2;i+=`
            <di:waypoint x="${a}" y="${s}" />
            <di:waypoint x="${c}" y="${l}" />`}}i+=`
          </bpmndi:BPMNEdge>`}),i+=`
        </bpmndi:BPMNPlane>
      </bpmndi:BPMNDiagram>
    </bpmn:definitions>`,i}mapearTipoElementoBpmn(t){switch(t){case"INICIO":return"bpmn:startEvent";case"FIN":return"bpmn:endEvent";case"TAREA":return"bpmn:task";case"DECISION":return"bpmn:exclusiveGateway";default:return"bpmn:task"}}actualizarElementoSeleccionado(t){if(!this.elementoSeleccionado||!this.flujoActual)return;let i=this.flujoActual.elementos.findIndex(n=>n.id===this.elementoSeleccionado?.id||n.bpmnId===this.elementoSeleccionado?.bpmnId);if(i!==-1){this.flujoActual.elementos[i]=X(X({},this.elementoSeleccionado),t),this.elementoSeleccionado=this.flujoActual.elementos[i];let n=this.modeler.get("elementRegistry"),r=this.modeler.get("modeling"),o=n.get(this.elementoSeleccionado.bpmnId);o&&r.updateProperties(o,{name:this.elementoSeleccionado.nombre})}}actualizarTransicionSeleccionada(t){if(!this.transicionSeleccionada||!this.flujoActual)return;let i=this.flujoActual.transiciones.findIndex(n=>n.id===this.transicionSeleccionada?.id||n.bpmnId===this.transicionSeleccionada?.bpmnId);if(i!==-1){this.flujoActual.transiciones[i]=X(X({},this.transicionSeleccionada),t),this.transicionSeleccionada=this.flujoActual.transiciones[i];let n=this.modeler.get("elementRegistry"),r=this.modeler.get("modeling"),o=n.get(this.transicionSeleccionada.bpmnId);o&&r.updateProperties(o,{name:this.transicionSeleccionada.condicion})}}guardarFlujo(){if(this.flujoForm.invalid){this.marcarCamposInvalidos();return}this.guardando=!0,this.error=null;let t=this.flujoForm.value,i={id:this.flujoId||void 0,nombre:t.nombre,descripcion:t.descripcion,tipo_documento:t.tipo_documento,activo:t.activo};this.flujoActual?this.flujoActual.flujo=i:this.flujoActual={flujo:i,elementos:[],transiciones:[]},console.log("guardar:"),console.log(this.flujoActual),this.workflowService.guardarFlujoCompleto(this.flujoActual).pipe(ms(n=>(console.error("Error al guardar el flujo de trabajo",n),this.error="Error al guardar el flujo de trabajo. Por favor, intente nuevamente.",this.guardando=!1,$n(null)))).subscribe(n=>{n&&(this.guardando=!1,this.flujoActual=n,this.flujoId=n.flujo?.id,this.route.snapshot.paramMap.get("id")||this.router.navigate(["/workflows/editar",this.flujoId])),this.guardando=!1})}validarFlujo(){if(!this.flujoId){alert("Debe guardar el flujo antes de validarlo.");return}this.workflowService.validarFlujo(this.flujoId).subscribe(t=>{t.valido?alert("El flujo de trabajo es v\xE1lido."):alert(`El flujo de trabajo no es v\xE1lido:
${t.errores.join(`
`)}`)})}marcarCamposInvalidos(){Object.keys(this.flujoForm.controls).forEach(t=>{let i=this.flujoForm.get(t);i?.invalid&&i.markAsTouched()})}cancelar(){this.router.navigate(["/workflows"])}openDiagram(t){try{this.modeler.importXML(t);var i=this.modeler.get("canvas"),n=this.modeler.get("overlays");i.zoom("fit-viewport"),n.add("SCAN_OK","note",{position:{bottom:0,right:0},html:'<div class="diagram-note">Mixed up the labels?</div>'}),i.addMarker("SCAN_OK","needs-discussion")}catch(r){console.error("could not import BPMN 2.0 diagram",r)}}static \u0275fac=function(i){return new(i||e)(de(Iu),de(Sn),de(Po),de(Oo),de(Ki),de(Ro),de(As))};static \u0275cmp=ye({type:e,selectors:[["app-workflow-editor"]],viewQuery:function(i,n){if(i&1&&Rt(CB,5),i&2){let r;Xe(r=Ze())&&(n.bpmnCanvas=r.first)}},decls:17,vars:6,consts:[["loadingTemplate",""],["bpmnCanvas",""],[1,"workflow-editor-container"],[1,"workflow-editor-header"],[1,"header-title"],[1,"header-actions"],[1,"btn","btn-outline",3,"click"],[1,"fas","fa-arrow-left"],["class","btn btn-primary",3,"disabled","click",4,"ngIf"],["class","btn btn-outline",3,"click",4,"ngIf"],["class","workflow-editor-content",4,"ngIf","ngIfElse"],[1,"btn","btn-primary",3,"click","disabled"],[1,"fas",3,"ngClass"],[1,"fas","fa-check-circle"],[1,"workflow-editor-content"],["class","error-message",4,"ngIf"],[1,"workflow-editor-form"],[3,"formGroup"],[1,"form-group"],["for","nombre"],["type","text","id","nombre","formControlName","nombre",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","descripcion"],["id","descripcion","formControlName","descripcion","rows","3",1,"form-control"],["for","tipo_documento"],["id","tipo_documento","formControlName","tipo_documento",1,"form-control"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"form-group","form-check"],["type","checkbox","id","activo","formControlName","activo",1,"form-check-input"],["for","activo",1,"form-check-label"],[1,"workflow-editor-diagram"],[1,"diagram-container"],[1,"bpmn-canvas"],["class","workflow-editor-properties",4,"ngIf"],[1,"error-message"],[1,"fas","fa-exclamation-triangle"],[1,"invalid-feedback"],[1,"workflow-editor-properties"],[1,"properties-header"],[1,"properties-content"],["class","element-properties",4,"ngIf"],["class","transition-properties",4,"ngIf"],[1,"element-properties"],["for","elemento-nombre"],["type","text","id","elemento-nombre",1,"form-control",3,"ngModelChange","change","ngModel","disabled"],["for","elemento-tipo"],["id","elemento-tipo",1,"form-control",3,"ngModelChange","change","ngModel","disabled"],[3,"value",4,"ngFor","ngForOf"],["class","form-group",4,"ngIf"],[3,"value"],["for","elemento-usuario"],["id","elemento-usuario",1,"form-control",3,"ngModelChange","change","ngModel","disabled"],["for","elemento-rol"],["id","elemento-rol",1,"form-control",3,"ngModelChange","change","ngModel","disabled"],["for","elemento-condicion"],["type","text","id","elemento-condicion",1,"form-control",3,"ngModelChange","change","ngModel","disabled"],[1,"form-text","text-muted"],[1,"transition-properties"],["for","transicion-condicion"],["type","text","id","transicion-condicion",1,"form-control",3,"ngModelChange","change","ngModel","disabled"],[1,"loading-container"],[1,"fas","fa-spinner","fa-spin"]],template:function(i,n){if(i&1){let r=Le();h(0,"div",2)(1,"div",3)(2,"div",4)(3,"h1"),S(4),g(),h(5,"p"),S(6),g()(),h(7,"div",5)(8,"button",6),K("click",function(){return ne(r),re(n.cancelar())}),L(9,"i",7),S(10," Volver "),g(),G(11,SB,3,2,"button",8)(12,MB,3,0,"button",9),g()(),G(13,VB,30,11,"div",10)(14,zB,4,0,"ng-template",null,0,Kn),g(),S(16,`
s
`)}if(i&2){let r=En(15);E(4),Pe(" ",n.flujoId?n.modoVisualizacion?"Ver":"Editar":"Nuevo"," Flujo de Trabajo "),E(2),Pe(" ",n.modoVisualizacion?"Visualice los detalles del flujo de trabajo":"Dise\xF1e y configure su flujo de trabajo"," "),E(5),I("ngIf",!n.modoVisualizacion),E(),I("ngIf",n.flujoId),E(),I("ngIf",!n.cargando)("ngIfElse",r)}},dependencies:[zt,Yi,Mi,pi,ko,Ao,Ju,ep,fr,cl,Ds,Mo,Do,dl,hr,An,Gr],styles:[".workflow-editor-container[_ngcontent-%COMP%]{padding:var(--spacing-md);display:flex;flex-direction:column;height:calc(100vh - 64px)}.workflow-editor-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--spacing-md)}.header-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:var(--spacing-xs);color:var(--color-primary)}.header-title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--color-text-light);margin:0}.header-actions[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm)}.workflow-editor-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:300px 1fr 300px;grid-template-rows:1fr;gap:var(--spacing-md);flex:1;overflow:hidden}.workflow-editor-form[_ngcontent-%COMP%]{background-color:#fff;border-radius:var(--border-radius-md);box-shadow:var(--shadow-sm);padding:var(--spacing-md);overflow-y:auto}.form-group[_ngcontent-%COMP%]{margin-bottom:var(--spacing-md)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:var(--spacing-xs);font-weight:500;color:var(--color-text)}.form-control[_ngcontent-%COMP%]{width:100%;padding:var(--spacing-sm);border:1px solid var(--color-hover);border-radius:var(--border-radius-sm);font-size:.9rem;transition:border-color var(--transition-fast)}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 2px rgba(var(--color-primary-rgb),.1)}.form-control.is-invalid[_ngcontent-%COMP%]{border-color:var(--color-error)}.invalid-feedback[_ngcontent-%COMP%]{color:var(--color-error);font-size:.85rem;margin-top:var(--spacing-xs)}.form-check[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-xs)}.form-check-input[_ngcontent-%COMP%]{margin:0}.form-text[_ngcontent-%COMP%]{font-size:.85rem;color:var(--color-text-light);margin-top:var(--spacing-xs)}.workflow-editor-diagram[_ngcontent-%COMP%]{background-color:#fff;border-radius:var(--border-radius-md);box-shadow:var(--shadow-sm);overflow:hidden;display:flex;flex-direction:column}.diagram-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-md);border-bottom:1px solid var(--color-hover);background-color:var(--color-background)}.diagram-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;border:none;font-size:1.2rem;cursor:pointer;color:var(--color-text-light)}.diagram-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:var(--color-primary)}.diagram-container[_ngcontent-%COMP%]{flex:1;position:relative;overflow:hidden}.bpmn-canvas[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;top:0;left:0}.workflow-editor-properties[_ngcontent-%COMP%]{background-color:#fff;border-radius:var(--border-radius-md);box-shadow:var(--shadow-sm);display:flex;flex-direction:column;overflow:hidden}.properties-header[_ngcontent-%COMP%]{padding:var(--spacing-md);border-bottom:1px solid var(--color-hover);background-color:var(--color-background)}.properties-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.1rem;color:var(--color-primary)}.properties-content[_ngcontent-%COMP%]{padding:var(--spacing-md);overflow-y:auto;flex:1}.error-message[_ngcontent-%COMP%]{grid-column:1 / -1;display:flex;flex-direction:column;align-items:center;padding:var(--spacing-lg);color:var(--color-error);text-align:center;background-color:#fff;border-radius:var(--border-radius-md);box-shadow:var(--shadow-sm)}.error-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:var(--spacing-md)}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:var(--spacing-xl);color:var(--color-text-light);height:100%}.loading-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:var(--spacing-md)}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:var(--spacing-xs);padding:var(--spacing-sm) var(--spacing-md);border-radius:var(--border-radius-sm);font-weight:500;cursor:pointer;transition:all var(--transition-fast);border:none}.btn-primary[_ngcontent-%COMP%]{background-color:var(--color-primary);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:var(--color-primary-dark)}.btn-outline[_ngcontent-%COMP%]{background-color:transparent;border:1px solid var(--color-hover);color:var(--color-text)}.btn-outline[_ngcontent-%COMP%]:hover:not(:disabled){background-color:var(--color-hover)}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}@media (max-width: 1200px){.workflow-editor-content[_ngcontent-%COMP%]{grid-template-columns:250px 1fr 250px}}@media (max-width: 992px){.workflow-editor-content[_ngcontent-%COMP%]{grid-template-columns:1fr;grid-template-rows:auto 1fr auto}.workflow-editor-form[_ngcontent-%COMP%], .workflow-editor-properties[_ngcontent-%COMP%]{max-height:300px;overflow-y:auto}}@media (max-width: 768px){.workflow-editor-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:var(--spacing-md)}.header-actions[_ngcontent-%COMP%]{width:100%;justify-content:space-between}}"]})};var HB=["bpmnCanvas"],$B=(e,t,i,n)=>({"fa-play-circle":e,"fa-stop-circle":t,"fa-tasks":i,"fa-question-circle":n});function WB(e,t){if(e&1){let i=Le();h(0,"div",16),L(1,"i",17),h(2,"p"),S(3),g(),h(4,"button",7),K("click",function(){ne(i);let r=j(2);return re(r.cargarFlujo(r.flujoId))}),S(5,"Reintentar"),g()()}if(e&2){let i=j(2);E(3),le(i.error)}}function UB(e,t){if(e&1&&(h(0,"span"),L(1,"i",39),S(2),g()),e&2){let i=j(2).$implicit;E(2),Pe(" ",i.asignado_a_usuario.username||"Usuario #"+i.asignado_a_usuario," ")}}function GB(e,t){if(e&1&&(h(0,"span"),L(1,"i",40),S(2),g()),e&2){let i=j(2).$implicit;E(2),Pe(" ",i.asignado_a_rol.nombre||"Rol #"+i.asignado_a_rol," ")}}function qB(e,t){e&1&&(h(0,"span"),L(1,"i",17),S(2," Sin asignar "),g())}function YB(e,t){if(e&1&&(h(0,"div",37),G(1,UB,3,1,"span",38)(2,GB,3,1,"span",38)(3,qB,3,0,"span",38),g()),e&2){let i=j().$implicit;E(),I("ngIf",i.asignado_a_usuario),E(),I("ngIf",i.asignado_a_rol),E(),I("ngIf",!i.asignado_a_usuario&&!i.asignado_a_rol)}}function KB(e,t){if(e&1&&(h(0,"div",41),L(1,"i",42),S(2),g()),e&2){let i=j().$implicit;E(2),Pe(" ",i.condicion," ")}}function XB(e,t){if(e&1&&(h(0,"div",29)(1,"div",30),L(2,"i",31),g(),h(3,"div",32)(4,"div",33),S(5),g(),h(6,"div",34),S(7),g(),G(8,YB,4,3,"div",35)(9,KB,3,1,"div",36),g()()),e&2){let i=t.$implicit;E(),I("ngClass","element-"+i.tipo.toLowerCase()),E(),I("ngClass",gb(6,$B,i.tipo==="INICIO",i.tipo==="FIN",i.tipo==="TAREA",i.tipo==="DECISION")),E(3),le(i.nombre),E(2),le(i.tipo),E(),I("ngIf",i.tipo==="TAREA"),E(),I("ngIf",i.tipo==="DECISION"&&i.condicion)}}function ZB(e,t){if(e&1&&(h(0,"div",27),G(1,XB,10,11,"div",28),g()),e&2){let i=j(3);E(),I("ngForOf",i.flujoCompleto==null?null:i.flujoCompleto.elementos)}}function QB(e,t){e&1&&(h(0,"div",43),L(1,"i",44),h(2,"p"),S(3,"No hay elementos en este flujo de trabajo"),g()())}function JB(e,t){if(e&1&&(h(0,"div",18)(1,"div",19)(2,"div",20)(3,"h3"),S(4,"Informaci\xF3n del Flujo"),g()(),h(5,"div",21)(6,"div",22)(7,"span",23),S(8,"Nombre:"),g(),h(9,"span",24),S(10),g()(),h(11,"div",22)(12,"span",23),S(13,"Tipo de documento:"),g(),h(14,"span",24),S(15),g()(),h(16,"div",22)(17,"span",23),S(18,"Creado por:"),g(),h(19,"span",24),S(20),g()(),h(21,"div",22)(22,"span",23),S(23,"Fecha de creaci\xF3n:"),g(),h(24,"span",24),S(25),xa(26,"date"),g()(),h(27,"div",22)(28,"span",23),S(29,"Estado:"),g(),h(30,"span",24)(31,"span",25),S(32),g()()()()(),h(33,"div",19)(34,"div",20)(35,"h3"),S(36,"Elementos del Flujo"),g()(),h(37,"div",21),G(38,ZB,2,1,"div",26)(39,QB,4,0,"ng-template",null,1,Kn),g()()()),e&2){let i,n=En(40),r=j(2);E(10),le(r.flujo.nombre),E(5),le(r.flujo.tipo_documento.nombre||"No asignado"),E(5),le((r.flujo.creado_por==null?null:r.flujo.creado_por.username)||"Desconocido"),E(5),le(wa(26,8,r.flujo.fecha_creacion,"dd/MM/yyyy HH:mm")),E(6),I("ngClass",r.flujo.activo?"badge-success":"badge-danger"),E(),Pe(" ",r.flujo.activo?"Activo":"Inactivo"," "),E(6),I("ngIf",(i=r.flujoCompleto==null||r.flujoCompleto.elementos==null?null:r.flujoCompleto.elementos.length)!==null&&i!==void 0?i:0)("ngIfElse",n)}}function e3(e,t){e&1&&(h(0,"div",45)(1,"div",46),L(2,"div",47,2),g()())}function t3(e,t){if(e&1&&(h(0,"div",12),G(1,WB,6,1,"div",13)(2,JB,41,11,"div",14)(3,e3,4,0,"div",15),g()),e&2){let i=j();E(),I("ngIf",i.error),E(),I("ngIf",!i.error&&i.flujo),E(),I("ngIf",!i.error)}}function i3(e,t){e&1&&(h(0,"div",48),L(1,"i",49),h(2,"p"),S(3,"Cargando flujo de trabajo..."),g()())}var tu=class e{constructor(t,i,n){this.route=t;this.router=i;this.workflowService=n}bpmnCanvas;flujoId=null;flujo=null;flujoCompleto=null;viewer;cargando=!0;error=null;ngOnInit(){this.route.paramMap.subscribe(t=>{let i=t.get("id");i?(this.flujoId=+i,this.cargarFlujo(this.flujoId)):(this.error="No se ha especificado un flujo de trabajo.",this.cargando=!1)})}ngAfterViewInit(){this.inicializarBpmnViewer()}ngOnDestroy(){this.viewer&&this.viewer.destroy()}inicializarBpmnViewer(){this.viewer=new ao({container:this.bpmnCanvas.nativeElement})}cargarFlujo(t){this.cargando=!0,this.error=null,this.workflowService.getFlujoById(t).subscribe({next:i=>{this.flujo=i,this.cargarFlujoCompleto(t)},error:i=>{console.error("Error al cargar el flujo de trabajo",i),this.error="Error al cargar el flujo de trabajo. Por favor, intente nuevamente.",this.cargando=!1}})}cargarFlujoCompleto(t){this.workflowService.getFlujoCompleto(t).subscribe({next:i=>{this.flujoCompleto=i,this.cargarDiagramaBpmn(),this.cargando=!1},error:i=>{console.error("Error al cargar los detalles del flujo de trabajo",i),this.error="Error al cargar los detalles del flujo de trabajo. Por favor, intente nuevamente.",this.cargando=!1}})}cargarDiagramaBpmn(){this.flujoCompleto&&this.workflowService.convertirModeloABpmn(this.flujoCompleto.elementos,this.flujoCompleto.transiciones).subscribe(t=>{this.viewer.importXML(t,i=>{i?(console.error("Error al cargar el diagrama BPMN",i),this.error="Error al cargar el diagrama BPMN."):this.viewer.get("canvas").zoom("fit-viewport")})})}volver(){this.router.navigate(["/workflows"])}editarFlujo(){this.flujoId&&this.router.navigate(["/workflows/editar",this.flujoId])}static \u0275fac=function(i){return new(i||e)(de(Iu),de(Sn),de(Oo))};static \u0275cmp=ye({type:e,selectors:[["app-workflow-viewer"]],viewQuery:function(i,n){if(i&1&&Rt(HB,5),i&2){let r;Xe(r=Ze())&&(n.bpmnCanvas=r.first)}},decls:17,vars:4,consts:[["loadingTemplate",""],["noElementsTemplate",""],["bpmnCanvas",""],[1,"workflow-viewer-container"],[1,"workflow-viewer-header"],[1,"header-title"],[1,"header-actions"],[1,"btn","btn-outline",3,"click"],[1,"fas","fa-arrow-left"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-edit"],["class","workflow-viewer-content",4,"ngIf","ngIfElse"],[1,"workflow-viewer-content"],["class","error-message",4,"ngIf"],["class","workflow-viewer-info",4,"ngIf"],["class","workflow-viewer-diagram",4,"ngIf"],[1,"error-message"],[1,"fas","fa-exclamation-triangle"],[1,"workflow-viewer-info"],[1,"info-card"],[1,"info-card-header"],[1,"info-card-content"],[1,"info-item"],[1,"info-label"],[1,"info-value"],[1,"badge",3,"ngClass"],["class","elements-list",4,"ngIf","ngIfElse"],[1,"elements-list"],["class","element-item",4,"ngFor","ngForOf"],[1,"element-item"],[1,"element-icon",3,"ngClass"],[1,"fas",3,"ngClass"],[1,"element-info"],[1,"element-name"],[1,"element-type"],["class","element-assignment",4,"ngIf"],["class","element-condition",4,"ngIf"],[1,"element-assignment"],[4,"ngIf"],[1,"fas","fa-user"],[1,"fas","fa-users"],[1,"element-condition"],[1,"fas","fa-code-branch"],[1,"empty-state"],[1,"fas","fa-project-diagram","empty-icon"],[1,"workflow-viewer-diagram"],[1,"diagram-container"],[1,"bpmn-canvas"],[1,"loading-container"],[1,"fas","fa-spinner","fa-spin"]],template:function(i,n){if(i&1){let r=Le();h(0,"div",3)(1,"div",4)(2,"div",5)(3,"h1"),S(4),g(),h(5,"p"),S(6),g()(),h(7,"div",6)(8,"button",7),K("click",function(){return ne(r),re(n.volver())}),L(9,"i",8),S(10," Volver "),g(),h(11,"button",9),K("click",function(){return ne(r),re(n.editarFlujo())}),L(12,"i",10),S(13," Editar "),g()()(),G(14,t3,4,3,"div",11)(15,i3,4,0,"ng-template",null,0,Kn),g()}if(i&2){let r=En(16);E(4),le((n.flujo==null?null:n.flujo.nombre)||"Flujo de Trabajo"),E(2),le((n.flujo==null?null:n.flujo.descripcion)||"Sin descripci\xF3n"),E(8),I("ngIf",!n.cargando)("ngIfElse",r)}},dependencies:[zt,Yi,Mi,pi,vs],styles:[".workflow-viewer-container[_ngcontent-%COMP%]{padding:var(--spacing-md);display:flex;flex-direction:column;height:calc(100vh - 64px)}.workflow-viewer-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--spacing-md)}.header-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:var(--spacing-xs);color:var(--color-primary)}.header-title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--color-text-light);margin:0}.header-actions[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-sm)}.workflow-viewer-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:300px 1fr;grid-template-rows:1fr;gap:var(--spacing-md);flex:1;overflow:hidden}.workflow-viewer-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-md);overflow-y:auto}.info-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:var(--border-radius-md);box-shadow:var(--shadow-sm);overflow:hidden}.info-card-header[_ngcontent-%COMP%]{padding:var(--spacing-md);border-bottom:1px solid var(--color-hover);background-color:var(--color-background)}.info-card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.1rem;color:var(--color-primary)}.info-card-content[_ngcontent-%COMP%]{padding:var(--spacing-md)}.info-item[_ngcontent-%COMP%]{display:flex;margin-bottom:var(--spacing-sm)}.info-label[_ngcontent-%COMP%]{font-weight:500;width:140px;flex-shrink:0;color:var(--color-text-light)}.info-value[_ngcontent-%COMP%]{flex:1}.badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;padding:.25em .6em;font-size:.75rem;font-weight:600;line-height:1;border-radius:9999px;text-transform:uppercase}.badge-success[_ngcontent-%COMP%]{background-color:var(--color-success);color:#fff}.badge-danger[_ngcontent-%COMP%]{background-color:var(--color-error);color:#fff}.elements-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-sm)}.element-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:var(--spacing-md);padding:var(--spacing-sm);border-radius:var(--border-radius-sm);transition:background-color var(--transition-fast)}.element-item[_ngcontent-%COMP%]:hover{background-color:var(--color-hover)}.element-icon[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1.2rem;flex-shrink:0}.element-inicio[_ngcontent-%COMP%]{background-color:rgba(var(--color-success-rgb),.1);color:var(--color-success)}.element-fin[_ngcontent-%COMP%]{background-color:rgba(var(--color-error-rgb),.1);color:var(--color-error)}.element-tarea[_ngcontent-%COMP%]{background-color:rgba(var(--color-primary-rgb),.1);color:var(--color-primary)}.element-decision[_ngcontent-%COMP%]{background-color:rgba(var(--color-warning-rgb),.1);color:var(--color-warning)}.element-info[_ngcontent-%COMP%]{flex:1;min-width:0}.element-name[_ngcontent-%COMP%]{font-weight:500;margin-bottom:var(--spacing-xs)}.element-type[_ngcontent-%COMP%]{font-size:.85rem;color:var(--color-text-light);margin-bottom:var(--spacing-xs)}.element-assignment[_ngcontent-%COMP%], .element-condition[_ngcontent-%COMP%]{font-size:.85rem;color:var(--color-text-light);display:flex;align-items:center;gap:var(--spacing-xs)}.workflow-viewer-diagram[_ngcontent-%COMP%]{background-color:#fff;border-radius:var(--border-radius-md);box-shadow:var(--shadow-sm);overflow:hidden;display:flex;flex-direction:column}.diagram-container[_ngcontent-%COMP%]{flex:1;position:relative;overflow:hidden}.bpmn-canvas[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;top:0;left:0}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:var(--spacing-lg);color:var(--color-text-light);text-align:center}.empty-icon[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:var(--spacing-md);opacity:.5}.error-message[_ngcontent-%COMP%]{grid-column:1 / -1;display:flex;flex-direction:column;align-items:center;padding:var(--spacing-lg);color:var(--color-error);text-align:center;background-color:#fff;border-radius:var(--border-radius-md);box-shadow:var(--shadow-sm)}.error-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:var(--spacing-md)}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:var(--spacing-xl);color:var(--color-text-light);height:100%}.loading-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:var(--spacing-md)}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:var(--spacing-xs);padding:var(--spacing-sm) var(--spacing-md);border-radius:var(--border-radius-sm);font-weight:500;cursor:pointer;transition:all var(--transition-fast);border:none}.btn-primary[_ngcontent-%COMP%]{background-color:var(--color-primary);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:var(--color-primary-dark)}.btn-outline[_ngcontent-%COMP%]{background-color:transparent;border:1px solid var(--color-hover);color:var(--color-text)}.btn-outline[_ngcontent-%COMP%]:hover{background-color:var(--color-hover)}@media (max-width: 992px){.workflow-viewer-content[_ngcontent-%COMP%]{grid-template-columns:1fr;grid-template-rows:auto 1fr}.workflow-viewer-info[_ngcontent-%COMP%]{max-height:300px}}@media (max-width: 768px){.workflow-viewer-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:var(--spacing-md)}.header-actions[_ngcontent-%COMP%]{width:100%;justify-content:space-between}}"]})};function iu(e){return e.buttons===0||e.detail===0}function nu(e){let t=e.touches&&e.touches[0]||e.changedTouches&&e.changedTouches[0];return!!t&&t.identifier===-1&&(t.radiusX==null||t.radiusX===1)&&(t.radiusY==null||t.radiusY===1)}var m_;function WS(){if(m_==null){let e=typeof document<"u"?document.head:null;m_=!!(e&&(e.createShadowRoot||e.attachShadow))}return m_}function f_(e){if(WS()){let t=e.getRootNode?e.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function ru(){let e=typeof document<"u"&&document?document.activeElement:null;for(;e&&e.shadowRoot;){let t=e.shadowRoot.activeElement;if(t===e)break;e=t}return e}function on(e){return e.composedPath?e.composedPath()[0]:e.target}function an(e,t,i,n,r){let o=parseInt(qh.major),a=parseInt(qh.minor);return o>19||o===19&&a>0||o===0&&a===0?e.listen(t,i,n,r):(t.addEventListener(i,n,r),()=>{t.removeEventListener(i,n,r)})}var h_;try{h_=typeof Intl<"u"&&Intl.v8BreakIterator}catch{h_=!1}var ht=(()=>{class e{_platformId=O(hs);isBrowser=this._platformId?_s(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||h_)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(n){return new(n||e)};static \u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var ou;function US(){if(ou==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>ou=!0}))}finally{ou=ou||!1}return ou}function Hc(e){return US()?e:!!e.capture}function $c(e,t=0){return GS(e)?Number(e):arguments.length===2?t:0}function GS(e){return!isNaN(parseFloat(e))&&!isNaN(Number(e))}function bn(e){return e instanceof Ke?e.nativeElement:e}var qS=new Ae("cdk-input-modality-detector-options"),YS={ignoreKeys:[18,17,224,91,16]},KS=650,g_={passive:!0,capture:!0},XS=(()=>{class e{_platform=O(ht);_listenerCleanups;modalityDetected;modalityChanged;get mostRecentModality(){return this._modality.value}_mostRecentTarget=null;_modality=new xu(null);_options;_lastTouchMs=0;_onKeydown=i=>{this._options?.ignoreKeys?.some(n=>n===i.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=on(i))};_onMousedown=i=>{Date.now()-this._lastTouchMs<KS||(this._modality.next(iu(i)?"keyboard":"mouse"),this._mostRecentTarget=on(i))};_onTouchstart=i=>{if(nu(i)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=on(i)};constructor(){let i=O(Ge),n=O(yt),r=O(qS,{optional:!0});if(this._options=X(X({},YS),r),this.modalityDetected=this._modality.pipe(Su(1)),this.modalityChanged=this.modalityDetected.pipe(Hh()),this._platform.isBrowser){let o=O(dn).createRenderer(null,null);this._listenerCleanups=i.runOutsideAngular(()=>[an(o,n,"keydown",this._onKeydown,g_),an(o,n,"mousedown",this._onMousedown,g_),an(o,n,"touchstart",this._onTouchstart,g_)])}}ngOnDestroy(){this._modality.complete(),this._listenerCleanups?.forEach(i=>i())}static \u0275fac=function(n){return new(n||e)};static \u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),au=function(e){return e[e.IMMEDIATE=0]="IMMEDIATE",e[e.EVENTUAL=1]="EVENTUAL",e}(au||{}),ZS=new Ae("cdk-focus-monitor-default-options"),oh=Hc({passive:!0,capture:!0}),os=(()=>{class e{_ngZone=O(Ge);_platform=O(ht);_inputModalityDetector=O(XS);_origin=null;_lastFocusOrigin;_windowFocused=!1;_windowFocusTimeoutId;_originTimeoutId;_originFromTouchInteraction=!1;_elementInfo=new Map;_monitoredElementCount=0;_rootNodeFocusListenerCount=new Map;_detectionMode;_windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)};_document=O(yt,{optional:!0});_stopInputModalityDetector=new De;constructor(){let i=O(ZS,{optional:!0});this._detectionMode=i?.detectionMode||au.IMMEDIATE}_rootNodeFocusAndBlurListener=i=>{let n=on(i);for(let r=n;r;r=r.parentElement)i.type==="focus"?this._onFocus(i,r):this._onBlur(i,r)};monitor(i,n=!1){let r=bn(i);if(!this._platform.isBrowser||r.nodeType!==1)return $n();let o=f_(r)||this._getDocument(),a=this._elementInfo.get(r);if(a)return n&&(a.checkChildren=!0),a.subject;let s={checkChildren:n,subject:new De,rootNode:o};return this._elementInfo.set(r,s),this._registerGlobalListeners(s),s.subject}stopMonitoring(i){let n=bn(i),r=this._elementInfo.get(n);r&&(r.subject.complete(),this._setClasses(n),this._elementInfo.delete(n),this._removeGlobalListeners(r))}focusVia(i,n,r){let o=bn(i),a=this._getDocument().activeElement;o===a?this._getClosestElementsInfo(o).forEach(([s,c])=>this._originChanged(s,n,c)):(this._setOrigin(n),typeof o.focus=="function"&&o.focus(r))}ngOnDestroy(){this._elementInfo.forEach((i,n)=>this.stopMonitoring(n))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(i){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(i)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:i&&this._isLastInteractionFromInputLabel(i)?"mouse":"program"}_shouldBeAttributedToTouch(i){return this._detectionMode===au.EVENTUAL||!!i?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(i,n){i.classList.toggle("cdk-focused",!!n),i.classList.toggle("cdk-touch-focused",n==="touch"),i.classList.toggle("cdk-keyboard-focused",n==="keyboard"),i.classList.toggle("cdk-mouse-focused",n==="mouse"),i.classList.toggle("cdk-program-focused",n==="program")}_setOrigin(i,n=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=i,this._originFromTouchInteraction=i==="touch"&&n,this._detectionMode===au.IMMEDIATE){clearTimeout(this._originTimeoutId);let r=this._originFromTouchInteraction?KS:1;this._originTimeoutId=setTimeout(()=>this._origin=null,r)}})}_onFocus(i,n){let r=this._elementInfo.get(n),o=on(i);!r||!r.checkChildren&&n!==o||this._originChanged(n,this._getFocusOrigin(o),r)}_onBlur(i,n){let r=this._elementInfo.get(n);!r||r.checkChildren&&i.relatedTarget instanceof Node&&n.contains(i.relatedTarget)||(this._setClasses(n),this._emitOrigin(r,null))}_emitOrigin(i,n){i.subject.observers.length&&this._ngZone.run(()=>i.subject.next(n))}_registerGlobalListeners(i){if(!this._platform.isBrowser)return;let n=i.rootNode,r=this._rootNodeFocusListenerCount.get(n)||0;r||this._ngZone.runOutsideAngular(()=>{n.addEventListener("focus",this._rootNodeFocusAndBlurListener,oh),n.addEventListener("blur",this._rootNodeFocusAndBlurListener,oh)}),this._rootNodeFocusListenerCount.set(n,r+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(ai(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(i){let n=i.rootNode;if(this._rootNodeFocusListenerCount.has(n)){let r=this._rootNodeFocusListenerCount.get(n);r>1?this._rootNodeFocusListenerCount.set(n,r-1):(n.removeEventListener("focus",this._rootNodeFocusAndBlurListener,oh),n.removeEventListener("blur",this._rootNodeFocusAndBlurListener,oh),this._rootNodeFocusListenerCount.delete(n))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(i,n,r){this._setClasses(i,n),this._emitOrigin(r,n),this._lastFocusOrigin=n}_getClosestElementsInfo(i){let n=[];return this._elementInfo.forEach((r,o)=>{(o===i||r.checkChildren&&o.contains(i))&&n.push([o,r])}),n}_isLastInteractionFromInputLabel(i){let{_mostRecentTarget:n,mostRecentModality:r}=this._inputModalityDetector;if(r!=="mouse"||!n||n===i||i.nodeName!=="INPUT"&&i.nodeName!=="TEXTAREA"||i.disabled)return!1;let o=i.labels;if(o){for(let a=0;a<o.length;a++)if(o[a].contains(n))return!0}return!1}static \u0275fac=function(n){return new(n||e)};static \u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var ah=new WeakMap,$i=(()=>{class e{_appRef;_injector=O(Ct);_environmentInjector=O(fs);load(i){let n=this._appRef=this._appRef||this._injector.get(Pu),r=ah.get(n);r||(r={loaders:new Set,refs:[]},ah.set(n,r),n.onDestroy(()=>{ah.get(n)?.refs.forEach(o=>o.destroy()),ah.delete(n)})),r.loaders.has(i)||(r.loaders.add(i),r.refs.push(Ou(i,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(n){return new(n||e)};static \u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var sh=(()=>{class e{static \u0275fac=function(n){return new(n||e)};static \u0275cmp=ye({type:e,selectors:[["ng-component"]],exportAs:["cdkVisuallyHidden"],decls:0,vars:0,template:function(n,r){},styles:[`.cdk-visually-hidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap;outline:0;-webkit-appearance:none;-moz-appearance:none;left:0}[dir=rtl] .cdk-visually-hidden{left:auto;right:0}
`],encapsulation:2,changeDetection:0})}return e})();function Wc(e){return Array.isArray(e)?e:[e]}var QS=new Set,as,eM=(()=>{class e{_platform=O(ht);_nonce=O(cb,{optional:!0});_matchMedia;constructor(){this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):r3}matchMedia(i){return(this._platform.WEBKIT||this._platform.BLINK)&&n3(i,this._nonce),this._matchMedia(i)}static \u0275fac=function(n){return new(n||e)};static \u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function n3(e,t){if(!QS.has(e))try{as||(as=document.createElement("style"),t&&as.setAttribute("nonce",t),as.setAttribute("type","text/css"),document.head.appendChild(as)),as.sheet&&(as.sheet.insertRule(`@media ${e} {body{ }}`,0),QS.add(e))}catch(i){console.error(i)}}function r3(e){return{matches:e==="all"||e==="",media:e,addListener:()=>{},removeListener:()=>{}}}var su=(()=>{class e{_mediaMatcher=O(eM);_zone=O(Ge);_queries=new Map;_destroySubject=new De;constructor(){}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(i){return JS(Wc(i)).some(r=>this._registerQuery(r).mql.matches)}observe(i){let r=JS(Wc(i)).map(a=>this._registerQuery(a).observable),o=rb(r);return o=ob(o.pipe(Wn(1)),o.pipe(Su(1),Cu(0))),o.pipe(xn(a=>{let s={matches:!1,breakpoints:{}};return a.forEach(({matches:c,query:l})=>{s.matches=s.matches||c,s.breakpoints[l]=c}),s}))}_registerQuery(i){if(this._queries.has(i))return this._queries.get(i);let n=this._mediaMatcher.matchMedia(i),o={observable:new zr(a=>{let s=c=>this._zone.run(()=>a.next(c));return n.addListener(s),()=>{n.removeListener(s)}}).pipe(cn(n),xn(({matches:a})=>({query:i,matches:a})),ai(this._destroySubject)),mql:n};return this._queries.set(i,o),o}static \u0275fac=function(n){return new(n||e)};static \u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function JS(e){return e.map(t=>t.split(",")).reduce((t,i)=>t.concat(i)).map(t=>t.trim())}var o3=(()=>{class e{create(i){return typeof MutationObserver>"u"?null:new MutationObserver(i)}static \u0275fac=function(n){return new(n||e)};static \u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var ch=(()=>{class e{static \u0275fac=function(n){return new(n||e)};static \u0275mod=ze({type:e});static \u0275inj=Ve({providers:[o3]})}return e})();var b_=(()=>{class e{_platform=O(ht);constructor(){}isDisabled(i){return i.hasAttribute("disabled")}isVisible(i){return s3(i)&&getComputedStyle(i).visibility==="visible"}isTabbable(i){if(!this._platform.isBrowser)return!1;let n=a3(h3(i));if(n&&(tM(n)===-1||!this.isVisible(n)))return!1;let r=i.nodeName.toLowerCase(),o=tM(i);return i.hasAttribute("contenteditable")?o!==-1:r==="iframe"||r==="object"||this._platform.WEBKIT&&this._platform.IOS&&!m3(i)?!1:r==="audio"?i.hasAttribute("controls")?o!==-1:!1:r==="video"?o===-1?!1:o!==null?!0:this._platform.FIREFOX||i.hasAttribute("controls"):i.tabIndex>=0}isFocusable(i,n){return f3(i)&&!this.isDisabled(i)&&(n?.ignoreVisibility||this.isVisible(i))}static \u0275fac=function(n){return new(n||e)};static \u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function a3(e){try{return e.frameElement}catch{return null}}function s3(e){return!!(e.offsetWidth||e.offsetHeight||typeof e.getClientRects=="function"&&e.getClientRects().length)}function c3(e){let t=e.nodeName.toLowerCase();return t==="input"||t==="select"||t==="button"||t==="textarea"}function l3(e){return u3(e)&&e.type=="hidden"}function d3(e){return p3(e)&&e.hasAttribute("href")}function u3(e){return e.nodeName.toLowerCase()=="input"}function p3(e){return e.nodeName.toLowerCase()=="a"}function rM(e){if(!e.hasAttribute("tabindex")||e.tabIndex===void 0)return!1;let t=e.getAttribute("tabindex");return!!(t&&!isNaN(parseInt(t,10)))}function tM(e){if(!rM(e))return null;let t=parseInt(e.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}function m3(e){let t=e.nodeName.toLowerCase(),i=t==="input"&&e.type;return i==="text"||i==="password"||t==="select"||t==="textarea"}function f3(e){return l3(e)?!1:c3(e)||d3(e)||e.hasAttribute("contenteditable")||rM(e)}function h3(e){return e.ownerDocument&&e.ownerDocument.defaultView||window}var __=class{_element;_checker;_ngZone;_document;_injector;_startAnchor;_endAnchor;_hasAttached=!1;startAnchorListener=()=>this.focusLastTabbableElement();endAnchorListener=()=>this.focusFirstTabbableElement();get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_enabled=!0;constructor(t,i,n,r,o=!1,a){this._element=t,this._checker=i,this._ngZone=n,this._document=r,this._injector=a,o||this.attachAnchors()}destroy(){let t=this._startAnchor,i=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.remove()),i&&(i.removeEventListener("focus",this.endAnchorListener),i.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(i=>{this._executeOnStable(()=>i(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(i=>{this._executeOnStable(()=>i(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(i=>{this._executeOnStable(()=>i(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){let i=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);return t=="start"?i.length?i[0]:this._getFirstTabbableElement(this._element):i.length?i[i.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){let i=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(i){if(!this._checker.isFocusable(i)){let n=this._getFirstTabbableElement(i);return n?.focus(t),!!n}return i.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){let i=this._getRegionBoundary("start");return i&&i.focus(t),!!i}focusLastTabbableElement(t){let i=this._getRegionBoundary("end");return i&&i.focus(t),!!i}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let i=t.children;for(let n=0;n<i.length;n++){let r=i[n].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(i[n]):null;if(r)return r}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let i=t.children;for(let n=i.length-1;n>=0;n--){let r=i[n].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(i[n]):null;if(r)return r}return null}_createAnchor(){let t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,i){t?i.setAttribute("tabindex","0"):i.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._injector?xo(t,{injector:this._injector}):setTimeout(t)}},y_=(()=>{class e{_checker=O(b_);_ngZone=O(Ge);_document=O(yt);_injector=O(Ct);constructor(){O($i).load(sh)}create(i,n=!1){return new __(i,this._checker,this._ngZone,this._document,n,this._injector)}static \u0275fac=function(n){return new(n||e)};static \u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var oM=new Ae("liveAnnouncerElement",{providedIn:"root",factory:aM});function aM(){return null}var sM=new Ae("LIVE_ANNOUNCER_DEFAULT_OPTIONS"),g3=0,x_=(()=>{class e{_ngZone=O(Ge);_defaultOptions=O(sM,{optional:!0});_liveElement;_document=O(yt);_previousTimeout;_currentPromise;_currentResolve;constructor(){let i=O(oM,{optional:!0});this._liveElement=i||this._createLiveElement()}announce(i,...n){let r=this._defaultOptions,o,a;return n.length===1&&typeof n[0]=="number"?a=n[0]:[o,a]=n,this.clear(),clearTimeout(this._previousTimeout),o||(o=r&&r.politeness?r.politeness:"polite"),a==null&&r&&(a=r.duration),this._liveElement.setAttribute("aria-live",o),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(s=>this._currentResolve=s)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=i,typeof a=="number"&&(this._previousTimeout=setTimeout(()=>this.clear(),a)),this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){let i="cdk-live-announcer-element",n=this._document.getElementsByClassName(i),r=this._document.createElement("div");for(let o=0;o<n.length;o++)n[o].remove();return r.classList.add(i),r.classList.add("cdk-visually-hidden"),r.setAttribute("aria-atomic","true"),r.setAttribute("aria-live","polite"),r.id=`cdk-live-announcer-${g3++}`,this._document.body.appendChild(r),r}_exposeAnnouncerToModals(i){let n=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let r=0;r<n.length;r++){let o=n[r],a=o.getAttribute("aria-owns");a?a.indexOf(i)===-1&&o.setAttribute("aria-owns",a+" "+i):o.setAttribute("aria-owns",i)}}static \u0275fac=function(n){return new(n||e)};static \u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var ha=function(e){return e[e.NONE=0]="NONE",e[e.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",e[e.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",e}(ha||{}),iM="cdk-high-contrast-black-on-white",nM="cdk-high-contrast-white-on-black",v_="cdk-high-contrast-active",lh=(()=>{class e{_platform=O(ht);_hasCheckedHighContrastMode;_document=O(yt);_breakpointSubscription;constructor(){this._breakpointSubscription=O(su).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return ha.NONE;let i=this._document.createElement("div");i.style.backgroundColor="rgb(1,2,3)",i.style.position="absolute",this._document.body.appendChild(i);let n=this._document.defaultView||window,r=n&&n.getComputedStyle?n.getComputedStyle(i):null,o=(r&&r.backgroundColor||"").replace(/ /g,"");switch(i.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return ha.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return ha.BLACK_ON_WHITE}return ha.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let i=this._document.body.classList;i.remove(v_,iM,nM),this._hasCheckedHighContrastMode=!0;let n=this.getHighContrastMode();n===ha.BLACK_ON_WHITE?i.add(v_,iM):n===ha.WHITE_ON_BLACK&&i.add(v_,nM)}}static \u0275fac=function(n){return new(n||e)};static \u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),w_=(()=>{class e{constructor(){O(lh)._applyBodyHighContrastModeCssClasses()}static \u0275fac=function(n){return new(n||e)};static \u0275mod=ze({type:e});static \u0275inj=Ve({imports:[ch]})}return e})();var E_={},yi=(()=>{class e{_appId=O(sb);getId(i){return this._appId!=="ng"&&(i+=this._appId),E_.hasOwnProperty(i)||(E_[i]=0),`${i}${E_[i]++}`}static \u0275fac=function(n){return new(n||e)};static \u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var v3=200,dh=class{_letterKeyStream=new De;_items=[];_selectedItemIndex=-1;_pressedLetters=[];_skipPredicateFn;_selectedItem=new De;selectedItem=this._selectedItem;constructor(t,i){let n=typeof i?.debounceInterval=="number"?i.debounceInterval:v3;i?.skipPredicate&&(this._skipPredicateFn=i.skipPredicate),this.setItems(t),this._setupKeyHandler(n)}destroy(){this._pressedLetters=[],this._letterKeyStream.complete(),this._selectedItem.complete()}setCurrentSelectedItemIndex(t){this._selectedItemIndex=t}setItems(t){this._items=t}handleKey(t){let i=t.keyCode;t.key&&t.key.length===1?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(i>=65&&i<=90||i>=48&&i<=57)&&this._letterKeyStream.next(String.fromCharCode(i))}isTyping(){return this._pressedLetters.length>0}reset(){this._pressedLetters=[]}_setupKeyHandler(t){this._letterKeyStream.pipe(Qc(i=>this._pressedLetters.push(i)),Cu(t),Oi(()=>this._pressedLetters.length>0),xn(()=>this._pressedLetters.join("").toLocaleUpperCase())).subscribe(i=>{for(let n=1;n<this._items.length+1;n++){let r=(this._selectedItemIndex+n)%this._items.length,o=this._items[r];if(!this._skipPredicateFn?.(o)&&o.getLabel?.().toLocaleUpperCase().trim().indexOf(i)===0){this._selectedItem.next(o);break}}this._pressedLetters=[]})}};function Uc(e,...t){return t.length?t.some(i=>e[i]):e.altKey||e.shiftKey||e.ctrlKey||e.metaKey}var uh=class{_items;_activeItemIndex=-1;_activeItem=yo(null);_wrap=!1;_typeaheadSubscription=pr.EMPTY;_itemChangesSubscription;_vertical=!0;_horizontal;_allowedModifierKeys=[];_homeAndEnd=!1;_pageUpAndDown={enabled:!1,delta:10};_effectRef;_typeahead;_skipPredicateFn=t=>t.disabled;constructor(t,i){this._items=t,t instanceof el?this._itemChangesSubscription=t.changes.subscribe(n=>this._itemsChanged(n.toArray())):Jc(t)&&(this._effectRef=Ru(()=>this._itemsChanged(t()),{injector:i}))}tabOut=new De;change=new De;skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){this._typeaheadSubscription.unsubscribe();let i=this._getItemsArray();return this._typeahead=new dh(i,{debounceInterval:typeof t=="number"?t:void 0,skipPredicate:n=>this._skipPredicateFn(n)}),this._typeaheadSubscription=this._typeahead.selectedItem.subscribe(n=>{this.setActiveItem(n)}),this}cancelTypeahead(){return this._typeahead?.reset(),this}withHomeAndEnd(t=!0){return this._homeAndEnd=t,this}withPageUpDown(t=!0,i=10){return this._pageUpAndDown={enabled:t,delta:i},this}setActiveItem(t){let i=this._activeItem();this.updateActiveItem(t),this._activeItem()!==i&&this.change.next(this._activeItemIndex)}onKeydown(t){let i=t.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(o=>!t[o]||this._allowedModifierKeys.indexOf(o)>-1);switch(i){case 9:this.tabOut.next();return;case 40:if(this._vertical&&r){this.setNextItemActive();break}else return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}else return;case 39:if(this._horizontal&&r){this._horizontal==="rtl"?this.setPreviousItemActive():this.setNextItemActive();break}else return;case 37:if(this._horizontal&&r){this._horizontal==="rtl"?this.setNextItemActive():this.setPreviousItemActive();break}else return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}else return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}else return;case 33:if(this._pageUpAndDown.enabled&&r){let o=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(o>0?o:0,1);break}else return;case 34:if(this._pageUpAndDown.enabled&&r){let o=this._activeItemIndex+this._pageUpAndDown.delta,a=this._getItemsArray().length;this._setActiveItemByIndex(o<a?o:a-1,-1);break}else return;default:(r||Uc(t,"shiftKey"))&&this._typeahead?.handleKey(t);return}this._typeahead?.reset(),t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem()}isTyping(){return!!this._typeahead&&this._typeahead.isTyping()}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){let i=this._getItemsArray(),n=typeof t=="number"?t:i.indexOf(t),r=i[n];this._activeItem.set(r??null),this._activeItemIndex=n,this._typeahead?.setCurrentSelectedItemIndex(n)}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._typeahead?.destroy(),this.tabOut.complete(),this.change.complete()}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){let i=this._getItemsArray();for(let n=1;n<=i.length;n++){let r=(this._activeItemIndex+t*n+i.length)%i.length,o=i[r];if(!this._skipPredicateFn(o)){this.setActiveItem(r);return}}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,i){let n=this._getItemsArray();if(n[t]){for(;this._skipPredicateFn(n[t]);)if(t+=i,!n[t])return;this.setActiveItem(t)}}_getItemsArray(){return Jc(this._items)?this._items():this._items instanceof el?this._items.toArray():this._items}_itemsChanged(t){this._typeahead?.setItems(t);let i=this._activeItem();if(i){let n=t.indexOf(i);n>-1&&n!==this._activeItemIndex&&(this._activeItemIndex=n,this._typeahead?.setCurrentSelectedItemIndex(n))}}};var cu=class extends uh{_origin="program";setFocusOrigin(t){return this._origin=t,this}setActiveItem(t){super.setActiveItem(t),this.activeItem&&this.activeItem.focus(this._origin)}};var _3=new Ae("cdk-dir-doc",{providedIn:"root",factory:b3});function b3(){return O(yt)}var y3=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function cM(e){let t=e?.toLowerCase()||"";return t==="auto"&&typeof navigator<"u"&&navigator?.language?y3.test(navigator.language)?"rtl":"ltr":t==="rtl"?"rtl":"ltr"}var Vn=(()=>{class e{value="ltr";change=new Yt;constructor(){let i=O(_3,{optional:!0});if(i){let n=i.body?i.body.dir:null,r=i.documentElement?i.documentElement.dir:null;this.value=cM(n||r||"ltr")}}ngOnDestroy(){this.change.complete()}static \u0275fac=function(n){return new(n||e)};static \u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var ga=(()=>{class e{static \u0275fac=function(n){return new(n||e)};static \u0275mod=ze({type:e});static \u0275inj=Ve({})}return e})();var st=(()=>{class e{constructor(){O(lh)._applyBodyHighContrastModeCssClasses()}static \u0275fac=function(n){return new(n||e)};static \u0275mod=ze({type:e});static \u0275inj=Ve({imports:[ga,ga]})}return e})();var x3=["*"];var w3=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],E3=["[mat-card-avatar], [matCardAvatar]",`mat-card-title, mat-card-subtitle,
      [mat-card-title], [mat-card-subtitle],
      [matCardTitle], [matCardSubtitle]`,"*"],C3=new Ae("MAT_CARD_CONFIG"),lM=(()=>{class e{appearance;constructor(){let i=O(C3,{optional:!0});this.appearance=i?.appearance||"raised"}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=ye({type:e,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(n,r){n&2&&pe("mat-mdc-card-outlined",r.appearance==="outlined")("mdc-card--outlined",r.appearance==="outlined")},inputs:{appearance:"appearance"},exportAs:["matCard"],ngContentSelectors:x3,decls:1,vars:0,template:function(n,r){n&1&&(Gi(),gt(0))},styles:[`.mat-mdc-card{display:flex;flex-direction:column;box-sizing:border-box;position:relative;border-style:solid;border-width:0;background-color:var(--mdc-elevated-card-container-color, var(--mat-sys-surface-container-low));border-color:var(--mdc-elevated-card-container-color, var(--mat-sys-surface-container-low));border-radius:var(--mdc-elevated-card-container-shape, var(--mat-sys-corner-medium));box-shadow:var(--mdc-elevated-card-container-elevation, var(--mat-sys-level1))}.mat-mdc-card::after{position:absolute;top:0;left:0;width:100%;height:100%;border:solid 1px rgba(0,0,0,0);content:"";display:block;pointer-events:none;box-sizing:border-box;border-radius:var(--mdc-elevated-card-container-shape, var(--mat-sys-corner-medium))}.mat-mdc-card-outlined{background-color:var(--mdc-outlined-card-container-color, var(--mat-sys-surface));border-radius:var(--mdc-outlined-card-container-shape, var(--mat-sys-corner-medium));border-width:var(--mdc-outlined-card-outline-width, 1px);border-color:var(--mdc-outlined-card-outline-color, var(--mat-sys-outline-variant));box-shadow:var(--mdc-outlined-card-container-elevation, var(--mat-sys-level0))}.mat-mdc-card-outlined::after{border:none}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mat-mdc-card-actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font, var(--mat-sys-title-large-font));line-height:var(--mat-card-title-text-line-height, var(--mat-sys-title-large-line-height));font-size:var(--mat-card-title-text-size, var(--mat-sys-title-large-size));letter-spacing:var(--mat-card-title-text-tracking, var(--mat-sys-title-large-tracking));font-weight:var(--mat-card-title-text-weight, var(--mat-sys-title-large-weight))}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color, var(--mat-sys-on-surface));font-family:var(--mat-card-subtitle-text-font, var(--mat-sys-title-medium-font));line-height:var(--mat-card-subtitle-text-line-height, var(--mat-sys-title-medium-line-height));font-size:var(--mat-card-subtitle-text-size, var(--mat-sys-title-medium-size));letter-spacing:var(--mat-card-subtitle-text-tracking, var(--mat-sys-title-medium-tracking));font-weight:var(--mat-card-subtitle-text-weight, var(--mat-sys-title-medium-weight))}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}
`],encapsulation:2,changeDetection:0})}return e})(),dM=(()=>{class e{static \u0275fac=function(n){return new(n||e)};static \u0275dir=Ce({type:e,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-mdc-card-title"]})}return e})();var uM=(()=>{class e{static \u0275fac=function(n){return new(n||e)};static \u0275dir=Ce({type:e,selectors:[["mat-card-content"]],hostAttrs:[1,"mat-mdc-card-content"]})}return e})(),pM=(()=>{class e{static \u0275fac=function(n){return new(n||e)};static \u0275dir=Ce({type:e,selectors:[["mat-card-subtitle"],["","mat-card-subtitle",""],["","matCardSubtitle",""]],hostAttrs:[1,"mat-mdc-card-subtitle"]})}return e})(),mM=(()=>{class e{align="start";static \u0275fac=function(n){return new(n||e)};static \u0275dir=Ce({type:e,selectors:[["mat-card-actions"]],hostAttrs:[1,"mat-mdc-card-actions","mdc-card__actions"],hostVars:2,hostBindings:function(n,r){n&2&&pe("mat-mdc-card-actions-align-end",r.align==="end")},inputs:{align:"align"},exportAs:["matCardActions"]})}return e})(),fM=(()=>{class e{static \u0275fac=function(n){return new(n||e)};static \u0275cmp=ye({type:e,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-mdc-card-header"],ngContentSelectors:E3,decls:4,vars:0,consts:[[1,"mat-mdc-card-header-text"]],template:function(n,r){n&1&&(Gi(w3),gt(0),h(1,"div",0),gt(2,1),g(),gt(3,2))},encapsulation:2,changeDetection:0})}return e})();var hM=(()=>{class e{static \u0275fac=function(n){return new(n||e)};static \u0275dir=Ce({type:e,selectors:[["","mat-card-avatar",""],["","matCardAvatar",""]],hostAttrs:[1,"mat-mdc-card-avatar"]})}return e})();var gM=(()=>{class e{static \u0275fac=function(n){return new(n||e)};static \u0275mod=ze({type:e});static \u0275inj=Ve({imports:[st,st]})}return e})();var ur=function(e){return e[e.NORMAL=0]="NORMAL",e[e.NEGATED=1]="NEGATED",e[e.INVERTED=2]="INVERTED",e}(ur||{}),ph,ss;function mh(){if(ss==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return ss=!1,ss;if("scrollBehavior"in document.documentElement.style)ss=!0;else{let e=Element.prototype.scrollTo;e?ss=!/\{\s*\[native code\]\s*\}/.test(e.toString()):ss=!1}}return ss}function Gc(){if(typeof document!="object"||!document)return ur.NORMAL;if(ph==null){let e=document.createElement("div"),t=e.style;e.dir="rtl",t.width="1px",t.overflow="auto",t.visibility="hidden",t.pointerEvents="none",t.position="absolute";let i=document.createElement("div"),n=i.style;n.width="2px",n.height="1px",e.appendChild(i),document.body.appendChild(e),ph=ur.NORMAL,e.scrollLeft===0&&(e.scrollLeft=1,ph=e.scrollLeft===0?ur.NEGATED:ur.INVERTED),e.remove()}return ph}function C_(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var qc,vM=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function S_(){if(qc)return qc;if(typeof document!="object"||!document)return qc=new Set(vM),qc;let e=document.createElement("input");return qc=new Set(vM.filter(t=>(e.setAttribute("type",t),e.type===t))),qc}function Lr(e){return e!=null&&`${e}`!="false"}function Qt(e){return e==null?"":typeof e=="string"?e:`${e}px`}var zn=function(e){return e[e.FADING_IN=0]="FADING_IN",e[e.VISIBLE=1]="VISIBLE",e[e.FADING_OUT=2]="FADING_OUT",e[e.HIDDEN=3]="HIDDEN",e}(zn||{}),M_=class{_renderer;element;config;_animationForciblyDisabledThroughCss;state=zn.HIDDEN;constructor(t,i,n,r=!1){this._renderer=t,this.element=i,this.config=n,this._animationForciblyDisabledThroughCss=r}fadeOut(){this._renderer.fadeOutRipple(this)}},_M=Hc({passive:!0,capture:!0}),D_=class{_events=new Map;addHandler(t,i,n,r){let o=this._events.get(i);if(o){let a=o.get(n);a?a.add(r):o.set(n,new Set([r]))}else this._events.set(i,new Map([[n,new Set([r])]])),t.runOutsideAngular(()=>{document.addEventListener(i,this._delegateEventHandler,_M)})}removeHandler(t,i,n){let r=this._events.get(t);if(!r)return;let o=r.get(i);o&&(o.delete(n),o.size===0&&r.delete(i),r.size===0&&(this._events.delete(t),document.removeEventListener(t,this._delegateEventHandler,_M)))}_delegateEventHandler=t=>{let i=on(t);i&&this._events.get(t.type)?.forEach((n,r)=>{(r===i||r.contains(i))&&n.forEach(o=>o.handleEvent(t))})}},lu={enterDuration:225,exitDuration:150},M3=800,bM=Hc({passive:!0,capture:!0}),yM=["mousedown","touchstart"],xM=["mouseup","mouseleave","touchend","touchcancel"],D3=(()=>{class e{static \u0275fac=function(n){return new(n||e)};static \u0275cmp=ye({type:e,selectors:[["ng-component"]],hostAttrs:["mat-ripple-style-loader",""],decls:0,vars:0,template:function(n,r){},styles:[`.mat-ripple{overflow:hidden;position:relative}.mat-ripple:not(:empty){transform:translateZ(0)}.mat-ripple.mat-ripple-unbounded{overflow:visible}.mat-ripple-element{position:absolute;border-radius:50%;pointer-events:none;transition:opacity,transform 0ms cubic-bezier(0, 0, 0.2, 1);transform:scale3d(0, 0, 0);background-color:var(--mat-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface) 10%, transparent))}@media(forced-colors: active){.mat-ripple-element{display:none}}.cdk-drag-preview .mat-ripple-element,.cdk-drag-placeholder .mat-ripple-element{display:none}
`],encapsulation:2,changeDetection:0})}return e})(),fh=class e{_target;_ngZone;_platform;_containerElement;_triggerElement;_isPointerDown=!1;_activeRipples=new Map;_mostRecentTransientRipple;_lastTouchStartEvent;_pointerUpEventsRegistered=!1;_containerRect;static _eventManager=new D_;constructor(t,i,n,r,o){this._target=t,this._ngZone=i,this._platform=r,r.isBrowser&&(this._containerElement=bn(n)),o&&o.get($i).load(D3)}fadeInRipple(t,i,n={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o=X(X({},lu),n.animation);n.centered&&(t=r.left+r.width/2,i=r.top+r.height/2);let a=n.radius||A3(t,i,r),s=t-r.left,c=i-r.top,l=o.enterDuration,d=document.createElement("div");d.classList.add("mat-ripple-element"),d.style.left=`${s-a}px`,d.style.top=`${c-a}px`,d.style.height=`${a*2}px`,d.style.width=`${a*2}px`,n.color!=null&&(d.style.backgroundColor=n.color),d.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(d);let u=window.getComputedStyle(d),p=u.transitionProperty,m=u.transitionDuration,f=p==="none"||m==="0s"||m==="0s, 0s"||r.width===0&&r.height===0,_=new M_(this,d,n,f);d.style.transform="scale3d(1, 1, 1)",_.state=zn.FADING_IN,n.persistent||(this._mostRecentTransientRipple=_);let b=null;return!f&&(l||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let D=()=>{b&&(b.fallbackTimer=null),clearTimeout(C),this._finishRippleTransition(_)},R=()=>this._destroyRipple(_),C=setTimeout(R,l+100);d.addEventListener("transitionend",D),d.addEventListener("transitioncancel",R),b={onTransitionEnd:D,onTransitionCancel:R,fallbackTimer:C}}),this._activeRipples.set(_,b),(f||!l)&&this._finishRippleTransition(_),_}fadeOutRipple(t){if(t.state===zn.FADING_OUT||t.state===zn.HIDDEN)return;let i=t.element,n=X(X({},lu),t.config.animation);i.style.transitionDuration=`${n.exitDuration}ms`,i.style.opacity="0",t.state=zn.FADING_OUT,(t._animationForciblyDisabledThroughCss||!n.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){let i=bn(t);!this._platform.isBrowser||!i||i===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=i,yM.forEach(n=>{e._eventManager.addHandler(this._ngZone,n,i,this)}))}handleEvent(t){t.type==="mousedown"?this._onMousedown(t):t.type==="touchstart"?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{xM.forEach(i=>{this._triggerElement.addEventListener(i,this,bM)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){t.state===zn.FADING_IN?this._startFadeOutTransition(t):t.state===zn.FADING_OUT&&this._destroyRipple(t)}_startFadeOutTransition(t){let i=t===this._mostRecentTransientRipple,{persistent:n}=t.config;t.state=zn.VISIBLE,!n&&(!i||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){let i=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=zn.HIDDEN,i!==null&&(t.element.removeEventListener("transitionend",i.onTransitionEnd),t.element.removeEventListener("transitioncancel",i.onTransitionCancel),i.fallbackTimer!==null&&clearTimeout(i.fallbackTimer)),t.element.remove()}_onMousedown(t){let i=iu(t),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+M3;!this._target.rippleDisabled&&!i&&!n&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!nu(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let i=t.changedTouches;if(i)for(let n=0;n<i.length;n++)this.fadeInRipple(i[n].clientX,i[n].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{let i=t.state===zn.VISIBLE||t.config.terminateOnPointerUp&&t.state===zn.FADING_IN;!t.config.persistent&&i&&t.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let t=this._triggerElement;t&&(yM.forEach(i=>e._eventManager.removeHandler(i,t,this)),this._pointerUpEventsRegistered&&(xM.forEach(i=>t.removeEventListener(i,this,bM)),this._pointerUpEventsRegistered=!1))}};function A3(e,t,i){let n=Math.max(Math.abs(e-i.left),Math.abs(e-i.right)),r=Math.max(Math.abs(t-i.top),Math.abs(t-i.bottom));return Math.sqrt(n*n+r*r)}var hh=new Ae("mat-ripple-global-options");var P3={capture:!0},k3=["focus","mousedown","mouseenter","touchstart"],A_="mat-ripple-loader-uninitialized",P_="mat-ripple-loader-class-name",wM="mat-ripple-loader-centered",gh="mat-ripple-loader-disabled",vh=(()=>{class e{_document=O(yt);_animationMode=O(xi,{optional:!0});_globalRippleOptions=O(hh,{optional:!0});_platform=O(ht);_ngZone=O(Ge);_injector=O(Ct);_eventCleanups;_hosts=new Map;constructor(){let i=O(dn).createRenderer(null,null);this._eventCleanups=this._ngZone.runOutsideAngular(()=>k3.map(n=>an(i,this._document,n,this._onInteraction,P3)))}ngOnDestroy(){let i=this._hosts.keys();for(let n of i)this.destroyRipple(n);this._eventCleanups.forEach(n=>n())}configureRipple(i,n){i.setAttribute(A_,this._globalRippleOptions?.namespace??""),(n.className||!i.hasAttribute(P_))&&i.setAttribute(P_,n.className||""),n.centered&&i.setAttribute(wM,""),n.disabled&&i.setAttribute(gh,"")}setDisabled(i,n){let r=this._hosts.get(i);r?(r.target.rippleDisabled=n,!n&&!r.hasSetUpEvents&&(r.hasSetUpEvents=!0,r.renderer.setupTriggerEvents(i))):n?i.setAttribute(gh,""):i.removeAttribute(gh)}_onInteraction=i=>{let n=on(i);if(n instanceof HTMLElement){let r=n.closest(`[${A_}="${this._globalRippleOptions?.namespace??""}"]`);r&&this._createRipple(r)}};_createRipple(i){if(!this._document||this._hosts.has(i))return;i.querySelector(".mat-ripple")?.remove();let n=this._document.createElement("span");n.classList.add("mat-ripple",i.getAttribute(P_)),i.append(n);let r=this._animationMode==="NoopAnimations",o=this._globalRippleOptions,a=r?0:o?.animation?.enterDuration??lu.enterDuration,s=r?0:o?.animation?.exitDuration??lu.exitDuration,c={rippleDisabled:r||o?.disabled||i.hasAttribute(gh),rippleConfig:{centered:i.hasAttribute(wM),terminateOnPointerUp:o?.terminateOnPointerUp,animation:{enterDuration:a,exitDuration:s}}},l=new fh(c,this._ngZone,n,this._platform,this._injector),d=!c.rippleDisabled;d&&l.setupTriggerEvents(i),this._hosts.set(i,{target:c,renderer:l,hasSetUpEvents:d}),i.removeAttribute(A_)}destroyRipple(i){let n=this._hosts.get(i);n&&(n.renderer._removeTriggerEvents(),this._hosts.delete(i))}static \u0275fac=function(n){return new(n||e)};static \u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var du=(()=>{class e{static \u0275fac=function(n){return new(n||e)};static \u0275cmp=ye({type:e,selectors:[["structural-styles"]],decls:0,vars:0,template:function(n,r){},styles:[`.mat-focus-indicator{position:relative}.mat-focus-indicator::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;display:var(--mat-focus-indicator-display, none);border-width:var(--mat-focus-indicator-border-width, 3px);border-style:var(--mat-focus-indicator-border-style, solid);border-color:var(--mat-focus-indicator-border-color, transparent);border-radius:var(--mat-focus-indicator-border-radius, 4px)}.mat-focus-indicator:focus::before{content:""}@media(forced-colors: active){html{--mat-focus-indicator-display: block}}
`],encapsulation:2,changeDetection:0})}return e})();var R3=new Ae("MAT_BUTTON_CONFIG");var O3=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],EM=(()=>{class e{_elementRef=O(Ke);_ngZone=O(Ge);_animationMode=O(xi,{optional:!0});_focusMonitor=O(os);_rippleLoader=O(vh);_isFab=!1;color;get disableRipple(){return this._disableRipple}set disableRipple(i){this._disableRipple=i,this._updateRippleDisabled()}_disableRipple=!1;get disabled(){return this._disabled}set disabled(i){this._disabled=i,this._updateRippleDisabled()}_disabled=!1;ariaDisabled;disabledInteractive;constructor(){O($i).load(du);let i=O(R3,{optional:!0}),n=this._elementRef.nativeElement,r=n.classList;this.disabledInteractive=i?.disabledInteractive??!1,this.color=i?.color??null,this._rippleLoader?.configureRipple(n,{className:"mat-mdc-button-ripple"});for(let{attribute:o,mdcClasses:a}of O3)n.hasAttribute(o)&&r.add(...a)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(i="program",n){i?this._focusMonitor.focusVia(this._elementRef.nativeElement,i,n):this._elementRef.nativeElement.focus(n)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}static \u0275fac=function(n){return new(n||e)};static \u0275dir=Ce({type:e,inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",Jt],disabled:[2,"disabled","disabled",Jt],ariaDisabled:[2,"aria-disabled","ariaDisabled",Jt],disabledInteractive:[2,"disabledInteractive","disabledInteractive",Jt]}})}return e})();var _h=(()=>{class e{static \u0275fac=function(n){return new(n||e)};static \u0275mod=ze({type:e});static \u0275inj=Ve({imports:[st,st]})}return e})();var T3=["mat-button",""],I3=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],F3=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var Yc=(()=>{class e extends EM{static \u0275fac=(()=>{let i;return function(r){return(i||(i=ui(e)))(r||e)}})();static \u0275cmp=ye({type:e,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:14,hostBindings:function(n,r){n&2&&(pt("disabled",r._getDisabledAttribute())("aria-disabled",r._getAriaDisabled()),wo(r.color?"mat-"+r.color:""),pe("mat-mdc-button-disabled",r.disabled)("mat-mdc-button-disabled-interactive",r.disabledInteractive)("_mat-animation-noopable",r._animationMode==="NoopAnimations")("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],features:[lt],attrs:T3,ngContentSelectors:F3,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(n,r){n&1&&(Gi(I3),L(0,"span",0),gt(1),h(2,"span",1),gt(3,1),g(),gt(4,2),L(5,"span",2)(6,"span",3)),n&2&&pe("mdc-button__ripple",!r._isFab)("mdc-fab__ripple",r._isFab)},styles:[`.mat-mdc-button-base{text-decoration:none}.mdc-button{-webkit-user-select:none;user-select:none;position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0);padding:0 8px}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__label{position:relative}.mat-mdc-button{padding:0 var(--mat-text-button-horizontal-padding, 12px);height:var(--mdc-text-button-container-height, 40px);font-family:var(--mdc-text-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-text-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mdc-text-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mdc-text-button-label-text-transform);font-weight:var(--mdc-text-button-label-text-weight, var(--mat-sys-label-large-weight))}.mat-mdc-button,.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mat-sys-corner-full))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, var(--mat-sys-primary))}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-text-button-with-icon-horizontal-padding, 16px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-offset, -4px);margin-left:var(--mat-text-button-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-offset, -4px);margin-left:var(--mat-text-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, -4px)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color, var(--mat-sys-primary))}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-text-button-touch-target-display, block)}.mat-mdc-unelevated-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mdc-filled-button-container-height, 40px);font-family:var(--mdc-filled-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-filled-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mdc-filled-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mdc-filled-button-label-text-transform);font-weight:var(--mdc-filled-button-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-filled-button-horizontal-padding, 24px)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -8px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -8px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -8px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -8px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color, color-mix(in srgb, var(--mat-sys-on-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color, var(--mat-sys-on-primary))}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-unelevated-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-unelevated-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-unelevated-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-filled-button-touch-target-display, block)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, var(--mat-sys-on-primary));background-color:var(--mdc-filled-button-container-color, var(--mat-sys-primary))}.mat-mdc-unelevated-button,.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mat-sys-corner-full))}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mdc-filled-button-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);box-shadow:var(--mdc-protected-button-container-elevation-shadow, var(--mat-sys-level1));height:var(--mdc-protected-button-container-height, 40px);font-family:var(--mdc-protected-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-protected-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mdc-protected-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mdc-protected-button-label-text-transform);font-weight:var(--mdc-protected-button-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-protected-button-horizontal-padding, 24px)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -8px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -8px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -8px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -8px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color, var(--mat-sys-primary))}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-raised-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-raised-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-raised-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-protected-button-touch-target-display, block)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, var(--mat-sys-primary));background-color:var(--mdc-protected-button-container-color, var(--mat-sys-surface))}.mat-mdc-raised-button,.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mat-sys-corner-full))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation-shadow, var(--mat-sys-level2))}.mat-mdc-raised-button:focus{box-shadow:var(--mdc-protected-button-focus-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mdc-protected-button-pressed-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mdc-protected-button-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation-shadow, var(--mat-sys-level0))}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mdc-outlined-button-container-height, 40px);font-family:var(--mdc-outlined-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-outlined-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mdc-outlined-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mdc-outlined-button-label-text-transform);font-weight:var(--mdc-outlined-button-label-text-weight, var(--mat-sys-label-large-weight));border-radius:var(--mdc-outlined-button-container-shape, var(--mat-sys-corner-full));border-width:var(--mdc-outlined-button-outline-width, 1px);padding:0 var(--mat-outlined-button-horizontal-padding, 24px)}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -8px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -8px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -8px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -8px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color, var(--mat-sys-primary))}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-outlined-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-outlined-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-outlined-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-outlined-button-touch-target-display, block)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, var(--mat-sys-primary));border-color:var(--mdc-outlined-button-outline-color, var(--mat-sys-outline))}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));border-color:var(--mdc-outlined-button-disabled-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-button .mat-icon,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-unelevated-button .mat-icon,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-raised-button .mat-icon,.mat-mdc-outlined-button .mdc-button__label,.mat-mdc-outlined-button .mat-icon{z-index:1;position:relative}.mat-mdc-button .mat-focus-indicator,.mat-mdc-unelevated-button .mat-focus-indicator,.mat-mdc-raised-button .mat-focus-indicator,.mat-mdc-outlined-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit}.mat-mdc-button:focus>.mat-focus-indicator::before,.mat-mdc-unelevated-button:focus>.mat-focus-indicator::before,.mat-mdc-raised-button:focus>.mat-focus-indicator::before,.mat-mdc-outlined-button:focus>.mat-focus-indicator::before{content:"";border-radius:inherit}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px}.mat-mdc-unelevated-button .mat-focus-indicator::before,.mat-mdc-raised-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px)*-1)}
`,`@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-icon-button.mat-mdc-icon-button,.mat-mdc-outlined-button .mdc-button__ripple{outline:solid 1px}}
`],encapsulation:2,changeDetection:0})}return e})();var Kc=(()=>{class e{static \u0275fac=function(n){return new(n||e)};static \u0275mod=ze({type:e});static \u0275inj=Ve({imports:[st,_h,st]})}return e})();var bh=(()=>{class e{isErrorState(i,n){return!!(i&&i.invalid&&(i.touched||n&&n.submitted))}static \u0275fac=function(n){return new(n||e)};static \u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var yh=class{_defaultMatcher;ngControl;_parentFormGroup;_parentForm;_stateChanges;errorState=!1;matcher;constructor(t,i,n,r,o){this._defaultMatcher=t,this.ngControl=i,this._parentFormGroup=n,this._parentForm=r,this._stateChanges=o}updateErrorState(){let t=this.errorState,i=this._parentFormGroup||this._parentForm,n=this.matcher||this._defaultMatcher,r=this.ngControl?this.ngControl.control:null,o=n?.isErrorState(r,i)??!1;o!==t&&(this.errorState=o,this._stateChanges.next())}};var k_=class{_box;_destroyed=new De;_resizeSubject=new De;_resizeObserver;_elementObservables=new Map;constructor(t){this._box=t,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(i=>this._resizeSubject.next(i)))}observe(t){return this._elementObservables.has(t)||this._elementObservables.set(t,new zr(i=>{let n=this._resizeSubject.subscribe(i);return this._resizeObserver?.observe(t,{box:this._box}),()=>{this._resizeObserver?.unobserve(t),n.unsubscribe(),this._elementObservables.delete(t)}}).pipe(Oi(i=>i.some(n=>n.target===t)),Wh({bufferSize:1,refCount:!0}),ai(this._destroyed))),this._elementObservables.get(t)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}},SM=(()=>{class e{_cleanupErrorListener;_observers=new Map;_ngZone=O(Ge);constructor(){typeof ResizeObserver<"u"}ngOnDestroy(){for(let[,i]of this._observers)i.destroy();this._observers.clear(),this._cleanupErrorListener?.()}observe(i,n){let r=n?.box||"content-box";return this._observers.has(r)||this._observers.set(r,new k_(r)),this._observers.get(r).observe(i)}static \u0275fac=function(n){return new(n||e)};static \u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var N3=["notch"],L3=["matFormFieldNotchedOutline",""],B3=["*"],j3=["textField"],V3=["iconPrefixContainer"],z3=["textPrefixContainer"],H3=["iconSuffixContainer"],$3=["textSuffixContainer"],W3=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],U3=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];function G3(e,t){e&1&&L(0,"span",20)}function q3(e,t){if(e&1&&(h(0,"label",19),gt(1,1),G(2,G3,1,0,"span",20),g()),e&2){let i=j(2);I("floating",i._shouldLabelFloat())("monitorResize",i._hasOutline())("id",i._labelId),pt("for",i._control.disableAutomaticLabeling?null:i._control.id),E(2),si(!i.hideRequiredMarker&&i._control.required?2:-1)}}function Y3(e,t){if(e&1&&G(0,q3,3,5,"label",19),e&2){let i=j();si(i._hasFloatingLabel()?0:-1)}}function K3(e,t){e&1&&L(0,"div",7)}function X3(e,t){}function Z3(e,t){if(e&1&&G(0,X3,0,0,"ng-template",13),e&2){j(2);let i=En(1);I("ngTemplateOutlet",i)}}function Q3(e,t){if(e&1&&(h(0,"div",9),G(1,Z3,1,1,null,13),g()),e&2){let i=j();I("matFormFieldNotchedOutlineOpen",i._shouldLabelFloat()),E(),si(i._forceDisplayInfixLabel()?-1:1)}}function J3(e,t){e&1&&(h(0,"div",10,2),gt(2,2),g())}function ej(e,t){e&1&&(h(0,"div",11,3),gt(2,3),g())}function tj(e,t){}function ij(e,t){if(e&1&&G(0,tj,0,0,"ng-template",13),e&2){j();let i=En(1);I("ngTemplateOutlet",i)}}function nj(e,t){e&1&&(h(0,"div",14,4),gt(2,4),g())}function rj(e,t){e&1&&(h(0,"div",15,5),gt(2,5),g())}function oj(e,t){e&1&&L(0,"div",16)}function aj(e,t){e&1&&gt(0,6)}function sj(e,t){if(e&1&&(h(0,"mat-hint",21),S(1),g()),e&2){let i=j(2);I("id",i._hintLabelId),E(),le(i.hintLabel)}}function cj(e,t){if(e&1&&(G(0,sj,2,2,"mat-hint",21),gt(1,7),L(2,"div",22),gt(3,8)),e&2){let i=j();si(i.hintLabel?0:-1)}}var uu=(()=>{class e{static \u0275fac=function(n){return new(n||e)};static \u0275dir=Ce({type:e,selectors:[["mat-label"]]})}return e})(),O_=new Ae("MatError"),T_=(()=>{class e{id=O(yi).getId("mat-mdc-error-");constructor(){}static \u0275fac=function(n){return new(n||e)};static \u0275dir=Ce({type:e,selectors:[["mat-error"],["","matError",""]],hostAttrs:[1,"mat-mdc-form-field-error","mat-mdc-form-field-bottom-align"],hostVars:1,hostBindings:function(n,r){n&2&&mr("id",r.id)},inputs:{id:"id"},features:[Bt([{provide:O_,useExisting:e}])]})}return e})(),R_=(()=>{class e{align="start";id=O(yi).getId("mat-mdc-hint-");static \u0275fac=function(n){return new(n||e)};static \u0275dir=Ce({type:e,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(n,r){n&2&&(mr("id",r.id),pt("align",null),pe("mat-mdc-form-field-hint-end",r.align==="end"))},inputs:{align:"align",id:"id"}})}return e})(),OM=new Ae("MatPrefix");var I_=new Ae("MatSuffix"),F_=(()=>{class e{set _isTextSelector(i){this._isText=!0}_isText=!1;static \u0275fac=function(n){return new(n||e)};static \u0275dir=Ce({type:e,selectors:[["","matSuffix",""],["","matIconSuffix",""],["","matTextSuffix",""]],inputs:{_isTextSelector:[0,"matTextSuffix","_isTextSelector"]},features:[Bt([{provide:I_,useExisting:e}])]})}return e})(),TM=new Ae("FloatingLabelParent"),MM=(()=>{class e{_elementRef=O(Ke);get floating(){return this._floating}set floating(i){this._floating=i,this.monitorResize&&this._handleResize()}_floating=!1;get monitorResize(){return this._monitorResize}set monitorResize(i){this._monitorResize=i,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}_monitorResize=!1;_resizeObserver=O(SM);_ngZone=O(Ge);_parent=O(TM);_resizeSubscription=new pr;constructor(){}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return lj(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}static \u0275fac=function(n){return new(n||e)};static \u0275dir=Ce({type:e,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(n,r){n&2&&pe("mdc-floating-label--float-above",r.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"}})}return e})();function lj(e){let t=e;if(t.offsetParent!==null)return t.scrollWidth;let i=t.cloneNode(!0);i.style.setProperty("position","absolute"),i.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(i);let n=i.scrollWidth;return i.remove(),n}var DM="mdc-line-ripple--active",xh="mdc-line-ripple--deactivating",AM=(()=>{class e{_elementRef=O(Ke);_cleanupTransitionEnd;constructor(){let i=O(Ge),n=O(Ti);i.runOutsideAngular(()=>{this._cleanupTransitionEnd=n.listen(this._elementRef.nativeElement,"transitionend",this._handleTransitionEnd)})}activate(){let i=this._elementRef.nativeElement.classList;i.remove(xh),i.add(DM)}deactivate(){this._elementRef.nativeElement.classList.add(xh)}_handleTransitionEnd=i=>{let n=this._elementRef.nativeElement.classList,r=n.contains(xh);i.propertyName==="opacity"&&r&&n.remove(DM,xh)};ngOnDestroy(){this._cleanupTransitionEnd()}static \u0275fac=function(n){return new(n||e)};static \u0275dir=Ce({type:e,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]})}return e})(),PM=(()=>{class e{_elementRef=O(Ke);_ngZone=O(Ge);open=!1;_notch;constructor(){}ngAfterViewInit(){let i=this._elementRef.nativeElement.querySelector(".mdc-floating-label");i?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),typeof requestAnimationFrame=="function"&&(i.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>i.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(i){!this.open||!i?this._notch.nativeElement.style.width="":this._notch.nativeElement.style.width=`calc(${i}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=ye({type:e,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(n,r){if(n&1&&Rt(N3,5),n&2){let o;Xe(o=Ze())&&(r._notch=o.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(n,r){n&2&&pe("mdc-notched-outline--notched",r.open)},inputs:{open:[0,"matFormFieldNotchedOutlineOpen","open"]},attrs:L3,ngContentSelectors:B3,decls:5,vars:0,consts:[["notch",""],[1,"mat-mdc-notch-piece","mdc-notched-outline__leading"],[1,"mat-mdc-notch-piece","mdc-notched-outline__notch"],[1,"mat-mdc-notch-piece","mdc-notched-outline__trailing"]],template:function(n,r){n&1&&(Gi(),L(0,"div",1),h(1,"div",2,0),gt(3),g(),L(4,"div",3))},encapsulation:2,changeDetection:0})}return e})(),wh=(()=>{class e{value;stateChanges;id;placeholder;ngControl;focused;empty;shouldLabelFloat;required;disabled;errorState;controlType;autofilled;userAriaDescribedBy;disableAutomaticLabeling;static \u0275fac=function(n){return new(n||e)};static \u0275dir=Ce({type:e})}return e})();var Eh=new Ae("MatFormField"),IM=new Ae("MAT_FORM_FIELD_DEFAULT_OPTIONS"),kM="fill",dj="auto",RM="fixed",uj="translateY(-50%)",N_=(()=>{class e{_elementRef=O(Ke);_changeDetectorRef=O(Cn);_dir=O(Vn);_platform=O(ht);_idGenerator=O(yi);_ngZone=O(Ge);_injector=O(Ct);_defaults=O(IM,{optional:!0});_textField;_iconPrefixContainer;_textPrefixContainer;_iconSuffixContainer;_textSuffixContainer;_floatingLabel;_notchedOutline;_lineRipple;_formFieldControl;_prefixChildren;_suffixChildren;_errorChildren;_hintChildren;_labelChild=lb(uu);get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(i){this._hideRequiredMarker=Lr(i)}_hideRequiredMarker=!1;color="primary";get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||dj}set floatLabel(i){i!==this._floatLabel&&(this._floatLabel=i,this._changeDetectorRef.markForCheck())}_floatLabel;get appearance(){return this._appearance}set appearance(i){let n=this._appearance,r=i||this._defaults?.appearance||kM;this._appearance=r,this._appearance==="outline"&&this._appearance!==n&&(this._needsOutlineLabelOffsetUpdate=!0)}_appearance=kM;get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||RM}set subscriptSizing(i){this._subscriptSizing=i||this._defaults?.subscriptSizing||RM}_subscriptSizing=null;get hintLabel(){return this._hintLabel}set hintLabel(i){this._hintLabel=i,this._processHints()}_hintLabel="";_hasIconPrefix=!1;_hasTextPrefix=!1;_hasIconSuffix=!1;_hasTextSuffix=!1;_labelId=this._idGenerator.getId("mat-mdc-form-field-label-");_hintLabelId=this._idGenerator.getId("mat-mdc-hint-");get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(i){this._explicitFormFieldControl=i}_destroyed=new De;_isFocused=null;_explicitFormFieldControl;_needsOutlineLabelOffsetUpdate=!1;_previousControl=null;_previousControlValidatorFn=null;_stateChanges;_valueChanges;_describedByChanges;_animationsDisabled;constructor(){let i=this._defaults;i&&(i.appearance&&(this.appearance=i.appearance),this._hideRequiredMarker=!!i?.hideRequiredMarker,i.color&&(this.color=i.color)),this._animationsDisabled=O(xi,{optional:!0})==="NoopAnimations"}ngAfterViewInit(){this._updateFocusState(),this._animationsDisabled||this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{this._elementRef.nativeElement.classList.add("mat-form-field-animations-enabled")},300)}),this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl(),this._control!==this._previousControl&&(this._initializeControl(this._previousControl),this._control.ngControl&&this._control.ngControl.control&&(this._previousControlValidatorFn=this._control.ngControl.control.validator),this._previousControl=this._control),this._control.ngControl&&this._control.ngControl.control&&this._control.ngControl.control.validator!==this._previousControlValidatorFn&&this._changeDetectorRef.markForCheck()}ngOnDestroy(){this._stateChanges?.unsubscribe(),this._valueChanges?.unsubscribe(),this._describedByChanges?.unsubscribe(),this._destroyed.next(),this._destroyed.complete()}getLabelId=Wr(()=>this._hasFloatingLabel()?this._labelId:null);getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(i){let n=this._control,r="mat-mdc-form-field-type-";i&&this._elementRef.nativeElement.classList.remove(r+i.controlType),n.controlType&&this._elementRef.nativeElement.classList.add(r+n.controlType),this._stateChanges?.unsubscribe(),this._stateChanges=n.stateChanges.subscribe(()=>{this._updateFocusState(),this._changeDetectorRef.markForCheck()}),this._describedByChanges?.unsubscribe(),this._describedByChanges=n.stateChanges.pipe(cn([void 0,void 0]),xn(()=>[n.errorState,n.userAriaDescribedBy]),$h(),Oi(([[o,a],[s,c]])=>o!==s||a!==c)).subscribe(()=>this._syncDescribedByIds()),this._valueChanges?.unsubscribe(),n.ngControl&&n.ngControl.valueChanges&&(this._valueChanges=n.ngControl.valueChanges.pipe(ai(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()))}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(i=>!i._isText),this._hasTextPrefix=!!this._prefixChildren.find(i=>i._isText),this._hasIconSuffix=!!this._suffixChildren.find(i=>!i._isText),this._hasTextSuffix=!!this._suffixChildren.find(i=>i._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),Hr(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){this._control}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||this._isFocused===null)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdate=!0),gs(()=>{this._needsOutlineLabelOffsetUpdate&&(this._needsOutlineLabelOffsetUpdate=!1,this._updateOutlineLabelOffset())},{injector:this._injector}),this._dir.change.pipe(ai(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdate=!0)}_shouldAlwaysFloat(){return this.floatLabel==="always"}_hasOutline(){return this.appearance==="outline"}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel=Wr(()=>!!this._labelChild());_shouldLabelFloat(){return this._hasFloatingLabel()?this._control.shouldLabelFloat||this._shouldAlwaysFloat():!1}_shouldForward(i){let n=this._control?this._control.ngControl:null;return n&&n[i]}_getSubscriptMessageType(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){!this._hasOutline()||!this._floatingLabel||!this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(0):this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth())}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){this._hintChildren}_syncDescribedByIds(){if(this._control){let i=[];if(this._control.userAriaDescribedBy&&typeof this._control.userAriaDescribedBy=="string"&&i.push(...this._control.userAriaDescribedBy.split(" ")),this._getSubscriptMessageType()==="hint"){let n=this._hintChildren?this._hintChildren.find(o=>o.align==="start"):null,r=this._hintChildren?this._hintChildren.find(o=>o.align==="end"):null;n?i.push(n.id):this._hintLabel&&i.push(this._hintLabelId),r&&i.push(r.id)}else this._errorChildren&&i.push(...this._errorChildren.map(n=>n.id));this._control.setDescribedByIds(i)}}_updateOutlineLabelOffset(){if(!this._hasOutline()||!this._floatingLabel)return;let i=this._floatingLabel.element;if(!(this._iconPrefixContainer||this._textPrefixContainer)){i.style.transform="";return}if(!this._isAttachedToDom()){this._needsOutlineLabelOffsetUpdate=!0;return}let n=this._iconPrefixContainer?.nativeElement,r=this._textPrefixContainer?.nativeElement,o=this._iconSuffixContainer?.nativeElement,a=this._textSuffixContainer?.nativeElement,s=n?.getBoundingClientRect().width??0,c=r?.getBoundingClientRect().width??0,l=o?.getBoundingClientRect().width??0,d=a?.getBoundingClientRect().width??0,u=this._dir.value==="rtl"?"-1":"1",p=`${s+c}px`,f=`calc(${u} * (${p} + var(--mat-mdc-form-field-label-offset-x, 0px)))`;i.style.transform=`var(
        --mat-mdc-form-field-label-transform,
        ${uj} translateX(${f})
    )`;let _=s+c+l+d;this._elementRef.nativeElement.style.setProperty("--mat-form-field-notch-max-width",`calc(100% - ${_}px)`)}_isAttachedToDom(){let i=this._elementRef.nativeElement;if(i.getRootNode){let n=i.getRootNode();return n&&n!==i}return document.documentElement.contains(i)}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=ye({type:e,selectors:[["mat-form-field"]],contentQueries:function(n,r,o){if(n&1&&(pb(o,r._labelChild,uu,5),qi(o,wh,5),qi(o,OM,5),qi(o,I_,5),qi(o,O_,5),qi(o,R_,5)),n&2){mb();let a;Xe(a=Ze())&&(r._formFieldControl=a.first),Xe(a=Ze())&&(r._prefixChildren=a),Xe(a=Ze())&&(r._suffixChildren=a),Xe(a=Ze())&&(r._errorChildren=a),Xe(a=Ze())&&(r._hintChildren=a)}},viewQuery:function(n,r){if(n&1&&(Rt(j3,5),Rt(V3,5),Rt(z3,5),Rt(H3,5),Rt($3,5),Rt(MM,5),Rt(PM,5),Rt(AM,5)),n&2){let o;Xe(o=Ze())&&(r._textField=o.first),Xe(o=Ze())&&(r._iconPrefixContainer=o.first),Xe(o=Ze())&&(r._textPrefixContainer=o.first),Xe(o=Ze())&&(r._iconSuffixContainer=o.first),Xe(o=Ze())&&(r._textSuffixContainer=o.first),Xe(o=Ze())&&(r._floatingLabel=o.first),Xe(o=Ze())&&(r._notchedOutline=o.first),Xe(o=Ze())&&(r._lineRipple=o.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:40,hostBindings:function(n,r){n&2&&pe("mat-mdc-form-field-label-always-float",r._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",r._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",r._hasIconSuffix)("mat-form-field-invalid",r._control.errorState)("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-form-field-appearance-fill",r.appearance=="fill")("mat-form-field-appearance-outline",r.appearance=="outline")("mat-form-field-hide-placeholder",r._hasFloatingLabel()&&!r._shouldLabelFloat())("mat-focused",r._control.focused)("mat-primary",r.color!=="accent"&&r.color!=="warn")("mat-accent",r.color==="accent")("mat-warn",r.color==="warn")("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[Bt([{provide:Eh,useExisting:e},{provide:TM,useExisting:e}])],ngContentSelectors:U3,decls:20,vars:25,consts:[["labelTemplate",""],["textField",""],["iconPrefixContainer",""],["textPrefixContainer",""],["textSuffixContainer",""],["iconSuffixContainer",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],[1,"mat-mdc-form-field-focus-overlay"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],[1,"mat-mdc-form-field-icon-prefix"],[1,"mat-mdc-form-field-text-prefix"],[1,"mat-mdc-form-field-infix"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align"],["aria-atomic","true","aria-live","polite"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[3,"id"],[1,"mat-mdc-form-field-hint-spacer"]],template:function(n,r){if(n&1){let o=Le();Gi(W3),G(0,Y3,1,1,"ng-template",null,0,Kn),h(2,"div",6,1),K("click",function(s){return ne(o),re(r._control.onContainerClick(s))}),G(4,K3,1,0,"div",7),h(5,"div",8),G(6,Q3,2,2,"div",9)(7,J3,3,0,"div",10)(8,ej,3,0,"div",11),h(9,"div",12),G(10,ij,1,1,null,13),gt(11),g(),G(12,nj,3,0,"div",14)(13,rj,3,0,"div",15),g(),G(14,oj,1,0,"div",16),g(),h(15,"div",17),hb(16),h(17,"div",18),G(18,aj,1,0)(19,cj,4,1),g()()}if(n&2){let o;E(2),pe("mdc-text-field--filled",!r._hasOutline())("mdc-text-field--outlined",r._hasOutline())("mdc-text-field--no-label",!r._hasFloatingLabel())("mdc-text-field--disabled",r._control.disabled)("mdc-text-field--invalid",r._control.errorState),E(2),si(!r._hasOutline()&&!r._control.disabled?4:-1),E(2),si(r._hasOutline()?6:-1),E(),si(r._hasIconPrefix?7:-1),E(),si(r._hasTextPrefix?8:-1),E(2),si(!r._hasOutline()||r._forceDisplayInfixLabel()?10:-1),E(2),si(r._hasTextSuffix?12:-1),E(),si(r._hasIconSuffix?13:-1),E(),si(r._hasOutline()?-1:14),E(),pe("mat-mdc-form-field-subscript-dynamic-size",r.subscriptSizing==="dynamic");let a=r._getSubscriptMessageType();E(2),pe("mat-mdc-form-field-error-wrapper",a==="error")("mat-mdc-form-field-hint-wrapper",a==="hint"),E(),si((o=a)==="error"?18:o==="hint"?19:-1)}},dependencies:[MM,PM,Tu,AM,R_],styles:[`.mdc-text-field{display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color;border-top-left-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0}.mdc-text-field__input{width:100%;min-width:0;border:none;border-radius:0;background:none;padding:0;-moz-appearance:none;-webkit-appearance:none;height:28px}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}.mdc-text-field__input::placeholder{opacity:0}.mdc-text-field__input::-moz-placeholder{opacity:0}.mdc-text-field__input::-webkit-input-placeholder{opacity:0}.mdc-text-field__input:-ms-input-placeholder{opacity:0}.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive::placeholder{opacity:0}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive::-moz-placeholder{opacity:0}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive::-webkit-input-placeholder{opacity:0}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive:-ms-input-placeholder{opacity:0}.mdc-text-field--outlined .mdc-text-field__input,.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-filled-text-field-input-text-color, var(--mat-sys-on-surface));caret-color:var(--mdc-filled-text-field-caret-color, var(--mat-sys-primary))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-error-caret-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-filled-text-field-disabled-input-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-outlined-text-field-input-text-color, var(--mat-sys-on-surface));caret-color:var(--mdc-outlined-text-field-caret-color, var(--mat-sys-primary))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-error-caret-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-outlined-text-field-disabled-input-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}@media(forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}}.mdc-text-field--filled{height:56px;border-bottom-right-radius:0;border-bottom-left-radius:0;border-top-left-radius:var(--mdc-filled-text-field-container-shape, var(--mat-sys-corner-extra-small));border-top-right-radius:var(--mdc-filled-text-field-container-shape, var(--mat-sys-corner-extra-small))}.mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:var(--mdc-filled-text-field-container-color, var(--mat-sys-surface-variant))}.mdc-text-field--filled.mdc-text-field--disabled{background-color:var(--mdc-filled-text-field-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 4%, transparent))}.mdc-text-field--outlined{height:56px;overflow:visible;padding-right:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small)));padding-left:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small)) + 4px)}[dir=rtl] .mdc-text-field--outlined{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small)) + 4px);padding-left:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small)))}.mdc-floating-label{position:absolute;left:0;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label{right:0;left:auto;transform-origin:right top;text-align:right}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:auto}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label{left:auto;right:4px}.mdc-text-field--filled .mdc-floating-label{left:16px;right:auto}[dir=rtl] .mdc-text-field--filled .mdc-floating-label{left:auto;right:16px}.mdc-text-field--disabled .mdc-floating-label{cursor:default}@media(forced-colors: active){.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mdc-filled-text-field-label-text-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mdc-filled-text-field-focus-label-text-color, var(--mat-sys-primary))}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mdc-filled-text-field-hover-label-text-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label{color:var(--mdc-filled-text-field-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mdc-filled-text-field-error-label-text-color, var(--mat-sys-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mdc-filled-text-field-error-focus-label-text-color, var(--mat-sys-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mdc-filled-text-field-error-hover-label-text-color, var(--mat-sys-on-error-container))}.mdc-text-field--filled .mdc-floating-label{font-family:var(--mdc-filled-text-field-label-text-font, var(--mat-sys-body-large-font));font-size:var(--mdc-filled-text-field-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mdc-filled-text-field-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mdc-filled-text-field-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mdc-outlined-text-field-label-text-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mdc-outlined-text-field-focus-label-text-color, var(--mat-sys-primary))}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mdc-outlined-text-field-hover-label-text-color, var(--mat-sys-on-surface))}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label{color:var(--mdc-outlined-text-field-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mdc-outlined-text-field-error-label-text-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mdc-outlined-text-field-error-focus-label-text-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mdc-outlined-text-field-error-hover-label-text-color, var(--mat-sys-on-error-container))}.mdc-text-field--outlined .mdc-floating-label{font-family:var(--mdc-outlined-text-field-label-text-font, var(--mat-sys-body-large-font));font-size:var(--mdc-outlined-text-field-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mdc-outlined-text-field-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mdc-outlined-text-field-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-floating-label--float-above{cursor:auto;transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1);font-size:.75rem}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:0;margin-right:1px}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline{text-align:right}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mat-mdc-notch-piece{box-sizing:border-box;height:100%;pointer-events:none;border-top:1px solid;border-bottom:1px solid}.mdc-text-field--focused .mat-mdc-notch-piece{border-width:2px}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-outline-color, var(--mat-sys-outline));border-width:var(--mdc-outlined-text-field-outline-width, 1px)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-hover-outline-color, var(--mat-sys-on-surface))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-focus-outline-color, var(--mat-sys-primary))}.mdc-text-field--outlined.mdc-text-field--disabled .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-disabled-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-outline-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-notched-outline .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-hover-outline-color, var(--mat-sys-on-error-container))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-focus-outline-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mat-mdc-notch-piece{border-width:var(--mdc-outlined-text-field-focus-outline-width, 2px)}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small));border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small))}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px,var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small)))}[dir=rtl] .mdc-notched-outline__leading{border-left:none;border-right:1px solid;border-bottom-left-radius:0;border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small));border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small))}.mdc-notched-outline__trailing{flex-grow:1;border-left:none;border-right:1px solid;border-top-left-radius:0;border-bottom-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small));border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small))}[dir=rtl] .mdc-notched-outline__trailing{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small));border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small))}.mdc-notched-outline__notch{flex:0 0 auto;width:auto}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:min(var(--mat-form-field-notch-max-width, 100%),100% - max(12px,var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small)))*2)}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none;--mat-form-field-notch-max-width: 100%}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1;border-bottom-width:var(--mdc-filled-text-field-active-indicator-height, 1px)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-active-indicator-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-hover-active-indicator-color, var(--mat-sys-on-surface))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-disabled-active-indicator-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-active-indicator-color, var(--mat-sys-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-hover-active-indicator-color, var(--mat-sys-on-error-container))}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-text-field--filled .mdc-line-ripple::after{border-bottom-width:var(--mdc-filled-text-field-focus-active-indicator-height, 2px)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-focus-active-indicator-color, var(--mat-sys-primary))}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-error-focus-active-indicator-color, var(--mat-sys-error))}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-text-field--disabled{pointer-events:none}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;line-height:normal;pointer-events:all;will-change:auto}.mat-mdc-form-field:not(.mat-form-field-disabled) .mat-mdc-floating-label.mdc-floating-label{cursor:inherit}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto;will-change:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-form-field-disabled .mdc-text-field__input::placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-disabled .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-disabled .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-disabled .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:1px solid rgba(0,0,0,0)}[dir=rtl] .mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:none;border-right:1px solid rgba(0,0,0,0)}.mat-mdc-form-field-infix{min-height:var(--mat-form-field-container-height, 56px);padding-top:var(--mat-form-field-filled-with-label-container-padding-top, 24px);padding-bottom:var(--mat-form-field-filled-with-label-container-padding-bottom, 8px)}.mdc-text-field--outlined .mat-mdc-form-field-infix,.mdc-text-field--no-label .mat-mdc-form-field-infix{padding-top:var(--mat-form-field-container-vertical-padding, 16px);padding-bottom:var(--mat-form-field-container-vertical-padding, 16px)}.mat-mdc-text-field-wrapper .mat-mdc-form-field-flex .mat-mdc-floating-label{top:calc(var(--mat-form-field-container-height, 56px)/2)}.mdc-text-field--filled .mat-mdc-floating-label{display:var(--mat-form-field-filled-label-display, block)}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{--mat-mdc-form-field-label-transform: translateY(calc(calc(6.75px + var(--mat-form-field-container-height, 56px) / 2) * -1)) scale(var(--mat-mdc-form-field-floating-label-scale, 0.75));transform:var(--mat-mdc-form-field-label-transform)}@keyframes _mat-form-field-subscript-animation{from{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translateY(0)}}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px;opacity:1;transform:translateY(0);animation:_mat-form-field-subscript-animation 0ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block;color:var(--mat-form-field-error-text-color, var(--mat-sys-error))}.mat-mdc-form-field-subscript-wrapper,.mat-mdc-form-field-bottom-align::before{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-subscript-text-font, var(--mat-sys-body-small-font));line-height:var(--mat-form-field-subscript-text-line-height, var(--mat-sys-body-small-line-height));font-size:var(--mat-form-field-subscript-text-size, var(--mat-sys-body-small-size));letter-spacing:var(--mat-form-field-subscript-text-tracking, var(--mat-sys-body-small-tracking));font-weight:var(--mat-form-field-subscript-text-weight, var(--mat-sys-body-small-weight))}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none;background-color:var(--mat-form-field-state-layer-color, var(--mat-sys-on-surface))}.mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-form-field.mat-focused .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-focus-state-layer-opacity, 0)}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option{color:var(--mat-form-field-select-option-text-color, var(--mat-sys-neutral10))}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option:disabled{color:var(--mat-form-field-select-disabled-option-text-color, color-mix(in srgb, var(--mat-sys-neutral10) 38%, transparent))}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none;color:var(--mat-form-field-enabled-select-arrow-color, var(--mat-sys-on-surface-variant))}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select.mat-focused .mat-mdc-form-field-infix::after{color:var(--mat-form-field-focus-select-arrow-color, var(--mat-sys-primary))}.mat-mdc-form-field-type-mat-native-select.mat-form-field-disabled .mat-mdc-form-field-infix::after{color:var(--mat-form-field-disabled-select-arrow-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}@media(forced-colors: active){.mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}}@media(forced-colors: active){.mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}}@media(forced-colors: active){.mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}}@media(forced-colors: active){.mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-container-text-font, var(--mat-sys-body-large-font));line-height:var(--mat-form-field-container-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mat-form-field-container-text-size, var(--mat-sys-body-large-size));letter-spacing:var(--mat-form-field-container-text-tracking, var(--mat-sys-body-large-tracking));font-weight:var(--mat-form-field-container-text-weight, var(--mat-sys-body-large-weight))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(var(--mat-form-field-outlined-label-text-populated-size)*var(--mat-mdc-form-field-floating-label-scale))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mat-form-field-outlined-label-text-populated-size)}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%;z-index:0}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:0 12px;box-sizing:content-box}.mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-leading-icon-color, var(--mat-sys-on-surface-variant))}.mat-form-field-disabled .mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-disabled-leading-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-trailing-icon-color, var(--mat-sys-on-surface-variant))}.mat-form-field-disabled .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-disabled-trailing-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-invalid .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-trailing-icon-color, var(--mat-sys-error))}.mat-form-field-invalid:not(.mat-focused):not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-hover-trailing-icon-color, var(--mat-sys-on-error-container))}.mat-form-field-invalid.mat-focused .mat-mdc-text-field-wrapper .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-focus-trailing-icon-color, var(--mat-sys-error))}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field-infix:has(textarea[cols]){width:auto}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field__input{transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field__input::placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field__input::-moz-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field__input::-webkit-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--focused .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field.mat-form-field-animations-enabled .mat-mdc-form-field-error-wrapper{animation-duration:300ms}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}
`],encapsulation:2,changeDetection:0})}return e})();var pj=["*",[["mat-chip-avatar"],["","matChipAvatar",""]],[["mat-chip-trailing-icon"],["","matChipRemove",""],["","matChipTrailingIcon",""]]],mj=["*","mat-chip-avatar, [matChipAvatar]","mat-chip-trailing-icon,[matChipRemove],[matChipTrailingIcon]"];function fj(e,t){e&1&&(h(0,"span",3),gt(1,1),g())}function hj(e,t){e&1&&(h(0,"span",6),gt(1,2),g())}var gj=["*"];var vj=new Ae("mat-chips-default-options",{providedIn:"root",factory:()=>({separatorKeyCodes:[13]})}),L_=new Ae("MatChipAvatar"),FM=new Ae("MatChipTrailingIcon"),NM=new Ae("MatChipRemove"),jM=new Ae("MatChip"),LM=(()=>{class e{_elementRef=O(Ke);_parentChip=O(jM);isInteractive=!0;_isPrimary=!0;get disabled(){return this._disabled||this._parentChip?.disabled||!1}set disabled(i){this._disabled=i}_disabled=!1;tabIndex=-1;_allowFocusWhenDisabled=!1;_getDisabledAttribute(){return this.disabled&&!this._allowFocusWhenDisabled?"":null}_getTabindex(){return this.disabled&&!this._allowFocusWhenDisabled||!this.isInteractive?null:this.tabIndex.toString()}constructor(){O($i).load(du),this._elementRef.nativeElement.nodeName==="BUTTON"&&this._elementRef.nativeElement.setAttribute("type","button")}focus(){this._elementRef.nativeElement.focus()}_handleClick(i){!this.disabled&&this.isInteractive&&this._isPrimary&&(i.preventDefault(),this._parentChip._handlePrimaryActionInteraction())}_handleKeydown(i){(i.keyCode===13||i.keyCode===32)&&!this.disabled&&this.isInteractive&&this._isPrimary&&!this._parentChip._isEditing&&(i.preventDefault(),this._parentChip._handlePrimaryActionInteraction())}static \u0275fac=function(n){return new(n||e)};static \u0275dir=Ce({type:e,selectors:[["","matChipAction",""]],hostAttrs:[1,"mdc-evolution-chip__action","mat-mdc-chip-action"],hostVars:9,hostBindings:function(n,r){n&1&&K("click",function(a){return r._handleClick(a)})("keydown",function(a){return r._handleKeydown(a)}),n&2&&(pt("tabindex",r._getTabindex())("disabled",r._getDisabledAttribute())("aria-disabled",r.disabled),pe("mdc-evolution-chip__action--primary",r._isPrimary)("mdc-evolution-chip__action--presentational",!r.isInteractive)("mdc-evolution-chip__action--trailing",!r._isPrimary))},inputs:{isInteractive:"isInteractive",disabled:[2,"disabled","disabled",Jt],tabIndex:[2,"tabIndex","tabIndex",i=>i==null?-1:Eo(i)],_allowFocusWhenDisabled:"_allowFocusWhenDisabled"}})}return e})(),VM=(()=>{class e{static \u0275fac=function(n){return new(n||e)};static \u0275dir=Ce({type:e,selectors:[["mat-chip-avatar"],["","matChipAvatar",""]],hostAttrs:["role","img",1,"mat-mdc-chip-avatar","mdc-evolution-chip__icon","mdc-evolution-chip__icon--primary"],features:[Bt([{provide:L_,useExisting:e}])]})}return e})();var B_=(()=>{class e{_changeDetectorRef=O(Cn);_elementRef=O(Ke);_ngZone=O(Ge);_focusMonitor=O(os);_globalRippleOptions=O(hh,{optional:!0});_document=O(yt);_onFocus=new De;_onBlur=new De;_isBasicChip;role=null;_hasFocusInternal=!1;_pendingFocus;_actionChanges;_animationsDisabled;_allLeadingIcons;_allTrailingIcons;_allRemoveIcons;_hasFocus(){return this._hasFocusInternal}id=O(yi).getId("mat-mdc-chip-");ariaLabel=null;ariaDescription=null;_ariaDescriptionId=`${this.id}-aria-description`;_chipListDisabled=!1;_textElement;get value(){return this._value!==void 0?this._value:this._textElement.textContent.trim()}set value(i){this._value=i}_value;color;removable=!0;highlighted=!1;disableRipple=!1;get disabled(){return this._disabled||this._chipListDisabled}set disabled(i){this._disabled=i}_disabled=!1;removed=new Yt;destroyed=new Yt;basicChipAttrName="mat-basic-chip";leadingIcon;trailingIcon;removeIcon;primaryAction;_rippleLoader=O(vh);_injector=O(Ct);constructor(){let i=O($i);i.load(du),i.load(sh);let n=O(xi,{optional:!0});this._animationsDisabled=n==="NoopAnimations",this._monitorFocus(),this._rippleLoader?.configureRipple(this._elementRef.nativeElement,{className:"mat-mdc-chip-ripple",disabled:this._isRippleDisabled()})}ngOnInit(){let i=this._elementRef.nativeElement;this._isBasicChip=i.hasAttribute(this.basicChipAttrName)||i.tagName.toLowerCase()===this.basicChipAttrName}ngAfterViewInit(){this._textElement=this._elementRef.nativeElement.querySelector(".mat-mdc-chip-action-label"),this._pendingFocus&&(this._pendingFocus=!1,this.focus())}ngAfterContentInit(){this._actionChanges=Hr(this._allLeadingIcons.changes,this._allTrailingIcons.changes,this._allRemoveIcons.changes).subscribe(()=>this._changeDetectorRef.markForCheck())}ngDoCheck(){this._rippleLoader.setDisabled(this._elementRef.nativeElement,this._isRippleDisabled())}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement),this._actionChanges?.unsubscribe(),this.destroyed.emit({chip:this}),this.destroyed.complete()}remove(){this.removable&&this.removed.emit({chip:this})}_isRippleDisabled(){return this.disabled||this.disableRipple||this._animationsDisabled||this._isBasicChip||!!this._globalRippleOptions?.disabled}_hasTrailingIcon(){return!!(this.trailingIcon||this.removeIcon)}_handleKeydown(i){(i.keyCode===8&&!i.repeat||i.keyCode===46)&&(i.preventDefault(),this.remove())}focus(){this.disabled||(this.primaryAction?this.primaryAction.focus():this._pendingFocus=!0)}_getSourceAction(i){return this._getActions().find(n=>{let r=n._elementRef.nativeElement;return r===i||r.contains(i)})}_getActions(){let i=[];return this.primaryAction&&i.push(this.primaryAction),this.removeIcon&&i.push(this.removeIcon),this.trailingIcon&&i.push(this.trailingIcon),i}_handlePrimaryActionInteraction(){}_monitorFocus(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(i=>{let n=i!==null;n!==this._hasFocusInternal&&(this._hasFocusInternal=n,n?this._onFocus.next({chip:this}):(this._changeDetectorRef.markForCheck(),setTimeout(()=>this._ngZone.run(()=>this._onBlur.next({chip:this})))))})}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=ye({type:e,selectors:[["mat-basic-chip"],["","mat-basic-chip",""],["mat-chip"],["","mat-chip",""]],contentQueries:function(n,r,o){if(n&1&&(qi(o,L_,5),qi(o,FM,5),qi(o,NM,5),qi(o,L_,5),qi(o,FM,5),qi(o,NM,5)),n&2){let a;Xe(a=Ze())&&(r.leadingIcon=a.first),Xe(a=Ze())&&(r.trailingIcon=a.first),Xe(a=Ze())&&(r.removeIcon=a.first),Xe(a=Ze())&&(r._allLeadingIcons=a),Xe(a=Ze())&&(r._allTrailingIcons=a),Xe(a=Ze())&&(r._allRemoveIcons=a)}},viewQuery:function(n,r){if(n&1&&Rt(LM,5),n&2){let o;Xe(o=Ze())&&(r.primaryAction=o.first)}},hostAttrs:[1,"mat-mdc-chip"],hostVars:31,hostBindings:function(n,r){n&1&&K("keydown",function(a){return r._handleKeydown(a)}),n&2&&(mr("id",r.id),pt("role",r.role)("aria-label",r.ariaLabel),wo("mat-"+(r.color||"primary")),pe("mdc-evolution-chip",!r._isBasicChip)("mdc-evolution-chip--disabled",r.disabled)("mdc-evolution-chip--with-trailing-action",r._hasTrailingIcon())("mdc-evolution-chip--with-primary-graphic",r.leadingIcon)("mdc-evolution-chip--with-primary-icon",r.leadingIcon)("mdc-evolution-chip--with-avatar",r.leadingIcon)("mat-mdc-chip-with-avatar",r.leadingIcon)("mat-mdc-chip-highlighted",r.highlighted)("mat-mdc-chip-disabled",r.disabled)("mat-mdc-basic-chip",r._isBasicChip)("mat-mdc-standard-chip",!r._isBasicChip)("mat-mdc-chip-with-trailing-icon",r._hasTrailingIcon())("_mat-animation-noopable",r._animationsDisabled))},inputs:{role:"role",id:"id",ariaLabel:[0,"aria-label","ariaLabel"],ariaDescription:[0,"aria-description","ariaDescription"],value:"value",color:"color",removable:[2,"removable","removable",Jt],highlighted:[2,"highlighted","highlighted",Jt],disableRipple:[2,"disableRipple","disableRipple",Jt],disabled:[2,"disabled","disabled",Jt]},outputs:{removed:"removed",destroyed:"destroyed"},exportAs:["matChip"],features:[Bt([{provide:jM,useExisting:e}])],ngContentSelectors:mj,decls:8,vars:3,consts:[[1,"mat-mdc-chip-focus-overlay"],[1,"mdc-evolution-chip__cell","mdc-evolution-chip__cell--primary"],["matChipAction","",3,"isInteractive"],[1,"mdc-evolution-chip__graphic","mat-mdc-chip-graphic"],[1,"mdc-evolution-chip__text-label","mat-mdc-chip-action-label"],[1,"mat-mdc-chip-primary-focus-indicator","mat-focus-indicator"],[1,"mdc-evolution-chip__cell","mdc-evolution-chip__cell--trailing"]],template:function(n,r){n&1&&(Gi(pj),L(0,"span",0),h(1,"span",1)(2,"span",2),G(3,fj,2,0,"span",3),h(4,"span",4),gt(5),L(6,"span",5),g()()(),G(7,hj,2,0,"span",6)),n&2&&(E(2),I("isInteractive",!1),E(),si(r.leadingIcon?3:-1),E(4),si(r._hasTrailingIcon()?7:-1))},dependencies:[LM],styles:[`.mdc-evolution-chip,.mdc-evolution-chip__cell,.mdc-evolution-chip__action{display:inline-flex;align-items:center}.mdc-evolution-chip{position:relative;max-width:100%}.mdc-evolution-chip__cell,.mdc-evolution-chip__action{height:100%}.mdc-evolution-chip__cell--primary{flex-basis:100%;overflow-x:hidden}.mdc-evolution-chip__cell--trailing{flex:1 0 auto}.mdc-evolution-chip__action{align-items:center;background:none;border:none;box-sizing:content-box;cursor:pointer;display:inline-flex;justify-content:center;outline:none;padding:0;text-decoration:none;color:inherit}.mdc-evolution-chip__action--presentational{cursor:auto}.mdc-evolution-chip--disabled,.mdc-evolution-chip__action:disabled{pointer-events:none}@media(forced-colors: active){.mdc-evolution-chip--disabled,.mdc-evolution-chip__action:disabled{forced-color-adjust:none}}.mdc-evolution-chip__action--primary{font:inherit;letter-spacing:inherit;white-space:inherit;overflow-x:hidden}.mat-mdc-standard-chip .mdc-evolution-chip__action--primary::before{border-width:var(--mdc-chip-outline-width, 1px);border-radius:var(--mdc-chip-container-shape-radius, 8px);box-sizing:border-box;content:"";height:100%;left:0;position:absolute;pointer-events:none;top:0;width:100%;z-index:1;border-style:solid}.mat-mdc-standard-chip .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:12px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:0;padding-right:12px}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:0}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__action--primary::before{border-color:var(--mdc-chip-outline-color, var(--mat-sys-outline))}.mdc-evolution-chip__action--primary:not(.mdc-evolution-chip__action--presentational):not(.mdc-ripple-upgraded):focus::before{border-color:var(--mdc-chip-focus-outline-color, var(--mat-sys-on-surface-variant))}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__action--primary::before{border-color:var(--mdc-chip-disabled-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-standard-chip.mdc-evolution-chip--selected .mdc-evolution-chip__action--primary::before{border-width:var(--mdc-chip-flat-selected-outline-width, 0)}.mat-mdc-basic-chip .mdc-evolution-chip__action--primary{font:inherit}.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:0}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:12px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:0;padding-right:12px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:0}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}.mdc-evolution-chip__action--trailing{position:relative;overflow:visible}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__action--trailing{color:var(--mdc-chip-with-trailing-icon-trailing-icon-color, var(--mat-sys-on-surface-variant))}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__action--trailing{color:var(--mdc-chip-with-trailing-icon-disabled-trailing-icon-color, var(--mat-sys-on-surface))}.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}.mdc-evolution-chip__text-label{-webkit-user-select:none;user-select:none;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.mat-mdc-standard-chip .mdc-evolution-chip__text-label{font-family:var(--mdc-chip-label-text-font, var(--mat-sys-label-large-font));line-height:var(--mdc-chip-label-text-line-height, var(--mat-sys-label-large-line-height));font-size:var(--mdc-chip-label-text-size, var(--mat-sys-label-large-size));font-weight:var(--mdc-chip-label-text-weight, var(--mat-sys-label-large-weight));letter-spacing:var(--mdc-chip-label-text-tracking, var(--mat-sys-label-large-tracking))}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__text-label{color:var(--mdc-chip-label-text-color, var(--mat-sys-on-surface-variant))}.mat-mdc-standard-chip.mdc-evolution-chip--selected:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__text-label{color:var(--mdc-chip-selected-label-text-color, var(--mat-sys-on-secondary-container))}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__text-label,.mat-mdc-standard-chip.mdc-evolution-chip--selected.mdc-evolution-chip--disabled .mdc-evolution-chip__text-label{color:var(--mdc-chip-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-evolution-chip__graphic{align-items:center;display:inline-flex;justify-content:center;overflow:hidden;pointer-events:none;position:relative;flex:1 0 auto}.mat-mdc-standard-chip .mdc-evolution-chip__graphic{width:var(--mdc-chip-with-avatar-avatar-size, 24px);height:var(--mdc-chip-with-avatar-avatar-size, 24px);font-size:var(--mdc-chip-with-avatar-avatar-size, 24px)}.mdc-evolution-chip--selecting .mdc-evolution-chip__graphic{transition:width 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--selectable:not(.mdc-evolution-chip--selected):not(.mdc-evolution-chip--with-primary-icon) .mdc-evolution-chip__graphic{width:0}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic{padding-left:6px;padding-right:6px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic{padding-left:4px;padding-right:8px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic{padding-left:8px;padding-right:4px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic{padding-left:6px;padding-right:6px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic{padding-left:4px;padding-right:8px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic{padding-left:8px;padding-right:4px}.mdc-evolution-chip__checkmark{position:absolute;opacity:0;top:50%;left:50%;height:20px;width:20px}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__checkmark{color:var(--mdc-chip-with-icon-selected-icon-color, var(--mat-sys-on-secondary-container))}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__checkmark{color:var(--mdc-chip-with-icon-disabled-icon-color, var(--mat-sys-on-surface))}.mdc-evolution-chip--selecting .mdc-evolution-chip__checkmark{transition:transform 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1);transform:translate(-75%, -50%)}.mdc-evolution-chip--selected .mdc-evolution-chip__checkmark{transform:translate(-50%, -50%);opacity:1}.mdc-evolution-chip__checkmark-svg{display:block}.mdc-evolution-chip__checkmark-path{stroke-width:2px;stroke-dasharray:29.7833385;stroke-dashoffset:29.7833385;stroke:currentColor}.mdc-evolution-chip--selecting .mdc-evolution-chip__checkmark-path{transition:stroke-dashoffset 150ms 45ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--selected .mdc-evolution-chip__checkmark-path{stroke-dashoffset:0}@media(forced-colors: active){.mdc-evolution-chip__checkmark-path{stroke:CanvasText !important}}.mat-mdc-standard-chip .mdc-evolution-chip__icon--trailing{height:18px;width:18px;font-size:18px}.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing.mat-mdc-chip-remove{opacity:calc(var(--mat-chip-trailing-action-opacity, 1)*var(--mdc-chip-with-trailing-icon-disabled-trailing-icon-opacity, 0.38))}.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing.mat-mdc-chip-remove:focus{opacity:calc(var(--mat-chip-trailing-action-focus-opacity, 1)*var(--mdc-chip-with-trailing-icon-disabled-trailing-icon-opacity, 0.38))}.mat-mdc-standard-chip{border-radius:var(--mdc-chip-container-shape-radius, 8px);height:var(--mdc-chip-container-height, 32px)}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled){background-color:var(--mdc-chip-elevated-container-color, transparent)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled{background-color:var(--mdc-chip-elevated-disabled-container-color)}.mat-mdc-standard-chip.mdc-evolution-chip--selected:not(.mdc-evolution-chip--disabled){background-color:var(--mdc-chip-elevated-selected-container-color, var(--mat-sys-secondary-container))}.mat-mdc-standard-chip.mdc-evolution-chip--selected.mdc-evolution-chip--disabled{background-color:var(--mdc-chip-flat-disabled-selected-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}@media(forced-colors: active){.mat-mdc-standard-chip{outline:solid 1px}}.mat-mdc-standard-chip .mdc-evolution-chip__icon--primary{border-radius:var(--mdc-chip-with-avatar-avatar-shape-radius, 24px);width:var(--mdc-chip-with-icon-icon-size, 18px);height:var(--mdc-chip-with-icon-icon-size, 18px);font-size:var(--mdc-chip-with-icon-icon-size, 18px)}.mdc-evolution-chip--selected .mdc-evolution-chip__icon--primary{opacity:0}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__icon--primary{color:var(--mdc-chip-with-icon-icon-color, var(--mat-sys-on-surface-variant))}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--primary{color:var(--mdc-chip-with-icon-disabled-icon-color, var(--mat-sys-on-surface))}.mat-mdc-chip-highlighted{--mdc-chip-with-icon-icon-color:var(--mdc-chip-with-icon-selected-icon-color, var(--mat-sys-on-secondary-container));--mdc-chip-elevated-container-color:var(--mdc-chip-elevated-selected-container-color, var(--mat-sys-secondary-container));--mdc-chip-label-text-color:var(--mdc-chip-selected-label-text-color, var(--mat-sys-on-secondary-container));--mdc-chip-outline-width:var(--mdc-chip-flat-selected-outline-width, 0)}.mat-mdc-chip-focus-overlay{background:var(--mdc-chip-focus-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-chip-selected .mat-mdc-chip-focus-overlay,.mat-mdc-chip-highlighted .mat-mdc-chip-focus-overlay{background:var(--mdc-chip-selected-focus-state-layer-color, var(--mat-sys-on-secondary-container))}.mat-mdc-chip:hover .mat-mdc-chip-focus-overlay{background:var(--mdc-chip-hover-state-layer-color, var(--mat-sys-on-surface-variant));opacity:var(--mdc-chip-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-chip-focus-overlay .mat-mdc-chip-selected:hover,.mat-mdc-chip-highlighted:hover .mat-mdc-chip-focus-overlay{background:var(--mdc-chip-selected-hover-state-layer-color, var(--mat-sys-on-secondary-container));opacity:var(--mdc-chip-selected-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-chip.cdk-focused .mat-mdc-chip-focus-overlay{background:var(--mdc-chip-focus-state-layer-color, var(--mat-sys-on-surface-variant));opacity:var(--mdc-chip-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-chip-selected.cdk-focused .mat-mdc-chip-focus-overlay,.mat-mdc-chip-highlighted.cdk-focused .mat-mdc-chip-focus-overlay{background:var(--mdc-chip-selected-focus-state-layer-color, var(--mat-sys-on-secondary-container));opacity:var(--mdc-chip-selected-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-evolution-chip--disabled:not(.mdc-evolution-chip--selected) .mat-mdc-chip-avatar{opacity:var(--mdc-chip-with-avatar-disabled-avatar-opacity, 0.38)}.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing{opacity:var(--mdc-chip-with-trailing-icon-disabled-trailing-icon-opacity, 0.38)}.mdc-evolution-chip--disabled.mdc-evolution-chip--selected .mdc-evolution-chip__checkmark{opacity:var(--mdc-chip-with-icon-disabled-icon-opacity, 0.38)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled{opacity:var(--mat-chip-disabled-container-opacity, 1)}.mat-mdc-standard-chip.mdc-evolution-chip--selected .mdc-evolution-chip__icon--trailing,.mat-mdc-standard-chip.mat-mdc-chip-highlighted .mdc-evolution-chip__icon--trailing{color:var(--mat-chip-selected-trailing-icon-color, var(--mat-sys-on-secondary-container))}.mat-mdc-standard-chip.mdc-evolution-chip--selected.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing,.mat-mdc-standard-chip.mat-mdc-chip-highlighted.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing{color:var(--mat-chip-selected-disabled-trailing-icon-color, var(--mat-sys-on-surface))}.mat-mdc-chip-remove{opacity:var(--mat-chip-trailing-action-opacity, 1)}.mat-mdc-chip-remove:focus{opacity:var(--mat-chip-trailing-action-focus-opacity, 1)}.mat-mdc-chip-remove::after{background-color:var(--mat-chip-trailing-action-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-chip-remove:hover::after{opacity:var(--mat-chip-trailing-action-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-chip-remove:focus::after{opacity:var(--mat-chip-trailing-action-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-chip-selected .mat-mdc-chip-remove::after,.mat-mdc-chip-highlighted .mat-mdc-chip-remove::after{background-color:var(--mat-chip-selected-trailing-action-state-layer-color, var(--mat-sys-on-secondary-container))}.mat-mdc-standard-chip{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-standard-chip .mdc-evolution-chip__cell--primary,.mat-mdc-standard-chip .mdc-evolution-chip__action--primary,.mat-mdc-standard-chip .mat-mdc-chip-action-label{overflow:visible}.mat-mdc-standard-chip .mat-mdc-chip-graphic,.mat-mdc-standard-chip .mat-mdc-chip-trailing-icon{box-sizing:content-box}.mat-mdc-standard-chip._mat-animation-noopable,.mat-mdc-standard-chip._mat-animation-noopable .mdc-evolution-chip__graphic,.mat-mdc-standard-chip._mat-animation-noopable .mdc-evolution-chip__checkmark,.mat-mdc-standard-chip._mat-animation-noopable .mdc-evolution-chip__checkmark-path{transition-duration:1ms;animation-duration:1ms}.mat-mdc-chip-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;opacity:0;border-radius:inherit;transition:opacity 150ms linear}._mat-animation-noopable .mat-mdc-chip-focus-overlay{transition:none}.mat-mdc-basic-chip .mat-mdc-chip-focus-overlay{display:none}.mat-mdc-chip .mat-ripple.mat-mdc-chip-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-chip-avatar{text-align:center;line-height:1;color:var(--mdc-chip-with-icon-icon-color, currentColor)}.mat-mdc-chip{position:relative;z-index:0}.mat-mdc-chip-action-label{text-align:left;z-index:1}[dir=rtl] .mat-mdc-chip-action-label{text-align:right}.mat-mdc-chip.mdc-evolution-chip--with-trailing-action .mat-mdc-chip-action-label{position:relative}.mat-mdc-chip-action-label .mat-mdc-chip-primary-focus-indicator{position:absolute;top:0;right:0;bottom:0;left:0;pointer-events:none}.mat-mdc-chip-action-label .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-chip-remove::before{margin:calc(var(--mat-focus-indicator-border-width, 3px)*-1);left:8px;right:8px}.mat-mdc-chip-remove::after{content:"";display:block;opacity:0;position:absolute;top:-3px;bottom:-3px;left:5px;right:5px;border-radius:50%;box-sizing:border-box;padding:12px;margin:-12px;background-clip:content-box}.mat-mdc-chip-remove .mat-icon{width:18px;height:18px;font-size:18px;box-sizing:content-box}.mat-chip-edit-input{cursor:text;display:inline-block;color:inherit;outline:0}@media(forced-colors: active){.mat-mdc-chip-selected:not(.mat-mdc-chip-multiple){outline-width:3px}}.mat-mdc-chip-action:focus .mat-focus-indicator::before{content:""}.mdc-evolution-chip__icon,.mat-mdc-chip-remove .mat-icon{min-height:fit-content}
`],encapsulation:2,changeDetection:0})}return e})();var zM=(()=>{class e{_elementRef=O(Ke);_changeDetectorRef=O(Cn);_dir=O(Vn,{optional:!0});_lastDestroyedFocusedChipIndex=null;_keyManager;_destroyed=new De;_defaultRole="presentation";get chipFocusChanges(){return this._getChipStream(i=>i._onFocus)}get chipDestroyedChanges(){return this._getChipStream(i=>i.destroyed)}get chipRemovedChanges(){return this._getChipStream(i=>i.removed)}get disabled(){return this._disabled}set disabled(i){this._disabled=i,this._syncChipsState()}_disabled=!1;get empty(){return!this._chips||this._chips.length===0}get role(){return this._explicitRole?this._explicitRole:this.empty?null:this._defaultRole}tabIndex=0;set role(i){this._explicitRole=i}_explicitRole=null;get focused(){return this._hasFocusedChip()}_chips;_chipActions=new el;constructor(){}ngAfterViewInit(){this._setUpFocusManagement(),this._trackChipSetChanges(),this._trackDestroyedFocusedChip()}ngOnDestroy(){this._keyManager?.destroy(),this._chipActions.destroy(),this._destroyed.next(),this._destroyed.complete()}_hasFocusedChip(){return this._chips&&this._chips.some(i=>i._hasFocus())}_syncChipsState(){this._chips?.forEach(i=>{i._chipListDisabled=this._disabled,i._changeDetectorRef.markForCheck()})}focus(){}_handleKeydown(i){this._originatesFromChip(i)&&this._keyManager.onKeydown(i)}_isValidIndex(i){return i>=0&&i<this._chips.length}_allowFocusEscape(){let i=this._elementRef.nativeElement.tabIndex;i!==-1&&(this._elementRef.nativeElement.tabIndex=-1,setTimeout(()=>this._elementRef.nativeElement.tabIndex=i))}_getChipStream(i){return this._chips.changes.pipe(cn(null),Uh(()=>Hr(...this._chips.map(i))))}_originatesFromChip(i){let n=i.target;for(;n&&n!==this._elementRef.nativeElement;){if(n.classList.contains("mat-mdc-chip"))return!0;n=n.parentElement}return!1}_setUpFocusManagement(){this._chips.changes.pipe(cn(this._chips)).subscribe(i=>{let n=[];i.forEach(r=>r._getActions().forEach(o=>n.push(o))),this._chipActions.reset(n),this._chipActions.notifyOnChanges()}),this._keyManager=new cu(this._chipActions).withVerticalOrientation().withHorizontalOrientation(this._dir?this._dir.value:"ltr").withHomeAndEnd().skipPredicate(i=>this._skipPredicate(i)),this.chipFocusChanges.pipe(ai(this._destroyed)).subscribe(({chip:i})=>{let n=i._getSourceAction(document.activeElement);n&&this._keyManager.updateActiveItem(n)}),this._dir?.change.pipe(ai(this._destroyed)).subscribe(i=>this._keyManager.withHorizontalOrientation(i))}_skipPredicate(i){return!i.isInteractive||i.disabled}_trackChipSetChanges(){this._chips.changes.pipe(cn(null),ai(this._destroyed)).subscribe(()=>{this.disabled&&Promise.resolve().then(()=>this._syncChipsState()),this._redirectDestroyedChipFocus()})}_trackDestroyedFocusedChip(){this.chipDestroyedChanges.pipe(ai(this._destroyed)).subscribe(i=>{let r=this._chips.toArray().indexOf(i.chip);this._isValidIndex(r)&&i.chip._hasFocus()&&(this._lastDestroyedFocusedChipIndex=r)})}_redirectDestroyedChipFocus(){if(this._lastDestroyedFocusedChipIndex!=null){if(this._chips.length){let i=Math.min(this._lastDestroyedFocusedChipIndex,this._chips.length-1),n=this._chips.toArray()[i];n.disabled?this._chips.length===1?this.focus():this._keyManager.setPreviousItemActive():n.focus()}else this.focus();this._lastDestroyedFocusedChipIndex=null}}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=ye({type:e,selectors:[["mat-chip-set"]],contentQueries:function(n,r,o){if(n&1&&qi(o,B_,5),n&2){let a;Xe(a=Ze())&&(r._chips=a)}},hostAttrs:[1,"mat-mdc-chip-set","mdc-evolution-chip-set"],hostVars:1,hostBindings:function(n,r){n&1&&K("keydown",function(a){return r._handleKeydown(a)}),n&2&&pt("role",r.role)},inputs:{disabled:[2,"disabled","disabled",Jt],role:"role",tabIndex:[2,"tabIndex","tabIndex",i=>i==null?0:Eo(i)]},ngContentSelectors:gj,decls:2,vars:0,consts:[["role","presentation",1,"mdc-evolution-chip-set__chips"]],template:function(n,r){n&1&&(Gi(),h(0,"div",0),gt(1),g())},styles:[`.mat-mdc-chip-set{display:flex}.mat-mdc-chip-set:focus{outline:none}.mat-mdc-chip-set .mdc-evolution-chip-set__chips{min-width:100%;margin-left:-8px;margin-right:0}.mat-mdc-chip-set .mdc-evolution-chip{margin:4px 0 4px 8px}[dir=rtl] .mat-mdc-chip-set .mdc-evolution-chip-set__chips{margin-left:0;margin-right:-8px}[dir=rtl] .mat-mdc-chip-set .mdc-evolution-chip{margin-left:0;margin-right:8px}.mdc-evolution-chip-set__chips{display:flex;flex-flow:wrap;min-width:0}.mat-mdc-chip-set-stacked{flex-direction:column;align-items:flex-start}.mat-mdc-chip-set-stacked .mat-mdc-chip{width:100%}.mat-mdc-chip-set-stacked .mdc-evolution-chip__graphic{flex-grow:0}.mat-mdc-chip-set-stacked .mdc-evolution-chip__action--primary{flex-basis:100%;justify-content:start}input.mat-mdc-chip-input{flex:1 0 150px;margin-left:8px}[dir=rtl] input.mat-mdc-chip-input{margin-left:0;margin-right:8px}
`],encapsulation:2,changeDetection:0})}return e})();var HM=(()=>{class e{static \u0275fac=function(n){return new(n||e)};static \u0275mod=ze({type:e});static \u0275inj=Ve({providers:[bh,{provide:vj,useValue:{separatorKeyCodes:[13]}}],imports:[st,_h,st]})}return e})();var Xc=class{_attachedHost;attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;t!=null&&(this._attachedHost=null,t.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(t){this._attachedHost=t}},Br=class extends Xc{component;viewContainerRef;injector;componentFactoryResolver;projectableNodes;constructor(t,i,n,r,o){super(),this.component=t,this.viewContainerRef=i,this.injector=n,this.projectableNodes=o}},vo=class extends Xc{templateRef;viewContainerRef;context;injector;constructor(t,i,n,r){super(),this.templateRef=t,this.viewContainerRef=i,this.context=n,this.injector=r}get origin(){return this.templateRef.elementRef}attach(t,i=this.context){return this.context=i,super.attach(t)}detach(){return this.context=void 0,super.detach()}},Ch=class extends Xc{element;constructor(t){super(),this.element=t instanceof Ke?t.nativeElement:t}},_o=class{_attachedPortal;_disposeFn;_isDisposed=!1;hasAttached(){return!!this._attachedPortal}attach(t){if(t instanceof Br)return this._attachedPortal=t,this.attachComponentPortal(t);if(t instanceof vo)return this._attachedPortal=t,this.attachTemplatePortal(t);if(this.attachDomPortal&&t instanceof Ch)return this._attachedPortal=t,this.attachDomPortal(t)}attachDomPortal=null;detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var pu=class extends _o{outletElement;_appRef;_defaultInjector;_document;constructor(t,i,n,r,o){super(),this.outletElement=t,this._appRef=n,this._defaultInjector=r,this._document=o}attachComponentPortal(t){let i;if(t.viewContainerRef){let n=t.injector||t.viewContainerRef.injector,r=n.get(Gh,null,{optional:!0})||void 0;i=t.viewContainerRef.createComponent(t.component,{index:t.viewContainerRef.length,injector:n,ngModuleRef:r,projectableNodes:t.projectableNodes||void 0}),this.setDisposeFn(()=>i.destroy())}else{let n=this._appRef,r=t.injector||this._defaultInjector||Ct.NULL,o=r.get(fs,n.injector);i=Ou(t.component,{elementInjector:r,environmentInjector:o,projectableNodes:t.projectableNodes||void 0}),n.attachView(i.hostView),this.setDisposeFn(()=>{n.viewCount>0&&n.detachView(i.hostView),i.destroy()})}return this.outletElement.appendChild(this._getComponentRootNode(i)),this._attachedPortal=t,i}attachTemplatePortal(t){let i=t.viewContainerRef,n=i.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return n.rootNodes.forEach(r=>this.outletElement.appendChild(r)),n.detectChanges(),this.setDisposeFn(()=>{let r=i.indexOf(n);r!==-1&&i.remove(r)}),this._attachedPortal=t,n}attachDomPortal=t=>{let i=t.element;i.parentNode;let n=this._document.createComment("dom-portal");i.parentNode.insertBefore(n,i),this.outletElement.appendChild(i),this._attachedPortal=t,super.setDisposeFn(()=>{n.parentNode&&n.parentNode.replaceChild(i,n)})};dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}};var bo=(()=>{class e extends _o{_moduleRef=O(Gh,{optional:!0});_document=O(yt);_viewContainerRef=O(Au);_isInitialized=!1;_attachedRef;constructor(){super()}get portal(){return this._attachedPortal}set portal(i){this.hasAttached()&&!i&&!this._isInitialized||(this.hasAttached()&&super.detach(),i&&super.attach(i),this._attachedPortal=i||null)}attached=new Yt;get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(i){i.setAttachedHost(this);let n=i.viewContainerRef!=null?i.viewContainerRef:this._viewContainerRef,r=n.createComponent(i.component,{index:n.length,injector:i.injector||n.injector,projectableNodes:i.projectableNodes||void 0,ngModuleRef:this._moduleRef||void 0});return n!==this._viewContainerRef&&this._getRootNode().appendChild(r.hostView.rootNodes[0]),super.setDisposeFn(()=>r.destroy()),this._attachedPortal=i,this._attachedRef=r,this.attached.emit(r),r}attachTemplatePortal(i){i.setAttachedHost(this);let n=this._viewContainerRef.createEmbeddedView(i.templateRef,i.context,{injector:i.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=i,this._attachedRef=n,this.attached.emit(n),n}attachDomPortal=i=>{let n=i.element;n.parentNode;let r=this._document.createComment("dom-portal");i.setAttachedHost(this),n.parentNode.insertBefore(r,n),this._getRootNode().appendChild(n),this._attachedPortal=i,super.setDisposeFn(()=>{r.parentNode&&r.parentNode.replaceChild(n,r)})};_getRootNode(){let i=this._viewContainerRef.element.nativeElement;return i.nodeType===i.ELEMENT_NODE?i:i.parentNode}static \u0275fac=function(n){return new(n||e)};static \u0275dir=Ce({type:e,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[lt]})}return e})();var jr=(()=>{class e{static \u0275fac=function(n){return new(n||e)};static \u0275mod=ze({type:e});static \u0275inj=Ve({})}return e})();var bj=20,j_=(()=>{class e{_ngZone=O(Ge);_platform=O(ht);_renderer=O(dn).createRenderer(null,null);_cleanupGlobalListener;constructor(){}_scrolled=new De;_scrolledCount=0;scrollContainers=new Map;register(i){this.scrollContainers.has(i)||this.scrollContainers.set(i,i.elementScrolled().subscribe(()=>this._scrolled.next(i)))}deregister(i){let n=this.scrollContainers.get(i);n&&(n.unsubscribe(),this.scrollContainers.delete(i))}scrolled(i=bj){return this._platform.isBrowser?new zr(n=>{this._cleanupGlobalListener||(this._cleanupGlobalListener=this._ngZone.runOutsideAngular(()=>this._renderer.listen("document","scroll",()=>this._scrolled.next())));let r=i>0?this._scrolled.pipe(zh(i)).subscribe(n):this._scrolled.subscribe(n);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||(this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0)}}):$n()}ngOnDestroy(){this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0,this.scrollContainers.forEach((i,n)=>this.deregister(n)),this._scrolled.complete()}ancestorScrolled(i,n){let r=this.getAncestorScrollContainers(i);return this.scrolled(n).pipe(Oi(o=>!o||r.indexOf(o)>-1))}getAncestorScrollContainers(i){let n=[];return this.scrollContainers.forEach((r,o)=>{this._scrollableContainsElement(o,i)&&n.push(o)}),n}_scrollableContainsElement(i,n){let r=bn(n),o=i.getElementRef().nativeElement;do if(r==o)return!0;while(r=r.parentElement);return!1}static \u0275fac=function(n){return new(n||e)};static \u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),WM=(()=>{class e{elementRef=O(Ke);scrollDispatcher=O(j_);ngZone=O(Ge);dir=O(Vn,{optional:!0});_scrollElement=this.elementRef.nativeElement;_destroyed=new De;_renderer=O(Ti);_cleanupScroll;_elementScrolled=new De;constructor(){}ngOnInit(){this._cleanupScroll=this.ngZone.runOutsideAngular(()=>this._renderer.listen(this._scrollElement,"scroll",i=>this._elementScrolled.next(i))),this.scrollDispatcher.register(this)}ngOnDestroy(){this._cleanupScroll?.(),this._elementScrolled.complete(),this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(i){let n=this.elementRef.nativeElement,r=this.dir&&this.dir.value=="rtl";i.left==null&&(i.left=r?i.end:i.start),i.right==null&&(i.right=r?i.start:i.end),i.bottom!=null&&(i.top=n.scrollHeight-n.clientHeight-i.bottom),r&&Gc()!=ur.NORMAL?(i.left!=null&&(i.right=n.scrollWidth-n.clientWidth-i.left),Gc()==ur.INVERTED?i.left=i.right:Gc()==ur.NEGATED&&(i.left=i.right?-i.right:i.right)):i.right!=null&&(i.left=n.scrollWidth-n.clientWidth-i.right),this._applyScrollToOptions(i)}_applyScrollToOptions(i){let n=this.elementRef.nativeElement;mh()?n.scrollTo(i):(i.top!=null&&(n.scrollTop=i.top),i.left!=null&&(n.scrollLeft=i.left))}measureScrollOffset(i){let n="left",r="right",o=this.elementRef.nativeElement;if(i=="top")return o.scrollTop;if(i=="bottom")return o.scrollHeight-o.clientHeight-o.scrollTop;let a=this.dir&&this.dir.value=="rtl";return i=="start"?i=a?r:n:i=="end"&&(i=a?n:r),a&&Gc()==ur.INVERTED?i==n?o.scrollWidth-o.clientWidth-o.scrollLeft:o.scrollLeft:a&&Gc()==ur.NEGATED?i==n?o.scrollLeft+o.scrollWidth-o.clientWidth:-o.scrollLeft:i==n?o.scrollLeft:o.scrollWidth-o.clientWidth-o.scrollLeft}static \u0275fac=function(n){return new(n||e)};static \u0275dir=Ce({type:e,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]})}return e})(),yj=20,V_=(()=>{class e{_platform=O(ht);_listeners;_viewportSize;_change=new De;_document=O(yt,{optional:!0});constructor(){let i=O(Ge),n=O(dn).createRenderer(null,null);i.runOutsideAngular(()=>{if(this._platform.isBrowser){let r=o=>this._change.next(o);this._listeners=[n.listen("window","resize",r),n.listen("window","orientationchange",r)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(i=>i()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let i={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),i}getViewportRect(){let i=this.getViewportScrollPosition(),{width:n,height:r}=this.getViewportSize();return{top:i.top,left:i.left,bottom:i.top+r,right:i.left+n,height:r,width:n}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let i=this._document,n=this._getWindow(),r=i.documentElement,o=r.getBoundingClientRect(),a=-o.top||i.body.scrollTop||n.scrollY||r.scrollTop||0,s=-o.left||i.body.scrollLeft||n.scrollX||r.scrollLeft||0;return{top:a,left:s}}change(i=yj){return i>0?this._change.pipe(zh(i)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let i=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:i.innerWidth,height:i.innerHeight}:{width:0,height:0}}static \u0275fac=function(n){return new(n||e)};static \u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var $M=(()=>{class e{static \u0275fac=function(n){return new(n||e)};static \u0275mod=ze({type:e});static \u0275inj=Ve({})}return e})(),z_=(()=>{class e{static \u0275fac=function(n){return new(n||e)};static \u0275mod=ze({type:e});static \u0275inj=Ve({imports:[ga,$M,ga,$M]})}return e})();var UM=mh(),Sh=class{_viewportRuler;_previousHTMLStyles={top:"",left:""};_previousScrollPosition;_isEnabled=!1;_document;constructor(t,i){this._viewportRuler=t,this._document=i}attach(){}enable(){if(this._canBeEnabled()){let t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=Qt(-this._previousScrollPosition.left),t.style.top=Qt(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let t=this._document.documentElement,i=this._document.body,n=t.style,r=i.style,o=n.scrollBehavior||"",a=r.scrollBehavior||"";this._isEnabled=!1,n.left=this._previousHTMLStyles.left,n.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),UM&&(n.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),UM&&(n.scrollBehavior=o,r.scrollBehavior=a)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let i=this._document.documentElement,n=this._viewportRuler.getViewportSize();return i.scrollHeight>n.height||i.scrollWidth>n.width}};var Mh=class{_scrollDispatcher;_ngZone;_viewportRuler;_config;_scrollSubscription=null;_overlayRef;_initialScrollPosition;constructor(t,i,n,r){this._scrollDispatcher=t,this._ngZone=i,this._viewportRuler=n,this._config=r}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(this._scrollSubscription)return;let t=this._scrollDispatcher.scrolled(0).pipe(Oi(i=>!i||!this._overlayRef.overlayElement.contains(i.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{let i=this._viewportRuler.getViewportScrollPosition().top;Math.abs(i-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}_detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}},mu=class{enable(){}disable(){}attach(){}};function H_(e,t){return t.some(i=>{let n=e.bottom<i.top,r=e.top>i.bottom,o=e.right<i.left,a=e.left>i.right;return n||r||o||a})}function GM(e,t){return t.some(i=>{let n=e.top<i.top,r=e.bottom>i.bottom,o=e.left<i.left,a=e.right>i.right;return n||r||o||a})}var Dh=class{_scrollDispatcher;_viewportRuler;_ngZone;_config;_scrollSubscription=null;_overlayRef;constructor(t,i,n,r){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=n,this._config=r}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(!this._scrollSubscription){let t=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(t).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let i=this._overlayRef.overlayElement.getBoundingClientRect(),{width:n,height:r}=this._viewportRuler.getViewportSize();H_(i,[{width:n,height:r,bottom:r,right:n,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},QM=(()=>{class e{_scrollDispatcher=O(j_);_viewportRuler=O(V_);_ngZone=O(Ge);_document=O(yt);constructor(){}noop=()=>new mu;close=i=>new Mh(this._scrollDispatcher,this._ngZone,this._viewportRuler,i);block=()=>new Sh(this._viewportRuler,this._document);reposition=i=>new Dh(this._scrollDispatcher,this._viewportRuler,this._ngZone,i);static \u0275fac=function(n){return new(n||e)};static \u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),va=class{positionStrategy;scrollStrategy=new mu;panelClass="";hasBackdrop=!1;backdropClass="cdk-overlay-dark-backdrop";width;height;minWidth;minHeight;maxWidth;maxHeight;direction;disposeOnNavigation=!1;constructor(t){if(t){let i=Object.keys(t);for(let n of i)t[n]!==void 0&&(this[n]=t[n])}}};var Ah=class{connectionPair;scrollableViewProperties;constructor(t,i){this.connectionPair=t,this.scrollableViewProperties=i}};var JM=(()=>{class e{_attachedOverlays=[];_document=O(yt);_isAttached;constructor(){}ngOnDestroy(){this.detach()}add(i){this.remove(i),this._attachedOverlays.push(i)}remove(i){let n=this._attachedOverlays.indexOf(i);n>-1&&this._attachedOverlays.splice(n,1),this._attachedOverlays.length===0&&this.detach()}static \u0275fac=function(n){return new(n||e)};static \u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),eD=(()=>{class e extends JM{_ngZone=O(Ge);_renderer=O(dn).createRenderer(null,null);_cleanupKeydown;add(i){super.add(i),this._isAttached||(this._ngZone.runOutsideAngular(()=>{this._cleanupKeydown=this._renderer.listen("body","keydown",this._keydownListener)}),this._isAttached=!0)}detach(){this._isAttached&&(this._cleanupKeydown?.(),this._isAttached=!1)}_keydownListener=i=>{let n=this._attachedOverlays;for(let r=n.length-1;r>-1;r--)if(n[r]._keydownEvents.observers.length>0){this._ngZone.run(()=>n[r]._keydownEvents.next(i));break}};static \u0275fac=(()=>{let i;return function(r){return(i||(i=ui(e)))(r||e)}})();static \u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),tD=(()=>{class e extends JM{_platform=O(ht);_ngZone=O(Ge);_renderer=O(dn).createRenderer(null,null);_cursorOriginalValue;_cursorStyleIsSet=!1;_pointerDownEventTarget;_cleanups;add(i){if(super.add(i),!this._isAttached){let n=this._document.body,r={capture:!0};this._cleanups=this._ngZone.runOutsideAngular(()=>[an(this._renderer,n,"pointerdown",this._pointerDownListener,r),an(this._renderer,n,"click",this._clickListener,r),an(this._renderer,n,"auxclick",this._clickListener,r),an(this._renderer,n,"contextmenu",this._clickListener,r)]),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=n.style.cursor,n.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){this._isAttached&&(this._cleanups?.forEach(i=>i()),this._cleanups=void 0,this._platform.IOS&&this._cursorStyleIsSet&&(this._document.body.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1)}_pointerDownListener=i=>{this._pointerDownEventTarget=on(i)};_clickListener=i=>{let n=on(i),r=i.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:n;this._pointerDownEventTarget=null;let o=this._attachedOverlays.slice();for(let a=o.length-1;a>-1;a--){let s=o[a];if(s._outsidePointerEvents.observers.length<1||!s.hasAttached())continue;if(qM(s.overlayElement,n)||qM(s.overlayElement,r))break;let c=s._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>c.next(i)):c.next(i)}};static \u0275fac=(()=>{let i;return function(r){return(i||(i=ui(e)))(r||e)}})();static \u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function qM(e,t){let i=typeof ShadowRoot<"u"&&ShadowRoot,n=t;for(;n;){if(n===e)return!0;n=i&&n instanceof ShadowRoot?n.host:n.parentNode}return!1}var iD=(()=>{class e{static \u0275fac=function(n){return new(n||e)};static \u0275cmp=ye({type:e,selectors:[["ng-component"]],hostAttrs:["cdk-overlay-style-loader",""],decls:0,vars:0,template:function(n,r){},styles:[`.cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed}@layer cdk-overlay{.cdk-overlay-container{z-index:1000}}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute}@layer cdk-overlay{.cdk-global-overlay-wrapper{z-index:1000}}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;display:flex;max-width:100%;max-height:100%}@layer cdk-overlay{.cdk-overlay-pane{z-index:1000}}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:auto;-webkit-tap-highlight-color:rgba(0,0,0,0);opacity:0;touch-action:manipulation}@layer cdk-overlay{.cdk-overlay-backdrop{z-index:1000;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}}@media(prefers-reduced-motion){.cdk-overlay-backdrop{transition-duration:1ms}}.cdk-overlay-backdrop-showing{opacity:1}@media(forced-colors: active){.cdk-overlay-backdrop-showing{opacity:.6}}@layer cdk-overlay{.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}}.cdk-overlay-transparent-backdrop{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing,.cdk-high-contrast-active .cdk-overlay-transparent-backdrop{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation{transition:none}.cdk-overlay-connected-position-bounding-box{position:absolute;display:flex;flex-direction:column;min-width:1px;min-height:1px}@layer cdk-overlay{.cdk-overlay-connected-position-bounding-box{z-index:1000}}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}
`],encapsulation:2,changeDetection:0})}return e})(),Rh=(()=>{class e{_platform=O(ht);_containerElement;_document=O(yt);_styleLoader=O($i);constructor(){}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._loadStyles(),this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let i="cdk-overlay-container";if(this._platform.isBrowser||C_()){let r=this._document.querySelectorAll(`.${i}[platform="server"], .${i}[platform="test"]`);for(let o=0;o<r.length;o++)r[o].remove()}let n=this._document.createElement("div");n.classList.add(i),C_()?n.setAttribute("platform","test"):this._platform.isBrowser||n.setAttribute("platform","server"),this._document.body.appendChild(n),this._containerElement=n}_loadStyles(){this._styleLoader.load(iD)}static \u0275fac=function(n){return new(n||e)};static \u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),$_=class{_renderer;_ngZone;element;_cleanupClick;_cleanupTransitionEnd;_fallbackTimeout;constructor(t,i,n,r){this._renderer=i,this._ngZone=n,this.element=t.createElement("div"),this.element.classList.add("cdk-overlay-backdrop"),this._cleanupClick=i.listen(this.element,"click",r)}detach(){this._ngZone.runOutsideAngular(()=>{let t=this.element;clearTimeout(this._fallbackTimeout),this._cleanupTransitionEnd?.(),this._cleanupTransitionEnd=this._renderer.listen(t,"transitionend",this.dispose),this._fallbackTimeout=setTimeout(this.dispose,500),t.style.pointerEvents="none",t.classList.remove("cdk-overlay-backdrop-showing")})}dispose=()=>{clearTimeout(this._fallbackTimeout),this._cleanupClick?.(),this._cleanupTransitionEnd?.(),this._cleanupClick=this._cleanupTransitionEnd=this._fallbackTimeout=void 0,this.element.remove()}},ls=class{_portalOutlet;_host;_pane;_config;_ngZone;_keyboardDispatcher;_document;_location;_outsideClickDispatcher;_animationsDisabled;_injector;_renderer;_backdropClick=new De;_attachments=new De;_detachments=new De;_positionStrategy;_scrollStrategy;_locationChanges=pr.EMPTY;_backdropRef=null;_previousHostParent;_keydownEvents=new De;_outsidePointerEvents=new De;_renders=new De;_afterRenderRef;_afterNextRenderRef;constructor(t,i,n,r,o,a,s,c,l,d=!1,u,p){this._portalOutlet=t,this._host=i,this._pane=n,this._config=r,this._ngZone=o,this._keyboardDispatcher=a,this._document=s,this._location=c,this._outsideClickDispatcher=l,this._animationsDisabled=d,this._injector=u,this._renderer=p,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy,this._afterRenderRef=Xn(()=>gs(()=>{this._renders.next()},{injector:this._injector}))}get overlayElement(){return this._pane}get backdropElement(){return this._backdropRef?.element||null}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let i=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=xo(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof i?.onDestroy=="function"&&i.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),i}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){let t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._backdropRef?.dispose(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=this._backdropRef=null,t&&this._detachments.next(),this._detachments.complete(),this._afterRenderRef.destroy(),this._renders.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=X(X({},this._config),t),this._updateElementSize()}setDirection(t){this._config=Be(X({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){let t=this._config.direction;return t?typeof t=="string"?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let t=this._pane.style;t.width=Qt(this._config.width),t.height=Qt(this._config.height),t.minWidth=Qt(this._config.minWidth),t.minHeight=Qt(this._config.minHeight),t.maxWidth=Qt(this._config.maxWidth),t.maxHeight=Qt(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){let t="cdk-overlay-backdrop-showing";this._backdropRef?.dispose(),this._backdropRef=new $_(this._document,this._renderer,this._ngZone,i=>{this._backdropClick.next(i)}),this._animationsDisabled&&this._backdropRef.element.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropRef.element,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropRef.element,this._host),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this._backdropRef?.element.classList.add(t))}):this._backdropRef.element.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){this._animationsDisabled?(this._backdropRef?.dispose(),this._backdropRef=null):this._backdropRef?.detach()}_toggleClasses(t,i,n){let r=Wc(i||[]).filter(o=>!!o);r.length&&(n?t.classList.add(...r):t.classList.remove(...r))}_detachContentWhenEmpty(){this._ngZone.runOutsideAngular(()=>{let t=this._renders.pipe(ai(Hr(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){let t=this._scrollStrategy;t?.disable(),t?.detach?.()}},YM="cdk-overlay-connected-position-bounding-box",wj=/([A-Za-z%]+)$/,Ph=class{_viewportRuler;_document;_platform;_overlayContainer;_overlayRef;_isInitialRender;_lastBoundingBoxSize={width:0,height:0};_isPushed=!1;_canPush=!0;_growAfterOpen=!1;_hasFlexibleDimensions=!0;_positionLocked=!1;_originRect;_overlayRect;_viewportRect;_containerRect;_viewportMargin=0;_scrollables=[];_preferredPositions=[];_origin;_pane;_isDisposed;_boundingBox;_lastPosition;_lastScrollVisibility;_positionChanges=new De;_resizeSubscription=pr.EMPTY;_offsetX=0;_offsetY=0;_transformOriginSelector;_appliedPanelClasses=[];_previousPushAmount;positionChanges=this._positionChanges;get positions(){return this._preferredPositions}constructor(t,i,n,r,o){this._viewportRuler=i,this._document=n,this._platform=r,this._overlayContainer=o,this.setOrigin(t)}attach(t){this._overlayRef&&this._overlayRef,this._validatePositions(),t.hostElement.classList.add(YM),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let t=this._originRect,i=this._overlayRect,n=this._viewportRect,r=this._containerRect,o=[],a;for(let s of this._preferredPositions){let c=this._getOriginPoint(t,r,s),l=this._getOverlayPoint(c,i,s),d=this._getOverlayFit(l,i,n,s);if(d.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(s,c);return}if(this._canFitWithFlexibleDimensions(d,l,n)){o.push({position:s,origin:c,overlayRect:i,boundingBoxRect:this._calculateBoundingBoxRect(c,s)});continue}(!a||a.overlayFit.visibleArea<d.visibleArea)&&(a={overlayFit:d,overlayPoint:l,originPoint:c,position:s,overlayRect:i})}if(o.length){let s=null,c=-1;for(let l of o){let d=l.boundingBoxRect.width*l.boundingBoxRect.height*(l.position.weight||1);d>c&&(c=d,s=l)}this._isPushed=!1,this._applyPosition(s.position,s.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(a.position,a.originPoint);return}this._applyPosition(a.position,a.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&cs(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(YM),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let i=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,i)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,t.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,i,n){let r;if(n.originX=="center")r=t.left+t.width/2;else{let a=this._isRtl()?t.right:t.left,s=this._isRtl()?t.left:t.right;r=n.originX=="start"?a:s}i.left<0&&(r-=i.left);let o;return n.originY=="center"?o=t.top+t.height/2:o=n.originY=="top"?t.top:t.bottom,i.top<0&&(o-=i.top),{x:r,y:o}}_getOverlayPoint(t,i,n){let r;n.overlayX=="center"?r=-i.width/2:n.overlayX==="start"?r=this._isRtl()?-i.width:0:r=this._isRtl()?0:-i.width;let o;return n.overlayY=="center"?o=-i.height/2:o=n.overlayY=="top"?0:-i.height,{x:t.x+r,y:t.y+o}}_getOverlayFit(t,i,n,r){let o=XM(i),{x:a,y:s}=t,c=this._getOffset(r,"x"),l=this._getOffset(r,"y");c&&(a+=c),l&&(s+=l);let d=0-a,u=a+o.width-n.width,p=0-s,m=s+o.height-n.height,f=this._subtractOverflows(o.width,d,u),_=this._subtractOverflows(o.height,p,m),b=f*_;return{visibleArea:b,isCompletelyWithinViewport:o.width*o.height===b,fitsInViewportVertically:_===o.height,fitsInViewportHorizontally:f==o.width}}_canFitWithFlexibleDimensions(t,i,n){if(this._hasFlexibleDimensions){let r=n.bottom-i.y,o=n.right-i.x,a=KM(this._overlayRef.getConfig().minHeight),s=KM(this._overlayRef.getConfig().minWidth),c=t.fitsInViewportVertically||a!=null&&a<=r,l=t.fitsInViewportHorizontally||s!=null&&s<=o;return c&&l}return!1}_pushOverlayOnScreen(t,i,n){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};let r=XM(i),o=this._viewportRect,a=Math.max(t.x+r.width-o.width,0),s=Math.max(t.y+r.height-o.height,0),c=Math.max(o.top-n.top-t.y,0),l=Math.max(o.left-n.left-t.x,0),d=0,u=0;return r.width<=o.width?d=l||-a:d=t.x<this._viewportMargin?o.left-n.left-t.x:0,r.height<=o.height?u=c||-s:u=t.y<this._viewportMargin?o.top-n.top-t.y:0,this._previousPushAmount={x:d,y:u},{x:t.x+d,y:t.y+u}}_applyPosition(t,i){if(this._setTransformOrigin(t),this._setOverlayElementStyles(i,t),this._setBoundingBoxStyles(i,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._positionChanges.observers.length){let n=this._getScrollVisibility();if(t!==this._lastPosition||!this._lastScrollVisibility||!Ej(this._lastScrollVisibility,n)){let r=new Ah(t,n);this._positionChanges.next(r)}this._lastScrollVisibility=n}this._lastPosition=t,this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;let i=this._boundingBox.querySelectorAll(this._transformOriginSelector),n,r=t.overlayY;t.overlayX==="center"?n="center":this._isRtl()?n=t.overlayX==="start"?"right":"left":n=t.overlayX==="start"?"left":"right";for(let o=0;o<i.length;o++)i[o].style.transformOrigin=`${n} ${r}`}_calculateBoundingBoxRect(t,i){let n=this._viewportRect,r=this._isRtl(),o,a,s;if(i.overlayY==="top")a=t.y,o=n.height-a+this._viewportMargin;else if(i.overlayY==="bottom")s=n.height-t.y+this._viewportMargin*2,o=n.height-s+this._viewportMargin;else{let m=Math.min(n.bottom-t.y+n.top,t.y),f=this._lastBoundingBoxSize.height;o=m*2,a=t.y-m,o>f&&!this._isInitialRender&&!this._growAfterOpen&&(a=t.y-f/2)}let c=i.overlayX==="start"&&!r||i.overlayX==="end"&&r,l=i.overlayX==="end"&&!r||i.overlayX==="start"&&r,d,u,p;if(l)p=n.width-t.x+this._viewportMargin*2,d=t.x-this._viewportMargin;else if(c)u=t.x,d=n.right-t.x;else{let m=Math.min(n.right-t.x+n.left,t.x),f=this._lastBoundingBoxSize.width;d=m*2,u=t.x-m,d>f&&!this._isInitialRender&&!this._growAfterOpen&&(u=t.x-f/2)}return{top:a,left:u,bottom:s,right:p,width:d,height:o}}_setBoundingBoxStyles(t,i){let n=this._calculateBoundingBoxRect(t,i);!this._isInitialRender&&!this._growAfterOpen&&(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));let r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{let o=this._overlayRef.getConfig().maxHeight,a=this._overlayRef.getConfig().maxWidth;r.height=Qt(n.height),r.top=Qt(n.top),r.bottom=Qt(n.bottom),r.width=Qt(n.width),r.left=Qt(n.left),r.right=Qt(n.right),i.overlayX==="center"?r.alignItems="center":r.alignItems=i.overlayX==="end"?"flex-end":"flex-start",i.overlayY==="center"?r.justifyContent="center":r.justifyContent=i.overlayY==="bottom"?"flex-end":"flex-start",o&&(r.maxHeight=Qt(o)),a&&(r.maxWidth=Qt(a))}this._lastBoundingBoxSize=n,cs(this._boundingBox.style,r)}_resetBoundingBoxStyles(){cs(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){cs(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,i){let n={},r=this._hasExactPosition(),o=this._hasFlexibleDimensions,a=this._overlayRef.getConfig();if(r){let d=this._viewportRuler.getViewportScrollPosition();cs(n,this._getExactOverlayY(i,t,d)),cs(n,this._getExactOverlayX(i,t,d))}else n.position="static";let s="",c=this._getOffset(i,"x"),l=this._getOffset(i,"y");c&&(s+=`translateX(${c}px) `),l&&(s+=`translateY(${l}px)`),n.transform=s.trim(),a.maxHeight&&(r?n.maxHeight=Qt(a.maxHeight):o&&(n.maxHeight="")),a.maxWidth&&(r?n.maxWidth=Qt(a.maxWidth):o&&(n.maxWidth="")),cs(this._pane.style,n)}_getExactOverlayY(t,i,n){let r={top:"",bottom:""},o=this._getOverlayPoint(i,this._overlayRect,t);if(this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,n)),t.overlayY==="bottom"){let a=this._document.documentElement.clientHeight;r.bottom=`${a-(o.y+this._overlayRect.height)}px`}else r.top=Qt(o.y);return r}_getExactOverlayX(t,i,n){let r={left:"",right:""},o=this._getOverlayPoint(i,this._overlayRect,t);this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,n));let a;if(this._isRtl()?a=t.overlayX==="end"?"left":"right":a=t.overlayX==="end"?"right":"left",a==="right"){let s=this._document.documentElement.clientWidth;r.right=`${s-(o.x+this._overlayRect.width)}px`}else r.left=Qt(o.x);return r}_getScrollVisibility(){let t=this._getOriginRect(),i=this._pane.getBoundingClientRect(),n=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:GM(t,n),isOriginOutsideView:H_(t,n),isOverlayClipped:GM(i,n),isOverlayOutsideView:H_(i,n)}}_subtractOverflows(t,...i){return i.reduce((n,r)=>n-Math.max(r,0),t)}_getNarrowedViewportRect(){let t=this._document.documentElement.clientWidth,i=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+t-this._viewportMargin,bottom:n.top+i-this._viewportMargin,width:t-2*this._viewportMargin,height:i-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,i){return i==="x"?t.offsetX==null?this._offsetX:t.offsetX:t.offsetY==null?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&Wc(t).forEach(i=>{i!==""&&this._appliedPanelClasses.indexOf(i)===-1&&(this._appliedPanelClasses.push(i),this._pane.classList.add(i))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){let t=this._origin;if(t instanceof Ke)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();let i=t.width||0,n=t.height||0;return{top:t.y,bottom:t.y+n,left:t.x,right:t.x+i,height:n,width:i}}};function cs(e,t){for(let i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}function KM(e){if(typeof e!="number"&&e!=null){let[t,i]=e.split(wj);return!i||i==="px"?parseFloat(t):null}return e||null}function XM(e){return{top:Math.floor(e.top),right:Math.floor(e.right),bottom:Math.floor(e.bottom),left:Math.floor(e.left),width:Math.floor(e.width),height:Math.floor(e.height)}}function Ej(e,t){return e===t?!0:e.isOriginClipped===t.isOriginClipped&&e.isOriginOutsideView===t.isOriginOutsideView&&e.isOverlayClipped===t.isOverlayClipped&&e.isOverlayOutsideView===t.isOverlayOutsideView}var ZM="cdk-global-overlay-wrapper",kh=class{_overlayRef;_cssPosition="static";_topOffset="";_bottomOffset="";_alignItems="";_xPosition="";_xOffset="";_width="";_height="";_isDisposed=!1;attach(t){let i=t.getConfig();this._overlayRef=t,this._width&&!i.width&&t.updateSize({width:this._width}),this._height&&!i.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(ZM),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let t=this._overlayRef.overlayElement.style,i=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:r,height:o,maxWidth:a,maxHeight:s}=n,c=(r==="100%"||r==="100vw")&&(!a||a==="100%"||a==="100vw"),l=(o==="100%"||o==="100vh")&&(!s||s==="100%"||s==="100vh"),d=this._xPosition,u=this._xOffset,p=this._overlayRef.getConfig().direction==="rtl",m="",f="",_="";c?_="flex-start":d==="center"?(_="center",p?f=u:m=u):p?d==="left"||d==="end"?(_="flex-end",m=u):(d==="right"||d==="start")&&(_="flex-start",f=u):d==="left"||d==="start"?(_="flex-start",m=u):(d==="right"||d==="end")&&(_="flex-end",f=u),t.position=this._cssPosition,t.marginLeft=c?"0":m,t.marginTop=l?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=c?"0":f,i.justifyContent=_,i.alignItems=l?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let t=this._overlayRef.overlayElement.style,i=this._overlayRef.hostElement,n=i.style;i.classList.remove(ZM),n.justifyContent=n.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}},nD=(()=>{class e{_viewportRuler=O(V_);_document=O(yt);_platform=O(ht);_overlayContainer=O(Rh);constructor(){}global(){return new kh}flexibleConnectedTo(i){return new Ph(i,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static \u0275fac=function(n){return new(n||e)};static \u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Hn=(()=>{class e{scrollStrategies=O(QM);_overlayContainer=O(Rh);_positionBuilder=O(nD);_keyboardDispatcher=O(eD);_injector=O(Ct);_ngZone=O(Ge);_document=O(yt);_directionality=O(Vn);_location=O(bb);_outsideClickDispatcher=O(tD);_animationsModuleType=O(xi,{optional:!0});_idGenerator=O(yi);_renderer=O(dn).createRenderer(null,null);_appRef;_styleLoader=O($i);constructor(){}create(i){this._styleLoader.load(iD);let n=this._createHostElement(),r=this._createPaneElement(n),o=this._createPortalOutlet(r),a=new va(i);return a.direction=a.direction||this._directionality.value,new ls(o,n,r,a,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations",this._injector.get(fs),this._renderer)}position(){return this._positionBuilder}_createPaneElement(i){let n=this._document.createElement("div");return n.id=this._idGenerator.getId("cdk-overlay-"),n.classList.add("cdk-overlay-pane"),i.appendChild(n),n}_createHostElement(){let i=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalOutlet(i){return this._appRef||(this._appRef=this._injector.get(Pu)),new pu(i,null,this._appRef,this._injector,this._document)}static \u0275fac=function(n){return new(n||e)};static \u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Cj=new Ae("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let e=O(Hn);return()=>e.scrollStrategies.reposition()}});function Sj(e){return()=>e.scrollStrategies.reposition()}var Mj={provide:Cj,deps:[Hn],useFactory:Sj},ds=(()=>{class e{static \u0275fac=function(n){return new(n||e)};static \u0275mod=ze({type:e});static \u0275inj=Ve({providers:[Hn,Mj],imports:[ga,jr,z_,z_]})}return e})();function Dj(e,t){}var _a=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;width="";height="";minWidth;minHeight;maxWidth;maxHeight;positionStrategy;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!1;autoFocus="first-tabbable";restoreFocus=!0;scrollStrategy;closeOnNavigation=!0;closeOnDestroy=!0;closeOnOverlayDetachments=!0;componentFactoryResolver;providers;container;templateContext};var U_=(()=>{class e extends _o{_elementRef=O(Ke);_focusTrapFactory=O(y_);_config;_interactivityChecker=O(b_);_ngZone=O(Ge);_overlayRef=O(ls);_focusMonitor=O(os);_renderer=O(Ti);_changeDetectorRef=O(Cn);_injector=O(Ct);_platform=O(ht);_document=O(yt,{optional:!0});_portalOutlet;_focusTrapped=new De;_focusTrap=null;_elementFocusedBeforeDialogWasOpened=null;_closeInteractionType=null;_ariaLabelledByQueue=[];_isDestroyed=!1;constructor(){super(),this._config=O(_a,{optional:!0})||new _a,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(i){this._ariaLabelledByQueue.push(i),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(i){let n=this._ariaLabelledByQueue.indexOf(i);n>-1&&(this._ariaLabelledByQueue.splice(n,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._focusTrapped.complete(),this._isDestroyed=!0,this._restoreFocus()}attachComponentPortal(i){this._portalOutlet.hasAttached();let n=this._portalOutlet.attachComponentPortal(i);return this._contentAttached(),n}attachTemplatePortal(i){this._portalOutlet.hasAttached();let n=this._portalOutlet.attachTemplatePortal(i);return this._contentAttached(),n}attachDomPortal=i=>{this._portalOutlet.hasAttached();let n=this._portalOutlet.attachDomPortal(i);return this._contentAttached(),n};_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(i,n){this._interactivityChecker.isFocusable(i)||(i.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let r=()=>{o(),a(),i.removeAttribute("tabindex")},o=this._renderer.listen(i,"blur",r),a=this._renderer.listen(i,"mousedown",r)})),i.focus(n)}_focusByCssSelector(i,n){let r=this._elementRef.nativeElement.querySelector(i);r&&this._forceFocus(r,n)}_trapFocus(i){this._isDestroyed||xo(()=>{let n=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||n.focus(i);break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElement(i)||this._focusDialogContainer(i);break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]',i);break;default:this._focusByCssSelector(this._config.autoFocus,i);break}this._focusTrapped.next()},{injector:this._injector})}_restoreFocus(){let i=this._config.restoreFocus,n=null;if(typeof i=="string"?n=this._document.querySelector(i):typeof i=="boolean"?n=i?this._elementFocusedBeforeDialogWasOpened:null:i&&(n=i),this._config.restoreFocus&&n&&typeof n.focus=="function"){let r=ru(),o=this._elementRef.nativeElement;(!r||r===this._document.body||r===o||o.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(n,this._closeInteractionType),this._closeInteractionType=null):n.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(i){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus(i)}_containsFocus(){let i=this._elementRef.nativeElement,n=ru();return i===n||i.contains(n)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=ru()))}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=ye({type:e,selectors:[["cdk-dialog-container"]],viewQuery:function(n,r){if(n&1&&Rt(bo,7),n&2){let o;Xe(o=Ze())&&(r._portalOutlet=o.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(n,r){n&2&&pt("id",r._config.id||null)("role",r._config.role)("aria-modal",r._config.ariaModal)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null)},features:[lt],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(n,r){n&1&&G(0,Dj,0,0,"ng-template",0)},dependencies:[bo],styles:[`.cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}
`],encapsulation:2})}return e})(),fu=class{overlayRef;config;componentInstance;componentRef;containerInstance;disableClose;closed=new De;backdropClick;keydownEvents;outsidePointerEvents;id;_detachSubscription;constructor(t,i){this.overlayRef=t,this.config=i,this.disableClose=i.disableClose,this.backdropClick=t.backdropClick(),this.keydownEvents=t.keydownEvents(),this.outsidePointerEvents=t.outsidePointerEvents(),this.id=i.id,this.keydownEvents.subscribe(n=>{n.keyCode===27&&!this.disableClose&&!Uc(n)&&(n.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=t.detachments().subscribe(()=>{i.closeOnOverlayDetachments!==!1&&this.close()})}close(t,i){if(this.containerInstance){let n=this.closed;this.containerInstance._closeInteractionType=i?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),n.next(t),n.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(t="",i=""){return this.overlayRef.updateSize({width:t,height:i}),this}addPanelClass(t){return this.overlayRef.addPanelClass(t),this}removePanelClass(t){return this.overlayRef.removePanelClass(t),this}},Aj=new Ae("DialogScrollStrategy",{providedIn:"root",factory:()=>{let e=O(Hn);return()=>e.scrollStrategies.block()}}),Pj=new Ae("DialogData"),kj=new Ae("DefaultDialogConfig");var G_=(()=>{class e{_overlay=O(Hn);_injector=O(Ct);_defaultOptions=O(kj,{optional:!0});_parentDialog=O(e,{optional:!0,skipSelf:!0});_overlayContainer=O(Rh);_idGenerator=O(yi);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new De;_afterOpenedAtThisLevel=new De;_ariaHiddenElements=new Map;_scrollStrategy=O(Aj);get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}afterAllClosed=wu(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(cn(void 0)));constructor(){}open(i,n){let r=this._defaultOptions||new _a;n=X(X({},r),n),n.id=n.id||this._idGenerator.getId("cdk-dialog-"),n.id&&this.getDialogById(n.id);let o=this._getOverlayConfig(n),a=this._overlay.create(o),s=new fu(a,n),c=this._attachContainer(a,s,n);if(s.containerInstance=c,!this.openDialogs.length){let l=this._overlayContainer.getContainerElement();c._focusTrapped?c._focusTrapped.pipe(Wn(1)).subscribe(()=>{this._hideNonDialogContentFromAssistiveTechnology(l)}):this._hideNonDialogContentFromAssistiveTechnology(l)}return this._attachDialogContent(i,s,c,n),this.openDialogs.push(s),s.closed.subscribe(()=>this._removeOpenDialog(s,!0)),this.afterOpened.next(s),s}closeAll(){W_(this.openDialogs,i=>i.close())}getDialogById(i){return this.openDialogs.find(n=>n.id===i)}ngOnDestroy(){W_(this._openDialogsAtThisLevel,i=>{i.config.closeOnDestroy===!1&&this._removeOpenDialog(i,!1)}),W_(this._openDialogsAtThisLevel,i=>i.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(i){let n=new va({positionStrategy:i.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:i.scrollStrategy||this._scrollStrategy(),panelClass:i.panelClass,hasBackdrop:i.hasBackdrop,direction:i.direction,minWidth:i.minWidth,minHeight:i.minHeight,maxWidth:i.maxWidth,maxHeight:i.maxHeight,width:i.width,height:i.height,disposeOnNavigation:i.closeOnNavigation});return i.backdropClass&&(n.backdropClass=i.backdropClass),n}_attachContainer(i,n,r){let o=r.injector||r.viewContainerRef?.injector,a=[{provide:_a,useValue:r},{provide:fu,useValue:n},{provide:ls,useValue:i}],s;r.container?typeof r.container=="function"?s=r.container:(s=r.container.type,a.push(...r.container.providers(r))):s=U_;let c=new Br(s,r.viewContainerRef,Ct.create({parent:o||this._injector,providers:a}));return i.attach(c).instance}_attachDialogContent(i,n,r,o){if(i instanceof ya){let a=this._createInjector(o,n,r,void 0),s={$implicit:o.data,dialogRef:n};o.templateContext&&(s=X(X({},s),typeof o.templateContext=="function"?o.templateContext():o.templateContext)),r.attachTemplatePortal(new vo(i,null,s,a))}else{let a=this._createInjector(o,n,r,this._injector),s=r.attachComponentPortal(new Br(i,o.viewContainerRef,a));n.componentRef=s,n.componentInstance=s.instance}}_createInjector(i,n,r,o){let a=i.injector||i.viewContainerRef?.injector,s=[{provide:Pj,useValue:i.data},{provide:fu,useValue:n}];return i.providers&&(typeof i.providers=="function"?s.push(...i.providers(n,i,r)):s.push(...i.providers)),i.direction&&(!a||!a.get(Vn,null,{optional:!0}))&&s.push({provide:Vn,useValue:{value:i.direction,change:$n()}}),Ct.create({parent:a||o,providers:s})}_removeOpenDialog(i,n){let r=this.openDialogs.indexOf(i);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((o,a)=>{o?a.setAttribute("aria-hidden",o):a.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),n&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(i){if(i.parentElement){let n=i.parentElement.children;for(let r=n.length-1;r>-1;r--){let o=n[r];o!==i&&o.nodeName!=="SCRIPT"&&o.nodeName!=="STYLE"&&!o.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){let i=this._parentDialog;return i?i._getAfterAllClosed():this._afterAllClosedAtThisLevel}static \u0275fac=function(n){return new(n||e)};static \u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function W_(e,t){let i=e.length;for(;i--;)t(e[i])}var oD=(()=>{class e{static \u0275fac=function(n){return new(n||e)};static \u0275mod=ze({type:e});static \u0275inj=Ve({providers:[G_],imports:[ds,jr,w_,jr]})}return e})();function Rj(e,t){}var gu=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;width="";height="";minWidth;minHeight;maxWidth;maxHeight;position;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!1;autoFocus="first-tabbable";restoreFocus=!0;delayFocusTrap=!0;scrollStrategy;closeOnNavigation=!0;componentFactoryResolver;enterAnimationDuration;exitAnimationDuration},q_="mdc-dialog--open",aD="mdc-dialog--opening",sD="mdc-dialog--closing",Oj=150,Tj=75,dD=(()=>{class e extends U_{_animationMode=O(xi,{optional:!0});_animationStateChanged=new Yt;_animationsEnabled=this._animationMode!=="NoopAnimations";_actionSectionCount=0;_hostElement=this._elementRef.nativeElement;_enterAnimationDuration=this._animationsEnabled?lD(this._config.enterAnimationDuration)??Oj:0;_exitAnimationDuration=this._animationsEnabled?lD(this._config.exitAnimationDuration)??Tj:0;_animationTimer=null;_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(cD,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(aD,q_)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(q_),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(q_),this._animationsEnabled?(this._hostElement.style.setProperty(cD,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(sD)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_updateActionSectionCount(i){this._actionSectionCount+=i,this._changeDetectorRef.markForCheck()}_finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)};_finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})};_clearAnimationClasses(){this._hostElement.classList.remove(aD,sD)}_waitForAnimationToComplete(i,n){this._animationTimer!==null&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(n,i)}_requestAnimationFrame(i){this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame=="function"?requestAnimationFrame(i):i()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(i){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:i})}ngOnDestroy(){super.ngOnDestroy(),this._animationTimer!==null&&clearTimeout(this._animationTimer)}attachComponentPortal(i){let n=super.attachComponentPortal(i);return n.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),n}static \u0275fac=(()=>{let i;return function(r){return(i||(i=ui(e)))(r||e)}})();static \u0275cmp=ye({type:e,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:10,hostBindings:function(n,r){n&2&&(mr("id",r._config.id),pt("aria-modal",r._config.ariaModal)("role",r._config.role)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null),pe("_mat-animation-noopable",!r._animationsEnabled)("mat-mdc-dialog-container-with-actions",r._actionSectionCount>0))},features:[lt],decls:3,vars:0,consts:[[1,"mat-mdc-dialog-inner-container","mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(n,r){n&1&&(h(0,"div",0)(1,"div",1),G(2,Rj,0,0,"ng-template",2),g()())},dependencies:[bo],styles:[`.mat-mdc-dialog-container{width:100%;height:100%;display:block;box-sizing:border-box;max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;outline:0}.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-max-width, 560px);min-width:var(--mat-dialog-container-min-width, 280px)}@media(max-width: 599px){.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-small-max-width, calc(100vw - 32px))}}.mat-mdc-dialog-inner-container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;transition:opacity linear var(--mat-dialog-transition-duration, 0ms);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mdc-dialog--closing .mat-mdc-dialog-inner-container{transition:opacity 75ms linear;transform:none}.mdc-dialog--open .mat-mdc-dialog-inner-container{opacity:1}._mat-animation-noopable .mat-mdc-dialog-inner-container{transition:none}.mat-mdc-dialog-surface{display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;width:100%;height:100%;position:relative;overflow-y:auto;outline:0;transform:scale(0.8);transition:transform var(--mat-dialog-transition-duration, 0ms) cubic-bezier(0, 0, 0.2, 1);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;box-shadow:var(--mat-dialog-container-elevation-shadow, none);border-radius:var(--mdc-dialog-container-shape, var(--mat-sys-corner-extra-large, 4px));background-color:var(--mdc-dialog-container-color, var(--mat-sys-surface, white))}[dir=rtl] .mat-mdc-dialog-surface{text-align:right}.mdc-dialog--open .mat-mdc-dialog-surface,.mdc-dialog--closing .mat-mdc-dialog-surface{transform:none}._mat-animation-noopable .mat-mdc-dialog-surface{transition:none}.mat-mdc-dialog-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mat-mdc-dialog-title{display:block;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:var(--mat-dialog-headline-padding, 6px 24px 13px)}.mat-mdc-dialog-title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mat-mdc-dialog-title{text-align:right}.mat-mdc-dialog-container .mat-mdc-dialog-title{color:var(--mdc-dialog-subhead-color, var(--mat-sys-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mdc-dialog-subhead-font, var(--mat-sys-headline-small-font, inherit));line-height:var(--mdc-dialog-subhead-line-height, var(--mat-sys-headline-small-line-height, 1.5rem));font-size:var(--mdc-dialog-subhead-size, var(--mat-sys-headline-small-size, 1rem));font-weight:var(--mdc-dialog-subhead-weight, var(--mat-sys-headline-small-weight, 400));letter-spacing:var(--mdc-dialog-subhead-tracking, var(--mat-sys-headline-small-tracking, 0.03125em))}.mat-mdc-dialog-content{display:block;flex-grow:1;box-sizing:border-box;margin:0;overflow:auto;max-height:65vh}.mat-mdc-dialog-content>:first-child{margin-top:0}.mat-mdc-dialog-content>:last-child{margin-bottom:0}.mat-mdc-dialog-container .mat-mdc-dialog-content{color:var(--mdc-dialog-supporting-text-color, var(--mat-sys-on-surface-variant, rgba(0, 0, 0, 0.6)));font-family:var(--mdc-dialog-supporting-text-font, var(--mat-sys-body-medium-font, inherit));line-height:var(--mdc-dialog-supporting-text-line-height, var(--mat-sys-body-medium-line-height, 1.5rem));font-size:var(--mdc-dialog-supporting-text-size, var(--mat-sys-body-medium-size, 1rem));font-weight:var(--mdc-dialog-supporting-text-weight, var(--mat-sys-body-medium-weight, 400));letter-spacing:var(--mdc-dialog-supporting-text-tracking, var(--mat-sys-body-medium-tracking, 0.03125em))}.mat-mdc-dialog-container .mat-mdc-dialog-content{padding:var(--mat-dialog-content-padding, 20px 24px)}.mat-mdc-dialog-container-with-actions .mat-mdc-dialog-content{padding:var(--mat-dialog-with-actions-content-padding, 20px 24px 0)}.mat-mdc-dialog-container .mat-mdc-dialog-title+.mat-mdc-dialog-content{padding-top:0}.mat-mdc-dialog-actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0);padding:var(--mat-dialog-actions-padding, 16px 24px);justify-content:var(--mat-dialog-actions-alignment, flex-end)}@media(forced-colors: active){.mat-mdc-dialog-actions{border-top-color:CanvasText}}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-start,.mat-mdc-dialog-actions[align=start]{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}.mat-mdc-dialog-component-host{display:contents}
`],encapsulation:2})}return e})(),cD="--mat-dialog-transition-duration";function lD(e){return e==null?null:typeof e=="number"?e:e.endsWith("ms")?$c(e.substring(0,e.length-2)):e.endsWith("s")?$c(e.substring(0,e.length-1))*1e3:e==="0"?0:null}var hu=function(e){return e[e.OPEN=0]="OPEN",e[e.CLOSING=1]="CLOSING",e[e.CLOSED=2]="CLOSED",e}(hu||{}),us=class{_ref;_containerInstance;componentInstance;componentRef;disableClose;id;_afterOpened=new De;_beforeClosed=new De;_result;_closeFallbackTimeout;_state=hu.OPEN;_closeInteractionType;constructor(t,i,n){this._ref=t,this._containerInstance=n,this.disableClose=i.disableClose,this.id=t.id,t.addPanelClass("mat-mdc-dialog-panel"),n._animationStateChanged.pipe(Oi(r=>r.state==="opened"),Wn(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),n._animationStateChanged.pipe(Oi(r=>r.state==="closed"),Wn(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),t.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),Hr(this.backdropClick(),this.keydownEvents().pipe(Oi(r=>r.keyCode===27&&!this.disableClose&&!Uc(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),uD(this,r.type==="keydown"?"keyboard":"mouse"))})}close(t){this._result=t,this._containerInstance._animationStateChanged.pipe(Oi(i=>i.state==="closing"),Wn(1)).subscribe(i=>{this._beforeClosed.next(t),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),i.totalTime+100)}),this._state=hu.CLOSING,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(t){let i=this._ref.config.positionStrategy;return t&&(t.left||t.right)?t.left?i.left(t.left):i.right(t.right):i.centerHorizontally(),t&&(t.top||t.bottom)?t.top?i.top(t.top):i.bottom(t.bottom):i.centerVertically(),this._ref.updatePosition(),this}updateSize(t="",i=""){return this._ref.updateSize(t,i),this}addPanelClass(t){return this._ref.addPanelClass(t),this}removePanelClass(t){return this._ref.removePanelClass(t),this}getState(){return this._state}_finishDialogClose(){this._state=hu.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}};function uD(e,t,i){return e._closeInteractionType=t,e.close(i)}var Oh=new Ae("MatMdcDialogData"),pD=new Ae("mat-mdc-dialog-default-options"),mD=new Ae("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{let e=O(Hn);return()=>e.scrollStrategies.block()}});var vu=(()=>{class e{_overlay=O(Hn);_defaultOptions=O(pD,{optional:!0});_scrollStrategy=O(mD);_parentDialog=O(e,{optional:!0,skipSelf:!0});_idGenerator=O(yi);_dialog=O(G_);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new De;_afterOpenedAtThisLevel=new De;dialogConfigClass=gu;_dialogRefConstructor;_dialogContainerType;_dialogDataToken;get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){let i=this._parentDialog;return i?i._getAfterAllClosed():this._afterAllClosedAtThisLevel}afterAllClosed=wu(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(cn(void 0)));constructor(){this._dialogRefConstructor=us,this._dialogContainerType=dD,this._dialogDataToken=Oh}open(i,n){let r;n=X(X({},this._defaultOptions||new gu),n),n.id=n.id||this._idGenerator.getId("mat-mdc-dialog-"),n.scrollStrategy=n.scrollStrategy||this._scrollStrategy();let o=this._dialog.open(i,Be(X({},n),{positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:n},{provide:_a,useValue:n}]},templateContext:()=>({dialogRef:r}),providers:(a,s,c)=>(r=new this._dialogRefConstructor(a,n,c),r.updatePosition(n?.position),[{provide:this._dialogContainerType,useValue:c},{provide:this._dialogDataToken,useValue:s.data},{provide:this._dialogRefConstructor,useValue:r}])}));return r.componentRef=o.componentRef,r.componentInstance=o.componentInstance,this.openDialogs.push(r),this.afterOpened.next(r),r.afterClosed().subscribe(()=>{let a=this.openDialogs.indexOf(r);a>-1&&(this.openDialogs.splice(a,1),this.openDialogs.length||this._getAfterAllClosed().next())}),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(i){return this.openDialogs.find(n=>n.id===i)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(i){let n=i.length;for(;n--;)i[n].close()}static \u0275fac=function(n){return new(n||e)};static \u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var fD=(()=>{class e{_dialogRef=O(us,{optional:!0});_elementRef=O(Ke);_dialog=O(vu);constructor(){}ngOnInit(){this._dialogRef||(this._dialogRef=Ij(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._onAdd()})}ngOnDestroy(){this._dialogRef?._containerInstance&&Promise.resolve().then(()=>{this._onRemove()})}static \u0275fac=function(n){return new(n||e)};static \u0275dir=Ce({type:e})}return e})(),Y_=(()=>{class e extends fD{id=O(yi).getId("mat-mdc-dialog-title-");_onAdd(){this._dialogRef._containerInstance?._addAriaLabelledBy?.(this.id)}_onRemove(){this._dialogRef?._containerInstance?._removeAriaLabelledBy?.(this.id)}static \u0275fac=(()=>{let i;return function(r){return(i||(i=ui(e)))(r||e)}})();static \u0275dir=Ce({type:e,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(n,r){n&2&&mr("id",r.id)},inputs:{id:"id"},exportAs:["matDialogTitle"],features:[lt]})}return e})(),K_=(()=>{class e{static \u0275fac=function(n){return new(n||e)};static \u0275dir=Ce({type:e,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"],features:[db([WM])]})}return e})(),X_=(()=>{class e extends fD{align;_onAdd(){this._dialogRef._containerInstance?._updateActionSectionCount?.(1)}_onRemove(){this._dialogRef._containerInstance?._updateActionSectionCount?.(-1)}static \u0275fac=(()=>{let i;return function(r){return(i||(i=ui(e)))(r||e)}})();static \u0275dir=Ce({type:e,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-mdc-dialog-actions","mdc-dialog__actions"],hostVars:6,hostBindings:function(n,r){n&2&&pe("mat-mdc-dialog-actions-align-start",r.align==="start")("mat-mdc-dialog-actions-align-center",r.align==="center")("mat-mdc-dialog-actions-align-end",r.align==="end")},inputs:{align:"align"},features:[lt]})}return e})();function Ij(e,t){let i=e.nativeElement.parentElement;for(;i&&!i.classList.contains("mat-mdc-dialog-container");)i=i.parentElement;return i?t.find(n=>n.id===i.id):null}var _u=(()=>{class e{static \u0275fac=function(n){return new(n||e)};static \u0275mod=ze({type:e});static \u0275inj=Ve({providers:[vu],imports:[oD,ds,jr,st,st]})}return e})();var ba=(()=>{class e{static \u0275fac=function(n){return new(n||e)};static \u0275mod=ze({type:e});static \u0275inj=Ve({imports:[st,ch,st]})}return e})();var Nj=(()=>{class e{static \u0275fac=function(n){return new(n||e)};static \u0275cmp=ye({type:e,selectors:[["ng-component"]],hostAttrs:["cdk-text-field-style-loader",""],decls:0,vars:0,template:function(n,r){},styles:[`textarea.cdk-textarea-autosize{resize:none}textarea.cdk-textarea-autosize-measuring{padding:2px 0 !important;box-sizing:content-box !important;height:auto !important;overflow:hidden !important}textarea.cdk-textarea-autosize-measuring-firefox{padding:2px 0 !important;box-sizing:content-box !important;height:0 !important}@keyframes cdk-text-field-autofill-start{/*!*/}@keyframes cdk-text-field-autofill-end{/*!*/}.cdk-text-field-autofill-monitored:-webkit-autofill{animation:cdk-text-field-autofill-start 0s 1ms}.cdk-text-field-autofill-monitored:not(:-webkit-autofill){animation:cdk-text-field-autofill-end 0s 1ms}
`],encapsulation:2,changeDetection:0})}return e})(),Lj={passive:!0},gD=(()=>{class e{_platform=O(ht);_ngZone=O(Ge);_renderer=O(dn).createRenderer(null,null);_styleLoader=O($i);_monitoredElements=new Map;constructor(){}monitor(i){if(!this._platform.isBrowser)return tb;this._styleLoader.load(Nj);let n=bn(i),r=this._monitoredElements.get(n);if(r)return r.subject;let o=new De,a="cdk-text-field-autofilled",s=l=>{l.animationName==="cdk-text-field-autofill-start"&&!n.classList.contains(a)?(n.classList.add(a),this._ngZone.run(()=>o.next({target:l.target,isAutofilled:!0}))):l.animationName==="cdk-text-field-autofill-end"&&n.classList.contains(a)&&(n.classList.remove(a),this._ngZone.run(()=>o.next({target:l.target,isAutofilled:!1})))},c=this._ngZone.runOutsideAngular(()=>(n.classList.add("cdk-text-field-autofill-monitored"),an(this._renderer,n,"animationstart",s,Lj)));return this._monitoredElements.set(n,{subject:o,unlisten:c}),o}stopMonitoring(i){let n=bn(i),r=this._monitoredElements.get(n);r&&(r.unlisten(),r.subject.complete(),n.classList.remove("cdk-text-field-autofill-monitored"),n.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(n))}ngOnDestroy(){this._monitoredElements.forEach((i,n)=>this.stopMonitoring(n))}static \u0275fac=function(n){return new(n||e)};static \u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var vD=(()=>{class e{static \u0275fac=function(n){return new(n||e)};static \u0275mod=ze({type:e});static \u0275inj=Ve({})}return e})();var _D=new Ae("MAT_INPUT_VALUE_ACCESSOR");var Bj=["button","checkbox","file","hidden","image","radio","range","reset","submit"],jj=new Ae("MAT_INPUT_CONFIG"),bD=(()=>{class e{_elementRef=O(Ke);_platform=O(ht);ngControl=O(Ur,{optional:!0,self:!0});_autofillMonitor=O(gD);_ngZone=O(Ge);_formField=O(Eh,{optional:!0});_renderer=O(Ti);_uid=O(yi).getId("mat-input-");_previousNativeValue;_inputValueAccessor;_signalBasedValueAccessor;_previousPlaceholder;_errorStateTracker;_config=O(jj,{optional:!0});_cleanupIosKeyup;_cleanupWebkitWheel;_formFieldDescribedBy;_isServer;_isNativeSelect;_isTextarea;_isInFormField;focused=!1;stateChanges=new De;controlType="mat-input";autofilled=!1;get disabled(){return this._disabled}set disabled(i){this._disabled=Lr(i),this.focused&&(this.focused=!1,this.stateChanges.next())}_disabled=!1;get id(){return this._id}set id(i){this._id=i||this._uid}_id;placeholder;name;get required(){return this._required??this.ngControl?.control?.hasValidator(dt.required)??!1}set required(i){this._required=Lr(i)}_required;get type(){return this._type}set type(i){let n=this._type;this._type=i||"text",this._validateType(),!this._isTextarea&&S_().has(this._type)&&(this._elementRef.nativeElement.type=this._type),this._type!==n&&this._ensureWheelDefaultBehavior()}_type="text";get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(i){this._errorStateTracker.matcher=i}userAriaDescribedBy;get value(){return this._signalBasedValueAccessor?this._signalBasedValueAccessor.value():this._inputValueAccessor.value}set value(i){i!==this.value&&(this._signalBasedValueAccessor?this._signalBasedValueAccessor.value.set(i):this._inputValueAccessor.value=i,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(i){this._readonly=Lr(i)}_readonly=!1;disabledInteractive;get errorState(){return this._errorStateTracker.errorState}set errorState(i){this._errorStateTracker.errorState=i}_neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(i=>S_().has(i));constructor(){let i=O(og,{optional:!0}),n=O(An,{optional:!0}),r=O(bh),o=O(_D,{optional:!0,self:!0}),a=this._elementRef.nativeElement,s=a.nodeName.toLowerCase();o?Jc(o.value)?this._signalBasedValueAccessor=o:this._inputValueAccessor=o:this._inputValueAccessor=a,this._previousNativeValue=this.value,this.id=this.id,this._platform.IOS&&this._ngZone.runOutsideAngular(()=>{this._cleanupIosKeyup=this._renderer.listen(a,"keyup",this._iOSKeyupListener)}),this._errorStateTracker=new yh(r,this.ngControl,n,i,this.stateChanges),this._isServer=!this._platform.isBrowser,this._isNativeSelect=s==="select",this._isTextarea=s==="textarea",this._isInFormField=!!this._formField,this.disabledInteractive=this._config?.disabledInteractive||!1,this._isNativeSelect&&(this.controlType=a.multiple?"mat-native-select-multiple":"mat-native-select"),this._signalBasedValueAccessor&&Ru(()=>{this._signalBasedValueAccessor.value(),this.stateChanges.next()})}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(i=>{this.autofilled=i.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._cleanupIosKeyup?.(),this._cleanupWebkitWheel?.()}ngDoCheck(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==null&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(i){this._elementRef.nativeElement.focus(i)}updateErrorState(){this._errorStateTracker.updateErrorState()}_focusChanged(i){if(i!==this.focused){if(!this._isNativeSelect&&i&&this.disabled&&this.disabledInteractive){let n=this._elementRef.nativeElement;n.type==="number"?(n.type="text",n.setSelectionRange(0,0),n.type="number"):n.setSelectionRange(0,0)}this.focused=i,this.stateChanges.next()}}_onInput(){}_dirtyCheckNativeValue(){let i=this._elementRef.nativeElement.value;this._previousNativeValue!==i&&(this._previousNativeValue=i,this.stateChanges.next())}_dirtyCheckPlaceholder(){let i=this._getPlaceholder();if(i!==this._previousPlaceholder){let n=this._elementRef.nativeElement;this._previousPlaceholder=i,i?n.setAttribute("placeholder",i):n.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){Bj.indexOf(this._type)>-1}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let i=this._elementRef.nativeElement.validity;return i&&i.badInput}get empty(){return!this._isNeverEmpty()&&!this._elementRef.nativeElement.value&&!this._isBadInput()&&!this.autofilled}get shouldLabelFloat(){if(this._isNativeSelect){let i=this._elementRef.nativeElement,n=i.options[0];return this.focused||i.multiple||!this.empty||!!(i.selectedIndex>-1&&n&&n.label)}else return this.focused&&!this.disabled||!this.empty}setDescribedByIds(i){let n=this._elementRef.nativeElement,r=n.getAttribute("aria-describedby"),o;if(r){let a=this._formFieldDescribedBy||i;o=i.concat(r.split(" ").filter(s=>s&&!a.includes(s)))}else o=i;this._formFieldDescribedBy=i,o.length?n.setAttribute("aria-describedby",o.join(" ")):n.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){let i=this._elementRef.nativeElement;return this._isNativeSelect&&(i.multiple||i.size>1)}_iOSKeyupListener=i=>{let n=i.target;!n.value&&n.selectionStart===0&&n.selectionEnd===0&&(n.setSelectionRange(1,1),n.setSelectionRange(0,0))};_webkitBlinkWheelListener=()=>{};_ensureWheelDefaultBehavior(){this._cleanupWebkitWheel?.(),this._type==="number"&&(this._platform.BLINK||this._platform.WEBKIT)&&(this._cleanupWebkitWheel=this._renderer.listen(this._elementRef.nativeElement,"wheel",this._webkitBlinkWheelListener))}_getReadonlyAttribute(){return this._isNativeSelect?null:this.readonly||this.disabled&&this.disabledInteractive?"true":null}static \u0275fac=function(n){return new(n||e)};static \u0275dir=Ce({type:e,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:21,hostBindings:function(n,r){n&1&&K("focus",function(){return r._focusChanged(!0)})("blur",function(){return r._focusChanged(!1)})("input",function(){return r._onInput()}),n&2&&(mr("id",r.id)("disabled",r.disabled&&!r.disabledInteractive)("required",r.required),pt("name",r.name||null)("readonly",r._getReadonlyAttribute())("aria-disabled",r.disabled&&r.disabledInteractive?"true":null)("aria-invalid",r.empty&&r.required?null:r.errorState)("aria-required",r.required)("id",r.id),pe("mat-input-server",r._isServer)("mat-mdc-form-field-textarea-control",r._isInFormField&&r._isTextarea)("mat-mdc-form-field-input-control",r._isInFormField)("mat-mdc-input-disabled-interactive",r.disabledInteractive)("mdc-text-field__input",r._isInFormField)("mat-mdc-native-select-inline",r._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:[0,"aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly",disabledInteractive:[2,"disabledInteractive","disabledInteractive",Jt]},exportAs:["matInput"],features:[Bt([{provide:wh,useExisting:e}]),Un]})}return e})(),Th=(()=>{class e{static \u0275fac=function(n){return new(n||e)};static \u0275mod=ze({type:e});static \u0275inj=Ve({imports:[st,ba,ba,vD,st]})}return e})();var Ih=(()=>{class e{static \u0275fac=function(n){return new(n||e)};static \u0275mod=ze({type:e});static \u0275inj=Ve({imports:[st,st]})}return e})();var zj=["determinateSpinner"];function Hj(e,t){if(e&1&&(Du(),h(0,"svg",11),L(1,"circle",12),g()),e&2){let i=j();pt("viewBox",i._viewBox()),E(),$r("stroke-dasharray",i._strokeCircumference(),"px")("stroke-dashoffset",i._strokeCircumference()/2,"px")("stroke-width",i._circleStrokeWidth(),"%"),pt("r",i._circleRadius())}}var $j=new Ae("mat-progress-spinner-default-options",{providedIn:"root",factory:Wj});function Wj(){return{diameter:yD}}var yD=100,Uj=10,xD=(()=>{class e{_elementRef=O(Ke);_noopAnimations;get color(){return this._color||this._defaultColor}set color(i){this._color=i}_color;_defaultColor="primary";_determinateCircle;constructor(){let i=O(xi,{optional:!0}),n=O($j);this._noopAnimations=i==="NoopAnimations"&&!!n&&!n._forceAnimations,this.mode=this._elementRef.nativeElement.nodeName.toLowerCase()==="mat-spinner"?"indeterminate":"determinate",n&&(n.color&&(this.color=this._defaultColor=n.color),n.diameter&&(this.diameter=n.diameter),n.strokeWidth&&(this.strokeWidth=n.strokeWidth))}mode;get value(){return this.mode==="determinate"?this._value:0}set value(i){this._value=Math.max(0,Math.min(100,i||0))}_value=0;get diameter(){return this._diameter}set diameter(i){this._diameter=i||0}_diameter=yD;get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(i){this._strokeWidth=i||0}_strokeWidth;_circleRadius(){return(this.diameter-Uj)/2}_viewBox(){let i=this._circleRadius()*2+this.strokeWidth;return`0 0 ${i} ${i}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return this.mode==="determinate"?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=ye({type:e,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(n,r){if(n&1&&Rt(zj,5),n&2){let o;Xe(o=Ze())&&(r._determinateCircle=o.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:18,hostBindings:function(n,r){n&2&&(pt("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow",r.mode==="determinate"?r.value:null)("mode",r.mode),wo("mat-"+r.color),$r("width",r.diameter,"px")("height",r.diameter,"px")("--mdc-circular-progress-size",r.diameter+"px")("--mdc-circular-progress-active-indicator-width",r.diameter+"px"),pe("_mat-animation-noopable",r._noopAnimations)("mdc-circular-progress--indeterminate",r.mode==="indeterminate"))},inputs:{color:"color",mode:"mode",value:[2,"value","value",Eo],diameter:[2,"diameter","diameter",Eo],strokeWidth:[2,"strokeWidth","strokeWidth",Eo]},exportAs:["matProgressSpinner"],decls:14,vars:11,consts:[["circle",""],["determinateSpinner",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(n,r){if(n&1&&(G(0,Hj,2,8,"ng-template",null,0,Kn),h(2,"div",2,1),Du(),h(4,"svg",3),L(5,"circle",4),g()(),ab(),h(6,"div",5)(7,"div",6)(8,"div",7),ku(9,8),g(),h(10,"div",9),ku(11,8),g(),h(12,"div",10),ku(13,8),g()()()),n&2){let o=En(1);E(4),pt("viewBox",r._viewBox()),E(),$r("stroke-dasharray",r._strokeCircumference(),"px")("stroke-dashoffset",r._strokeDashOffset(),"px")("stroke-width",r._circleStrokeWidth(),"%"),pt("r",r._circleRadius()),E(4),I("ngTemplateOutlet",o),E(2),I("ngTemplateOutlet",o),E(2),I("ngTemplateOutlet",o)}},dependencies:[Tu],styles:[`.mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0;position:relative;direction:ltr;transition:opacity 250ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-progress-spinner circle{stroke-width:var(--mdc-circular-progress-active-indicator-width, 4px)}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1;animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color, var(--mat-sys-primary))}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}
`],encapsulation:2,changeDetection:0})}return e})();var wD=(()=>{class e{static \u0275fac=function(n){return new(n||e)};static \u0275mod=ze({type:e});static \u0275inj=Ve({imports:[st]})}return e})();var ED={XSmall:"(max-width: 599.98px)",Small:"(min-width: 600px) and (max-width: 959.98px)",Medium:"(min-width: 960px) and (max-width: 1279.98px)",Large:"(min-width: 1280px) and (max-width: 1919.98px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.98px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.98px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"};function qj(e,t){if(e&1){let i=Le();h(0,"div",1)(1,"button",2),K("click",function(){ne(i);let r=j();return re(r.action())}),S(2),g()()}if(e&2){let i=j();E(2),Pe(" ",i.data.action," ")}}var Yj=["label"];function Kj(e,t){}var Xj=Math.pow(2,31)-1,bu=class{_overlayRef;instance;containerInstance;_afterDismissed=new De;_afterOpened=new De;_onAction=new De;_durationTimeoutId;_dismissedByAction=!1;constructor(t,i){this._overlayRef=i,this.containerInstance=t,t._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(t){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(t,Xj))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}},CD=new Ae("MatSnackBarData"),Zc=class{politeness="assertive";announcementMessage="";viewContainerRef;duration=0;panelClass;direction;data=null;horizontalPosition="center";verticalPosition="bottom"},Zj=(()=>{class e{static \u0275fac=function(n){return new(n||e)};static \u0275dir=Ce({type:e,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"]})}return e})(),Qj=(()=>{class e{static \u0275fac=function(n){return new(n||e)};static \u0275dir=Ce({type:e,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"]})}return e})(),Jj=(()=>{class e{static \u0275fac=function(n){return new(n||e)};static \u0275dir=Ce({type:e,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"]})}return e})(),SD=(()=>{class e{snackBarRef=O(bu);data=O(CD);constructor(){}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=ye({type:e,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions",""],["mat-button","","matSnackBarAction","",3,"click"]],template:function(n,r){n&1&&(h(0,"div",0),S(1),g(),G(2,qj,3,1,"div",1)),n&2&&(E(),Pe(" ",r.data.message,`
`),E(),si(r.hasAction?2:-1))},dependencies:[Yc,Zj,Qj,Jj],styles:[`.mat-mdc-simple-snack-bar{display:flex}
`],encapsulation:2,changeDetection:0})}return e})(),Z_="_mat-snack-bar-enter",Q_="_mat-snack-bar-exit",e4=(()=>{class e extends _o{_ngZone=O(Ge);_elementRef=O(Ke);_changeDetectorRef=O(Cn);_platform=O(ht);_rendersRef;_animationsDisabled=O(xi,{optional:!0})==="NoopAnimations";snackBarConfig=O(Zc);_document=O(yt);_trackedModals=new Set;_enterFallback;_exitFallback;_renders=new De;_announceDelay=150;_announceTimeoutId;_destroyed=!1;_portalOutlet;_onAnnounce=new De;_onExit=new De;_onEnter=new De;_animationState="void";_live;_label;_role;_liveElementId=O(yi).getId("mat-snack-bar-container-live-");constructor(){super();let i=this.snackBarConfig;i.politeness==="assertive"&&!i.announcementMessage?this._live="assertive":i.politeness==="off"?this._live="off":this._live="polite",this._platform.FIREFOX&&(this._live==="polite"&&(this._role="status"),this._live==="assertive"&&(this._role="alert")),this._rendersRef=gs(()=>this._renders.next(),{manualCleanup:!0})}attachComponentPortal(i){this._assertNotAttached();let n=this._portalOutlet.attachComponentPortal(i);return this._afterPortalAttached(),n}attachTemplatePortal(i){this._assertNotAttached();let n=this._portalOutlet.attachTemplatePortal(i);return this._afterPortalAttached(),n}attachDomPortal=i=>{this._assertNotAttached();let n=this._portalOutlet.attachDomPortal(i);return this._afterPortalAttached(),n};onAnimationEnd(i){i===Q_?this._completeExit():i===Z_&&(clearTimeout(this._enterFallback),this._ngZone.run(()=>{this._onEnter.next(),this._onEnter.complete()}))}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce(),this._animationsDisabled?this._renders.pipe(Wn(1)).subscribe(()=>{this._ngZone.run(()=>queueMicrotask(()=>this.onAnimationEnd(Z_)))}):(clearTimeout(this._enterFallback),this._enterFallback=setTimeout(()=>{this._elementRef.nativeElement.classList.add("mat-snack-bar-fallback-visible"),this.onAnimationEnd(Z_)},200)))}exit(){return this._destroyed?$n(void 0):(this._ngZone.run(()=>{this._animationState="hidden",this._changeDetectorRef.markForCheck(),this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId),this._animationsDisabled?this._renders.pipe(Wn(1)).subscribe(()=>{this._ngZone.run(()=>queueMicrotask(()=>this.onAnimationEnd(Q_)))}):(clearTimeout(this._exitFallback),this._exitFallback=setTimeout(()=>this.onAnimationEnd(Q_),200))}),this._onExit)}ngOnDestroy(){this._destroyed=!0,this._clearFromModals(),this._completeExit(),this._renders.complete(),this._rendersRef.destroy()}_completeExit(){clearTimeout(this._exitFallback),queueMicrotask(()=>{this._onExit.next(),this._onExit.complete()})}_afterPortalAttached(){let i=this._elementRef.nativeElement,n=this.snackBarConfig.panelClass;n&&(Array.isArray(n)?n.forEach(a=>i.classList.add(a)):i.classList.add(n)),this._exposeToModals();let r=this._label.nativeElement,o="mdc-snackbar__label";r.classList.toggle(o,!r.querySelector(`.${o}`))}_exposeToModals(){let i=this._liveElementId,n=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let r=0;r<n.length;r++){let o=n[r],a=o.getAttribute("aria-owns");this._trackedModals.add(o),a?a.indexOf(i)===-1&&o.setAttribute("aria-owns",a+" "+i):o.setAttribute("aria-owns",i)}}_clearFromModals(){this._trackedModals.forEach(i=>{let n=i.getAttribute("aria-owns");if(n){let r=n.replace(this._liveElementId,"").trim();r.length>0?i.setAttribute("aria-owns",r):i.removeAttribute("aria-owns")}}),this._trackedModals.clear()}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{if(this._destroyed)return;let i=this._elementRef.nativeElement,n=i.querySelector("[aria-hidden]"),r=i.querySelector("[aria-live]");if(n&&r){let o=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&n.contains(document.activeElement)&&(o=document.activeElement),n.removeAttribute("aria-hidden"),r.appendChild(n),o?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=ye({type:e,selectors:[["mat-snack-bar-container"]],viewQuery:function(n,r){if(n&1&&(Rt(bo,7),Rt(Yj,7)),n&2){let o;Xe(o=Ze())&&(r._portalOutlet=o.first),Xe(o=Ze())&&(r._label=o.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container"],hostVars:6,hostBindings:function(n,r){n&1&&K("animationend",function(a){return r.onAnimationEnd(a.animationName)})("animationcancel",function(a){return r.onAnimationEnd(a.animationName)}),n&2&&pe("mat-snack-bar-container-enter",r._animationState==="visible")("mat-snack-bar-container-exit",r._animationState==="hidden")("mat-snack-bar-container-animations-enabled",!r._animationsDisabled)},features:[lt],decls:6,vars:3,consts:[["label",""],[1,"mdc-snackbar__surface","mat-mdc-snackbar-surface"],[1,"mat-mdc-snack-bar-label"],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(n,r){n&1&&(h(0,"div",1)(1,"div",2,0)(3,"div",3),G(4,Kj,0,0,"ng-template",4),g(),L(5,"div"),g()()),n&2&&(E(5),pt("aria-live",r._live)("role",r._role)("id",r._liveElementId))},dependencies:[bo],styles:[`@keyframes _mat-snack-bar-enter{from{transform:scale(0.8);opacity:0}to{transform:scale(1);opacity:1}}@keyframes _mat-snack-bar-exit{from{opacity:1}to{opacity:0}}.mat-mdc-snack-bar-container{display:flex;align-items:center;justify-content:center;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0);margin:8px}.mat-mdc-snack-bar-handset .mat-mdc-snack-bar-container{width:100vw}.mat-snack-bar-container-animations-enabled{opacity:0}.mat-snack-bar-container-animations-enabled.mat-snack-bar-fallback-visible{opacity:1}.mat-snack-bar-container-animations-enabled.mat-snack-bar-container-enter{animation:_mat-snack-bar-enter 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-snack-bar-container-animations-enabled.mat-snack-bar-container-exit{animation:_mat-snack-bar-exit 75ms cubic-bezier(0.4, 0, 1, 1) forwards}.mat-mdc-snackbar-surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12);display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;padding-left:0;padding-right:8px}[dir=rtl] .mat-mdc-snackbar-surface{padding-right:0;padding-left:8px}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{min-width:344px;max-width:672px}.mat-mdc-snack-bar-handset .mat-mdc-snackbar-surface{width:100%;min-width:0}@media(forced-colors: active){.mat-mdc-snackbar-surface{outline:solid 1px}}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{color:var(--mdc-snackbar-supporting-text-color, var(--mat-sys-inverse-on-surface));border-radius:var(--mdc-snackbar-container-shape, var(--mat-sys-corner-extra-small));background-color:var(--mdc-snackbar-container-color, var(--mat-sys-inverse-surface))}.mdc-snackbar__label{width:100%;flex-grow:1;box-sizing:border-box;margin:0;padding:14px 8px 14px 16px}[dir=rtl] .mdc-snackbar__label{padding-left:8px;padding-right:16px}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-family:var(--mdc-snackbar-supporting-text-font, var(--mat-sys-body-medium-font));font-size:var(--mdc-snackbar-supporting-text-size, var(--mat-sys-body-medium-size));font-weight:var(--mdc-snackbar-supporting-text-weight, var(--mat-sys-body-medium-weight));line-height:var(--mdc-snackbar-supporting-text-line-height, var(--mat-sys-body-medium-line-height))}.mat-mdc-snack-bar-actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled).mat-unthemed{color:var(--mat-snack-bar-button-color, var(--mat-sys-inverse-primary))}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){--mat-text-button-state-layer-color:currentColor;--mat-text-button-ripple-color:currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{opacity:.1}
`],encapsulation:2})}return e})();function t4(){return new Zc}var i4=new Ae("mat-snack-bar-default-options",{providedIn:"root",factory:t4}),J_=(()=>{class e{_overlay=O(Hn);_live=O(x_);_injector=O(Ct);_breakpointObserver=O(su);_parentSnackBar=O(e,{optional:!0,skipSelf:!0});_defaultConfig=O(i4);_snackBarRefAtThisLevel=null;simpleSnackBarComponent=SD;snackBarContainerComponent=e4;handsetCssClass="mat-mdc-snack-bar-handset";get _openedSnackBarRef(){let i=this._parentSnackBar;return i?i._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(i){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=i:this._snackBarRefAtThisLevel=i}constructor(){}openFromComponent(i,n){return this._attach(i,n)}openFromTemplate(i,n){return this._attach(i,n)}open(i,n="",r){let o=X(X({},this._defaultConfig),r);return o.data={message:i,action:n},o.announcementMessage===i&&(o.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,o)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(i,n){let r=n&&n.viewContainerRef&&n.viewContainerRef.injector,o=Ct.create({parent:r||this._injector,providers:[{provide:Zc,useValue:n}]}),a=new Br(this.snackBarContainerComponent,n.viewContainerRef,o),s=i.attach(a);return s.instance.snackBarConfig=n,s.instance}_attach(i,n){let r=X(X(X({},new Zc),this._defaultConfig),n),o=this._createOverlay(r),a=this._attachSnackBarContainer(o,r),s=new bu(a,o);if(i instanceof ya){let c=new vo(i,null,{$implicit:r.data,snackBarRef:s});s.instance=a.attachTemplatePortal(c)}else{let c=this._createInjector(r,s),l=new Br(i,void 0,c),d=a.attachComponentPortal(l);s.instance=d.instance}return this._breakpointObserver.observe(ED.HandsetPortrait).pipe(ai(o.detachments())).subscribe(c=>{o.overlayElement.classList.toggle(this.handsetCssClass,c.matches)}),r.announcementMessage&&a._onAnnounce.subscribe(()=>{this._live.announce(r.announcementMessage,r.politeness)}),this._animateSnackBar(s,r),this._openedSnackBarRef=s,this._openedSnackBarRef}_animateSnackBar(i,n){i.afterDismissed().subscribe(()=>{this._openedSnackBarRef==i&&(this._openedSnackBarRef=null),n.announcementMessage&&this._live.clear()}),n.duration&&n.duration>0&&i.afterOpened().subscribe(()=>i._dismissAfter(n.duration)),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{i.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):i.containerInstance.enter()}_createOverlay(i){let n=new va;n.direction=i.direction;let r=this._overlay.position().global(),o=i.direction==="rtl",a=i.horizontalPosition==="left"||i.horizontalPosition==="start"&&!o||i.horizontalPosition==="end"&&o,s=!a&&i.horizontalPosition!=="center";return a?r.left("0"):s?r.right("0"):r.centerHorizontally(),i.verticalPosition==="top"?r.top("0"):r.bottom("0"),n.positionStrategy=r,this._overlay.create(n)}_createInjector(i,n){let r=i&&i.viewContainerRef&&i.viewContainerRef.injector;return Ct.create({parent:r||this._injector,providers:[{provide:bu,useValue:n},{provide:CD,useValue:i.data}]})}static \u0275fac=function(n){return new(n||e)};static \u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var MD=(()=>{class e{static \u0275fac=function(n){return new(n||e)};static \u0275mod=ze({type:e});static \u0275inj=Ve({providers:[J_],imports:[ds,jr,Kc,st,SD,st]})}return e})();var DD=(()=>{class e{get vertical(){return this._vertical}set vertical(i){this._vertical=Lr(i)}_vertical=!1;get inset(){return this._inset}set inset(i){this._inset=Lr(i)}_inset=!1;static \u0275fac=function(n){return new(n||e)};static \u0275cmp=ye({type:e,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(n,r){n&2&&(pt("aria-orientation",r.vertical?"vertical":"horizontal"),pe("mat-divider-vertical",r.vertical)("mat-divider-horizontal",!r.vertical)("mat-divider-inset",r.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(n,r){},styles:[`.mat-divider{display:block;margin:0;border-top-style:solid;border-top-color:var(--mat-divider-color, var(--mat-sys-outline));border-top-width:var(--mat-divider-width, 1px)}.mat-divider.mat-divider-vertical{border-top:0;border-right-style:solid;border-right-color:var(--mat-divider-color, var(--mat-sys-outline));border-right-width:var(--mat-divider-width, 1px)}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}
`],encapsulation:2,changeDetection:0})}return e})(),AD=(()=>{class e{static \u0275fac=function(n){return new(n||e)};static \u0275mod=ze({type:e});static \u0275inj=Ve({imports:[st,st]})}return e})();function o4(e,t){if(e&1&&(h(0,"form",18)(1,"mat-form-field",19)(2,"mat-label"),S(3,"Nombre de la Organizaci\xF3n"),g(),L(4,"input",20)(5,"i",21),h(6,"mat-error"),S(7),g()(),h(8,"mat-form-field",19)(9,"mat-label"),S(10,"Direcci\xF3n"),g(),L(11,"input",22)(12,"i",23),g(),h(13,"mat-form-field",19)(14,"mat-label"),S(15,"Tel\xE9fono"),g(),L(16,"input",24)(17,"i",25),g()()),e&2){let i=j();I("formGroup",i.organizacionForm),E(7),le(i.getErrorMessage("nombre"))}}var Fh=class e{constructor(t,i,n){this.fb=t;this.dialogRef=i;this.data=n,this.organizacionForm=this.fb.group({nombre:["",[dt.required,dt.minLength(2)]],direccion:[""],telefono:[""]})}organizacionForm;data;onCancel(){this.dialogRef.close()}onConfirm(){if(this.data.tienePlan)this.dialogRef.close(!0);else if(this.organizacionForm.valid){let t=this.organizacionForm.value;this.dialogRef.close(t)}else this.organizacionForm.markAllAsTouched()}getErrorMessage(t){let i=this.organizacionForm.get(t);return i?.hasError("required")?"Este campo es obligatorio":i?.hasError("minlength")?"M\xEDnimo 2 caracteres":""}static \u0275fac=function(i){return new(i||e)(de(Po),de(us),de(Oh))};static \u0275cmp=ye({type:e,selectors:[["app-subscription-dialog"]],decls:29,vars:8,consts:[[1,"dialog-container"],["mat-dialog-title",""],[1,"fas",3,"ngClass"],[1,"dialog-content"],[1,"dialog-description"],["class","organization-form",3,"formGroup",4,"ngIf"],[1,"plan-summary"],[1,"plan-info"],[1,"plan-details"],[1,"plan-name"],[1,"plan-users"],[1,"plan-price"],[1,"price"],[1,"period"],["align","end"],["mat-button","",3,"click"],["mat-raised-button","","color","primary",3,"click","disabled"],[1,"fas","fa-check"],[1,"organization-form",3,"formGroup"],["appearance","outline",1,"full-width"],["matInput","","formControlName","nombre","placeholder","Mi Empresa S.A."],["matSuffix","",1,"fas","fa-building"],["matInput","","formControlName","direccion","placeholder","Direcci\xF3n de la empresa"],["matSuffix","",1,"fas","fa-map-marker-alt"],["matInput","","formControlName","telefono","placeholder","+1 234 567 8900"],["matSuffix","",1,"fas","fa-phone"]],template:function(i,n){i&1&&(h(0,"div",0)(1,"h2",1),L(2,"i",2),S(3),g(),h(4,"mat-dialog-content")(5,"div",3)(6,"p",4),S(7),g(),G(8,o4,18,2,"form",5),h(9,"div",6)(10,"h4"),S(11,"Plan Seleccionado:"),g(),h(12,"div",7)(13,"div",8)(14,"span",9),S(15),g(),h(16,"span",10),S(17),g()(),h(18,"div",11)(19,"span",12),S(20),g(),h(21,"span",13),S(22,"/mes"),g()()()()()(),h(23,"mat-dialog-actions",14)(24,"button",15),K("click",function(){return n.onCancel()}),S(25," Cancelar "),g(),h(26,"button",16),K("click",function(){return n.onConfirm()}),L(27,"i",17),S(28," Confirmar "),g()()()),i&2&&(E(2),I("ngClass",n.data.tienePlan?"fa-exchange-alt":"fa-building"),E(),Pe(" ",n.data.tienePlan?"Cambiar Plan":"Crear Organizaci\xF3n"," "),E(4),Pe(" ",n.data.tienePlan?"\xBFEst\xE1s seguro de que quieres cambiar al plan "+n.data.plan.nombre+"?":"Para suscribirte, necesitamos crear tu organizaci\xF3n primero."," "),E(),I("ngIf",!n.data.tienePlan),E(7),le(n.data.plan.nombre),E(2),Pe("Hasta ",n.data.plan.maximo_usuarios," usuarios"),E(3),Pe("$",n.data.plan.precio,""),E(6),I("disabled",!n.data.tienePlan&&n.organizacionForm.invalid))},dependencies:[zt,Yi,pi,ko,Ao,fr,Mo,Do,hr,An,Gr,_u,Y_,X_,K_,Kc,Yc,ba,N_,uu,T_,F_,Th,bD,Ih],styles:[".dialog-container[_ngcontent-%COMP%]{min-width:400px}.dialog-container[_ngcontent-%COMP%]   h2[mat-dialog-title][_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-bottom:1rem;color:#1976d2}.dialog-container[_ngcontent-%COMP%]   h2[mat-dialog-title][_ngcontent-%COMP%]   i.fas[_ngcontent-%COMP%]{font-size:1.5rem;margin-right:.5rem}.dialog-container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .dialog-description[_ngcontent-%COMP%]{margin-bottom:1.5rem;color:#666;line-height:1.5}.dialog-container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .organization-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;margin-bottom:1.5rem}.dialog-container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .organization-form[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{width:100%}.dialog-container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .organization-form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]   i.fas[matSuffix][_ngcontent-%COMP%]{color:#1976d2;font-size:1.1rem}.dialog-container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .plan-summary[_ngcontent-%COMP%]{background-color:#f5f5f5;padding:1rem;border-radius:8px;border-left:4px solid #1976d2}.dialog-container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .plan-summary[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 .75rem;color:#333;font-weight:600}.dialog-container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .plan-summary[_ngcontent-%COMP%]   .plan-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.dialog-container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .plan-summary[_ngcontent-%COMP%]   .plan-info[_ngcontent-%COMP%]   .plan-details[_ngcontent-%COMP%]{display:flex;flex-direction:column}.dialog-container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .plan-summary[_ngcontent-%COMP%]   .plan-info[_ngcontent-%COMP%]   .plan-details[_ngcontent-%COMP%]   .plan-name[_ngcontent-%COMP%]{font-weight:600;font-size:1.1rem;color:#1976d2}.dialog-container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .plan-summary[_ngcontent-%COMP%]   .plan-info[_ngcontent-%COMP%]   .plan-details[_ngcontent-%COMP%]   .plan-users[_ngcontent-%COMP%]{font-size:.9rem;color:#666}.dialog-container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .plan-summary[_ngcontent-%COMP%]   .plan-info[_ngcontent-%COMP%]   .plan-price[_ngcontent-%COMP%]{text-align:right}.dialog-container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .plan-summary[_ngcontent-%COMP%]   .plan-info[_ngcontent-%COMP%]   .plan-price[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#1976d2}.dialog-container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .plan-summary[_ngcontent-%COMP%]   .plan-info[_ngcontent-%COMP%]   .plan-price[_ngcontent-%COMP%]   .period[_ngcontent-%COMP%]{font-size:.9rem;color:#666}.dialog-container[_ngcontent-%COMP%]   mat-dialog-actions[_ngcontent-%COMP%]{padding:1rem 0 0;gap:.5rem}.dialog-container[_ngcontent-%COMP%]   mat-dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:100px}.dialog-container[_ngcontent-%COMP%]   mat-dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i.fas[_ngcontent-%COMP%]{margin-right:.25rem;font-size:1.1rem}@media (max-width: 480px){.dialog-container[_ngcontent-%COMP%]{min-width:300px}.dialog-container[_ngcontent-%COMP%]   .plan-info[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.5rem}.dialog-container[_ngcontent-%COMP%]   .plan-info[_ngcontent-%COMP%]   .plan-price[_ngcontent-%COMP%]{text-align:left}}"]})};var Nh=class e{constructor(t){this.http=t}apiUrl=Dn;obtenerPlanActual(){return this.http.get(`${this.apiUrl}/usuarios/plan/`,{}).pipe(ms(this.handleError))}suscribirUsuario(t){return this.http.post(`${this.apiUrl}/usuarios/suscribir/`,t,{}).pipe(ms(this.handleError))}handleError(t){return console.error("Error en el servicio:",t),nb(()=>t)}static \u0275fac=function(i){return new(i||e)(wn(Ki))};static \u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})};function s4(e,t){e&1&&(h(0,"div",6),L(1,"mat-spinner",7),h(2,"p",8),S(3,"Cargando planes..."),g()())}function c4(e,t){if(e&1&&(h(0,"mat-card",12)(1,"mat-card-header")(2,"div",13),L(3,"i",14),g(),h(4,"mat-card-title"),S(5,"Tu Plan Actual"),g(),h(6,"mat-card-subtitle"),S(7),g(),h(8,"div",15)(9,"mat-chip-set")(10,"mat-chip",16),L(11,"i",17),S(12," Activo "),g()()()(),h(13,"mat-card-content")(14,"div",18)(15,"div",19),L(16,"i",20),h(17,"span"),S(18),g()(),h(19,"div",19),L(20,"i",21),h(21,"span"),S(22,"Soporte incluido"),g()(),h(23,"div",19),L(24,"i",22),h(25,"span"),S(26,"Todas las funcionalidades"),g()()()()()),e&2){let i=j(2);E(3),I("ngClass","fa-"+i.getPlanIcon(i.planActual.nombre)),E(4),fb(" Plan ",i.planActual.nombre," - $",i.planActual.precio,"/mes "),E(11),Pe("Hasta ",i.planActual.maximo_usuarios," usuarios")}}function l4(e,t){e&1&&(h(0,"div",34)(1,"mat-chip",16),S(2,"M\xE1s Popular"),g()())}function d4(e,t){if(e&1&&(h(0,"li",19),L(1,"i",35),h(2,"span"),S(3),g()()),e&2){let i=t.$implicit;E(3),le(i)}}function u4(e,t){if(e&1){let i=Le();h(0,"mat-card",23),G(1,l4,3,0,"div",24),h(2,"mat-card-header",25)(3,"div",26),L(4,"i",14),g(),h(5,"mat-card-title"),S(6),g(),h(7,"mat-card-subtitle"),S(8),g()(),h(9,"mat-card-content")(10,"div",27)(11,"span",28),S(12),g(),h(13,"span",29),S(14,"/mes"),g()(),h(15,"div",30),L(16,"i",20),h(17,"span"),S(18),g()(),L(19,"mat-divider"),h(20,"ul",31),G(21,d4,4,1,"li",32),g()(),h(22,"mat-card-actions")(23,"button",33),K("click",function(){let r=ne(i).$implicit,o=j(2);return re(o.handleSuscribirse(r))}),S(24),g()()()}if(e&2){let i=t.$implicit,n=j(2);pe("popular",i.popular)("current",(n.planActual==null?null:n.planActual.id)===i.id),E(),I("ngIf",i.popular),E(2),pe("popular",i.popular),E(),I("ngClass","fa-"+n.getPlanIcon(i.nombre)),E(2),le(i.nombre),E(2),le(i.descripcion),E(4),Pe("$",i.precio,""),E(6),Pe("Hasta ",i.maximo_usuarios," usuarios"),E(3),I("ngForOf",i.caracteristicas),E(2),I("color",(n.planActual==null?null:n.planActual.id)===i.id?"accent":i.popular?"primary":"basic")("disabled",n.isButtonDisabled(i)),E(),Pe(" ",n.getButtonText(i)," ")}}function p4(e,t){if(e&1&&(h(0,"div"),G(1,c4,27,4,"mat-card",9),h(2,"div",10),G(3,u4,25,16,"mat-card",11),g()()),e&2){let i=j();E(),I("ngIf",i.planActual),E(2),I("ngForOf",i.planesDisponibles)}}var Lh=class e{constructor(t,i,n){this.subscriptionService=t;this.dialog=i;this.snackBar=n}planActual=null;loading=!0;planesDisponibles=[{id:1,nombre:"B\xC1SICO",descripcion:"Perfecto para equipos peque\xF1os que est\xE1n comenzando",precio:"19.00",maximo_usuarios:3,caracteristicas:["Hasta 3 usuarios","10 GB de almacenamiento","Hasta 500 documentos mensuales","Historial de 30 d\xEDas"]},{id:2,nombre:"PROFESIONAL",descripcion:"Ideal para equipos en crecimiento con necesidades avanzadas",precio:"59.00",maximo_usuarios:15,popular:!0,caracteristicas:["Hasta 15 usuarios","100 GB de almacenamiento","Hasta 5000 documentos mensuales","Lector OCR","Historial ilimitado","Reportes personalizados"]},{id:3,nombre:"EMPRESARIAL",descripcion:"Para organizaciones grandes con requisitos empresariales",precio:"149.00",maximo_usuarios:50,caracteristicas:["Hasta 50 usuarios","500 GB de almacenamiento","Documentos mensuales ilimitados","Todas las funcionalidades","Gestor de cuenta dedicado","Personalizaci\xF3n completa"]}];ngOnInit(){this.obtenerPlanActual()}obtenerPlanActual(){this.subscriptionService.obtenerPlanActual().subscribe({next:t=>{this.planActual=t,this.loading=!1},error:t=>{t.status===400||t.status===404?this.planActual=null:this.mostrarError("Error al cargar el plan actual"),this.loading=!1}})}getPlanIcon(t){switch(t.toUpperCase()){case"B\xC1SICO":return"file-alt";case"PROFESIONAL":return"bolt";case"EMPRESARIAL":return"crown";default:return"shield-alt"}}getButtonText(t){return this.planActual?this.planActual.id===t.id?"Plan Actual":Number.parseFloat(t.precio)>Number.parseFloat(this.planActual.precio)?"Mejorar Plan":"Cambiar Plan":"Suscribirse"}isButtonDisabled(t){return this.planActual?.id===t.id}handleSuscribirse(t){this.dialog.open(Fh,{width:"500px",data:{plan:t,planActual:this.planActual,tienePlan:!!this.planActual}}).afterClosed().subscribe(n=>{n&&this.procesarSuscripcion(t,n)})}procesarSuscripcion(t,i){let n={plan_id:t.id};!this.planActual&&i&&(n.organizacion=i),this.subscriptionService.suscribirUsuario(n).subscribe({next:()=>{this.mostrarExito(`\xA1Te has suscrito al plan ${t.nombre} correctamente!`),this.obtenerPlanActual()},error:r=>{let o=r.error?.error||"No se pudo completar la suscripci\xF3n";this.mostrarError(o)}})}mostrarExito(t){this.snackBar.open(t,"Cerrar",{duration:5e3,panelClass:["success-snackbar"]})}mostrarError(t){this.snackBar.open(t,"Cerrar",{duration:5e3,panelClass:["error-snackbar"]})}static \u0275fac=function(i){return new(i||e)(de(Nh),de(vu),de(J_))};static \u0275cmp=ye({type:e,selectors:[["app-subscription-plans"]],decls:8,vars:2,consts:[[1,"subscription-container"],[1,"header-section"],[1,"main-title"],[1,"main-subtitle"],["class","loading-container",4,"ngIf"],[4,"ngIf"],[1,"loading-container"],["diameter","50"],[1,"loading-text"],["class","current-plan-card",4,"ngIf"],[1,"plans-grid"],["class","plan-card",3,"popular","current",4,"ngFor","ngForOf"],[1,"current-plan-card"],["mat-card-avatar","",1,"plan-avatar","current"],[1,"fas",3,"ngClass"],[1,"header-actions"],["color","primary","selected",""],["matChipAvatar","",1,"fas","fa-star"],[1,"current-plan-features"],[1,"feature-item"],[1,"fas","fa-users"],[1,"fas","fa-shield-alt"],[1,"fas","fa-check-circle"],[1,"plan-card"],["class","popular-badge",4,"ngIf"],[1,"plan-header"],["mat-card-avatar","",1,"plan-avatar"],[1,"price-section"],[1,"price"],[1,"period"],[1,"users-info"],[1,"features-list"],["class","feature-item",4,"ngFor","ngForOf"],["mat-raised-button","",1,"subscribe-button",3,"click","color","disabled"],[1,"popular-badge"],[1,"fas","fa-check","check-icon"]],template:function(i,n){i&1&&(h(0,"div",0)(1,"div",1)(2,"h1",2),S(3,"Planes de Suscripci\xF3n"),g(),h(4,"p",3),S(5," Elige el plan que mejor se adapte a las necesidades de tu organizaci\xF3n "),g()(),G(6,s4,4,0,"div",4)(7,p4,4,2,"div",5),g()),i&2&&(E(6),I("ngIf",n.loading),E(),I("ngIf",!n.loading))},dependencies:[zt,Yi,Mi,pi,ko,hr,gM,lM,mM,hM,uM,fM,pM,dM,Kc,Yc,HM,B_,VM,zM,_u,ba,Th,Ih,wD,xD,MD,AD,DD],styles:[".subscription-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:2rem}.subscription-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]{text-align:center;margin-bottom:3rem}.subscription-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .main-title[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;margin-bottom:1rem;color:#1976d2}.subscription-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .main-subtitle[_ngcontent-%COMP%]{font-size:1.2rem;color:#666;max-width:600px;margin:0 auto}.subscription-container[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:3rem}.subscription-container[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   .loading-text[_ngcontent-%COMP%]{margin-top:1rem;color:#666}.subscription-container[_ngcontent-%COMP%]   .current-plan-card[_ngcontent-%COMP%]{margin-bottom:2rem;border:2px solid #1976d2;background:linear-gradient(135deg,#e3f2fd,#f3e5f5)}.subscription-container[_ngcontent-%COMP%]   .current-plan-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{display:flex;align-items:center;position:relative}.subscription-container[_ngcontent-%COMP%]   .current-plan-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{margin-left:auto}.subscription-container[_ngcontent-%COMP%]   .current-plan-card[_ngcontent-%COMP%]   .plan-avatar.current[_ngcontent-%COMP%]{background-color:#1976d2;color:#fff}.subscription-container[_ngcontent-%COMP%]   .current-plan-card[_ngcontent-%COMP%]   .current-plan-features[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem;margin-top:1rem}.subscription-container[_ngcontent-%COMP%]   .current-plan-card[_ngcontent-%COMP%]   .current-plan-features[_ngcontent-%COMP%]   .feature-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.subscription-container[_ngcontent-%COMP%]   .current-plan-card[_ngcontent-%COMP%]   .current-plan-features[_ngcontent-%COMP%]   .feature-item[_ngcontent-%COMP%]   i.fas[_ngcontent-%COMP%]{color:#1976d2;font-size:1.2rem;width:20px;text-align:center}.subscription-container[_ngcontent-%COMP%]   .plans-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(350px,1fr));gap:2rem;margin-top:2rem}.subscription-container[_ngcontent-%COMP%]   .plan-card[_ngcontent-%COMP%]{position:relative;transition:all .3s ease;height:fit-content}.subscription-container[_ngcontent-%COMP%]   .plan-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 25px #00000026}.subscription-container[_ngcontent-%COMP%]   .plan-card.popular[_ngcontent-%COMP%]{border:2px solid #1976d2;transform:scale(1.05);box-shadow:0 8px 25px #1976d233}.subscription-container[_ngcontent-%COMP%]   .plan-card.current[_ngcontent-%COMP%]{border:2px solid #4caf50;background:linear-gradient(135deg,#e8f5e8,#f1f8e9)}.subscription-container[_ngcontent-%COMP%]   .plan-card[_ngcontent-%COMP%]   .popular-badge[_ngcontent-%COMP%]{position:absolute;top:-12px;left:50%;transform:translate(-50%);z-index:1}.subscription-container[_ngcontent-%COMP%]   .plan-card[_ngcontent-%COMP%]   .plan-header[_ngcontent-%COMP%]{text-align:center;padding-bottom:1rem}.subscription-container[_ngcontent-%COMP%]   .plan-card[_ngcontent-%COMP%]   .plan-header[_ngcontent-%COMP%]   .plan-avatar[_ngcontent-%COMP%]{background-color:#f5f5f5;color:#666;margin:0 auto 1rem}.subscription-container[_ngcontent-%COMP%]   .plan-card[_ngcontent-%COMP%]   .plan-header[_ngcontent-%COMP%]   .plan-avatar.popular[_ngcontent-%COMP%]{background-color:#1976d2;color:#fff}.subscription-container[_ngcontent-%COMP%]   .plan-card[_ngcontent-%COMP%]   .plan-header[_ngcontent-%COMP%]   .plan-avatar[_ngcontent-%COMP%]   i.fas[_ngcontent-%COMP%]{font-size:1.5rem}.subscription-container[_ngcontent-%COMP%]   .plan-card[_ngcontent-%COMP%]   .plan-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;margin-bottom:.5rem}.subscription-container[_ngcontent-%COMP%]   .plan-card[_ngcontent-%COMP%]   .plan-header[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%]{font-size:1rem;line-height:1.4}.subscription-container[_ngcontent-%COMP%]   .plan-card[_ngcontent-%COMP%]   .price-section[_ngcontent-%COMP%]{text-align:center;margin:1.5rem 0}.subscription-container[_ngcontent-%COMP%]   .plan-card[_ngcontent-%COMP%]   .price-section[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;color:#1976d2}.subscription-container[_ngcontent-%COMP%]   .plan-card[_ngcontent-%COMP%]   .price-section[_ngcontent-%COMP%]   .period[_ngcontent-%COMP%]{font-size:1rem;color:#666;margin-left:.25rem}.subscription-container[_ngcontent-%COMP%]   .plan-card[_ngcontent-%COMP%]   .users-info[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.5rem;padding:.75rem;background-color:#f5f5f5;border-radius:8px;margin-bottom:1rem;font-weight:500}.subscription-container[_ngcontent-%COMP%]   .plan-card[_ngcontent-%COMP%]   .users-info[_ngcontent-%COMP%]   i.fas[_ngcontent-%COMP%]{color:#1976d2;font-size:1.2rem}.subscription-container[_ngcontent-%COMP%]   .plan-card[_ngcontent-%COMP%]   .features-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:1rem 0}.subscription-container[_ngcontent-%COMP%]   .plan-card[_ngcontent-%COMP%]   .features-list[_ngcontent-%COMP%]   .feature-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:.5rem;margin-bottom:.75rem}.subscription-container[_ngcontent-%COMP%]   .plan-card[_ngcontent-%COMP%]   .features-list[_ngcontent-%COMP%]   .feature-item[_ngcontent-%COMP%]   .check-icon[_ngcontent-%COMP%]{color:#4caf50;font-size:1.2rem;margin-top:.1rem;flex-shrink:0}.subscription-container[_ngcontent-%COMP%]   .plan-card[_ngcontent-%COMP%]   .features-list[_ngcontent-%COMP%]   .feature-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.95rem;line-height:1.4}.subscription-container[_ngcontent-%COMP%]   .plan-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]{padding:1rem}.subscription-container[_ngcontent-%COMP%]   .plan-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]   .subscribe-button[_ngcontent-%COMP%]{width:100%;padding:.75rem;font-weight:600;font-size:1rem}@media (max-width: 768px){.subscription-container[_ngcontent-%COMP%]{padding:1rem}.subscription-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .main-title[_ngcontent-%COMP%]{font-size:2rem}.subscription-container[_ngcontent-%COMP%]   .plans-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1.5rem}.subscription-container[_ngcontent-%COMP%]   .plan-card.popular[_ngcontent-%COMP%]{transform:none}.subscription-container[_ngcontent-%COMP%]   .current-plan-features[_ngcontent-%COMP%]{grid-template-columns:1fr}}:is()   .success-snackbar[_ngcontent-%COMP%]{background-color:#4caf50!important;color:#fff!important}:is()   .error-snackbar[_ngcontent-%COMP%]{background-color:#f44336!important;color:#fff!important}i.fas[_ngcontent-%COMP%]{font-size:1.2rem}i.fas.check-icon[_ngcontent-%COMP%]{color:#4caf50;font-size:1.2rem;margin-top:.1rem;flex-shrink:0}.feature-item[_ngcontent-%COMP%]   i.fas[_ngcontent-%COMP%]{color:#1976d2;font-size:1.2rem;width:20px;text-align:center}"]})};var Bh=class e{constructor(t){this.http=t}FORMULARIOS_URL=`${Dn}/formularios`;getFormularios(){return this.http.get(`${this.FORMULARIOS_URL}/formularios/`)}getFormularioById(t){return this.http.get(`${this.FORMULARIOS_URL}/formularios/${t}/`)}createFormulario(t){return this.http.post(`${this.FORMULARIOS_URL}/formularios/`,t)}updateFormulario(t,i){return this.http.put(`${this.FORMULARIOS_URL}/formularios/${t}/`,i)}deleteFormulario(t){return this.http.delete(`${this.FORMULARIOS_URL}/formularios/${t}/`)}static \u0275fac=function(i){return new(i||e)(wn(Ki))};static \u0275prov=Ee({token:e,factory:e.\u0275fac,providedIn:"root"})};function f4(e,t){if(e&1&&(h(0,"tr")(1,"td"),S(2),g(),h(3,"td"),S(4),g(),h(5,"td"),S(6),g(),h(7,"td"),S(8),g(),h(9,"td"),S(10),g(),h(11,"td"),S(12),g(),h(13,"td"),L(14,"button"),g()()),e&2){let i=t.$implicit;E(2),le(i.id),E(2),le(i.nombre),E(2),le(i.descripcion),E(2),le(i.fecha_creacion),E(2),le(i.tipo_documento),E(2),le(i.creado_por)}}var jh=class e{constructor(t){this.formulariosService=t}formularios=[];ngOnInit(){this.formulariosService.getFormularios().subscribe(t=>{this.formularios=t,console.log(this.formularios)})}static \u0275fac=function(i){return new(i||e)(de(Bh))};static \u0275cmp=ye({type:e,selectors:[["app-formularios"]],decls:19,vars:1,consts:[["border","1"],[4,"ngFor","ngForOf"]],template:function(i,n){i&1&&(h(0,"table",0)(1,"thead")(2,"tr")(3,"th"),S(4,"ID"),g(),h(5,"th"),S(6,"Nombre"),g(),h(7,"th"),S(8,"Descripci\xF3n"),g(),h(9,"th"),S(10,"Fecha Creaci\xF3n"),g(),h(11,"th"),S(12,"Tipo Documento"),g(),h(13,"th"),S(14,"Creado Por"),g(),h(15,"th"),S(16,"Acciones"),g()()(),h(17,"tbody"),G(18,f4,15,6,"tr",1),g()()),i&2&&(E(18),I("ngForOf",n.formularios))},dependencies:[zt,Mi],encapsulation:2})};var Vh=class e{static \u0275fac=function(i){return new(i||e)};static \u0275cmp=ye({type:e,selectors:[["app-campos-formulario"]],decls:2,vars:0,template:function(i,n){i&1&&(h(0,"p"),S(1,"campos-formulario works!"),g())},encapsulation:2})};var PD=[{path:"",component:tl,canActivate:[uy],children:[{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"dashboard",component:ml},{path:"documents",component:pl},{path:"workflows",component:fl},{path:"workflows/nuevo",component:zc},{path:"workflows/editar/:id",component:zc},{path:"workflows/ver/:id",component:tu},{path:"planes",component:Lh},{path:"formularios",component:jh},{path:"campos-formulario/:id",component:Vh}]},{path:"login",component:ul},{path:"**",redirectTo:"login"}];function kD(e,t){let i=O(hs),n=null;return _s(i)&&(n=localStorage.getItem("token")),n&&(e=e.clone({setHeaders:{Authorization:`Bearer ${n}`}})),t(e)}var RD={providers:[vb({eventCoalescing:!0}),Db(PD),Sb(Cb()),xb(Eb(),wb([kD]))]};var OD=[{path:"**",renderMode:kb.Prerender}];var h4={providers:[Ab(),Rb(OD)]},TD=_b(RD,h4);var g4=()=>yb(Nu,TD),v4=g4;export{v4 as default,jD as \u0275destroyAngularServerApp,LD as \u0275extractRoutesAndCreateRouteTree,BD as \u0275getOrCreateAngularServerApp,ND as \u0275resetCompiledComponents};
